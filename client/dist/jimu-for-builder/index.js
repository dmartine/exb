define(["jimu-core/react","jimu-core","jimu-ui","jimu-core/react-dom","jimu-layouts/common"],function(e,t,n,r,o){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=365)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactCSS=t.loop=t.handleActive=t.handleHover=t.hover=void 0;var r=u(n(170)),o=u(n(243)),i=u(n(268)),a=u(n(269)),s=u(n(270)),l=u(n(271));function u(e){return e&&e.__esModule?e:{default:e}}t.hover=a.default,t.handleHover=a.default,t.handleActive=s.default,t.loop=l.default;var c=t.ReactCSS=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var s=(0,r.default)(n),l=(0,o.default)(e,s);return(0,i.default)(l)};t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fill:"Fill",image:"Image",color:"Color",browse:"Browse",clearImage:"Clear image",position:"Position",fit:"Fit",center:"Center",tile:"Tile",stretch:"Stretch",dashed:"Dashed",dotted:"Dotted",double:"Double",solid:"Solid",offsetX:"Offset X",offsetY:"Offset Y",blurRadius:"Blur radius",spreadRadius:"Spread radius",T:"Top",R:"Right",B:"Bottom",L:"Left",TL:"Top left",TR:"Top right",BR:"Bottom right",BL:"Bottom left",lock:"Lock",unlock:"Unlock",changeUnit:"Change unit",align:"Align",left:"Left",right:"Right",down:"Down",justify:"Justify",font:"Font",fontSize:"Font size",convert:"Convert",convertToRem:"Convert to rem",bold:"Bold",italic:"Italic",underline:"Underline",strike:"Strike",background:"Background",ordered:"Ordered",bullet:"Bullet",link:"Link",linkTo:"Link to",letterSpacing:"Letter spacing",lineSpacing:"Line spacing",clearAllFormats:"Clear all formats",customTheme:"Customize",waitForThemeList:"Getting theme list...",themeCustomizationComing:"Theme customization is coming soon.",useSharedTheme:"Use Shared Theme",reset:"Reset",saveAs:"Save as",variableTypography:"Typography",variableBg:"Background",variableColor:"Text",variableFontFamilyBase:"Font family",variableFontSizeBase:"Base font size",variableHeader:"Header",variableBody:"Body",variableLink:"Link",variableButton:"Button",connectToData:"Connect to data",setDataSource:"Set data",creatingDataSourceFailed:"Creating data failed!",added:"Added",outputs:"Outputs",noAddedDataSourceCanBeUsed:"No added data can be used.",noSelectedType:"No selected type",type:"Type",back:"Back",noWidgetOutputCanBeUsed:"No widget output can be used.",featureLayerType:"Feature layer",featureLayerViewType:"Feature layer view",hubAnnotationsType:"Hub annotations",hubEventsType:"Hub events",mapType:"Map",mapViewType:"Map view",sceneViewType:"Scene view",simpleLocalType:"Simple local",webMapType:"Web map",webSceneType:"Web scene",csvType:"CSV",all:"All",chooseData:"Choose data",addData:"Add data",serviceType:"Service type",url:"URL",add:"Add",webMap:"Web Map",webScene:"Web Scene",featureLayer:"Feature Layer",appData:"App Data",done:"Done",hub:"Hub",unSupported:"Unsupported",selected:"Selected",setAnImage:"Set image",localImage:"Local",urlImage:"URL",uploadImage:"Upload",nextStepForImage:"Next",urlIsHereForImage:"Type URL here...",uploadImageError:"Error",imageTypeError:"You have specified an image type that is not supported. Please use one of these types: PNG, GIF, JPG, JPEG, BMP, SVG or SVGZ.",sort:"Sort",search:"Search",modified:"Modified",title:"Title",numViews:"View numbers",myContent:"My content",myOrganization:"My organization",public:"Public",noItemFoundWarning:"We couldn't find what you were looking for. Please try another one.",openIn:"Open in",appWindow:"App window",topWindow:"Top window",newWindow:"New window",webAddress:"Web address",none:"None",page:"Page",view:"View",chooseAPage:"Choose a page",setLink:"Set link",setLinkForTitle:"Set link for {title}",details:"Details",description:"Description",commonModalOk:"Ok",commonModalCancel:"Cancel",attribute:"Attribute",statistics:"Statistics",expression:"Expression",data:"Data",operator:"Operator",field:"Field",name:"Name",insert:"Insert",expressionBuilder:"Expression builder",fields:"Fields",functions:"Functions",invalidExpression:"Invalid expression",static:"Static",pleaseSetDataSource:"Please set data",chooseDsForFilter:"Choose a data to filter",filterNone:"none",filterDataRelationShip:"Data relationship",filterMessageField:"Message field",chooseDsForSelect:"Choose a data to select",selectNone:"none",selectDataRelationShip:"Data relationship",selectMessageField:"Message field",direction:"Direction",style:"Style",default:"Default",tabs:"Tabs",pills:"Pills",select:"Selected",regular:"Regular",views:"Views",auto:"Auto",custom:"Custom",viewsSelected:"{viewNumber} views selected"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(272);Object.defineProperty(t,"Alpha",{enumerable:!0,get:function(){return p(r).default}});var o=n(105);Object.defineProperty(t,"Checkboard",{enumerable:!0,get:function(){return p(o).default}});var i=n(275);Object.defineProperty(t,"EditableInput",{enumerable:!0,get:function(){return p(i).default}});var a=n(276);Object.defineProperty(t,"Hue",{enumerable:!0,get:function(){return p(a).default}});var s=n(278);Object.defineProperty(t,"Raised",{enumerable:!0,get:function(){return p(s).default}});var l=n(279);Object.defineProperty(t,"Saturation",{enumerable:!0,get:function(){return p(l).default}});var u=n(107);Object.defineProperty(t,"ColorWrap",{enumerable:!0,get:function(){return p(u).default}});var c=n(287);function p(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"Swatch",{enumerable:!0,get:function(){return p(c).default}})},,function(e,t,n){e.exports=n(66)()},function(e,t,n){e.exports=n(167)()},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var r=n(76),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.red=void 0;var r=i(n(284)),o=i(n(286));function i(e){return e&&e.__esModule?e:{default:e}}t.default={simpleCheckForValidColor:function(e){var t=0,n=0;return(0,r.default)(["r","g","b","a","h","s","l","v"],function(r){if(e[r]&&(t+=1,isNaN(e[r])||(n+=1),"s"===r||"l"===r)){/^\d+%$/.test(e[r])&&(n+=1)}}),t===n&&e},toState:function(e,t){var n=e.hex?(0,o.default)(e.hex):(0,o.default)(e),r=n.toHsl(),i=n.toHsv(),a=n.toRgb(),s=n.toHex();return 0===r.s&&(r.h=t||0,i.h=t||0),{hsl:r,hex:"000000"===s&&0===a.a?"transparent":"#"+s,rgb:a,hsv:i,oldHue:e.h||t||r.h,source:e.source}},isValidHex:function(e){var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&(0,o.default)(e).isValid()},getContrastingColor:function(e){if(!e)return"#fff";var t=this.toState(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"}};t.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.getInstance=function(){return t._instance||(t._instance=new t,window._appDataSourceManager=t._instance),t._instance},t.prototype.getAppConfig=function(){return o.getAppStore().getState().appStateInBuilder&&o.getAppStore().getState().appStateInBuilder.appConfig},t}(o.DataSourceManager);t.default=i},function(e,t,n){var r=n(86),o=n(183),i=n(241),a=n(9);e.exports=function(e,t){return(a(e)?r:i)(e,o(t,3))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(14);function i(e,t){void 0===e&&(e=r.Immutable([])),void 0===t&&(t=r.Immutable([]));var n=r.Immutable([]),o=r.Immutable({}),i=r.Immutable(e.concat(t)),a={};return i.forEach(function(e){a[e.dataSourceId]||(a[e.dataSourceId]=r.Immutable(i.asMutable({deep:!0}).filter(function(t){return e.dataSourceId===t.dataSourceId})))}),Object.keys(a).forEach(function(e){o=r.Immutable({}),a[e].forEach(function(e){o=function(e,t){if(!e||!t)return e||t;if(e.dataSourceId&&t.dataSourceId&&e.dataSourceId!==t.dataSourceId)return console.warn("can not merge data sources with different id"),null;if(!e.dataSourceId&&!t.dataSourceId)return e;if(e.fields&&t.fields){var n=Array.from(new Set(e.fields.concat(t.fields)));return e.merge(t).set("fields",n)}return e.merge(t)}(o,e)}),n=r.Immutable(n.concat(o))}),n}function a(e){return e.type===r.ExpressionPartType.Function&&(!e.parts||e.parts.every(function(e){return function(e){if(e&&e.type===r.ExpressionPartType.Number)return!0;if(e&&e.type===r.ExpressionPartType.Field)return u(e.dataSourceId,e.jimuFieldName);return!1}(e)}))}function s(){return window&&window.jimuConfig&&window.jimuConfig.isBuilder?o.default.getInstance():r.DataSourceManager.getInstance()}function l(e,t){if(!e||!t)return!1;var n=s().getDataSource(e),r=n&&n.getSchema&&n.getSchema(),o=r&&r.fields;return!!o&&!!o[t]}function u(e,t){if(!e||!t)return!1;var n=s().getDataSource(e),o=n&&n.getSchema&&n.getSchema(),i=o&&o.fields;return!!i&&!(!i[t]||i[t].type!==r.JimuFieldType.Number)}t.getUseDataSourceFromExpParts=function e(t){if(!t)return r.Immutable([]);var n={},o=r.Immutable([]);r.Immutable([]);return t.filter(function(e){return!!e}).forEach(function(t){t.dataSourceId&&(n[t.dataSourceId]||(n[t.dataSourceId]=r.Immutable({dataSourceId:t.dataSourceId,fields:r.Immutable([])})),t.jimuFieldName&&(n[t.dataSourceId].fields&&n[t.dataSourceId].fields.every(function(e){return e!==t.jimuFieldName})?n[t.dataSourceId]=n[t.dataSourceId].set("fields",n[t.dataSourceId].fields.concat(t.jimuFieldName)):n[t.dataSourceId].fields||(n[t.dataSourceId]=n[t.dataSourceId].set("fields",r.Immutable([t.jimuFieldName]))))),t.type===r.ExpressionPartType.Function&&(o=i(o,e(t.parts)))}),i(r.Immutable(Object.keys(n).map(function(e){return n[e]})),o)},t.mergeUseDataSources=i,t.getWhetherExpressionValid=function(e){if(!e||!e.parts)return!0;var t=e.parts.filter(function(e){return!!e}),n=t.some(function(e){return e.type===r.ExpressionPartType.Unknown});if(n)return!1;var o=t.filter(function(e){return e.type===r.ExpressionPartType.Operator&&"("===e.exp}).length===t.filter(function(e){return e.type===r.ExpressionPartType.Operator&&")"===e.exp}).length;if(!o)return!1;for(var i=t.filter(function(e){return!(e.type===r.ExpressionPartType.Operator&&("("===e.exp||")"===e.exp||/^\s*$/.test(e.exp)))}),s=!0,u=0;u<i.length;u++)if((u%2==0||u===i.length-1)&&i[u].type===r.ExpressionPartType.Operator||u%2==1&&i[u].type!==r.ExpressionPartType.Operator){s=!1;break}if(!s)return!1;var c=!0;for(u=0;u<t.length;u++)if(t[u].type===r.ExpressionPartType.Function&&!a(t[u])||t[u].type===r.ExpressionPartType.Field&&!l(t[u].dataSourceId,t[u].jimuFieldName)){c=!1;break}return!n&&o&&s&&c},t.getDsManager=s,t.getWhetherFieldInDs=l,t.getWhetherFieldIsNumber=u,t.getWhetherDsDisabled=function(e,t){var n=s();return!(!e||!e.dataSourceId||t.some(function(t){return t===e.dataSourceId})&&n&&n.getDataSource(e.dataSourceId))}},function(e,t,n){var r=n(21),o=n(172),i=n(173),a="[object Null]",s="[object Undefined]",l=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?s:a:l&&l in Object(e)?o(e):i(e)}},function(e,t,n){var r=n(196),o=n(199);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.render=function(){return o.React.createElement("span",{className:this.props.className,contentEditable:!!this.props.isEditable,suppressContentEditableWarning:!0,id:this.props.id,style:this.props.style,title:this.props.title||null,tabIndex:this.props.tabIndex||null},this.props.exp)},t}(o.React.PureComponent);t.default=i},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(10).Symbol;e.exports=r},function(e,t,n){var r=n(78),o=n(180),i=n(28);e.exports=function(e){return i(e)?r(e):o(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenTypes={CurrentWindow:void 0,TopWindow:"_top",NewWindow:"_blank"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(109);t.ColorChooser=r.Color},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=n(1),a=n(363),s=n(64);!function(e){e.Uploading="UPLOADING",e.UploadOk="UPLOADOK",e.UploadError="UPLOADERROR"}(r=t.ResourceUploadStatus||(t.ResourceUploadStatus={})),function(e){e.Image="IMAGE",e.Config="CONFIG"}(o=t.ResourceType||(t.ResourceType={}));var l=function(){function e(){var t=this;this.resourceMap={},this.blobToResourceMap={},this.resourcesInDraft={},this.getResourcesInDraft=function(){return t.resourcesInDraft},this.setResourcesInDraft=function(e){t.resourcesInDraft=e},this.getResourcesInAppConfig=function(e){var n=t.getAppId(),r=i.getAppStore().getState().portalUrl+"/sharing/rest/content/items/"+n+"/resources/",o={},a=[],s=null,l=i.SessionManager.getInstance().getSession(),u=new RegExp("^"+r);var c={matchFunction:function(e){return u.test(e)},matchHandle:function(e){o[e.value]=e.value}};return i.appConfigUtils.replaceAppConfigNodeValue(e,c).then(function(){return i.esri.restPortal.getItemResources(n,{authentication:l}).then(function(e){if(s=e&&e.resources)for(var t=0;t<s.length;t++){var n=r+s[t].resource;o[n]&&a.push({url:o[n],fileName:s[t].resource.split("/")[s[t].resource.split("/").length-1],created:s[t].created,size:s[t].size})}return Promise.resolve(a)})})},this.setImageResourcesInDraft=function(e){var n=t.getResourcesInDraft();n.imageResources=e,t.setResourcesInDraft(n)},this.getImageResourcesInDraft=function(e,n){if(t.resourcesInDraft.imageResources)return Promise.resolve(t.resourcesInDraft.imageResources);var r=i.getAppStore().getState(),o=i.SessionManager.getInstance().getSession(),a=r.portalUrl+"/sharing/rest/content/items/"+e+"/resources/images/image-resources-list.json?token="+o.token;return fetch(""+a,{cache:"no-cache"}).then(function(e){return 404===e.status?Promise.resolve(null):e.json()}).then(function(e){if(e){var n=e;return Object.keys(n).forEach(function(e){n[e].url=n[e].url+"?token="+i.SessionManager.getInstance().getSession().token}),Promise.resolve(n)}return t.uploadImageResourcesConfig({}).then(function(e){return Promise.resolve(e)})}).catch(function(e){return console.error(e),Promise.reject(null)})},this.updateImageResourceItemInfo=function(e){var n=t.getAppId();t.getImageResourcesInDraft(n).then(function(n){var r=Object.assign({},e);delete r.blobUrl,delete r.type,n[r.fileName.split(".")[0]]=r,t.setImageResourcesInDraft(n)})},this.uploadImageResourcesConfig=function(n){var r=n||{},i={appId:t.getAppId(),file:new Blob([JSON.stringify(r)],{type:"application/json"}),resourcesPrefix:"images",fileName:"image-resources-list.json",type:o.Image};return e.getInstance().upLoadFileToResource(i).then(function(){return Promise.resolve(r)},function(){return Promise.reject(null)})},this.cleanValueInImageResourcesConfig=function(e,n){return t.getAppId()!==e&&(t.resourcesInDraft.imageResources=null),n.length>0?t.getImageResourcesInDraft(e).then(function(e){if(e){for(var t=[],r=0;r<n.length;r++){for(var o=Object.keys(e),i=!0,a=0;a<o.length;a++){var s=o[a];if(e[s].resourcesPrefix+"/"+e[s].fileName===n[r]&&e[s].referedIds.length>0){i=!1;break}}i&&t.push(n[r])}return Promise.resolve(t)}return Promise.resolve(n)}):Promise.resolve(n)}}return e.getInstance=function(){return e._instance||(e._instance=new e,window._appResourceManager=e._instance),e._instance},e.prototype.getResourceItem=function(e){return this.resourceMap[e]},e.prototype.getResourceMap=function(){return this.resourceMap},e.prototype.setResourceItem=function(e,t){this.resourceMap[e]?this.resourceMap[e]=Object.assign(this.resourceMap[e],t):this.resourceMap[e]=t,i.getAppStore().dispatch(s.builderStateResourceActions.AddResource(e,this.resourceMap[e])),this.blobToResourceMap[t.blobUrl]={id:t.id,resourceUrl:t.resourceUrl}},e.prototype.clearResources=function(e){for(var t in this.resourceMap)this.resourceMap[t]&&window.URL.revokeObjectURL(this.resourceMap[t].blobUrl);this.resourceMap={},this.blobToResourceMap={},this.removeUnnecessaryResources(e),i.getAppStore().dispatch(s.builderStateResourceActions.ClearResources())},e.prototype.getAppId=function(){return i.getAppStore().getState().appStateInBuilder&&i.getAppStore().getState().appStateInBuilder.appId},e.prototype.addAppItemResource=function(e){var t=this,n=i.SessionManager.getInstance().getSession();return i.esri.restPortal.addItemResource({id:e.appId,resource:e.file,name:e.fileName,params:{resourcesPrefix:e.resourcesPrefix},authentication:n}).then(function(n){return t.setResourceItemInfoStatus(e,r.UploadOk),Promise.resolve(n)},function(n){return t.setResourceItemInfoStatus(e,r.UploadError),Promise.reject(n)})},e.prototype.getAppItemResources=function(e){var t=i.SessionManager.getInstance().getSession();return i.esri.restPortal.getItemResources(e.appId,{authentication:t})},e.prototype.updateAppItemResource=function(e){var t=this,n=i.SessionManager.getInstance().getSession();return i.esri.restPortal.updateItemResource({id:e.appId,resource:e.file,name:e.fileName,params:{resourcesPrefix:e.resourcesPrefix},authentication:n}).then(function(n){return t.setResourceItemInfoStatus(e,r.UploadOk),Promise.resolve(n)},function(n){return t.setResourceItemInfoStatus(e,r.UploadError),Promise.reject(n)})},e.prototype.removeAppItemResource=function(e){var t=i.SessionManager.getInstance().getSession(),n=e.appId?e.appId:this.getAppId();return i.esri.restPortal.removeItemResource({id:n,resource:e.fileName,authentication:t}).then(function(e){return Promise.resolve(e)},function(e){return Promise.reject(e)})},e.prototype.getLocalCacheResourceUrl=function(e){try{var t=window.URL.createObjectURL(e.file);return e.url=t,e.blobUrl=t,this.upLoadFileToResource(e),Promise.resolve(e)}catch(e){return Promise.reject(e)}},e.prototype.getBlobByBlobUrl=function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="blob",r.onload=function(e){if(200==this.status){var r=this.response;return t(r)}return n()},r.onerror=function(e){return n()},r.send()})},e.prototype.getResourcePrefix=function(e){if(e.resourcesPrefix)return e.resourcesPrefix;return e.type===o.Image?e.widgetId?"images/"+e.widgetId:"images/templates":e.type===o.Config?"config":"templates"},e.prototype.upLoadFileToResource=function(e){var t=this,n=e.appId?e.appId:this.getAppId(),o=e.fileName,a=e.originalName,s=this.getResourcePrefix(e);e.resourcesPrefix=s;var l=i.getAppStore().getState().portalUrl+"/sharing/rest/content/items/"+n+"/resources/"+(s?s+"/":"")+o,u=i.uuidv1(),c={id:u,appId:n,fileName:o,originalName:a,resourcesPrefix:s,url:e.url,blobUrl:e.blobUrl,resourceUrl:l,type:e.type,status:r.Uploading,widgetId:e.widgetId},p=Object.assign({},c);p.file=e.file;var d=this.getAppItemResources(p).then(function(e){var n=t,r=p.resourcesPrefix;if(e&&e.resources){var o=e.resources;if(0===o.length)return n.addAppItemResource(p);for(var i=!1,a=0;a<o.length;a++)if(o[a].resource===(r?r+"/":"")+p.fileName){i=!0;break}return i?n.updateAppItemResource(p):n.addAppItemResource(p)}throw"return value from getAppItemResources is not right"}).catch(function(e){return console.error(e),t.setResourceItemInfoStatus(p,r.UploadError),Promise.reject()});return p.promise=d,this.setResourceItem(u,c),d},e.prototype.setAppConfigLocalFileToResource=function(e){return this.setConfigLocalFileToResource(e)},e.prototype.uploadImageConfigFileToPortal=function(e,t){var n=this,r=e,o={};return this.getResourcesInAppConfig(Object.assign({},t)).then(function(e){for(var t={},i=[],a=0;a<e.length;a++){var s=e[a].fileName.split(".")[0];i.push(s)}return Object.keys(r).forEach(function(e){r[e].referedIds=[];var n=r[e].originId;(i.indexOf(n)>-1||i.indexOf(e)>-1)&&(t[e]=r[e],t[n]=r[n])}),Object.keys(t).forEach(function(e){t[e].referedIds=[];var n=t[e].originId;n!==e&&(o[n]?o[n].referedIds.push(e):(o[n]=Object.assign({},t[n]),o[n].referedIds=[e]))}),Object.keys(o).forEach(function(e){t[e]&&(t[e].referedIds=o[e].referedIds)}),n.setConfigLocalFileToResource(t).then(function(e){return n.uploadImageResourcesConfig(e)})})},e.prototype.setConfigLocalFileToResource=function(e){var t=this,n=this.blobToResourceMap,o=new RegExp("^blob:http(s?)://(.)"),a=new Array;var s={matchFunction:function(e){return o.test(e)},matchHandle:function(e){var t=e.obj,r=e.key,o=e.value;o=n[e.value],-1===a.indexOf(o.id)&&a.push(o.id),"number"==typeof e.i?t[r][e.i]=o.resourceUrl:t[r]=o.resourceUrl}};return i.appConfigUtils.replaceAppConfigNodeValue(e,s).then(function(e){return t.checkResourcesUploadStatus(a).then(function(t){return t===r.UploadOk?Promise.resolve(e):Promise.reject()})})},e.prototype.checkResourcesUploadStatus=function(e){if(e.length>0){for(var t=[],n=0;n<e.length;n++)t.push(this.resourceMap[e[n]].promise);return Promise.all(t).then(function(){return Promise.resolve(r.UploadOk)},function(){return Promise.resolve(r.UploadError)}).catch(function(e){return console.error(e),Promise.reject()})}return Promise.resolve(r.UploadOk)},e.prototype.uploadAppConfigFileToPortal=function(e,t){var n={appId:e,file:new Blob([JSON.stringify(t)],{type:"application/json"}),fileName:"config.json",type:o.Config};return this.upLoadFileToResource(n).then(function(){return Promise.resolve()},function(){return Promise.reject()})},e.prototype.getConfigFromItemResource=function(e){var t=i.getAppStore().getState(),n=i.SessionManager.getInstance().getSession(),r=t.portalUrl+"/sharing/rest/content/items/"+e+"/resources/config/config.json?token="+n.token;return fetch(""+r,{cache:"no-cache"}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return console.error(e),Promise.reject(null)})},e.prototype.setResourceItemInfoStatus=function(e,t){this.resourceMap&&this.resourceMap[e.id]&&(e.status=t,delete e.file,this.setResourceItem(e.id,e))},e.prototype.removeUnnecessaryResources=function(e){var t=this;if(e){var n=i.SessionManager.getInstance().getSession(),r=i.getAppStore().getState().portalUrl+"/sharing/rest/content/items/"+e+"/resources/",o=null;try{i.esri.restPortal.getItemResources(e,{authentication:n}).then(function(s){var l=!1;if(o=s&&s.resources)for(var u=0;u<o.length;u++)if("config/config.json"===o[u].resource||"images/image-resources-list.json"===o[u].resource){l=!0;break}a.getItemData(e,{authentication:n}).then(function(n){var a=new RegExp("^"+r),s={};var u={matchFunction:function(e){return a.test(e)},matchHandle:function(e){s[e.value]=e.value}};i.appConfigUtils.replaceAppConfigNodeValue(n,u).then(function(){return l?t.getConfigFromItemResource(e):Promise.resolve({})}).then(function(e){i.appConfigUtils.replaceAppConfigNodeValue(e,u)}).then(function(){var n=[];if(o){for(var i=0;i<o.length;i++)if("config/config.json"!==o[i].resource&&"images/image-resources-list.json"!==o[i].resource){var a=r+o[i].resource;s[a]||n.push(o[i].resource)}t.cleanValueInImageResourcesConfig(e,n).then(function(n){n.map(function(n){t.removeAppItemResource({appId:e,fileName:n})})})}})})})}catch(e){console.error(e)}}},e}();t.AppResourceManager=l},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("g",{fillRule:"nonzero",fill:"none"},o.createElement("path",{d:"M7.745 7l4.1 4.1a.527.527 0 0 1-.745.746L7 7.746l-4.1 4.1a.527.527 0 0 1-.746-.746l4.1-4.1-4.1-4.1a.527.527 0 0 1 .746-.746l4.1 4.1 4.1-4.1a.527.527 0 0 1 .746.746L7.746 7z",fill:"currentColor"}),o.createElement("path",{d:"M1 1h12v12H1z"}));function a(e){return o.createElement("svg",r({width:14,height:14,viewBox:"0 0 14 14"},e),i)}e.exports=a,a.default=a},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var r=n(83),o=n(44);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},function(e,t,n){var r=n(186),o=n(187),i=n(188),a=n(189),s=n(190);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,t,n){var r=n(50);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(18)(Object,"create");e.exports=r},function(e,t,n){var r=n(208);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){var r=n(223),o=n(51),i=n(224),a=n(225),s=n(226),l=n(17),u=n(87),c=u(r),p=u(o),d=u(i),f=u(a),h=u(s),g=l;(r&&"[object DataView]"!=g(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=g(new o)||i&&"[object Promise]"!=g(i.resolve())||a&&"[object Set]"!=g(new a)||s&&"[object WeakMap]"!=g(new s))&&(g=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case c:return"[object DataView]";case p:return"[object Map]";case d:return"[object Promise]";case f:return"[object Set]";case h:return"[object WeakMap]"}return t}),e.exports=g},function(e,t,n){var r=n(17),o=n(12),i="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||o(e)&&r(e)==i}},function(e,t,n){var r=n(34),o=1/0;e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}},function(e,t,n){var r=n(101),o=n(102);e.exports=function(e,t,n,i){var a=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var u=t[s],c=i?i(n[u],e[u],u,n,e):void 0;void 0===c&&(c=e[u]),a?o(n,u,c):r(n,u,c)}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=r.utils.findLayoutId,i=r.appConfigUtils.getAllWidgetsOrSectionsInLayout,a=r.appConfigUtils.getPendingLayoutItemsFromOtherSizeMode,s=r.appConfigUtils.getPendingLayoutItemsInLayoutWithDeep,l=r.appConfigUtils.getWidgetsOrSectionsInLayoutWithLayoutWidgetOnly,u=r.appConfigUtils.getWidgetOrSectionContainerInfo,c=r.appConfigUtils.getWidgetOrSectionLayoutItem,p=r.appConfigUtils.cleanupRuntimeLayouts,d=r.appConfigUtils.getLayoutItemIds,f=r.appConfigUtils.getUniqueId,h=r.appConfigUtils.getUniqueLabel,g=r.appConfigUtils.getWidgetsOrSectionsInLayout,m=r.appConfigUtils.getWidgetIdThatUseTheLayoutId;function y(e,t,n){var i=o(e.pages[t].layout,r.getAppStore().getState().browserSizeMode,e.mainSizeMode);return l(e,i,n,r.getAppStore().getState().browserSizeMode)}function v(e,t){var n=o(e.header.layout,r.getAppStore().getState().browserSizeMode,e.mainSizeMode);return l(e,n,t,r.getAppStore().getState().browserSizeMode)}function b(e,t){var n=o(e.footer.layout,r.getAppStore().getState().browserSizeMode,e.mainSizeMode);return l(e,n,t,r.getAppStore().getState().browserSizeMode)}function x(e,t,n){var i=o(e.views[t].layout,r.getAppStore().getState().browserSizeMode,e.mainSizeMode);return l(e,i,n,r.getAppStore().getState().browserSizeMode)}function w(e,t){return!!e.pageStructure.find(function(e){return!!e[t]})}function S(e){var t=0;return Object.keys(e.pages).forEach(function(n,r){I(e,n)&&t++}),t}function C(e,t){if(!w(e,t))return 0;var n=0;return e.pageStructure.forEach(function(r,o){var i=Object.keys(r)[0];i===t&&r[i].forEach(function(t){I(e,t)&&n++})}),n}function I(e,t){var n=e.pages[t];return!!n&&n.type===r.PageType.Normal}function _(e,t,n,r){return Object.keys(e.widgets).find(function(o){var i=e.widgets[o];if(i.layouts)return Object.keys(i.layouts).some(function(o){var a=i.layouts[o][r],s=e.layouts[a];return s&&s.content&&void 0!==Object.keys(s.content).find(function(e){return s.content[e].type===n&&(s.content[e].widgetId===t||s.content[e].sectionId===t)})})})}function P(e,t,n,o){if(!e.widgets[n])return[];var i=e.layouts[t.layoutId]&&e.layouts[t.layoutId].content&&e.layouts[t.layoutId].content[t.layoutItemId];if(!i)return[];var a=i.type,s=void 0;return a===r.LayoutItemType.Section?s=i.sectionId:a===r.LayoutItemType.Widget&&(s=i.widgetId),O(e,s,a,n,o)}function O(e,t,n,r,o){var i=e.widgets[r];if(!i)return[];var a=[];return i.layouts&&Object.keys(i.layouts).forEach(function(r){var s=i.layouts[r][o],l=e.layouts[s];l&&l.content&&Object.keys(l.content).forEach(function(e){var r=l.content[e];r.type!==n||r.widgetId!==t&&r.sectionId!==t||a.push({layoutId:l.id,layoutItemId:r.id})})}),a}function E(e){var t=e.asMutable({deep:!0});return Object.keys(t.widgets).forEach(function(e){var n=t.widgets[e];n.label===n.manifest.name&&delete n.label,n.icon===n.context.folderUrl+"icon.svg"&&delete n.icon,delete n.context,delete n.manifest,delete n._originManifest}),t.layouts=p(t.layouts),t=r.appConfigUtils.cleanTokenFromResource(t)}t.getAllWidgetsOrSectionsInLayout=i,t.getPendingLayoutItemsFromOtherSizeMode=a,t.getPendingLayoutItemsInLayoutWithDeep=s,t.getWidgetsOrSectionsInLayoutWithLayoutWidgetOnly=l,t.getWidgetOrSectionContainerInfo=u,t.getWidgetOrSectionLayoutItem=c,t.cleanupRuntimeLayouts=p,t.getLayoutItemIds=d,t.getUniqueId=f,t.getUniqueLabel=h,t.getWidgetsOrSectionsInLayout=g,t.getWidgetIdThatUseTheLayoutId=m,t.getPendingLayoutItemsFromOtherSizeModeInPage=function(e,t,n,o){var i=e.pages[t];return i?o===r.PagePart.Header?i.header&&e.header?a(e,e.header.layout,n):[]:o===r.PagePart.Footer?i.footer&&e.footer?a(e,e.footer.layout,n):[]:o===r.PagePart.Body?a(e,i.layout,n):[]:[]},t.getPendingLayoutItemsInPage=function(e,t,n,o){var i=e.pages[t];return i?o===r.PagePart.Header?i.header&&e.header?s(e,e.header.layout[n],n):[]:o===r.PagePart.Footer?i.footer&&e.footer?s(e,e.footer.layout[n],n):[]:o===r.PagePart.Body?s(e,i.layout[n],n):[]:[]},t.getWidgetsOrSectionsInPageBody=y,t.getWidgetsOrSectionsInPageHeader=v,t.getWidgetsOrSectionsInPageFooter=b,t.getWidgetsOrSectionsInView=x,t.getWidgetsOrSectionsInTheSameContainer=function(e,t,n,o,i){var a=u(e,t,n,i);if(!a)return[];switch(a.type){case r.ContainerType.Page:return y(e,a.id,o);case r.ContainerType.Header:return v(e,o);case r.ContainerType.Footer:return b(e,o);case r.ContainerType.View:return x(e,a.id,o);case r.ContainerType.Dialog:return[]}},t.isFirstLevelPage=w,t.isPageHasSubPage=function(e,t){var n=e.pageStructure.find(function(e){return!!e[t]});return n&&n[t].length>0},t.getRealPageCount=S,t.getSubRealPageCount=C,t.getRealPageCountExcludeOnePage=function(e,t){var n=0;return I(e,t)&&(n=1),S(e)-C(e,t)-n},t.isRealPage=I,t.getParentWidgetIdOfWidgetOrSection=_,t.getWidgetOrSectionLayoutInfosInOneSizeMode=function(e,t,n,r){var i=[],a=!1,s=function(e,t,n,s){var l=o(n,r,e.mainSizeMode),u=c(e.layouts[l],t,s),p=void 0;return u&&(p={layoutId:l,layoutItemId:u.id},i.push(p),a=!0),p};return e.pages&&Object.keys(e.pages).find(function(r){var o=e.pages[r];return!(!o.layout||!s(e,t,o.layout,n))}),a?i:(e.views&&Object.keys(e.views).find(function(r){var o=e.views[r];return!!s(e,t,o.layout,n)}),a?i:(e.dialogs&&Object.keys(e.dialogs).find(function(r){var o=e.dialogs[r];return!!s(e,t,o.layout,n)}),a?i:(e.header&&s(e,t,e.header.layout,n),a?i:(e.footer&&s(e,t,e.footer.layout,n),a?i:(e.widgets&&Object.keys(e.widgets).find(function(r){var o=e.widgets[r];return o.layouts&&Object.keys(o.layouts).forEach(function(r){s(e,t,o.layouts[r],n)}),!!a}),i)))))},t.getBrowserSizeModeByLayoutIdAndWidgetId=function(e,t,n){var r=e.widgets[n];if(r){var o=void 0;return Object.keys(r.layouts).find(function(e){if(Object.keys(r.layouts[e]).find(function(n){if(r.layouts[e][n]===t)return o=n,!0}))return!0}),o}},t.getLayoutInfosInWidgetByLayoutInfo=P,t.getLayoutInfosInWidgetByWidgetOrSectionId=O,t.getLayoutItemsInWidgetByLayoutInfo=function(e,t,n,r){return P(e,t,n,r).map(function(t){return e.layouts[t.layoutId][t.layoutItemId]})},t.getCleanAppConfig=E,window._getCleanAppConfig=E,t.getLayoutItemsHoldWidgetOrSection=function(e,t,n,o){if(o){var i=_(e,n,t,o);if(i)return O(e,n,t,i,o);var a=u(e,n,t,o);if(!a)return[];var s=function(e,t,n){return t.type===r.ContainerType.Footer?e.footer.layout[n]:t.type===r.ContainerType.Header?e.header.layout[n]:e[t.type][t.id].layout[n]}(e,a,o);return[{layoutId:s,layoutItemId:c(e.layouts[s],n,t).id}]}var l=[];return Object.keys(e.layouts).forEach(function(r){d(e,r,!0).forEach(function(o){var i=e.layouts[r].content[o];t!==i.type||i.widgetId!==n&&i.sectionId!==n||l.push({layoutId:r,layoutItemId:o})})}),l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(324);t.SettingSection=r.SettingSection;var o=n(325);t.SettingRow=o.SettingRow;var i=n(326);t.StylePicker=i.StylePicker;var a=n(327);t.SettingButtonGroup=a.SettingButtonGroup},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(2),l=n(56),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onInputChange=function(e){var n=t.props.value;n=a.lodash.assign({},n,{distance:e}),t.props.onChange(n)},t._onUnitChange=function(e){var n=t.props.value;n=a.lodash.assign({},n,{unit:e}),t.props.onChange(n)},t.getStyle=function(){return a.css(i||(i=o(["\n      width: ",";\n      >.jimu-builder--unit-chooser {\n        min-width: ",";\n        margin-left: -1px;\n        border-top-right-radius: 2px;\n        border-bottom-right-radius: 2px;\n      }\n    "],["\n      width: ",";\n      >.jimu-builder--unit-chooser {\n        min-width: ",";\n        margin-left: -1px;\n        border-top-right-radius: 2px;\n        border-bottom-right-radius: 2px;\n      }\n    "])),a.polished.rem(60),a.polished.rem(29))},t.getTitle=function(e){return e?""+e.distance+e.unit:""},t}return r(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.min,r=t.max,o=t.className,i=t.style,u=t.disabled,c=t.units,p=t.value;return a.jsx(s.InputGroup,{title:this.getTitle(p),className:a.classNames(o,"jimu-builder--input-unit"),style:i,css:this.getStyle()},a.jsx(s.Input,{type:"number",min:n,max:r,value:isNaN(p.distance)?"":p.distance,onAcceptValue:function(t){return e._onInputChange(+t)},disabled:u}),a.jsx(l.UnitChooser,{units:c,unit:p.unit,onChange:this._onUnitChange}))},t.defaultProps={units:[s.UnitTypes.PIXEL],value:{distance:0,unit:s.UnitTypes.PIXEL},disabled:!1,min:0,max:1e3,onChange:function(){}},t}(a.React.PureComponent);t.InputUnit=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(2),s=n(14),l=n(4),u=n(145),c=n(146),p=n(157),d=n(158),f=n(73);t.ExpressionFrom=f.ExpressionFrom;var h=function(e){function t(t){var n,r=e.call(this,t)||this;return r.dsManager=window&&window.jimuConfig&&window.jimuConfig.isBuilder?s.default.getInstance():i.DataSourceManager.getInstance(),r.__unmount=!1,r.expressionFrom=((n={})[f.ExpressionFrom.Attribute]=r.props.intl.formatMessage({id:"attribute",defaultMessage:l.default.attribute}),n[f.ExpressionFrom.Statistics]=r.props.intl.formatMessage({id:"statistics",defaultMessage:l.default.statistics}),n[f.ExpressionFrom.Expression]=r.props.intl.formatMessage({id:"expression",defaultMessage:l.default.expression}),n),r.initDss=function(){r.dsManager.createAllDataSources().then(function(e){r.__unmount||r.setState({isDataSourceInited:!0})},function(e){r.__unmount||(r.setState({isDataSourceInited:!0}),console.error(e))})},r.onChange=function(e){r.props.onChange&&r.props.onChange(e)},r.getActiveExpressionFrom=function(){return r.props.expression&&r.props.expression.parts&&0!==r.props.expression.parts.length?1===r.props.expression.parts.length&&r.props.expression.parts[0].type===i.ExpressionPartType.Field?r.props.from.some(function(e){return e===f.ExpressionFrom.Attribute})?f.ExpressionFrom.Attribute:r.props.from.some(function(e){return e===f.ExpressionFrom.Expression})?f.ExpressionFrom.Expression:r.props.from[0]:1===r.props.expression.parts.length&&r.props.expression.parts[0].type===i.ExpressionPartType.Function&&r.props.from.some(function(e){return e===f.ExpressionFrom.Statistics})?f.ExpressionFrom.Statistics:r.props.from.some(function(e){return e===f.ExpressionFrom.Expression})?f.ExpressionFrom.Expression:r.props.from[0]:r.props.from[0]},r.getTab=function(e){switch(e){case f.ExpressionFrom.Attribute:return i.jsx(u.default,{dataSourceIds:r.props.dataSourceIds,expression:r.props.expression,onChange:r.onChange});case f.ExpressionFrom.Statistics:return i.jsx(p.default,{dataSourceIds:r.props.dataSourceIds,expression:r.props.expression,onChange:r.onChange,intl:r.props.intl});case f.ExpressionFrom.Expression:return i.jsx(c.default,o({},r.props,{dataSourceIds:r.props.dataSourceIds,expression:r.props.expression,onChange:r.onChange,intl:r.props.intl}));default:return null}},r.onActiveTabChange=function(e){r.setState({active:e})},r.state={active:r.props.active||r.getActiveExpressionFrom(),isDataSourceInited:!1},r}return r(t,e),t.prototype.componentDidMount=function(){this.__unmount=!1,this.initDss()},t.prototype.componentDidUpdate=function(e,t){this.state.isDataSourceInited||this.initDss(),this.props.dataSourceIds!==e.dataSourceIds&&this.setState({isDataSourceInited:!1}),this.props.from===e.from&&this.props.active===e.active&&this.props.expression===e.expression||this.setState({active:this.props.active||this.getActiveExpressionFrom()})},t.prototype.componentWillUnmount=function(){this.__unmount=!0},t.prototype.render=function(){var e,t=this;return i.jsx("div",{css:d.getStyle(this.props.theme),style:this.props.style,className:i.classNames("w-100 h-100",(e={},e[this.props.className]=!!this.props.className,e))},i.jsx("div",{className:"w-100 h-100 component-expression-builder"},this.props.from&&this.props.from.length>1?i.jsx(a.Nav,{tabs:!0},this.props.from.map(function(e,n){return i.jsx(a.NavItem,{key:n},i.jsx(a.NavLink,{className:i.classNames({active:t.state.active===e}),onClick:function(){t.onActiveTabChange(e)}},t.expressionFrom[e]))})):null,this.getTab(this.state.active),!this.state.isDataSourceInited&&i.jsx("div",{className:"jimu-small-loading"})))},t}(i.React.PureComponent),g=i.themeUtils.withTheme(i.injectIntl(h));t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(68);function i(e,t){if(e&&e.collapsed&&t){var n,r=e;return!!(r.compareBoundaryPoints&&document&&document.createRange)&&((n=document.createRange()).selectNodeContents(t),n.collapse(!0),r.compareBoundaryPoints(r.START_TO_END,n)<1)}}function a(e,t){if(e&&e.collapsed&&t){var n,r=e;return!!(r.compareBoundaryPoints&&document&&document.createRange)&&((n=document.createRange()).selectNodeContents(t),n.collapse(!1),r.compareBoundaryPoints(r.START_TO_END,n)>-1)}}function s(e,t){return e?t?t.querySelector("#"+e):document&&document.querySelector("#"+e):null}function l(e,t,n){if(!document||!document.createRange)return null;if(n||((n=document.createRange()).selectNodeContents(e),n.setStart(e,0)),0===t.count)n.setEnd(e,t.count);else if(e&&t.count>0)if(e.nodeType===Node.TEXT_NODE)e.textContent.length<t.count?t.count-=e.textContent.length:(n.setEnd(e,t.count),t.count=0);else for(var r=0;r<e.childNodes.length&&(n=l(e.childNodes[r],t,n),0!==t.count);r++);return n}function u(){var e=null;if(window.getSelection&&window.getSelection().getRangeAt){var t=window.getSelection();t.rangeCount>0&&(e=t.getRangeAt(0))}return e}function c(e){if(!e)return!1;var t=e.split("-");return!(!t.length||2!==t.length||t[0]!==o.EXP_CONTAINER_PREFIX||!/^\d+$/.test(t[1]))}function p(e,t){if(!t||c(t.id))return null;for(;t&&!y(e,t.id)&&!v(e,t.id);)t=t.parentElement;return t?t.id:null}function d(e,t){return t?e+"-"+o.EXP_PART_PREFIX+"-"+t:null}function f(e,t,n){return t&&n?e+"-"+o.EXP_PART_PREFIX+"-"+t+"-"+n:null}function h(e,t){if(!t||!v(e,t))return null;var n=t.split("-");return n[n.length-1]}function g(e,t){if(!t)return null;var n=t.split("-"),r=y(e,t)&&n.length-1||v(e,t)&&n.length-2;return r?n[r]:null}function m(e,t){return t&&e?t.split(e+"-")[1]:null}function y(e,t){if(!t||!e)return!1;var n=m(e,t);return!(!n||n.split("-").length!==o.EXP_PART_PREFIX.split("-").length+1||t.indexOf(o.EXP_PART_PREFIX)!==e.length+1||!/\d$/.test(t))}function v(e,t){if(!t||!e)return!1;var n=m(e,t);return n&&n.split("-").length===o.EXP_PART_PREFIX.split("-").length+2&&t.indexOf(o.EXP_PART_PREFIX)===e.length+1&&/\d$/.test(t)}function b(e,t){return!!t&&(y(e,t)||v(e,t))}function x(e){if(!e)return null;var t=e.split("(");return t[1]=t[1]&&t[1].replace(")",""),{function:t[0],innerExps:t[1]?t[1].split(/([\,\s])/g).filter(function(e){return!!e}):[]}}function w(e){return'"'+e.replace(/\"/g,"")+'"'}function S(e){var t=e.split(/([\"])/g).filter(function(e){return!!e}),n="",r=!1,o=!1,i=[];return t.forEach(function(e,a){'"'===e?(n+=e,o=r,(r=!0)&&o&&(i.push(n),n="",r=!1,o=!1)):r?n+=e:i.push(e),a===t.length-1&&r&&!o&&i.push(n)}),i}function C(e){var t=e.map(function(e){return M(e)?e:e.split(/(\s*[\+\-\*\/]\s*)/g).filter(function(e){return!!e})});return t=Array.prototype.concat.apply([],t)}function I(e){var t=e.map(function(e){return R(e)||M(e)?e:_(e)});return t=Array.prototype.concat.apply([],t)}function _(e){var t,n=[],o="";return e?(Object.keys(r.ExpressionFunctions).forEach(function(e,t){t!==Object.keys(r.ExpressionFunctions).length-1?o+="("+r.ExpressionFunctions[e]+"\\([^\\(\\)]*?\\))|":o+="("+r.ExpressionFunctions[e]+"\\([^\\(\\)]*?\\))"}),t=new RegExp(o,"g"),n=e.split(t).filter(function(e){return!!e})):n}function P(e){var t=e.map(function(e){return R(e)||M(e)?e:e.split(/([\(\)\s])/g).filter(function(e){return!!e})});return t=Array.prototype.concat.apply([],t)}function O(e,t,n){if(n){var o=y(e,n.id)?g(e,n.id):h(e,n.id),i=t&&t[o];return i&&i.type===r.ExpressionPartType.Operator}return!1}function E(e,t,n){if(n){var o=y(e,n.id)?g(e,n.id):h(e,n.id),i=t&&t[o];return i&&i.type===r.ExpressionPartType.String}return!1}function j(e){var t=[];return e.split("").forEach(function(e,n){'"'===e&&t.push(n)}),t}function k(e,t){return e&&t?e.length-t.length:null}function T(e){return/^\$/.test(e)}function R(e){if(!e)return!1;var t=/[^\(\)\s]+?\([^\(\)]*?\)$/.test(e)?e.split("(")[0]:e;return Object.keys(r.ExpressionFunctions).some(function(e){return r.ExpressionFunctions[e]===t})}function M(e){return!!e&&/^\"(.*?)|(.*?)\"$/.test(e)}function A(e){return!!e&&(/^\d*\.?\d+(\d|\s)*$/.test(e)||/^\d+\.?\d*(\d|\s)*$/.test(e))}function D(e){return!!e&&/^[\+|\-|\*|\/|\,\(\)|\s+]$/.test(e)}t.getWhetherNodeAfterRange=i,t.getWhetherNodeBeforeRange=a,t.getNodeByPartId=s,t.moveSelectionByPart=function(e,t,n){var r=s(e,n);if(r){if(window.getSelection&&document&&document.createRange){var o=document.createRange();r&&(o.selectNode(r),o.collapse(t),window.getSelection().removeAllRanges(),window.getSelection().addRange(o))}}else n&&n.focus()},t.moveSelectionByCharacter=function(e,t,n){var r=s(e,n);if(r&&t>=0&&window.getSelection){var o=l(r,{count:t});o&&(o.collapse(!1),window.getSelection().removeAllRanges(),window.getSelection().addRange(o))}},t.createRange=l,t.getSelectionRange=u,t.getSelectionPosInnerPart=function(e,t,n){var r,o=u();if(o.collapsed){var i=o.startContainer.nodeType===Node.TEXT_NODE?o.startContainer.parentElement:o.startContainer,a=o.startOffset;if(t&&i&&!i.id&&(i=i.nextElementSibling,a=0),i){var l=p(e,i),c=s(l,n),d=c.textContent.length,f=v(e,l);if(c){var h=c.textContent.indexOf(i.textContent)+a;0===h&&f&&c.previousElementSibling&&c.previousElementSibling.id&&(l=c.previousElementSibling.id,h=c.previousElementSibling.textContent.length,d=c.previousElementSibling.textContent.length),r={partId:l,startOffset:h,contentLength:d}}}}return r},t.getPartIdOfSelection=function(e){var t=u();return t&&t.collapsed&&t.startContainer?p(e,t.startContainer):null},t.getWhetherIsExpContainer=c,t.getPartIdByChildNode=p,t.getPreviouseNodeOfSelection=function(e,t){var n,r,o=u();if(o)for(n=t.lastElementChild;n;){if(a(o,n)&&(y(e,n.id)||v(e,n.id))){r=n;break}n=n.previousElementSibling}return r},t.getNextNodeOfSelection=function(e,t){var n,r,o=u();if(o)for(n=t.firstElementChild;n;){if(i(o,n)&&(y(e,n.id)||v(e,n.id))){r=n;break}n=n.nextElementSibling}return r},t.getSortedKeys=function(e){return Object.keys(e).sort(function(e,t){return e.localeCompare(t)})},t.getSortedArrayByLabel=function(e){return e.sort(function(e,t){return e.label.localeCompare(t.label)})},t.getParentPartId=d,t.getChildPartId=f,t.getIndexOfChildPart=h,t.getIndexOfParentPart=g,t.getInernalId=m,t.getWhetherIsParentPartId=y,t.getWhetherIsChildPartId=v,t.getWhetherIsPartId=b,t.resolveFunctionExp=x,t.resolveStringExp=w,t.getExps=function(e){var t=S(e.replace(/\ufeff/g,""));return t=P(t=I(t=C(t)))},t.handleStringExps=S,t.handleFourOperators=C,t.handleFunctions=I,t.splitByFunction=_,t.handleBracketsAndSpaces=P,t.getLastAddedPartId=function(e){return e&&e.editedPartIds&&0!==e.editedPartIds.length?e.editedPartIds[e.editedPartIds.length-1]:null},t.getLastAddedPart=function(e){return e&&e.editedParts&&0!==e.editedParts.length?e.editedParts[e.editedParts.length-1]:null},t.getWhetherIsOperatorByNode=O,t.getWhetherIsStringByNode=E,t.getNewPartsInfo=function(e,t,n,r,o,l,c,p){var m,y,v,b,x,w,S,C,I=k(n,t),_={};if(t=t||[],n=n||[],0===t.length&&0===n.length)return _;var P,T=t&&t.length>0?""+(t.length-1):"0",R=!1,M=!1,A=!1;if(r&&(P=c?g(e,r.id):h(e,r.id),R=O(e,t,r),M=E(e,t,r),A='"'===o&&r&&r.previousElementSibling&&0===r.previousElementSibling.textContent.indexOf('"'),T=R||M||A||D(o)?""+(parseInt(P)-1):P),'"'!==o)if(I>1)for(var N=0;N<=I;)_[""+(parseInt(T)+N)]=n[""+(parseInt(T)+N)],N++;else if(0===I)(m={})[T]=n[T],_=m;else if(l){var F=(L=u())&&L.startOffset;_=F&&1===F?t&&t.length>0?((v={})[""+parseInt(T)]=n[""+parseInt(T)],v):{0:n[0]}:t&&t.length>0?((b={})[""+(parseInt(T)+1)]=n[""+(parseInt(T)+1)],b):{0:n[0]}}else _=t&&t.length>0?((y={})[""+(parseInt(T)+1)]=n[""+(parseInt(T)+1)],y):{0:n[0]};else{var L,B=void 0,z=(B=s(c?d(e,T):f(e,p,T)))&&B.textContent||'"';a(L=u(),B)?z+='"':i(L,B)&&(z='"'+z);var U=j(z),W=U.some(function(e){return 0===e}),H=U.some(function(e){return e===z.length-1});if(!W&&!H||W&&H){var V=U[0];U.length>1&&(V=U.sort()[1]),z.length>1?((x={})[T]=z.slice(0,V),x[parseInt(T)+1]=z.slice(V),_=x):((w={})[T]=z,_=w)}else H?((S={})[T]=z.replace(/\"/g,""),S[parseInt(T)+1]='"',_=S):((C={})[T]=z,_=C)}return _},t.getIndexesOfQuotation=j,t.getNewCharacterFromExpressionString=function(e,t){if(e.length===t.length-1){var n=e.split("");return t.split("").find(function(e,t){return e!==n[t]})}return""},t.getLengthDiffBetweenExpsAndParts=k,t.getWhetherPartNeedPopover=function(e){return!!e&&(e===r.ExpressionPartType.Field||e===r.ExpressionPartType.Function)},t.triggerInputEvent=function(e){if(e){var t=new Event("input",{bubbles:!0,cancelable:!0});e.dispatchEvent(t)}},t.getSiblingOfExpSelection=function e(t,n,i,a,l){var u=s(n),c=y(t,n),p=null,f=null;if(!u)return null;if(!i&&u.nextElementSibling&&b(t,u.nextElementSibling.id)?p=u.nextElementSibling.id:i&&u.previousElementSibling&&b(t,u.previousElementSibling.id)&&(p=u.previousElementSibling.id),c)f=p?{type:o.ExpSelectionType.Char,partId:p,startOffset:i?s(p).textContent.length:0}:{partId:d(t,i?"0":l&&l.length>0?""+(l.length-1):"0"),toStart:i,type:o.ExpSelectionType.Part};else if(p)f={type:o.ExpSelectionType.Char,partId:p,startOffset:i?s(p).textContent.length:1};else{var h=d(t,g(t,n)),m=l[g(t,h)];f=m&&a?{type:o.ExpSelectionType.Char,partId:h,startOffset:m.type===r.ExpressionPartType.Function?m.exp.length+1:m.exp.length}:e(t,h,i,a,l)}return f},t.isField=T,t.isFunction=R,t.isString=M,t.isNumber=A,t.isOperator=D,t.getWhetherFunctionHasArgs=function(e){return!!e&&(e.exp===r.ExpressionFunctions.Count?!!e.dataSourceId:!!(e.parts&&e.parts.length>0))},t.getExpressionPart=function e(t,n,o){if(T(t))return{type:r.ExpressionPartType.Field,exp:n?t:"$",dataSourceId:n,jimuFieldName:o};if(R(t)){var i=x(t),a=i.innerExps.map(function(t){return e(t,n)});return{type:r.ExpressionPartType.Function,exp:i.function,parts:a}}if(A(t))return{type:r.ExpressionPartType.Number,exp:t};if(D(t))return{type:r.ExpressionPartType.Operator,exp:t};if(M(t)){var s=w(t);return{type:r.ExpressionPartType.String,exp:s}}return{type:r.ExpressionPartType.Unknown,exp:t}},t.removeOneCharacter=function(e,t){if(t>-1&&t<e.length){var n=e.charAt(t),r=""+e.slice(0,t)+e.slice(t+1);return'"'===n&&(r=r.replace(/\"/g,"")),r}return e},t.getWhetherHaveChildParts=function(e){return e===r.ExpressionPartType.Function},t.getWhetherAddToStart=function(e,t,n){return!!t&&!O(e,n&&n.parts,t)&&!E(e,n&&n.parts,t)},t.removeOperator=function(e){return e?e.replace(/[\+|\-|\*|\/|\,\(\)|\s+]/g,"_"):e}},function(e,t,n){var r=n(77),o=n(84);e.exports=function(e,t){return e&&r(e,o(t))}},function(e,t,n){(function(e){var r=n(10),o=n(178),i=t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||o;e.exports=l}).call(this,n(27)(e))},function(e,t){var n=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var r=n(76),o=t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o&&r.process,s=function(){try{var e=i&&i.require&&i.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s}).call(this,n(27)(e))},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(82)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){var r=n(29),o=n(191),i=n(192),a=n(193),s=n(194),l=n(195);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=o,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=s,u.prototype.set=l,e.exports=u},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(18)(n(10),"Map");e.exports=r},function(e,t,n){var r=n(200),o=n(207),i=n(209),a=n(210),s=n(211);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,t,n){var r=n(222),o=n(94),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),function(t){return i.call(e,t)}))}:o;e.exports=s},function(e,t,n){var r=n(9),o=n(34),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||a.test(e)||!i.test(e)||null!=t&&e in Object(t)}},function(e,t,n){var r=n(90);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(2),l=n(328),u=n(4),c=function(e){function t(t){var n=e.call(this,t)||this;return n.handleChange=function(e){var t=n.props,r=t.unit,o=t.onChange;n.setState({show:!1}),e!==r&&o(e)},n.handleClick=function(e){n.props.units.length<=1||(n.setState({show:!n.state.show}),n.props.onClick(e))},n.nls=function(e){return n.props.intl?n.props.intl.formatMessage({id:e,defaultMessage:u.default[e]}):e},n.getStyle=function(){var e=n.props.theme,t=e&&e.colors?e.colors.grays.gray300:"";return a.css(i||(i=o(["\n      .units-list {\n        border-radius: 2px;\n        background: ",";\n        padding: 2px 0;\n        .jimu-builder--markable-item {\n          height: ",";\n        }\n      }\n    "],["\n      .units-list {\n        border-radius: 2px;\n        background: ",";\n        padding: 2px 0;\n        .jimu-builder--markable-item {\n          height: ",";\n        }\n      }\n    "])),t,a.polished.rem(26))},n.state={show:!1},n.domNode=a.React.createRef(),n}return r(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.className,r=t.style,o=t.unit,i=t.units,u=i.length<=1,c=this.state.show;return a.jsx(a.React.Fragment,null,a.jsx(s.Button,{ref:this.domNode,size:"sm",disabled:u,outline:!0,onClick:this.handleClick,color:"secondary",className:a.classNames(n,"jimu-builder--unit-chooser"),style:r,title:u?"":this.nls("changeUnit")},o),!u&&a.jsx(s.Popper,{css:this.getStyle(),className:"popper-for-jimu-builder--unit-chooser shadow",zIndex:1,placement:"bottom-end",open:c,reference:this.domNode,toggle:function(){return e.setState({show:!c})},offset:[0,5]},a.jsx("div",{className:"units-list"},i.map(function(t,n){return a.jsx(l.MarkableItem,{theme:e.props.theme,className:"uint-item",key:n,onChange:e.handleChange,marked:o===t,label:t,value:t})}))))},t.defaultProps={unit:s.UnitTypes.PIXEL,units:[s.UnitTypes.PIXEL],onChange:function(){},onClick:function(){}},t}(a.React.PureComponent);t._UnitChooser=c,t.UnitChooser=a.themeUtils.withTheme(a.injectIntl(c))},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(134),a=n(37);function s(){return window.jimuConfig.isBuilder?o.getAppStore().getState().appStateInBuilder.browserSizeMode:o.getAppStore().getState().browserSizeMode}function l(e){return e.properties.type===o.WidgetType.Layout||!0===e.properties.hasEmbeddedLayout}t.DEFAULT_EMBED_LAYOUT_NAME="DEFAULT",t.getAppConfigAction=function(e){return void 0===e&&(e=void 0),e||(e=function(){var e=o.getAppStore().getState();return window.jimuConfig.isBuilder?e&&e.appStateInBuilder&&e.appStateInBuilder.appConfig:e&&e.appConfig}()),new u(e)};var u=function(){function e(e){this.appConfig=e}return e.prototype.exec=function(){if(window.jimuConfig.isBuilder)return o.getAppStore().dispatch({type:"IN_BUILDER_APPCONFIG_REDOCLEAR"}),o.moduleLoader.getModuleSync("jimu-for-builder").builderAppSync.publishAppConfigChangeToApp(this.appConfig),this;o.getAppStore().dispatch(o.appActions.appConfigChanged(this.appConfig))},e.prototype.editWidgetConfig=function(e,t){return this.appConfig.widgets[e]?(this.appConfig=this.appConfig.setIn(["widgets",e,"config"],t),this):this},e.prototype.createLayoutForSizeModeForHeader=function(e,t){if(!this.appConfig.header)return this;var n=this.createLayoutForSizeModeForOneLayout(e,t,this.appConfig.header.layout);return n&&(this.appConfig=this.appConfig.setIn(["header","layout",e],n.id)),this},e.prototype.removeSizeModeLayoutFromHeader=function(e){return this.appConfig.header.layout?(this.removeLayout(this.appConfig.header.layout[e],!0),this.appConfig=this.appConfig.setIn(["header","layout"],this.appConfig.header.layout.without(e)),this):this},e.prototype.createLayoutForSizeModeForFooter=function(e,t){if(!this.appConfig.footer)return this;var n=this.createLayoutForSizeModeForOneLayout(e,t,this.appConfig.footer.layout);return n&&(this.appConfig=this.appConfig.setIn(["footer","layout",e],n.id)),this},e.prototype.removeSizeModeLayoutFromFooter=function(e){return this.appConfig.footer.layout?(this.removeLayout(this.appConfig.footer.layout[e],!0),this.appConfig=this.appConfig.setIn(["footer","layout"],this.appConfig.footer.layout.without(e)),this):this},e.prototype.createLayoutForSizeModeForPageBody=function(e,t,n){if(!this.appConfig.pages[n])return this;var r=this.appConfig.pages[n],o=this.createLayoutForSizeModeForOneLayout(e,t,r.layout);return o&&(this.appConfig=this.appConfig.setIn(["pages",n,"layout",e],o.id)),this},e.prototype.removeSizeModeLayoutFromPageBody=function(e,t){if(!this.appConfig.pages[e]||!this.appConfig.pages[e].layout)return this;var n=this.appConfig.pages[e];return this.removeLayout(n.layout[t],!0),this.appConfig=this.appConfig.setIn(["pages",e,"layout"],n.layout.without(t)),this},e.prototype.editWidget=function(e){return this.appConfig.widgets[e.id]?(this.appConfig=this.appConfig.setIn(["widgets",e.id],e),this):this},e.prototype.addItemIntoLayout=function(e,t,n){var r=this,i=this.appConfig.layouts[e],a=[].concat(i.order||[]);return n>=0&&n<=a.length?a.splice(n,0,t.id):a.push(t.id),this.updateLayout(e,"order",a),this.appConfig=this.appConfig.setIn(["layouts",e,"content",t.id],t),t.type===o.LayoutItemType.Widget&&this.updateWidgetPropertiesWhenAddWidgetIntoLayout(t.widgetId,e),t.type===o.LayoutItemType.Widget&&this.appConfig.widgets[t.widgetId].layouts?Object.keys(this.appConfig.widgets[t.widgetId].layouts).forEach(function(e){var n=r.createLayoutForSizeModeForOneLayout(s(),r.appConfig.mainSizeMode,r.appConfig.widgets[t.widgetId].layouts[e]);n&&(r.appConfig=r.appConfig.setIn(["widgets",t.widgetId,"layouts",e,s()],n.id))}):t.type===o.LayoutItemType.Section&&this.appConfig.sections[t.sectionId].views&&this.appConfig.sections[t.sectionId].views.forEach(function(e){var t=r.createLayoutForSizeModeForOneLayout(s(),r.appConfig.mainSizeMode,r.appConfig.views[e].layout);t&&(r.appConfig=r.appConfig.setIn(["views",e,"layout",s()],t.id))}),{layoutId:e,layoutItemId:t.id}},e.prototype.moveLayoutItemToAnotherLayout=function(e,t,n,r,s){var l=e.layoutId;o.invariant(l!==t.layoutId,"move item to another layout should have different layoutId");var u=i.layoutUtils.findLayoutItem(this.appConfig,e);if(!u)return e;var c=this.appConfig.layouts[t.layoutId];this.updateWidgetPropertiesBeforeChangingLayout(e,t.layoutId);var p=this.appConfig.layouts;if(u.type===o.LayoutItemType.Widget||u.type===o.LayoutItemType.Section){var d=a.getWidgetIdThatUseTheLayoutId(this.appConfig,e.layoutId);if(d){var f=a.getBrowserSizeModeByLayoutIdAndWidgetId(this.appConfig,e.layoutId,d);a.getLayoutInfosInWidgetByLayoutInfo(this.appConfig,e,d,f).forEach(function(e){p=i.layoutUtils.removeItemFromParent(e,!0,p)}),this.appConfig=this.appConfig.set("layouts",p)}else this.appConfig=this.appConfig.set("layouts",i.layoutUtils.removeItemFromParent(e,!0,p))}else this.appConfig=this.appConfig.set("layouts",i.layoutUtils.removeItemFromParent(e,!0,p));var h=i.layoutUtils.createEmptyLayoutItem(t.layoutId,this.appConfig.layouts),g=h.layoutInfo;this.appConfig=this.appConfig.set("layouts",h.layouts),this.updateLayoutItem(g,"type",u.type).updateLayoutItem(g,"setting",{style:{background:o.lodash.getValue(u,"setting.style.background"),border:o.lodash.getValue(u,"setting.style.border"),borderRadius:o.lodash.getValue(u,"setting.style.borderRadius"),boxShadow:o.lodash.getValue(u,"setting.style.boxShadow")}}).updateLayoutItem(g,"bbox",i.replaceBoundingBox(null,r,n));var m=[].concat(c.order||[]);return s>=0&&s<=m.length?m.splice(s,0,g.layoutItemId):m.push(g.layoutItemId),this.updateLayout(t.layoutId,"order",m),u.type===o.LayoutItemType.Widget?this.updateLayoutItem(g,"widgetId",u.widgetId):u.type===o.LayoutItemType.Section&&this.updateLayoutItem(g,"sectionId",u.sectionId),g},e.prototype.editSubWidgetsInheritProperty=function(e,t,n,r,i){var a=this,s=this.appConfig.widgets[e];if(!s)return this;var l=[];return s.layouts&&Object.keys(s.layouts).forEach(function(u){var c=a.appConfig.layouts[o.utils.findLayoutId(s.layouts[u],o.getAppStore().getState().browserSizeMode,a.appConfig.mainSizeMode)];c.content&&Object.keys(c.content).forEach(function(s){var u=c.content[s];if(u.type===o.LayoutItemType.Widget&&u.widgetId){var p=u.widgetId;if(l.indexOf(p)>-1)return;l.push(p);var d=a.appConfig.widgets[p];d=a.addInheritedProperty(d,e,t,n,r,i),a.appConfig=a.appConfig.setIn(["widgets",d.id],d)}})}),this},e.prototype.editSubWidgetsProperty=function(e,t,n){var r=this,i=this.appConfig.widgets[e];if(!i)return this;var a=[];return i.layouts&&Object.keys(i.layouts).forEach(function(e){var s=r.appConfig.layouts[o.utils.findLayoutId(i.layouts[e],o.getAppStore().getState().browserSizeMode,r.appConfig.mainSizeMode)];s.content&&Object.keys(s.content).forEach(function(e){var i=s.content[e];if(i.type===o.LayoutItemType.Widget&&i.widgetId){var l=i.widgetId;if(a.indexOf(l)>-1)return;if(a.push(l),"useDataSourcesEnabled"===t){var u=r.appConfig.widgets[l];u&&((!u.useDataSources||u.useDataSources.length<1)&&!n||u.useDataSources&&u.useDataSources.length>0&&n)&&r.editWidgetProperty(l,t,n)}else r.editWidgetProperty(l,t,n)}})}),this},e.prototype.setLayoutItemToPending=function(e,t){return i.layoutUtils.findLayoutItem(this.appConfig,e)?(this.appConfig=this.appConfig.setIn(["layouts",e.layoutId,"content",e.layoutItemId,"isPending"],t),this):this},e.prototype.removeLayoutItem=function(e,t,n){void 0===n&&(n=!1);var r=i.layoutUtils.findLayoutItem(this.appConfig,e);if(!r)return this;t&&(r.type===o.LayoutItemType.Widget?this.removeWidget(r.widgetId,n):r.type===o.LayoutItemType.Section&&this.removeSection(r.sectionId,n));var a=i.layoutUtils.removeItemFromParent(e,!0,this.appConfig.layouts);return this.appConfig=this.appConfig.set("layouts",a),this.clearEmptyRowInFlowLayout(e)},e.prototype.removeWidget=function(e,t){var n,r=this;if(!this.appConfig.widgets||!this.appConfig.widgets[e])return this;var i=a.getLayoutItemsHoldWidgetOrSection(this.appConfig,o.LayoutItemType.Widget,e),l=a.getLayoutItemsHoldWidgetOrSection(this.appConfig,o.LayoutItemType.Widget,e,s());(t?i:l).forEach(function(e){r.removeLayoutItem(e,!1)});var u=this.appConfig.widgets[e];if(!t&&i.length>l.length)return u.layouts&&Object.keys(u.layouts).forEach(function(t){var n=u.layouts[t];r.removeLayout(n[s()],!0),r.appConfig=r.appConfig.setIn(["widgets",e,"layouts",t],u.layouts[t].without(s()))}),this;u.outputDataSources&&(this.appConfig=this.appConfig.set("dataSources",(n=this.appConfig.dataSources).without.apply(n,u.outputDataSources))),this.appConfig=this.removeWidgetMessageAndAction(this.appConfig,e),u.layouts&&Object.keys(u.layouts).forEach(function(e){var t=u.layouts[e];Object.keys(t).forEach(function(e){r.removeLayout(t[e],!0)})}),this.appConfig=this.appConfig.set("widgets",this.appConfig.widgets.without(e));var c=u.uri;return this.appConfig.widgetsManifest&&this.appConfig.widgetsManifest[c]&&!Object.keys(this.appConfig.widgets).find(function(e){return r.appConfig.widgets[e].uri===c})&&(this.appConfig=this.appConfig.set("widgetsManifest",this.appConfig.widgetsManifest.without(c))),this},e.prototype.removeView=function(e,t,n){if(!this.appConfig.views||!this.appConfig.views[e])return this;if(!this.appConfig.sections||!this.appConfig.sections[t]||1===this.appConfig.sections[t].views.length||this.appConfig.sections[t].views.indexOf(e)<0)return this;var r=this.appConfig.sections[t].views.flatMap(function(t){return t===e?[]:[t]});return this.appConfig=this.appConfig.setIn(["sections",t,"views"],r),this.removeContainerContent(o.ContainerType.View,e,n),this.appConfig=this.appConfig.set("views",this.appConfig.views.without(e)),this},e.prototype.removeSection=function(e,t){var n=this;if(!this.appConfig.sections||!this.appConfig.sections[e])return this;var r=a.getLayoutItemsHoldWidgetOrSection(this.appConfig,o.LayoutItemType.Section,e),i=a.getLayoutItemsHoldWidgetOrSection(this.appConfig,o.LayoutItemType.Section,e,s());return(t?r:i).forEach(function(e){n.removeLayoutItem(e,!1)}),!t&&r.length>i.length?(this.removeSectionContent(e,t),this):(this.removeSectionContent(e,!0),this.appConfig=this.appConfig.set("sections",this.appConfig.sections.without(e)),this)},e.prototype.removeLayout=function(e,t){var n=this;return this.appConfig.layouts[e]?(a.getLayoutItemIds(this.appConfig,e,!0).forEach(function(r){n.removeLayoutItem({layoutId:e,layoutItemId:r},t)}),this.appConfig=this.appConfig.set("layouts",this.appConfig.layouts.without(e)),this):this},e.prototype.resetLayout=function(e,t,n){var r=this;if(void 0===n&&(n=!0),!this.appConfig.layouts[e])return this;if(t){var o=a.getWidgetIdThatUseTheLayoutId(this.appConfig,e);a.getLayoutItemIds(this.appConfig,e).forEach(function(n){var i={layoutId:e,layoutItemId:n};o&&(a.getLayoutItemsInWidgetByLayoutInfo(r.appConfig,i,o,s()).length>1&&(t=!1));r.removeLayoutItem({layoutId:e,layoutItemId:n},t)})}return this},e.prototype.duplicateLayoutItem=function(e,t,n,r){return this.doDuplicateLayoutItem(e,t,n,r),this},e.prototype.duplicateLayoutToLayout=function(e,t,n){var r=this,o=this.appConfig.layouts[e];return o?(o.content&&Object.keys(o.content).forEach(function(e){var i=o.content[e];r.duplicateLayoutItem(o.id,t,i.id,n)}),this):this},e.prototype.doDuplicateLayoutItem=function(e,t,n,r){if(!this.appConfig.layouts||!this.appConfig.layouts[e])return null;if(!this.appConfig.layouts||!this.appConfig.layouts[t])return null;var s=i.layoutUtils.findLayoutItem(this.appConfig,{layoutId:e,layoutItemId:n}),u=i.layoutUtils.getMaximumLayoutItemId(this.appConfig.layouts[t])+1+"",c=s.set("id",u);if(this.appConfig=this.appConfig.setIn(["layouts",t,"content",c.id],c),this.updateLayout(t,"order",[].concat(this.appConfig.layouts[t].order||[]).concat(u)),!r)return c;if(s.type===o.LayoutItemType.Widget&&s.widgetId){var p=s.widgetId,d=this.appConfig.widgets[p];d=d.set("id",a.getUniqueId(this.appConfig,"widget")),this.appConfig=this.appConfig.setIn(["widgets",d.id],d),l(d.manifest)&&(d=this.doDuplicateEmbedWidgetContent(d)),d=this.getDuplicateLabel("widget",d),this.updateLayoutItem({layoutId:t,layoutItemId:c.id},"widgetId",d.id),this.appConfig=this.appConfig.setIn(["widgets",d.id],d)}else if(s.type===o.LayoutItemType.Section&&s.sectionId){var f=s.sectionId,h=this.appConfig.sections[f];h=h.set("id",a.getUniqueId(this.appConfig,"section")),h=this.getDuplicateLabel("section",h),this.updateLayoutItem({layoutId:t,layoutItemId:c.id},"sectionId",h.id),this.appConfig=this.appConfig.setIn(["sections",h.id],h),this.doDuplicateSectionViews(h)}return i.layoutUtils.findLayoutItem(this.appConfig,{layoutId:t,layoutItemId:c.id})},e.prototype.editWidgetProperty=function(e,t,n){if(!this.appConfig.widgets||!this.appConfig.widgets[e])return this;var r=this.appConfig.widgets[e];return r.getIn([t])===n?this:this.editWidget(r.set(t,n))},e.prototype.editPage=function(e){return this.appConfig=this.appConfig.setIn(["pages",e.id],e),this},e.prototype.addPage=function(e,t,n,r,o){var i,a=this;return this.appConfig.pages&&this.appConfig.pages[e.id]?this:(this.appConfig=this.appConfig.setIn(["pages",e.id],e),this.appConfig=this.appConfig.set("pageStructure",this.appConfig.pageStructure.concat([(i={},i[e.id]=[],i)])),t&&t.forEach(function(e){a.appConfig=a.appConfig.setIn(["layouts",e.id],e)}),n&&n.forEach(function(e){a.appConfig=a.appConfig.setIn(["widgets",e.id],e)}),r&&r.forEach(function(e){a.appConfig=a.appConfig.setIn(["sections",e.id],e)}),o&&o.forEach(function(e){a.appConfig=a.appConfig.setIn(["views",e.id],e)}),this)},e.prototype.duplicateView=function(e,t){var n;if(!this.appConfig.views||!this.appConfig.views[e])return this;var r=this.appConfig.views[e].set("id",a.getUniqueId(this.appConfig,"view"));this.appConfig=this.appConfig.setIn(["views",r.id],r),r=(r=this.getDuplicateLabel("view",r)).set("layout",this.doDuplicateContainerContent(o.ContainerType.View,e)),this.appConfig=this.appConfig.setIn(["views",r.id],r);var i=this.appConfig.sections[t];return i=i.set("views",(n=i.views).concat.apply(n,[r.id])),this.appConfig=this.appConfig.setIn(["sections",i.id],i),this},e.prototype.duplicatePage=function(e,t){var n,r=this;if(!this.appConfig.pages||!this.appConfig.pages[e])return this;var i=this.appConfig.pages[e].set("id",t);(i=this.getDuplicateLabel("page",i)).isDefault&&(i=i.set("isDefault",!1));var s=this.appConfig.pageStructure.find(function(t){return!!t[e]});i.type!==o.PageType.Folder&&(i=i.set("layout",this.doDuplicateContainerContent(o.ContainerType.Page,e))),this.appConfig=this.appConfig.setIn(["pages",i.id],i);var l=[];if(s&&s[e].forEach(function(e){var t=r.appConfig.pages[e].set("id",a.getUniqueId(r.appConfig,"page"));t=t.set("layout",r.doDuplicateContainerContent(o.ContainerType.Page,e)),r.appConfig=r.appConfig.setIn(["pages",t.id],t),l.push(t.id)}),s){if(this.appConfig=this.appConfig.set("pageStructure",this.appConfig.pageStructure.concat([(n={},n[i.id]=[],n)])),l.length>0){var u=i.id,c=this.appConfig.pageStructure.length-1;c<0&&(c=0),this.appConfig=this.appConfig.setIn(["pageStructure",c+"",u],l)}}else this.appConfig.pageStructure.some(function(t,n){var o=Object.keys(t).find(function(n){return t[n].indexOf(e)>-1});if(o)return r.appConfig=r.appConfig.setIn(["pageStructure",n+"",o],r.appConfig.pageStructure[n][o].concat(i.id)),!0});return this},e.prototype.editPageProperty=function(e,t,n){if(!this.appConfig.pages||!this.appConfig.pages[e])return this;var r=this.appConfig.pages[e];return r.getIn([t])===n?this:this.editPage(r.setIn([t],n))},e.prototype.movePageIntoPage=function(e,t){return this.appConfig.pages&&this.appConfig.pages[e]&&this.appConfig.pages[t]?e===t?(console.error("SubPage is same to ParentPage."),this):a.isFirstLevelPage(this.appConfig,t)?a.isPageHasSubPage(this.appConfig,e)?(console.error("SubPage has sub page(s)."),this):(this.removePageFromPageStructure(e),this.movePageIntoPageForPageStructure(e,t),this):(console.error("ParentPage is not on the first aspect."),this):this},e.prototype.orderPageToPage=function(e,t,n){var r=this;if(!this.appConfig.pages||!this.appConfig.pages[t]||!this.appConfig.pages[e])return this;if(t===e)return console.error("pageId is same to topPageId."),this;var i=!a.isFirstLevelPage(this.appConfig,t);if((a.isPageHasSubPage(this.appConfig,e)||this.appConfig.pages[e].type===o.PageType.Folder)&&i)return console.error("page structure allow two aspects only"),this;var s=this.appConfig.pageStructure.find(function(t){return!!t[e]});return this.removePageFromPageStructure(e),i?this.appConfig.pageStructure.some(function(o,i){var a=Object.keys(o)[0],s=o[a].indexOf(t);if(s>-1){var l=r.appConfig.pageStructure[i][a];return"bottom"===n&&(s+=1),l=l.slice(0,s).concat([e]).concat(l.slice(s)),r.appConfig=r.appConfig.setIn(["pageStructure",i+"",a],l),!0}}):this.appConfig.pageStructure.some(function(o,i){var a;if(Object.keys(o)[0]===t){"bottom"===n&&(i+=1);var l=r.appConfig.pageStructure.slice(0,i).concat([s||(a={},a[e]=[],a)]).concat(r.appConfig.pageStructure.slice(i));return r.appConfig=r.appConfig.set("pageStructure",l),!0}}),this},e.prototype.removePage=function(e){var t=this;if(!this.appConfig.pages||!this.appConfig.pages[e])return this;var n=this.appConfig.pages[e];n.type!==o.PageType.Folder&&n.type!==o.PageType.Link&&this.removeContainerContent(o.ContainerType.Page,e,!0);var r=this.appConfig.pageStructure,i=r&&r.find(function(t){return!!t[e]});return i&&i[e].length>0&&i[e].forEach(function(e){t.removePage(e)}),this.removePageFromPageStructure(e),this.appConfig=this.appConfig.set("pages",this.appConfig.pages.without(e)),this},e.prototype.setHomePage=function(e){return this.editPageProperty(e,"isDefault",!0)},e.prototype.setViewportSize=function(e,t){return this.appConfig=this.appConfig.setIn(["forBuilderAttributes","viewPortSize",e],t),this},e.prototype.replaceHomePage=function(e){var t=this;return Object.keys(this.appConfig.pages).some(function(e,n){var r=t.appConfig.pages[e];if(r.isDefault)return t.editPageProperty(r.id,"isDefault",!1),!0}),this.editPageProperty(e,"isDefault",!0)},e.prototype.editDialog=function(e){return this.appConfig=this.appConfig.setIn(["dialogs",e.id],e),this},e.prototype.addDialog=function(e,t){var n=this;return this.appConfig.pages&&this.appConfig.pages[e.id]?this:(this.appConfig=this.appConfig.setIn(["dialogs",e.id],e),t&&t.forEach(function(e){return n.addLayout(e)}),this)},e.prototype.removeDialog=function(e){return this.appConfig.dialogs&&this.appConfig.dialogs[e]?(this.removeContainerContent(o.ContainerType.Dialog,e,!0),this.appConfig=this.appConfig.set("dialogs",this.appConfig.dialogs.without(e)),this):this},e.prototype.editSection=function(e){return this.appConfig=this.appConfig.setIn(["sections",e.id],e),this},e.prototype.editSectionProperty=function(e,t,n){if(!this.appConfig.sections||!this.appConfig.sections[e])return this;var r=this.appConfig.sections[e];return r.getIn([t])===n?this:this.editSection(r.set(t,n))},e.prototype.editView=function(e){return this.appConfig=this.appConfig.setIn(["views",e.id],e),this},e.prototype.addView=function(e,t,n){var r,i=this;return this.appConfig.views&&this.appConfig.views[e.id]?this:(this.appConfig.sections&&this.appConfig.sections[t]&&this.appConfig.sections[t].views?(r=this.appConfig.sections[t].views.asMutable()).push(e.id):r=[e.id],this.appConfig=this.appConfig.setIn(["views",e.id],e).setIn(["sections",t,"views"],o.Immutable(r)),n&&n.forEach(function(e){return i.addLayout(e)}),this)},e.prototype.addMessage=function(e){return this.appConfig.messages&&this.appConfig.messages.length?this.appConfig=this.appConfig.setIn(["messages",this.appConfig.messages.length],e):this.appConfig=this.appConfig.setIn(["messages"],[e]),this},e.prototype.editMessage=function(e){if(this.appConfig.messages&&this.appConfig.messages.length){for(var t=null,n=0;n<this.appConfig.messages.length;n++)if(this.appConfig.messages[n].widgetId===e.widgetId&&this.appConfig.messages[n].messageType===e.messageType){t=n;break}null!==t&&(this.appConfig=this.appConfig.setIn(["messages",t],e))}return this},e.prototype.removeMessage=function(e){var t=null;if(!this.appConfig.messages.length)return this;for(var n=0;n<this.appConfig.messages.length;n++)if(this.appConfig.messages[n].widgetId===e.widgetId&&this.appConfig.messages[n].messageType===e.messageType){t=n;break}if(null!==t){var r=Object.assign([],this.appConfig.messages);r.splice(t,1),this.appConfig=this.appConfig.set("messages",o.Immutable(r))}return this},e.prototype.addDataSource=function(e){return this.appConfig.dataSources&&this.appConfig.dataSources[e.id]?this:(this.appConfig=this.appConfig.setIn(["dataSources",e.id],e),this)},e.prototype.addDataSources=function(e){var t=this;return e.forEach(function(e){t.appConfig.dataSources&&t.appConfig.dataSources[e.id]||(t.appConfig=t.appConfig.setIn(["dataSources",e.id],e))}),this},e.prototype.removeDataSource=function(e){return this.appConfig.dataSources&&this.appConfig.dataSources[e]?(this.appConfig=this.appConfig.set("dataSources",this.appConfig.dataSources.without(e)),this):this},e.prototype.editDataSource=function(e){return this.appConfig=this.appConfig.setIn(["dataSources",e.id],e),this},e.prototype.editAttributes=function(e){return this.appConfig=this.appConfig.setIn(["attributes"],e),this},e.prototype.editTheme=function(e,t){return this.appConfig=this.appConfig.set("theme",e),t&&(this.appConfig=this.appConfig.set("themeManifest",t.without("author","copyright","license","description"))),this},e.prototype.editCustomTheme=function(e){return this.appConfig=this.appConfig.set("customTheme",e),this},e.prototype.editHeader=function(e,t){var n=this;return this.appConfig=this.appConfig.set("header",e),t&&t.forEach(function(e){return n.addLayout(e)}),this},e.prototype.editFooter=function(e,t){var n=this;return this.appConfig=this.appConfig.set("footer",e),t&&t.forEach(function(e){return n.addLayout(e)}),this},e.prototype.editLayoutSetting=function(e,t){return t=(this.appConfig.layouts[e.layoutId].setting||o.Immutable({})).merge(t),this.updateLayout(e.layoutId,"setting",t)},e.prototype.editLayoutType=function(e,t){return this.updateLayout(e.layoutId,"type",t)},e.prototype.editLayoutItemSetting=function(e,t){var n=i.layoutUtils.findLayoutItem(this.appConfig,e);return n?(t=(n.setting||o.Immutable({})).merge(t),this.updateLayoutItem(e,"setting",t)):this},e.prototype.editLayoutItemBBox=function(e,t){return this.updateLayoutItem(e,"bbox",t)},e.prototype.editLayoutItemIndex=function(e,t,n){var r=e.layoutId,o=this.appConfig.layouts[r].order;return!o||n<0&&n>o.length?this:(this.adjustIndexOfLayoutItem(e,t,n),this)},e.prototype.editLayoutContent=function(e,t){return this.appConfig=this.appConfig.setIn(["layouts",e.layoutId,e.layoutItemId,"content"],t),this},e.prototype.editLayoutBBox=function(e,t){return this.appConfig=this.appConfig.setIn(["layouts",e.layoutId,e.layoutItemId,"bbox"],t),this},e.prototype.editLayoutOrder=function(e,t){return this.updateLayout(e.layoutId,"order",t)},e.prototype.addLayout=function(e){return this.appConfig.layouts&&this.appConfig.layouts[e.id]?this:(this.appConfig=this.appConfig.setIn(["layouts",e.id],e),this)},e.prototype.duplicateLayout=function(e,t){var n=this.doDuplicateLayout(e,t);return this.appConfig=this.appConfig.setIn(["layouts",n.id],n),this},e.prototype.duplicateWidget=function(e,t){var n=this;if(!(e&&this.appConfig.widgets[e]&&t&&this.appConfig.layouts[t]))return null;var r,s=this.appConfig.widgets[e],u=this.appConfig.layouts[t];if(s=s.set("id",a.getUniqueId(this.appConfig,"widget")),l((s=this.getDuplicateLabel("widget",s)).manifest)&&(this.appConfig=this.appConfig.setIn(["widgets",s.id],s),s=this.doDuplicateEmbedWidgetContent(s)),this.appConfig=this.appConfig.setIn(["widgets",s.id],s),a.getLayoutItemIds(this.appConfig,t,!0).some(function(a){var s=i.layoutUtils.findLayoutItem(n.appConfig,{layoutId:t,layoutItemId:a});if(s.type===o.LayoutItemType.Widget&&s.widgetId===e)return r=s,!0}),!r)return null;var c=r.set("widgetId",s.id);c.bbox;var p=i.layoutUtils.getMaximumLayoutItemId(u)+1+"",d=[].concat(u.order||[]).concat(p);return c=c.set("id",p),u=u.setIn(["content",p],c).set("order",d),this.appConfig=this.appConfig.setIn(["layouts",u.id],u),{layoutId:u.id,layoutItemId:c.id}},e.prototype.duplicateSection=function(e,t){var n=a.getWidgetOrSectionLayoutItem(this.appConfig.layouts[t],e,o.LayoutItemType.Section);if(n)return{layoutId:t,layoutItemId:this.doDuplicateLayoutItem(t,t,n.id,!0).id}},e.prototype.updateWidgetPropertiesWhenAddWidgetIntoLayout=function(e,t){if(!this.appConfig.widgets[e])return this;var n=this.appConfig.widgets[e],r=a.getWidgetIdThatUseTheLayoutId(this.appConfig,t);if(r){var o=this.appConfig.widgets[r];n=this.processPropertiesWhenAddIntoParentWidget(n,o),this.appConfig=this.appConfig.setIn(["widgets",n.id],n)}return this},e.prototype.updateWidgetPropertiesBeforeChangingLayout=function(e,t){var n=e.layoutId;o.invariant(n!==t,"move item to another layout should have different layoutId");var r=this.appConfig.layouts[n].content[e.layoutItemId];if(r){if(r.type===o.LayoutItemType.Widget){var i=this.appConfig.widgets[r.widgetId];a.getWidgetIdThatUseTheLayoutId(this.appConfig,e.layoutId)&&(i=this.removeInheritedProperty(i,"useDataSources"),this.appConfig=this.appConfig.setIn(["widgets",i.id],i));var s=a.getWidgetIdThatUseTheLayoutId(this.appConfig,t);if(s){var l=this.appConfig.widgets[s];i=this.processPropertiesWhenAddIntoParentWidget(i,l),this.appConfig=this.appConfig.setIn(["widgets",i.id],i)}}return this}},e.prototype.removeInheritedProperty=function(e,t){var n=e[t];return n?(Array.isArray(n)?n.forEach(function(e,t){n=n.set(t,e.set("isInherited",!1))}):n.isInherited&&(n=n.set("isInherited",!1)),e=e.set(t,n)):e},e.prototype.addInheritedProperty=function(e,t,n,o,i,a){if(!o)return e;var s=e[n];if(Array.isArray(o)){s||(s=[]);var l=!1;s.length>0?(a&&a.length>0&&a.forEach(function(e){s.some(function(t,n){if(t.isInherited&&e[i]===t[i])return o.find(function(t){return e[i]===t[i]})||(s=s.slice(0,n).concat(s.slice(n+1)),l=!0),!0})}),o.forEach(function(e){var n=!1;s.some(function(r,o){if(e[i]===r[i])return s=s.set(o,r.set("isInherited",!0).set("inheritFromWidgetId",t)),n=!0,!0}),!n&&l&&(s=s.concat(r({},e,{isInherited:!0,inheritFromWidgetId:t})))})):s=s.concat(o.map(function(e){return r({},e,{isInherited:!0,inheritFromWidgetId:t})}))}else{if("object"!=typeof o)return e;s=r({},o,{isInherited:!0,inheritFromWidgetId:t})}var u=e[n];return(e=e.set(n,s)).layouts&&this.editSubWidgetsInheritProperty(e.id,n,s,i,u),e},e.prototype.processPropertiesWhenAddIntoParentWidget=function(e,t){return e=this.addInheritedProperty(e,t.id,"useDataSources",t.useDataSources,"dataSourceId"),t.useDataSources&&t.useDataSources.length>0&&(e=e.set("useDataSourcesEnabled",!0)),e},e.prototype.doDuplicateLayout=function(e,t){var n=this,r=this.appConfig.layouts[e];if(!r)return null;var o=r.set("id",a.getUniqueId(this.appConfig,"layout"));return this.appConfig=this.appConfig.setIn(["layouts",o.id],o.without("content","order")),r.content&&Object.keys(r.content).forEach(function(i){r.content[i].isPending||n.doDuplicateLayoutItem(e,o.id,i,t)}),this.appConfig.layouts[o.id]},e.prototype.getDuplicateLabel=function(e,t){return t=t.set("label",a.getUniqueLabel(this.appConfig,e,t.label))},e.prototype.createSection=function(){var e=this.createEmptyLayoutJson(this.appConfig).set("type",o.LayoutType.FlowLayout);this.appConfig=this.appConfig.setIn(["layouts",e.id],e);var t=o.Immutable({id:a.getUniqueId(this.appConfig,"view"),label:a.getUniqueLabel(this.appConfig,"view","view")}).setIn(["layout",o.getAppStore().getState().browserSizeMode],e.id);this.appConfig=this.appConfig.setIn(["views",t.id],t);var n=a.getUniqueId(this.appConfig,"section"),r=a.getUniqueLabel(this.appConfig,"section","Section"),i=o.Immutable({id:n,label:r,views:[t.id]});return this.appConfig=this.appConfig.setIn(["sections",i.id],i),n},e.prototype.createWidget=function(e){return this.appConfig=this.appConfig.setIn(["widgets",e.id],e),this.appConfig.widgetsManifest||(this.appConfig=this.appConfig.set("widgetsManifest",{})),this.appConfig=this.appConfig.setIn(["widgetsManifest",e.uri],e._originManifest.without("author","copyright","license","description")),l(e.manifest)&&(this.createLayoutsForWidget(e,o.getAppStore().getState().browserSizeMode),e=this.appConfig.widgets[e.id]),this.appConfig=this.appConfig.setIn(["widgets",e.id],e),this},e.prototype.clearEmptyRowInFlowLayout=function(e){var t=this,n=this.appConfig.layouts[e.layoutId];if(o.lodash.getValue(n,"order.length",0)>0)return this;var r=a.getWidgetIdThatUseTheLayoutId(this.appConfig,e.layoutId);if(r){var i,s=this.appConfig.widgets[r];if("row"===o.lodash.getValue(s,"manifest.name"))Object.keys(this.appConfig.pages).some(function(e){if(t.appConfig.pages[e].type===o.PageType.Normal){var n=t.appConfig.pages[e];return Object.keys(n.layout).some(function(e){var s=n.layout[e];if(o.lodash.getValue(t.appConfig,"layouts."+s+".type")===o.LayoutType.FlowLayout){var l=a.getWidgetOrSectionLayoutItem(t.appConfig.layouts[s],r,o.LayoutItemType.Widget);if(l)return i={layoutId:s,layoutItemId:l.id},!0}})}}),i||Object.keys(this.appConfig.views).some(function(e){var n=t.appConfig.views[e];return Object.keys(n.layout).some(function(e){var s=n.layout[e];if(o.lodash.getValue(t.appConfig,"layouts."+s+".type")===o.LayoutType.FlowLayout){var l=a.getWidgetOrSectionLayoutItem(t.appConfig.layouts[s],r,o.LayoutItemType.Widget);if(l)return i={layoutId:s,layoutItemId:l.id},!0}})}),i&&this.removeLayoutItem(i,!1)}return this},e.prototype.adjustIndexOfLayoutItem=function(e,t,n){var r=e.layoutId;o.invariant(r===t.layoutId,"adjust index should happened in the same layout");var i=this.appConfig.layouts[r],a=[].concat(i.order||[]);return a[a.indexOf(e.layoutItemId)]=null,a.splice(n,0,e.layoutItemId),a=a.filter(function(e){return null!==e}),this.appConfig=this.appConfig.setIn(["layouts",r,"order"],a),this},e.prototype.createLayoutsForWidget=function(e,n){var r=this;return(e.manifest.properties.layouts||[{name:t.DEFAULT_EMBED_LAYOUT_NAME,label:t.DEFAULT_EMBED_LAYOUT_NAME}]).forEach(function(t){var o=r.createEmptyLayoutJson(r.appConfig);t.type&&(o=o.set("type",t.type)),r.appConfig=r.appConfig.setIn(["layouts",o.id],o).setIn(["widgets",e.id,"layouts",t.name,n],o.id)}),this},e.prototype.removePageFromPageStructure=function(e){var t=this;return this.appConfig.pageStructure?(this.appConfig.pageStructure.find(function(t){return!!t[e]})?this.appConfig=this.appConfig.set("pageStructure",this.appConfig.pageStructure.flatMap(function(t){return t[e]?[]:[t]})):this.appConfig.pageStructure.some(function(n,r){var o=Object.keys(n).find(function(t){return n[t].indexOf(e)>-1});if(o)return t.appConfig=t.appConfig.setIn(["pageStructure",r+"",o],n[o].flatMap(function(t){return t===e?[]:[t]})),!0}),this):this},e.prototype.doDuplicateContainerContent=function(e,t){var n=this,r=this.getContainerJson(e,t);if(!r.layout)return null;var o=r;return Object.keys(r.layout).forEach(function(e){var t=n.doDuplicateLayout(r.layout[e],!0);n.appConfig=n.appConfig.setIn(["layouts",t.id],t),o=o.setIn(["layout",e],t.id)}),o.layout},e.prototype.doDuplicateEmbedWidgetContent=function(e){var t=this,n=e;return Object.keys(e.layouts).forEach(function(r){var o=e.layouts[r];Object.keys(o).forEach(function(o){var i=t.doDuplicateLayout(e.layouts[r][o],!0);n=n.setIn(["layouts",r,o],i.id),t.appConfig=t.appConfig.setIn(["layouts",i.id],i)})}),n},e.prototype.doDuplicateSectionViews=function(e){var t=this;e.views.forEach(function(n,r){var i=t.appConfig.views[n];i=i.set("id",a.getUniqueId(t.appConfig,"view")),t.appConfig=t.appConfig.setIn(["views",i.id],i),i=t.getDuplicateLabel("view",i),e=e.setIn(["views",r+""],i.id),i=i.set("layout",t.doDuplicateContainerContent(o.ContainerType.View,i.id)),t.appConfig=t.appConfig.setIn(["views",i.id],i)}),this.appConfig=this.appConfig.setIn(["sections",e.id],e)},e.prototype.createEmptyLayoutJson=function(e){var t=a.getUniqueId(e,"layout");return o.Immutable({id:t})},e.prototype.createLayoutForSizeModeForOneLayout=function(e,t,n){var r=this;if(n&&n[t]&&!n[e]){var i=this.doDuplicateLayout(n[t],!1);i=this.transformLayout(i,t,e);var s=a.getWidgetsOrSectionsInLayout(this.appConfig.layouts[i.id],o.LayoutItemType.Widget),l=a.getWidgetsOrSectionsInLayout(this.appConfig.layouts[i.id],o.LayoutItemType.Section);return s.filter(function(e){return r.appConfig.widgets&&r.appConfig.widgets[e]&&r.appConfig.widgets[e].manifest.properties.hasEmbeddedLayout}).forEach(function(n){Object.keys(r.appConfig.widgets[n].layouts).forEach(function(o){var i=r.createLayoutForSizeModeForOneLayout(e,t,r.appConfig.widgets[n].layouts[o]);i&&(r.appConfig=r.appConfig.setIn(["widgets",n,"layouts",o,e],i.id))})}),s.filter(function(e){return r.appConfig.widgets&&r.appConfig.widgets[e]&&r.appConfig.widgets[e].manifest.properties.type===o.WidgetType.Layout}).forEach(function(n){var s=a.getUniqueId(r.appConfig,"widget"),l=r.appConfig.widgets[n].set("id",s);r.appConfig=r.appConfig.setIn(["widgets",s],l);var u=a.getWidgetOrSectionLayoutItem(i,n,o.LayoutItemType.Widget);u=u.set("widgetId",s),i=i.setIn(["content",u.id],u),Object.keys(l.layouts).forEach(function(n){var o=r.createLayoutForSizeModeForOneLayout(e,t,l.layouts[n]);o&&(l=l.setIn(["layouts",n],l.layouts[n].without(t).set(e,o.id)))}),r.appConfig=r.appConfig.setIn(["widgets",s],l)}),l.forEach(function(n){r.appConfig.sections[n]&&r.appConfig.sections[n].views.forEach(function(n){if(r.appConfig.views[n]&&r.appConfig.views[n].layout[t]){var o=r.createLayoutForSizeModeForOneLayout(e,t,r.appConfig.views[n].layout);o&&(r.appConfig=r.appConfig.setIn(["views",n,"layout",e],o.id))}})}),this.appConfig=this.appConfig.setIn(["layouts",i.id],i),i}},e.prototype.movePageIntoPageForPageStructure=function(e,t){var n=this;return this.appConfig.pageStructure?(this.appConfig.pageStructure.some(function(r,o){var i=Object.keys(r).find(function(e){return e===t});if(i)return n.appConfig=n.appConfig.setIn(["pageStructure",o+"",i],n.appConfig.pageStructure[o][i].concat([e])),!0}),this):this},e.prototype.removeContainerContent=function(e,t,n){var r=this,i=this.getContainerJson(e,t).layout;return Object.keys(i).forEach(function(l){if(n||l===s()){var u=i[l];a.getAllWidgetsOrSectionsInLayout(r.appConfig,u,o.LayoutItemType.Widget,l).forEach(function(e){r.removeWidget(e,n)}),a.getAllWidgetsOrSectionsInLayout(r.appConfig,u,o.LayoutItemType.Section,l).forEach(function(e){r.removeSection(e,n)}),r.appConfig=r.appConfig.set("layouts",r.appConfig.layouts.without(u)),e===o.ContainerType.Header?r.appConfig=r.appConfig.setIn(["header","layout"],r.appConfig.header.layout.without(l)):e===o.ContainerType.Footer?r.appConfig=r.appConfig.setIn(["footer","layout"],r.appConfig.footer.layout.without(l)):r.appConfig=r.appConfig.setIn([e,t,"layout"],r.appConfig[e][t].layout.without(l))}}),this},e.prototype.getContainerJson=function(e,t){return e===o.ContainerType.Footer||e===o.ContainerType.Header?this.appConfig[e]:this.appConfig[e][t]},e.prototype.removeSectionContent=function(e,t){var n=this;return this.appConfig.sections[e].views&&this.appConfig.sections[e].views.forEach(function(e){n.removeContainerContent(o.ContainerType.View,e,t),0===Object.keys(n.appConfig.views[e].layout).length&&(n.appConfig=n.appConfig.set("views",n.appConfig.views.without(e)))}),this},e.prototype.updateLayout=function(e,t,n){return this.appConfig.layouts[e]&&(this.appConfig=this.appConfig.setIn(["layouts",e,t],n)),this},e.prototype.updateLayoutItem=function(e,t,n){if(i.layoutUtils.findLayoutItem(this.appConfig,e)){var r=e.layoutId,o=e.layoutItemId;this.appConfig=this.appConfig.setIn(["layouts",r,"content",o,t],n)}return this},e.prototype.transformLayout=function(e,t,n){var r=(window.jimuConfig.isBuilder?window._appWindow&&window._appWindow._extensionManager:o.ExtensionManager.getInstance()).getExtensions(o.extensionSpec.ExtensionPoints.LayoutTransformer);if(r.length>0){var i=r.find(function(t){return t.layoutType===e.type});i&&i.transformLayout&&(e=i.transformLayout(e,t,n))}return e},e.prototype.removeWidgetMessageAndAction=function(e,t){var n=e.messages;if(n&&n.length>0){for(var r=n.filter(function(e){return e.widgetId!==t}),o=0;o<r.length;o++){var i=r[o].actions;if(0!==i.length){var a=i.filter(function(e){return e.widgetId!==t}),s=Object.assign([],a);r=r.set(o,r[o].set("actions",s))}}return e.set("messages",r)}return e},e}();t.AppConfigAction=u},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("g",{fillRule:"nonzero",fill:"none"},o.createElement("path",{d:"M4.586 8.657l6.01-6.01a.5.5 0 0 1 .707.707l-6.01 6.01a1 1 0 0 1-1.414 0L.697 6.182a.5.5 0 0 1 .707-.707l3.182 3.182z",fill:"currentColor"}),o.createElement("path",{d:"M0 0h12v12H0z"}));function a(e){return o.createElement("svg",r({width:12,height:12,viewBox:"0 0 12 12"},e),i)}e.exports=a,a.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(369),i=n(370);t.AllDataSourceTypes=Object.assign({},r.DataSourceTypes,o.ArcGISDataSourceTypes,i.HubDataSourceTypes)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(59),i=n(4);function a(e,t,n){e.isDataSourceSet&&e.getChildDataSources().forEach(function(e){e&&e.dataSourceJson&&e.id&&(s(e.dataSourceJson,n)&&t.push(e),a(e,t,n))})}function s(e,t){return!!e&&t.some(function(t){return e.type&&t===e.type})}function l(e){var t=e&&e.getSchema&&e.getSchema(),n=t&&t.layerDefinition&&t.layerDefinition.geometryType;if(n){if(-1!==n.toLocaleLowerCase().indexOf(r.Point.toLocaleLowerCase()))return r.Point;if(-1!==n.toLocaleLowerCase().indexOf(r.Polyline.toLocaleLowerCase()))return r.Polyline;if(-1!==n.toLocaleLowerCase().indexOf(r.Polygon.toLocaleLowerCase()))return r.Polygon}return null}function u(e,t){switch(e){case o.AllDataSourceTypes.WebMap:case o.AllDataSourceTypes.MapView:case o.AllDataSourceTypes.WebScene:case o.AllDataSourceTypes.SceneView:case o.AllDataSourceTypes.HubAnnotations:case o.AllDataSourceTypes.HubEvents:return e;case o.AllDataSourceTypes.FeatureLayer:case o.AllDataSourceTypes.FeatureLayerView:case o.AllDataSourceTypes.FeatureQuery:return t?e+"_"+t:e;default:return"UNKNOWN"}}t.traverseGetToUseDss=a,t.getWhetherUseDataSource=s,t.getToUseChildDss=function(e,t){var n={};return 0===t.length?Promise.resolve(n):Promise.all(e.filter(function(e){return e&&e.id&&e.dataSourceJson&&e.isDataSourceSet&&e.ready}).map(function(e){return n[e.id]||(n[e.id]=[]),e.ready().then(function(){return a(e,n[e.id],t)})})).then(function(){return Object.keys(n).forEach(function(e){0===n[e].length&&delete n[e]}),n})},function(e){e.Point="POINT",e.Polyline="POLYLINE",e.Polygon="POLYGON"}(r=t.GeoType||(t.GeoType={})),t.getGeoType=l,t.getDsIconType=u,t.getDsIcon=function(e){switch(u(e&&e.type,e&&e.dataSourceJson&&l(e))){case o.AllDataSourceTypes.WebMap:case o.AllDataSourceTypes.MapView:return n(373);case o.AllDataSourceTypes.WebScene:case o.AllDataSourceTypes.SceneView:return n(374);case o.AllDataSourceTypes.HubAnnotations:return n(375);case o.AllDataSourceTypes.HubEvents:return n(376);case o.AllDataSourceTypes.FeatureLayer+"_"+r.Point:case o.AllDataSourceTypes.FeatureLayerView+"_"+r.Point:case o.AllDataSourceTypes.FeatureQuery+"_"+r.Point:return n(377);case o.AllDataSourceTypes.FeatureLayer+"_"+r.Polyline:case o.AllDataSourceTypes.FeatureLayerView+"_"+r.Polyline:case o.AllDataSourceTypes.FeatureQuery+"_"+r.Polyline:return n(378);case o.AllDataSourceTypes.FeatureLayer+"_"+r.Polygon:case o.AllDataSourceTypes.FeatureLayerView+"_"+r.Polygon:case o.AllDataSourceTypes.FeatureQuery+"_"+r.Polygon:return n(379);case""+o.AllDataSourceTypes.FeatureLayer:case""+o.AllDataSourceTypes.FeatureLayerView:case""+o.AllDataSourceTypes.FeatureQuery:return n(380);default:return n(381)}},t.getDsTypeString=function(e,t){if(!e||!t)return"";switch(e){case o.AllDataSourceTypes.FeatureLayer:case o.AllDataSourceTypes.FeatureQuery:return t.formatMessage({id:"featureLayer",defaultMessage:i.default.featureLayerType});case o.AllDataSourceTypes.FeatureLayerView:return t.formatMessage({id:"featureLayerView",defaultMessage:i.default.featureLayerViewType});case o.AllDataSourceTypes.HubAnnotations:return t.formatMessage({id:"hubAnnotations",defaultMessage:i.default.hubAnnotationsType});case o.AllDataSourceTypes.HubEvents:return t.formatMessage({id:"hubEvents",defaultMessage:i.default.hubEventsType});case o.AllDataSourceTypes.Map:return t.formatMessage({id:"map",defaultMessage:i.default.mapType});case o.AllDataSourceTypes.MapView:return t.formatMessage({id:"mapView",defaultMessage:i.default.mapViewType});case o.AllDataSourceTypes.SceneView:return t.formatMessage({id:"sceneView",defaultMessage:i.default.sceneViewType});case o.AllDataSourceTypes.SimpleLocal:return t.formatMessage({id:"simpleLocal",defaultMessage:i.default.simpleLocalType});case o.AllDataSourceTypes.WebMap:return t.formatMessage({id:"webMap",defaultMessage:i.default.webMapType});case o.AllDataSourceTypes.WebScene:return t.formatMessage({id:"webScene",defaultMessage:i.default.webSceneType});case o.AllDataSourceTypes.CSV:return t.formatMessage({id:"csv",defaultMessage:i.default.csvType});default:return""}},t.getSortedKeys=function(e){return Object.keys(e).sort(function(e,t){return e.localeCompare(t)})},t.getSortedArrayByLabel=function(e){return e.sort(function(e,t){return e.label.localeCompare(t.label)})},t.getSortedLabels=function(e){return e.sort(function(e,t){return e.localeCompare(t)})}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(14),s=n(4),l=n(136),u=n(137),c=n(138),p=function(e){function t(t){var n=e.call(this,t)||this;return n.dsManager=window&&window.jimuConfig&&window.jimuConfig.isBuilder?a.default.getInstance():o.DataSourceManager.getInstance(),n.__unmount=!1,n.initDss=function(){n.dsManager.createAllDataSources().then(function(e){n.__unmount||n.setState({isDataSourceInited:!0})},function(e){n.__unmount||(n.setState({isDataSourceInited:!0}),console.error(e))})},n.setSelectedDsAndSchema=function(e){e&&e.getSchema&&(n.__unmount||n.setState({selectedSchema:e.getSchema(),selectedDs:e}))},n.getDss=function(e){return e?e.asMutable().filter(function(e){return!!e}).map(function(e){var t=n.dsManager.getDataSource(e);return t||null}).filter(function(e){return!!e}):[]},n.getWhetherDisableDsDropdown=function(){return n.props.dataSourceIds&&n.props.dataSourceIds.length<=1},n.getDsLabel=function(e){return e&&e.dataSourceJson&&(e.dataSourceJson.label||e.dataSourceJson.id)||""},n.getSelectedFields=function(){return n.state.selectedDs&&n.state.selectedDs.id&&n.props.selectedFields?Array.isArray(n.props.selectedFields)?n.props.selectedFields:o.Immutable(n.props.selectedFields[n.state.selectedDs.id]):o.Immutable([])},n.getFields=function(){if(!n.state.selectedSchema||!n.state.selectedSchema.fields)return null;if(n.state.searchValue){var e,t={};return Object.keys(n.state.selectedSchema.fields).forEach(function(r){(e=n.state.selectedSchema.fields[r].alias||n.state.selectedSchema.fields[r].name)&&0===e.toLowerCase().indexOf(n.state.searchValue.toLowerCase())&&(t[r]=n.state.selectedSchema.fields[r])}),t}return n.state.selectedSchema.fields},n.onDsSelected=function(e){var t=e.currentTarget.value,r=n.dsManager.getDataSource(t);n.setSelectedDsAndSchema(r)},n.onSearchChange=function(e){n.setState({searchValue:e.target.value})},n.state={isDataSourceInited:!1,selectedDs:null,selectedSchema:null,dss:[],searchValue:""},n}return r(t,e),t.prototype.componentDidMount=function(){this.__unmount=!1,this.initDss()},t.prototype.componentDidUpdate=function(e,t){var n=this;if(this.state.isDataSourceInited||this.initDss(),!0===this.state.isDataSourceInited&&(this.props.dataSourceIds!==e.dataSourceIds||!1===t.isDataSourceInited)){var r=this.getDss(this.props.dataSourceIds);this.setState({dss:r}),this.state.selectedDs&&!r.every(function(e){return e.id!==n.state.selectedDs.id})||this.setSelectedDsAndSchema(r[0])}},t.prototype.componentWillUnmount=function(){this.__unmount=!0},t.prototype.render=function(){var e,t=this,n=this.getDsLabel(this.state.selectedDs);return o.jsx("div",{css:l.getStyle(this.props.theme),style:this.props.style,className:o.classNames("w-100 h-100",(e={},e[this.props.className]=!!this.props.className,e))},o.jsx("div",{className:"component-field-chooser w-100"},this.props.dataSourceIds&&0!==this.props.dataSourceIds.filter(function(e){return!!e}).length?o.jsx("div",null,!this.getWhetherDisableDsDropdown()&&this.state.dss?o.jsx("div",{className:"ds-name mt-3 pl-2 pr-2 d-flex justify-content-bewteen align-items-center"},o.jsx("div",{className:"w-100"},this.props.intl.formatMessage({id:"data",defaultMessage:s.default.data})),o.jsx(i.Input,{type:"select",value:this.state.selectedDs&&this.state.selectedDs.id||"",onChange:this.onDsSelected,className:"flex-shrink-0 ds-name-selected text-truncate"},this.state.dss.map(function(e,n){return o.jsx("option",{value:e.id,key:n,className:"ds-name-selected text-truncate"},t.getDsLabel(e))}))):o.jsx("div",{className:"pt-2 pr-2 pl-2 d-flex justify-content-between"},o.jsx("div",{className:"mr-2"},this.props.intl.formatMessage({id:"data",defaultMessage:s.default.data})),o.jsx("div",{className:"field-data-selected text-truncate",title:n},n)),o.jsx("div",null,o.jsx("div",{className:"d-inline-block w-100 pl-2 pr-2 pb-2 item-chooser-seach"},o.jsx(i.Icon,{icon:c,className:"text-dark search-icon"}),o.jsx(i.Input,{placeholder:this.props.intl.formatMessage({id:"search",defaultMessage:s.default.search}),onChange:this.onSearchChange,className:"d-inline-block search-input",value:this.state.searchValue}))),this.state.isDataSourceInited?o.jsx(u.default,{ds:this.state.selectedDs,fields:this.getFields(),onSelect:this.props.onSelect,selectedFields:this.getSelectedFields()}):o.jsx("div",{className:"jimu-small-loading"})):o.jsx("div",null,o.jsx("div",{className:"mt-2 ml-2 p-2"},this.props.intl.formatMessage({id:"pleaseSetDataSource",defaultMessage:s.default.pleaseSetDataSource})))))},t}(o.React.PureComponent),d=o.themeUtils.withTheme(o.injectIntl(p));t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomPicker=t.TwitterPicker=t.SwatchesPicker=t.SliderPicker=t.SketchPicker=t.PhotoshopPicker=t.MaterialPicker=t.HuePicker=t.GithubPicker=t.CompactPicker=t.ChromePicker=t.default=t.CirclePicker=t.BlockPicker=t.AlphaPicker=void 0;var r=n(169);Object.defineProperty(t,"AlphaPicker",{enumerable:!0,get:function(){return v(r).default}});var o=n(290);Object.defineProperty(t,"BlockPicker",{enumerable:!0,get:function(){return v(o).default}});var i=n(292);Object.defineProperty(t,"CirclePicker",{enumerable:!0,get:function(){return v(i).default}});var a=n(294);Object.defineProperty(t,"ChromePicker",{enumerable:!0,get:function(){return v(a).default}});var s=n(298);Object.defineProperty(t,"CompactPicker",{enumerable:!0,get:function(){return v(s).default}});var l=n(301);Object.defineProperty(t,"GithubPicker",{enumerable:!0,get:function(){return v(l).default}});var u=n(303);Object.defineProperty(t,"HuePicker",{enumerable:!0,get:function(){return v(u).default}});var c=n(305);Object.defineProperty(t,"MaterialPicker",{enumerable:!0,get:function(){return v(c).default}});var p=n(306);Object.defineProperty(t,"PhotoshopPicker",{enumerable:!0,get:function(){return v(p).default}});var d=n(312);Object.defineProperty(t,"SketchPicker",{enumerable:!0,get:function(){return v(d).default}});var f=n(315);Object.defineProperty(t,"SliderPicker",{enumerable:!0,get:function(){return v(f).default}});var h=n(319);Object.defineProperty(t,"SwatchesPicker",{enumerable:!0,get:function(){return v(h).default}});var g=n(322);Object.defineProperty(t,"TwitterPicker",{enumerable:!0,get:function(){return v(g).default}});var m=n(107);Object.defineProperty(t,"CustomPicker",{enumerable:!0,get:function(){return v(m).default}});var y=v(a);function v(e){return e&&e.__esModule?e:{default:e}}t.default=y.default},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(1);!function(e){e.AddResource="ADD_RESOURCE",e.UpdateResource="UPDATE_RESOURCE",e.ClearResources="CLEAR_RESOURCES"}(r||(r={})),t.BuilderStateResourceActionKeys=r;var i={AddResource:function(e,t){return{type:r.AddResource,resourceKey:e,resourceItemInfo:t}},UpdateResource:function(e,t){return{type:r.UpdateResource,resourceKey:e,resourceItemInfo:t}},ClearResources:function(){return{type:r.ClearResources}}};t.builderStateResourceActions=i;var a=function(){function e(){this.id="builder-state-resource-extension"}return e.prototype.getActions=function(){return Object.keys(r).map(function(e){return r[e]})},e.prototype.getInitLocalState=function(){return o.Immutable({})},e.prototype.getReducer=function(){return function(e,t,n){switch(t.type){case r.AddResource:case r.UpdateResource:return e.set(t.resourceKey,t.resourceItemInfo);case r.ClearResources:return o.Immutable({});default:return e}}},e.prototype.getStoreKey=function(){return"resourcesInfo"},e}();t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(2),s=n(23),l=n(139),u=n(141),c=n(142),p=n(144),d=n(4),f=function(e){function t(t){var n=e.call(this,t)||this;return n.getStyle=function(e){var t=e&&e.colors&&e.colors.grays&&e.colors.grays.gray300||"#ccc",n=e&&e.colors&&e.colors.cyan||"blue",r=i.polished.rgba(t,.5);return window.jimuConfig.isInBuilder?i.css(h||(h=o(["\n      .widget-builder-linksetting {\n        .linksetting-list {\n          .view-border{\n            border-width: 1px;\n            border-style: solid;\n          }\n          .linksetting-list-item {\n            height: ","rem;\n            cursor: pointer;\n\n            &:hover {\n              background-color: ",";\n            }\n          }\n\n          .linksetting-list-select {\n            background-color: ",";\n          }\n        }\n\n        select {\n          padding-top: ","rem !important;\n        }\n\n        .itemselected {\n          background-color: "," !important;\n        }\n\n        .btn-primary {\n          background-color: #00A6B6 !important;\n          border-color: #00A6B6 !important;\n          color: #ffffff !important;\n        }\n\n        .form-check-input {\n          span {\n            background: #00A6B6 !important;\n          }\n        }\n\n        .form-check-input:hover {\n          border-color: gray;\n        }\n\n        input[type='radio'].form-check-input {\n          -webkit-appearance: none;\n          -moz-appearance: none;\n          background: transparent;\n          border: 1px solid #000;\n          width: 16px;\n          height: 16px;\n          border-radius: 50%;\n          transition: all 0.2s ease;\n          &:before {\n          content: '';\n          display: block;\n          position: absolute;\n          width: 0;\n          height: 0;\n          border-radius: 50%;\n          background: #00A6B6 !important;\n          margin: 8px;\n          transition: all 0.2s ease-out;\n          }\n          &:hover {\n          border-color: #00A6B6 !important;\n          }\n          &:checked {\n          &:before {\n              width: 8px;\n              height: 8px;\n              margin: 3px;\n          }\n          }\n        }\n        .link-setting-cursor-pointer{\n          cursor: pointer;\n        }\n      }\n    "],["\n      .widget-builder-linksetting {\n        .linksetting-list {\n          .view-border{\n            border-width: 1px;\n            border-style: solid;\n          }\n          .linksetting-list-item {\n            height: ","rem;\n            cursor: pointer;\n\n            &:hover {\n              background-color: ",";\n            }\n          }\n\n          .linksetting-list-select {\n            background-color: ",";\n          }\n        }\n\n        select {\n          padding-top: ","rem !important;\n        }\n\n        .itemselected {\n          background-color: "," !important;\n        }\n\n        .btn-primary {\n          background-color: #00A6B6 !important;\n          border-color: #00A6B6 !important;\n          color: #ffffff !important;\n        }\n\n        .form-check-input {\n          span {\n            background: #00A6B6 !important;\n          }\n        }\n\n        .form-check-input:hover {\n          border-color: gray;\n        }\n\n        input[type='radio'].form-check-input {\n          -webkit-appearance: none;\n          -moz-appearance: none;\n          background: transparent;\n          border: 1px solid #000;\n          width: 16px;\n          height: 16px;\n          border-radius: 50%;\n          transition: all 0.2s ease;\n          &:before {\n          content: '';\n          display: block;\n          position: absolute;\n          width: 0;\n          height: 0;\n          border-radius: 50%;\n          background: #00A6B6 !important;\n          margin: 8px;\n          transition: all 0.2s ease-out;\n          }\n          &:hover {\n          border-color: #00A6B6 !important;\n          }\n          &:checked {\n          &:before {\n              width: 8px;\n              height: 8px;\n              margin: 3px;\n          }\n          }\n        }\n        .link-setting-cursor-pointer{\n          cursor: pointer;\n        }\n      }\n    "])),30/14,r,r,2/14,n):i.css(g||(g=o(["\n      .widget-builder-linksetting {\n        .item-common{\n          background: ",";\n        }\n        .view-border{\n          border: 1px solid ",";\n        }\n        .linksetting-list {\n\n          .linksetting-list-item {\n            height: ","rem;\n            cursor: pointer;\n\n            &:hover {\n              background-color: ",";\n            }\n          }\n\n          .linksetting-list-select {\n            background-color: ",";\n          }\n        }\n\n        select {\n          padding-top: ","rem !important;\n        }\n\n        .itemselected {\n          background-color: "," !important;\n        }\n        .link-setting-cursor-pointer{\n          cursor: pointer;\n        }\n      }\n    "],["\n      .widget-builder-linksetting {\n        .item-common{\n          background: ",";\n        }\n        .view-border{\n          border: 1px solid ",";\n        }\n        .linksetting-list {\n\n          .linksetting-list-item {\n            height: ","rem;\n            cursor: pointer;\n\n            &:hover {\n              background-color: ",";\n            }\n          }\n\n          .linksetting-list-select {\n            background-color: ",";\n          }\n        }\n\n        select {\n          padding-top: ","rem !important;\n        }\n\n        .itemselected {\n          background-color: "," !important;\n        }\n        .link-setting-cursor-pointer{\n          cursor: pointer;\n        }\n      }\n    "])),e.colors.white,e.colors.grays.gray200,30/14,r,r,2/14,n)},n.getLinkTypeContent=function(){return n.props.isLinkPageSetting?i.jsx(a.Input,{type:"select",value:n.state.linkParam.linkType,onChange:n.linkTypeChange,className:"w-100"},i.jsx("option",{value:i.LinkType.WebAddress},n.props.intl.formatMessage({id:"webAddress",defaultMessage:d.default.webAddress}))):i.jsx(a.Input,{type:"select",value:n.state.linkParam.linkType,onChange:n.linkTypeChange,className:"w-100"},i.jsx("option",{value:i.LinkType.None},n.props.intl.formatMessage({id:"none",defaultMessage:d.default.none})),i.jsx("option",{value:i.LinkType.Page},n.props.intl.formatMessage({id:"page",defaultMessage:d.default.page})),i.jsx("option",{value:i.LinkType.View},n.props.intl.formatMessage({id:"view",defaultMessage:d.default.view})),i.jsx("option",{value:i.LinkType.WebAddress},n.props.intl.formatMessage({id:"webAddress",defaultMessage:d.default.webAddress})))},n.getLinkContent=function(e){switch(e){case i.LinkType.None:return null;case i.LinkType.Page:return i.jsx(l.default,{selectAreaMaxHeight:n.props.selectAreaMaxHeight,originLinkParam:n.state.originLinkParam,linkParam:n.state.linkParam,appConfig:n.props.appConfig,onLinkParamChange:n.linkParamChange,intl:n.props.intl});case i.LinkType.Dialog:return i.jsx(u.default,{selectAreaMaxHeight:n.props.selectAreaMaxHeight,linkParam:n.state.linkParam,appConfig:n.props.appConfig,onLinkParamChange:n.linkParamChange});case i.LinkType.View:return i.jsx(c.default,{selectAreaMaxHeight:n.props.selectAreaMaxHeight,originLinkParam:n.state.originLinkParam,linkParam:n.state.linkParam,appConfig:n.props.appConfig,onLinkParamChange:n.linkParamChange,browserSizeMode:n.props.browserSizeMode});case i.LinkType.WebAddress:return i.jsx(p.default,{selectAreaMaxHeight:n.props.selectAreaMaxHeight,originLinkParam:n.state.originLinkParam,linkParam:n.state.linkParam,onLinkParamChange:n.linkParamChange,dataSourceIds:n.props.dataSourceIds});default:return null}},n.linkTypeChange=function(e){var t=i.Immutable(n.state.linkParam);n.setState({linkParam:t.set("linkType",e.target.value)})},n.radioOpenTypeChange=function(e){var t=i.Immutable(n.state.linkParam);t=t.set("openType",e),n.setState({linkParam:t})},n.linkParamChange=function(e,t){t?e&&n.state.linkParam&&e.linkType===n.state.linkParam.linkType&&n.setState({linkParam:e}):n.setState({linkParam:e})},n.settingConfirm=function(){var e=i.Immutable(n.state.linkParam);n.setState({originLinkParam:e}),n.props.onSettingConfirm(e)},n}return r(t,e),t.prototype.componentWillMount=function(){if(this.props.linkParam&&this.props.linkParam.linkType)this.setState({linkParam:i.Immutable(this.props.linkParam),originLinkParam:i.Immutable(this.props.linkParam)});else{var e={linkType:i.LinkType.None,openType:s.OpenTypes.CurrentWindow};this.setState({linkParam:i.Immutable(e),originLinkParam:i.Immutable(e)})}},t.prototype.render=function(){var e=this;if(this.props.appConfig){var t=this.getLinkTypeContent(),n=this.getLinkContent(this.state.linkParam.linkType);return i.jsx("div",{css:this.getStyle(this.props.theme),className:i.classNames(this.props.className,"w-100 h-100")},i.jsx("div",{className:"widget-builder-linksetting w-100 h-100"},i.jsx("div",{style:{position:"relative"},className:"w-100 h-100"},i.jsx(a.Container,null,i.jsx(a.Row,{className:"mb-3"},this.props.intl.formatMessage({id:"linkTo",defaultMessage:d.default.linkTo})),i.jsx(a.Row,{className:"mb-3"},t),this.state.linkParam.linkType!==i.LinkType.None?i.jsx("div",null,i.jsx(a.Row,{className:"mb-3"},n),i.jsx(a.Row,{className:"mb-3"},this.props.intl.formatMessage({id:"openIn",defaultMessage:d.default.openIn})),i.jsx(a.Container,null,i.jsx(a.Row,{className:"mb-3"},i.jsx(a.Input,{onChange:function(){return e.radioOpenTypeChange(s.OpenTypes.CurrentWindow)},id:"link-setting-app-window",type:"radio",checked:this.state.linkParam.openType===s.OpenTypes.CurrentWindow}),i.jsx(a.Label,{for:"link-setting-app-window",className:"ml-2 link-setting-cursor-pointer"},this.props.intl.formatMessage({id:"appWindow",defaultMessage:d.default.appWindow}))),i.jsx(a.Row,{className:"mb-3"},i.jsx(a.Input,{onChange:function(){return e.radioOpenTypeChange(s.OpenTypes.TopWindow)},id:"link-setting-top-window",type:"radio",checked:this.state.linkParam.openType===s.OpenTypes.TopWindow}),i.jsx(a.Label,{for:"link-setting-top-window",className:"ml-2 link-setting-cursor-pointer"},this.props.intl.formatMessage({id:"topWindow",defaultMessage:d.default.topWindow}))),i.jsx(a.Row,{className:"mb-3"},i.jsx(a.Input,{onChange:function(){return e.radioOpenTypeChange(s.OpenTypes.NewWindow)},id:"link-setting-new-window",type:"radio",checked:this.state.linkParam.openType===s.OpenTypes.NewWindow}),i.jsx(a.Label,{for:"link-setting-new-window",className:"ml-2 link-setting-cursor-pointer"},this.props.intl.formatMessage({id:"newWindow",defaultMessage:d.default.newWindow}))))):null),i.jsx("div",{className:"w-100",style:{position:"absolute",bottom:this.props.okButtonBottom?this.props.okButtonBottom:"0rem"}},i.jsx(a.Button,{className:"w-100 text-dark link-setting-ok-btn",color:"primary",onClick:this.settingConfirm},this.props.intl.formatMessage({id:"ok",defaultMessage:i.defaultMessages.ok}))))))}return null},t.prototype.componentDidMount=function(){this.props.isLinkPageSetting&&this.linkTypeChange({target:{value:i.LinkType.WebAddress}})},t}(i.React.PureComponent);t._LinkSetting=f;var h,g,m=i.injectIntl(i.themeUtils.withTheme(f));t.default=i.ReactRedux.connect(function(e){return{appConfig:window&&window.jimuConfig&&window.jimuConfig.isBuilder?e.appStateInBuilder.appConfig:e.appConfig,browserSizeMode:window&&window.jimuConfig&&window.jimuConfig.isBuilder?e.appStateInBuilder.browserSizeMode:e.browserSizeMode}})(m)},function(e,t,n){"use strict";var r=n(67);function o(){}e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=o,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EXP_PART_PREFIX="part",t.EXP_CONTAINER_PREFIX="expression",function(e){e.Part="PART",e.Char="CHAR"}(t.ExpSelectionType||(t.ExpSelectionType={})),function(e){e.Field="FIELD",e.DataSource="DATASOURCE",e.Function="FUNCTION"}(t.PopoverType||(t.PopoverType={}))},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(16),s=n(19),l=function(e){function t(t){var n=e.call(this,t)||this;return n.getDsLabel=function(){var e=a.getDsManager(),t=e&&e.getDataSource(n.props.dataSourceId);return t?t.label:null},n}return r(t,e),t.prototype.render=function(){var e;return i.React.createElement(s.default,o({},this.props,{className:i.classNames("field-exp",(e={},e[this.props.className]=!!this.props.className,e["error-exp"]=this.props.isError,e["ds-disabled-exp"]=this.props.isDsDisabled,e)),style:this.props.style,title:this.getDsLabel(),tabIndex:0}))},t}(i.React.PureComponent);t.default=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(19),s=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.render=function(){var e;return i.React.createElement(a.default,o({},this.props,{className:i.classNames("number-exp",(e={},e[this.props.className]=!!this.props.className,e)),style:this.props.style,tabIndex:0}))},t}(i.React.PureComponent);t.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(19),s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return r(t,e),t.prototype.render=function(){return i.React.createElement(a.default,o({},this.props,{className:"unknown-exp"}))},t}(i.React.PureComponent);t.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(19),s=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.render=function(){return i.React.createElement(a.default,o({},this.props,{className:"operator-exp"}))},t}(i.React.PureComponent);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Attribute="ATTRIBUTE",e.Statistics="STATISTICS",e.Expression="EXPRESSION"}(t.ExpressionFrom||(t.ExpressionFrom={}))},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M19.637 15.866L30.951 27.18a2.667 2.667 0 0 1-3.771 3.771L15.866 19.637 4.552 30.951A2.667 2.667 0 0 1 .781 27.18l11.314-11.314L.781 4.552A2.667 2.667 0 0 1 4.552.781l11.314 11.314L27.18.781a2.667 2.667 0 0 1 3.771 3.771L19.637 15.866z"});function a(e){return o.createElement("svg",r({width:32,height:32,viewBox:"0 0 32 32"},e),i)}e.exports=a,a.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),o=n(1);function i(e,t,n,r){var o=t*r/2-n/2;return Math.min(o,Math.max(e,-o))}function a(e,t){return Math.min(e,Math.max(0,t))}t.getCropSize=function(e,t,n){return e>=t*n?{width:t*n,height:t}:{width:e,height:e/n}},t.restrictPosition=function(e,t,n,r){return{x:i(e.x,t.width,n.width,r),y:i(e.y,t.height,n.height,r)}},t.getDistanceBetweenPoints=function(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))},t.computeCroppedArea=function(e,t,n,r){var o={x:a(100,((t.width-n.width/r)/2-e.x/r)/t.width*100),y:a(100,((t.height-n.height/r)/2-e.y/r)/t.height*100),width:a(100,n.width/t.width*100/r),height:a(100,n.height/t.height*100/r)};return{croppedAreaPercentages:o,croppedAreaPixels:{x:a(t.naturalWidth,o.x*t.naturalWidth/100),y:a(t.naturalHeight,o.y*t.naturalHeight/100),width:a(t.naturalWidth,o.width*t.naturalWidth/100),height:a(t.naturalHeight,o.height*t.naturalHeight/100)}}},t.getCenter=function(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}},t.getCroppedImgBlobUrl=function(e,t,n){return new Promise(function(i,a){var s=new Image;s.setAttribute("crossOrigin","anonymous"),s.src=e,s.addEventListener("load",function(){var e=document.createElement("canvas");e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(s,t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.toBlob(function(e){var t=URL.createObjectURL(e),a={file:t,fileName:(new Date).getTime().toString()+".jpeg",type:r.ResourceType.Image,url:t,blobUrl:t,referedIds:[],fileFormat:"image/jpeg",originId:n};if(window.jimuConfig.isBuilder){var s=r.AppResourceManager.getInstance();return s.getBlobByBlobUrl(a.file).then(function(e){a.file=e,s.upLoadFileToResource(a),a.originId&&r.AppResourceManager.getInstance().updateImageResourceItemInfo(a)}),i(a)}return o.moduleLoader.getModuleSync("jimu-for-builder/for-app-inbuilder").appBuilderSync.letBuilderAddResource(a),i(a)},"image/jpeg",.8)}),s.addEventListener("error",function(){return a()})})}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(20))},function(e,t,n){var r=n(174),o=n(22);e.exports=function(e,t){return e&&r(e,t,o)}},function(e,t,n){var r=n(176),o=n(79),i=n(9),a=n(43),s=n(80),l=n(81),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=i(e),c=!n&&o(e),p=!n&&!c&&a(e),d=!n&&!c&&!p&&l(e),f=n||c||p||d,h=f?r(e.length,String):[],g=h.length;for(var m in e)!t&&!u.call(e,m)||f&&("length"==m||p&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,g))||h.push(m);return h}},function(e,t,n){var r=n(177),o=n(12),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},function(e,t){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var o=typeof e;return!!(t=null==t?n:t)&&("number"==o||"symbol"!=o&&r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var r=n(179),o=n(45),i=n(46),a=i&&i.isTypedArray,s=a?o(a):r;e.exports=s},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var r=n(17),o=n(13),i="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",l="[object Proxy]";e.exports=function(e){if(!o(e))return!1;var t=r(e);return t==a||t==s||t==i||t==l}},function(e,t,n){var r=n(85);e.exports=function(e){return"function"==typeof e?e:r}},function(e,t){e.exports=function(e){return e}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){var r=n(212),o=n(12);e.exports=function e(t,n,i,a,s){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:r(t,n,i,a,e,s))}},function(e,t,n){var r=n(213),o=n(216),i=n(217),a=1,s=2;e.exports=function(e,t,n,l,u,c){var p=n&a,d=e.length,f=t.length;if(d!=f&&!(p&&f>d))return!1;var h=c.get(e);if(h&&c.get(t))return h==t;var g=-1,m=!0,y=n&s?new r:void 0;for(c.set(e,t),c.set(t,e);++g<d;){var v=e[g],b=t[g];if(l)var x=p?l(b,v,g,t,e,c):l(v,b,g,e,t,c);if(void 0!==x){if(x)continue;m=!1;break}if(y){if(!o(t,function(e,t){if(!i(y,t)&&(v===e||u(v,e,n,l,c)))return y.push(t)})){m=!1;break}}else if(v!==b&&!u(v,b,n,l,c)){m=!1;break}}return c.delete(e),c.delete(t),m}},function(e,t,n){var r=n(10).Uint8Array;e.exports=r},function(e,t,n){var r=n(92),o=n(53),i=n(22);e.exports=function(e){return r(e,i,o)}},function(e,t,n){var r=n(93),o=n(9);e.exports=function(e,t,n){var i=t(e);return o(e)?i:r(i,n(e))}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(13);e.exports=function(e){return e==e&&!r(e)}},function(e,t){e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},function(e,t,n){var r=n(98),o=n(35);e.exports=function(e,t){for(var n=0,i=(t=r(t,e)).length;null!=e&&n<i;)e=e[o(t[n++])];return n&&n==i?e:void 0}},function(e,t,n){var r=n(9),o=n(54),i=n(230),a=n(233);e.exports=function(e,t){return r(e)?e:o(e,t)?[e]:i(a(e))}},function(e,t,n){var r=n(77),o=n(242)(r);e.exports=o},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},function(e,t,n){var r=n(102),o=n(50),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];i.call(e,t)&&o(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(246);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var r=n(78),o=n(249),i=n(28);e.exports=function(e){return i(e)?r(e,!0):o(e)}},function(e,t,n){var r=n(93),o=n(48),i=n(53),a=n(94),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,i(e)),e=o(e);return t}:a;e.exports=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Checkboard=void 0;var r=a(n(0)),o=a(n(3)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(274));function a(e){return e&&e.__esModule?e:{default:e}}var s=t.Checkboard=function(e){var t=e.white,n=e.grey,a=e.size,s=e.renderers,l=e.borderRadius,u=e.boxShadow,c=(0,o.default)({default:{grid:{borderRadius:l,boxShadow:u,absolute:"0px 0px 0px 0px",background:"url("+i.get(t,n,a,s.canvas)+") center left"}}});return r.default.createElement("div",{style:c.grid})};s.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},t.default=s},function(e,t,n){var r=n(13),o=n(281),i=n(282),a="Expected a function",s=Math.max,l=Math.min;e.exports=function(e,t,n){var u,c,p,d,f,h,g=0,m=!1,y=!1,v=!0;if("function"!=typeof e)throw new TypeError(a);function b(t){var n=u,r=c;return u=c=void 0,g=t,d=e.apply(r,n)}function x(e){var n=e-h;return void 0===h||n>=t||n<0||y&&e-g>=p}function w(){var e=o();if(x(e))return S(e);f=setTimeout(w,function(e){var n=t-(e-h);return y?l(n,p-(e-g)):n}(e))}function S(e){return f=void 0,v&&u?b(e):(u=c=void 0,d)}function C(){var e=o(),n=x(e);if(u=arguments,c=this,h=e,n){if(void 0===f)return function(e){return g=e,f=setTimeout(w,t),m?b(e):d}(h);if(y)return f=setTimeout(w,t),b(h)}return void 0===f&&(f=setTimeout(w,t)),d}return t=i(t)||0,r(n)&&(m=!!n.leading,p=(y="maxWait"in n)?s(i(n.maxWait)||0,t):p,v="trailing"in n?!!n.trailing:v),C.cancel=function(){void 0!==f&&clearTimeout(f),g=0,u=h=c=f=void 0},C.flush=function(){return void 0===f?d:S(o())},C}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorWrap=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=u(i),s=u(n(106)),l=u(n(11));function u(e){return e&&e.__esModule?e:{default:e}}var c=t.ColorWrap=function(e){var t=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.handleChange=function(e,n){if(l.default.simpleCheckForValidColor(e)){var r=l.default.toState(e,e.h||t.state.oldHue);t.setState(r),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,r,n),t.props.onChange&&t.props.onChange(r,n)}},t.handleSwatchHover=function(e,n){if(l.default.simpleCheckForValidColor(e)){var r=l.default.toState(e,e.h||t.state.oldHue);t.setState(r),t.props.onSwatchHover&&t.props.onSwatchHover(r,n)}},t.state=r({},l.default.toState(e.color,0)),t.debounce=(0,s.default)(function(e,t,n){e(t,n)},100),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.PureComponent||i.Component),o(n,[{key:"componentWillReceiveProps",value:function(e){this.setState(r({},l.default.toState(e.color,this.state.oldHue)))}},{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),a.default.createElement(e,r({},this.props,this.state,{onChange:this.handleChange},t))}}]),n}();return t.propTypes=r({},e.propTypes),t.defaultProps=r({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t};t.default=c},function(e,t,n){"use strict";n.r(t),n.d(t,"red",function(){return r}),n.d(t,"pink",function(){return o}),n.d(t,"purple",function(){return i}),n.d(t,"deepPurple",function(){return a}),n.d(t,"indigo",function(){return s}),n.d(t,"blue",function(){return l}),n.d(t,"lightBlue",function(){return u}),n.d(t,"cyan",function(){return c}),n.d(t,"teal",function(){return p}),n.d(t,"green",function(){return d}),n.d(t,"lightGreen",function(){return f}),n.d(t,"lime",function(){return h}),n.d(t,"yellow",function(){return g}),n.d(t,"amber",function(){return m}),n.d(t,"orange",function(){return y}),n.d(t,"deepOrange",function(){return v}),n.d(t,"brown",function(){return b}),n.d(t,"grey",function(){return x}),n.d(t,"blueGrey",function(){return w}),n.d(t,"darkText",function(){return S}),n.d(t,"lightText",function(){return C}),n.d(t,"darkIcons",function(){return I}),n.d(t,"lightIcons",function(){return _}),n.d(t,"white",function(){return P}),n.d(t,"black",function(){return O});var r={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},o={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},i={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},a={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},s={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},l={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},u={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},c={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},p={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},d={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},f={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},h={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},g={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},m={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},y={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},v={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},b={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},x={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},w={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},S={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},C={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},I={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},_={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},P="#ffffff",O="#000000";t.default={red:r,pink:o,purple:i,deepPurple:a,indigo:s,blue:l,lightBlue:u,cyan:c,teal:p,green:d,lightGreen:f,lime:h,yellow:g,amber:m,orange:y,deepOrange:v,brown:b,grey:x,blueGrey:w,darkText:S,lightText:C,darkIcons:I,lightIcons:_,white:P,black:O}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var i,a,s=n(1),l=n(2),u=n(110),c=n(62),p=function(e){function t(t){var n=e.call(this,t)||this;return n.getStyle=function(){return s.css(i||(i=o(["\n      width: ",";\n      height:",";\n    "],["\n      width: ",";\n      height:",";\n    "])),s.polished.rem(52),s.polished.rem(26))},n.userSelectNone=function(){return s.css(a||(a=o(["\n      * {\n        user-select: none;\n      }\n    "],["\n      * {\n        user-select: none;\n      }\n    "])))},n.toRgba=function(e){if(!e)return"";var t=e.rgb;return t?"rgba("+t.r+","+t.g+","+t.b+","+t.a+")":e.hex},n.colorChange=function(e){var t=n.props.changeOnClose,r=n.toRgba(e);t?n.setState({color:r}):n.onChange(r)},n.onChange=function(e){n.setState({color:void 0}),n.props.onChange(e)},n.handleClick=function(){n.setState({showPicker:!n.state.showPicker}),n.props.onClick()},n.state={showPicker:!1},n}return r(t,e),t.prototype.componentDidUpdate=function(e,t){if(this.props.changeOnClose){var n=this.state,r=n.showPicker,o=n.color;r===t.showPicker||r||this.onChange(o)}},t.prototype.render=function(){var e=this,t=this.props,n=t.title,r=t.color,o=t.placement,i=t.style,a=t.innerClassName,p=t.className,d=t.icon,f=t.presetColors,h=this.state.color||r;return s.jsx("div",{css:this.getStyle(),style:i,className:s.classNames(p,"jimu-builder--color d-flex")},s.jsx(u.ColorBlock,{innerRef:function(t){return e.blockNode=t},title:n,color:h,icon:d,onClick:this.handleClick}),s.jsx(l.Popper,{css:this.userSelectNone(),className:a,placement:o,open:this.state.showPicker,container:"body",offset:[0,10],reference:this.blockNode,toggle:function(){return e.setState({showPicker:!e.state.showPicker})},zIndex:51},s.jsx(c.SketchPicker,{presetColors:f,color:h,onChangeComplete:this.colorChange})))},t.count=0,t.defaultProps={presetColors:["#FFFFFF","#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B",{color:"rgba(0, 0, 0, 0)",title:"transparent"}],placement:"bottom",onChange:function(){},onClick:function(){}},t}(s.React.PureComponent);t._Color=p,t.Color=s.themeUtils.withTheme(p)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(2),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getStyle=function(e){var t=e&&e.colors?e.colors.grays.gray300:"#4d545b",n=e&&e.colors?e.colors.white:"#ffffff";return a.css(i||(i=o(["\n      width: 100%;\n      height: 100%;\n      border-radius: 2px;\n      > div {\n        border: 1px "," solid;\n        border-top-right-radius: 0;\n        border-bottom-right-radius: 0;\n        flex-basis: 50%;\n        flex-grow: 1;\n        cursor: pointer;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        &:first-of-type {\n            border-right: 1px "," solid;\n            margin-right: -2px;\n        }\n        background: linear-gradient(to bottom right, "," calc(50% - 1px), ",", "," calc(50% + 1px));\n      }\n      button {\n        border-top-left-radius: 0;\n        border-bottom-left-radius: 0;\n      }\n    "],["\n      width: 100%;\n      height: 100%;\n      border-radius: 2px;\n      > div {\n        border: 1px "," solid;\n        border-top-right-radius: 0;\n        border-bottom-right-radius: 0;\n        flex-basis: 50%;\n        flex-grow: 1;\n        cursor: pointer;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        &:first-of-type {\n            border-right: 1px "," solid;\n            margin-right: -2px;\n        }\n        background: linear-gradient(to bottom right, "," calc(50% - 1px), ",", "," calc(50% + 1px));\n      }\n      button {\n        border-top-left-radius: 0;\n        border-bottom-left-radius: 0;\n      }\n    "])),t,t,n,t,n)},t}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.id,n=e.title,r=e.style,o=e.className,i=e.icon,l=e.color,u=e.theme,c=e.innerRef,p=e.onClick,d=l?{background:l}:{};return a.jsx("div",{ref:function(e){return c(e)},id:t,title:n,css:this.getStyle(u),style:r,className:a.classNames(o,"jimu-build-color-block d-flex"),onClick:p},a.jsx("div",{style:d}),i&&a.jsx(s.Button,{icon:!0,size:"sm",color:"secondary"},a.jsx(s.Icon,{size:13,icon:i})))},t.count=0,t.defaultProps={onClick:function(){}},t}(a.React.PureComponent);t._ColorBlock=l,t.ColorBlock=a.themeUtils.withTheme(l)},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(336)),r(n(341)),r(n(109)),r(n(342)),r(n(349)),r(n(352)),r(n(355)),r(n(110)),r(n(357))},function(e,t){e.exports=r},function(e,t,n){"use strict";(function(e){var n=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some(function(e,r){return e[0]===t&&(n=r,!0)}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];e.call(t,o[1],o[0])}},t}()}(),r="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,o=void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),i="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},a=2;var s=20,l=["top","right","bottom","left","width","height","size","weight"],u="undefined"!=typeof MutationObserver,c=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,o=0;function s(){n&&(n=!1,e()),r&&u()}function l(){i(s)}function u(){var e=Date.now();if(n){if(e-o<a)return;r=!0}else n=!0,r=!1,setTimeout(l,t);o=e}return u}(this.refresh.bind(this),s)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},e.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),u?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;l.some(function(e){return!!~n.indexOf(e)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),p=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},d=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||o},f=b(0,0,0,0);function h(e){return parseFloat(e)||0}function g(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(t,n){return t+h(e["border-"+n+"-width"])},0)}function m(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return f;var r=d(e).getComputedStyle(e),o=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],i=e["padding-"+o];t[o]=h(i)}return t}(r),i=o.left+o.right,a=o.top+o.bottom,s=h(r.width),l=h(r.height);if("border-box"===r.boxSizing&&(Math.round(s+i)!==t&&(s-=g(r,"left","right")+i),Math.round(l+a)!==n&&(l-=g(r,"top","bottom")+a)),!function(e){return e===d(e).document.documentElement}(e)){var u=Math.round(s+i)-t,c=Math.round(l+a)-n;1!==Math.abs(u)&&(s-=u),1!==Math.abs(c)&&(l-=c)}return b(o.left,o.top,s,l)}var y="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof d(e).SVGGraphicsElement}:function(e){return e instanceof d(e).SVGElement&&"function"==typeof e.getBBox};function v(e){return r?y(e)?function(e){var t=e.getBBox();return b(0,0,t.width,t.height)}(e):m(e):f}function b(e,t,n,r){return{x:e,y:t,width:n,height:r}}var x=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=b(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=v(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),w=function(){return function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,o=e.height,i="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(i.prototype);return p(a,{x:t,y:n,width:r,height:o,top:n,right:t+r,bottom:o+n,left:t}),a}(t);p(this,{target:e,contentRect:n})}}(),S=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new x(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new w(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),C="undefined"!=typeof WeakMap?new WeakMap:new n,I=function(){return function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=c.getInstance(),r=new S(t,n,this);C.set(this,r)}}();["observe","unobserve","disconnect"].forEach(function(e){I.prototype[e]=function(){var t;return(t=C.get(this))[e].apply(t,arguments)}});var _=void 0!==o.ResizeObserver?o.ResizeObserver:I;t.a=_}).call(this,n(20))},function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(this,n(20))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(1);!function(e){e.SelectTemplate="SELECT_TEMPLATE",e.OpenChooseWidgetPopup="OPEN_CHOOSE_WIDGET_POPUP",e.CloseChooseWidgetPopup="CLOSE_CHOOSE_WIDGET_POPUP",e.WidgetSettingClassLoaded="WIDGET_SETTING_CLASS_LOADED",e.WidgetItemSettingClassLoaded="WIDGET_ITEM_SETTING_CLASS_LOADED",e.WidgetRemoved="WIDGET_REMOVED",e.ChangeCurrentApp="CHANGE_CURRENT_APP",e.RefreshAppList="REFRSH_APPLIST",e.SetLayoutTools="SET_LAYOUT_TOOLS"}(r||(r={})),t.BuilderStateActionTypes=r,t.builderActionKeys=r;var i={selectTemplate:function(e){return{type:r.SelectTemplate,templateName:e}},refreshAppListAction:function(e){return{type:r.RefreshAppList,isRefresh:e}},openChooseWidgetPopup:function(e,t){return{type:r.OpenChooseWidgetPopup,layoutId:e,layoutItemId:t}},closeChooseWidgetPopup:function(){return{type:r.CloseChooseWidgetPopup}},widgetSettingClassLoaded:function(e){return{type:r.WidgetSettingClassLoaded,widgetId:e}},widgetItemSettingClassLoaded:function(e){return{type:r.WidgetItemSettingClassLoaded,widgetId:e}},widgetRemoved:function(e){return{type:r.WidgetRemoved,widgetId:e}},changeCurrentApp:function(e){return{type:r.ChangeCurrentApp,appId:e}},setLayoutTools:function(e){return{type:r.SetLayoutTools,tools:e}}};t.builderActions=i;var a=function(){function e(){this.id="builder-state-redux-store-extension"}return e.prototype.getActions=function(){return Object.keys(r).map(function(e){return r[e]})},e.prototype.getInitLocalState=function(){return o.Immutable({templateName:null,showChooseWidgetPopup:!1,currentAppId:null,refreshAppList:!1,isMobile:!1})},e.prototype.getReducer=function(){var e=this;return function(t,n,i){switch(n.type){case r.SelectTemplate:return t.set("templateName",n.templateName);case r.OpenChooseWidgetPopup:return t.set("showChooseWidgetPopup",!0).set("currentLayout",o.Immutable({layoutId:n.layoutId,layoutItemId:n.layoutItemId}));case r.CloseChooseWidgetPopup:return t.set("showChooseWidgetPopup",!1);case r.WidgetSettingClassLoaded:return t.setIn(["widgetsSettingRuntimeInfo",n.widgetId,"isClassLoaded"],!0);case r.WidgetItemSettingClassLoaded:return t.setIn(["widgetsSettingRuntimeInfo",n.widgetId,"isItemClassLoaded"],!0);case r.WidgetRemoved:return t.set("widgetsSettingRuntimeInfo",t.widgetsSettingRuntimeInfo.without(n.widgetId));case r.ChangeCurrentApp:return(t=e.getInitLocalState()).set("currentAppId",n.appId).set("widgetsSettingRuntimeInfo",{});case r.RefreshAppList:return t.set("refreshAppList",n.isRefresh);case r.SetLayoutTools:return t.set("toolbarConfig",n.tools);default:return t}}},e.prototype.getStoreKey=function(){return"builder"},e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(1),i=n(132);!function(e){e.InBuilderPutAppConfigIntoHistory="IN_BUILDER_PUT_APPCONFIG_INTO_HISTORY",e.InBuilderAppConfigUndo="IN_BUILDER_APPCONFIG_UNDO",e.InBuilderAppConfigRedo="IN_BUILDER_APPCONFIG_REDO",e.InBuilderAppConfigRedoClear="IN_BUILDER_APPCONFIG_REDOCLEAR",e.InBuilderAppConfigClear="IN_BUILDER_APPCONFIG_CLEAR"}(r||(r={})),t.AppStateHistoryActionKeys=r;var a={InBuilderAppConfigUndo:function(){return{type:r.InBuilderAppConfigUndo}},InBuilderAppConfigRedo:function(){return{type:r.InBuilderAppConfigRedo}},InBuilderPutAppConfigIntoHistory:function(e){return{type:r.InBuilderPutAppConfigIntoHistory,appState:e}},InBuilderAppConfigRedoClear:function(){return{type:r.InBuilderAppConfigRedoClear}},InBuilderAppConfigClear:function(){return{type:r.InBuilderAppConfigClear}}};t.appStateHistoryActions=a;var s=function(){function e(){this.id="app-state-history-extension"}return e.prototype.getActions=function(){return[r.InBuilderPutAppConfigIntoHistory,r.InBuilderAppConfigUndo,r.InBuilderAppConfigRedo,r.InBuilderAppConfigRedoClear,r.InBuilderAppConfigClear]},e.prototype.getInitLocalState=function(){return{past:[],future:[]}},e.prototype.getReducer=function(){var e=this;return function(t,n,o){switch(n.type){case r.InBuilderAppConfigUndo:return e.handleAppStateUndo(t);case r.InBuilderAppConfigRedo:return e.handleAppStateRedo(t);case r.InBuilderPutAppConfigIntoHistory:return e.handleAppStateAdd(t,n.appState);case r.InBuilderAppConfigRedoClear:return e.handleAppStateRedoClear(t);case r.InBuilderAppConfigClear:return e.handleAppStateClear(t);default:return t}}},e.prototype.handleAppStateUndo=function(e){if(e.past.length<2)return console.warn("Can not undo since no history there"),e;var t=e.past[e.past.length-2],n=e.past[e.past.length-1],r=e.past.slice(0,e.past.length-1),a=[n].concat(e.future);return o.lodash.defer(function(){i.publishAppConfigChangeToApp(t)}),e.merge({past:r,future:a})},e.prototype.handleAppStateRedo=function(e){if(e.future.length<1)return console.warn("Can not redo since no history there"),e;var t=e.future[0],n=e.future.slice(1),r=e.past.concat([t]);return o.lodash.defer(function(){i.publishAppConfigChangeToApp(t)}),e.merge({past:r,future:n})},e.prototype.handleAppStateAdd=function(e,t){if(null!==t&&(e.past.length>0&&e.past[e.past.length-1]!==t||0===e.past.length)){var n=e.past.concat([t]);return e.set("past",n)}return e},e.prototype.handleAppStateRedoClear=function(e){return e.set("future",[])},e.prototype.handleAppStateClear=function(e){return e.set("future",[]).set("past",[])},e.prototype.getStoreKey=function(){return"appStateHistory"},e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.AppConfigChanged="app_config_changed",e.ChangeAppMode="change_app_mode",e.ChangeSelectMode="change_select_mode",e.ChangePage="change_page",e.ChangeDialog="change_dialog",e.ChangeView="change_view",e.ChangeSelection="change_selection",e.ChangeWidgetsStateProp="change_widgets_state_prop",e.DraggingWidgetToApp="dragging_widget_to_app",e.EndDragWidgetToApp="end_drag_widget_to_app",e.BuilderTriggerKeyboard="builder_trigger_keyboard",e.ChangeBrowserSizeMode="change_browser_size_mode"}(t.ToAppMessage||(t.ToAppMessage={})),function(e){e.AppStateChanged="app_state_changed",e.PopupChooseWidget="popup_choose_widget",e.AppAddResource="app_add_resource",e.AppClearResources="app_clear_resources",e.AppTriggerKeyboard="app_trigger_keyboard",e.SetLayoutTools="app_set_layout_tools"}(t.ToBuilderMessage||(t.ToBuilderMessage={}))},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M4.103 7.873L16 19.25 27.897 7.873c.939-.898 2.46-.898 3.399 0s.939 2.353 0 3.251L17.7 24.127a2.481 2.481 0 0 1-3.399 0L.705 11.124c-.939-.898-.939-2.353 0-3.251s2.46-.898 3.399 0z"});function a(e){return o.createElement("svg",r({width:32,height:32,viewBox:"0 0 32 32"},e),i)}e.exports=a,a.default=a},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M1.521 5.693a.517.517 0 0 1-.708 0 .464.464 0 0 1 0-.677l2.833-2.71a.517.517 0 0 1 .708 0l2.833 2.71a.464.464 0 0 1 0 .677.517.517 0 0 1-.708 0L4 3.323l-2.479 2.37z"}),a=o.createElement("path",{d:"M0 0h8v8H0z",fill:"none"});function s(e){return o.createElement("svg",r({width:8,height:8,viewBox:"0 0 8 8"},e),i,a)}e.exports=s,s.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(2),s=n(16),l=n(4),u=n(40),c=n(159),p=n(161),d=n(162);t.ExpressionInputFrom=d.ExpressionInputFrom;var f=function(e){function t(t){var n,r=e.call(this,t)||this;return r.expressionFrom=((n={})[d.ExpressionInputFrom.Attribute]=r.props.intl.formatMessage({id:"attribute",defaultMessage:l.default.attribute}),n[d.ExpressionInputFrom.Statistics]=r.props.intl.formatMessage({id:"statistics",defaultMessage:l.default.statistics}),n[d.ExpressionInputFrom.Expression]=r.props.intl.formatMessage({id:"expression",defaultMessage:l.default.expression}),n[d.ExpressionInputFrom.Static]=r.props.intl.formatMessage({id:"static",defaultMessage:l.default.static}),n),r.toggleDropdown=function(){return r.setState({isDropdownOpen:!r.state.isDropdownOpen})},r.getSelectedExpFromExpression=function(){return r.props.expression&&r.props.expression.parts&&0!==r.props.expression.parts.length?1===r.props.expression.parts.length&&r.props.expression.parts[0].type===i.ExpressionPartType.String?r.props.from.some(function(e){return e===d.ExpressionInputFrom.Static})?d.ExpressionInputFrom.Static:r.props.from[0]:1===r.props.expression.parts.length&&r.props.expression.parts[0].type===i.ExpressionPartType.Field?r.props.from.some(function(e){return e===d.ExpressionInputFrom.Attribute})?d.ExpressionInputFrom.Attribute:r.props.from.some(function(e){return e===d.ExpressionInputFrom.Expression})?d.ExpressionInputFrom.Expression:r.props.from[0]:1===r.props.expression.parts.length&&r.props.expression.parts[0].type===i.ExpressionPartType.Function&&r.props.from.some(function(e){return e===d.ExpressionInputFrom.Statistics})?d.ExpressionInputFrom.Statistics:r.props.from.some(function(e){return e===d.ExpressionInputFrom.Expression})?d.ExpressionInputFrom.Expression:r.props.from[0]:r.props.from[0]},r.getWhetherFromExpBuilder=function(e){return e&&Object.keys(u.ExpressionFrom).some(function(t){return u.ExpressionFrom[t]===e})},r.getExpressionFrom=function(){return r.getWhetherFromExpBuilder(r.state.selectedExpFrom)?[r.state.selectedExpFrom]:[]},r.getStringFromExpression=function(){return r.props.expression&&1===r.props.expression.parts.length&&r.props.expression.parts[0].type===i.ExpressionPartType.String?r.props.expression.parts[0].exp.replace(/^"/,"").replace(/"$/,""):""},r.onInputBlur=function(e){var t=e.target.value,n={name:t,parts:[{type:i.ExpressionPartType.String,exp:'"'+t+'"'}]};r.props.onChange&&r.props.onChange(n)},r.onInputChange=function(e){r.setState({inputValue:e.target.value})},r.onExpChange=function(e){r.props.onChange&&r.props.onChange(e)},r.onExpFromChange=function(e){r.getWhetherFromExpBuilder(e)?r.props.openExpPopup():r.props.closeExpPopup(),r.setState({selectedExpFrom:e})},r.getWhetherExpDsDisabled=function(e){return!!e&&e.some(function(e){var t=s.getWhetherDsDisabled(e,r.props.dataSourceIds);if(t)return t;var n=!1;return e&&e.parts&&(n=r.getWhetherExpDsDisabled(e.parts)),t||n})},r.state={selectedExpFrom:r.getSelectedExpFromExpression(),isDropdownOpen:!1,inputValue:r.getStringFromExpression()},r}return r(t,e),t.prototype.render=function(){var e,t=this,n=this.getWhetherFromExpBuilder(this.state.selectedExpFrom),r=n?this.props.expression&&this.props.expression.name||"":this.state.inputValue,s=this.getWhetherExpDsDisabled(this.props.expression&&this.props.expression.parts);return i.jsx("div",{css:p.getStyle(this.props.theme),style:this.props.style,className:i.classNames("w-100 h-100",(e={},e[this.props.className]=!!this.props.className,e))},i.jsx("div",{className:"component-expression-input d-flex justify-content-between"},s&&n?i.jsx("div",{className:"w-100 text-truncate ds-disabled"},i.jsx("span",{title:r},r)):i.jsx(a.Input,{className:"float-right w-100",value:r,disabled:n,onChange:this.onInputChange,onBlur:this.onInputBlur,title:r}),i.jsx("div",{className:"ml-1 expression-builder-trigger"},i.jsx(a.Dropdown,{isOpen:this.state.isDropdownOpen,toggle:this.toggleDropdown,className:"flex-shrink-0 expression-builder-trigger-input"},i.jsx(a.DropdownToggle,{caret:!0,outline:!0,title:this.state.selectedExpFrom,className:"text-truncate"},""),i.jsx(a.DropdownMenu,null,this.props.from.map(function(e,n){return i.jsx(a.DropdownItem,{onClick:function(n){return t.onExpFromChange(e)},key:n},t.expressionFrom[e])}))))),this.props.isExpPopupOpen?i.jsx(c.default,o({},this.props,{onChange:this.onExpChange,from:this.getExpressionFrom(),isOpen:this.props.isExpPopupOpen,onClose:this.props.closeExpPopup})):null)},t}(i.React.PureComponent),h=i.themeUtils.withTheme(i.injectIntl(f));t.default=h},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(16),a=n(4),s=n(147),l=n(149),u=n(152),c=n(68),p=n(69),d=n(153),f=n(154),h=n(70),g=n(71),m=n(72),y=n(155),v=n(156),b=n(41),x=function(e){function t(n){var r=e.call(this,n)||this;return r.dsManager=i.getDsManager(),r.__unmount=!1,r.expressionString="",r.initDss=function(){r.dsManager.createAllDataSources().then(function(e){r.__unmount||r.setState({isDataSourceInited:!0})},function(e){r.__unmount||(r.setState({isDataSourceInited:!0}),console.error(e))})},r.setSelectionToEnd=function(){r.setState({editablePartId:null,isEditable:!0,isPopoverOpen:!1,expSelection:{partId:r.props.expression&&r.props.expression.parts&&b.getParentPartId(r.id,""+(r.props.expression.parts.length-1))||b.getParentPartId(r.id,"0"),type:c.ExpSelectionType.Part,toStart:!1}})},r.getWhetherLoseFocus=function(){var e=window.getSelection&&window.getSelection();return!(e&&r.contentEditableContainer&&r.contentEditableContainer.current.contains(e.focusNode)&&r.contentEditableContainer.current!==e.focusNode)},r.getWhetherDssAreEqual=function(e,t){return e&&t&&e.length===t.length?e.every(function(e){return!!t.find(function(t){return t===e})})&&t.every(function(t){return!!e.find(function(e){return t===e})}):!e&&!t},r.getDss=function(e){return e?e.asMutable().filter(function(e){return!!e}).map(function(e){var t=r.dsManager.getDataSource(e);return t||null}).filter(function(e){return!!e}):[]},r.getExpressionString=function(e){var t=e||r.contentEditableContainer?r.contentEditableContainer.current:document,n=t&&t.querySelector("#"+r.id);return n?n.textContent.replace(/\ufeff/g,""):""},r.getComponent=function(e,t){var n=b.getParentPartId(r.id,t);switch(e.type){case o.ExpressionPartType.Field:return o.jsx(p.default,{exp:e.exp,id:n,key:t,isDsDisabled:i.getWhetherDsDisabled(e,r.props.dataSourceIds),isEditable:r.state.editablePartId===n,dataSourceId:e.dataSourceId,isError:!i.getWhetherFieldInDs(e.dataSourceId,e.jimuFieldName)});case o.ExpressionPartType.String:return o.jsx(d.default,{exp:e.exp,id:n,key:t,isEditable:r.state.editablePartId===n});case o.ExpressionPartType.Operator:return o.jsx(m.default,{exp:e.exp,id:n,key:t,isEditable:r.state.editablePartId===n});case o.ExpressionPartType.Function:return o.jsx(f.default,{exp:e.exp,parts:e.parts,id:n,key:t,isDsDisabled:i.getWhetherDsDisabled(e,r.props.dataSourceIds),isEditable:r.state.editablePartId===n,externalId:r.id,isError:!b.getWhetherFunctionHasArgs(e),dataSourceIds:r.props.dataSourceIds});case o.ExpressionPartType.Number:return o.jsx(h.default,{exp:e.exp,id:n,key:t,isEditable:r.state.editablePartId===n});case o.ExpressionPartType.Unknown:return o.jsx(g.default,{exp:e.exp,id:n,key:t,isEditable:r.state.editablePartId===n});default:return null}},r.getPopoverItems=function(e,t){if(void 0===t&&(t=[]),!e||!t)return[];var n,i,a,s=[],l=b.getWhetherIsParentPartId(r.id,e);if(l?(n=b.getIndexOfParentPart(r.id,e),a=t[n]):(n=b.getIndexOfParentPart(r.id,e),i=b.getIndexOfChildPart(r.id,e),a=t[n]&&t[n].parts&&t[n].parts[i]),a){if(a.type===o.ExpressionPartType.Field)if(a.dataSourceId){var u=r.state.dss.find(function(e){return e.id===a.dataSourceId}),p=u&&u.getSchema&&u.getSchema().fields;p&&Object.keys(p).filter(function(e){var t=p[e].alias||p[e].name;return t&&0===t.toLowerCase().indexOf(a.exp.replace("$","").toLowerCase())}).filter(function(e){return!(!l&&t[n]&&t[n].type===o.ExpressionPartType.Function)||p[e].type===o.JimuFieldType.Number}).sort(function(e,t){return p[e].name.localeCompare(p[t].name)}).forEach(function(e){s.push({id:e,content:p[e].alias||p[e].name,type:c.PopoverType.Field})})}else r.props.dataSourceIds&&r.props.dataSourceIds.length>0&&r.state.dss&&r.state.dss.length>0&&(s=r.getDssPopoverItems());else if(a.type===o.ExpressionPartType.Unknown&&l)b.getSortedKeys(o.ExpressionFunctions).filter(function(e){return 0===o.ExpressionFunctions[e].indexOf(a.exp)}).forEach(function(e){s.push({id:e,content:o.ExpressionFunctions[e],type:c.PopoverType.Function})});else if(a.type===o.ExpressionPartType.Function){if(!(a.exp===o.ExpressionFunctions.Count&&r.props.dataSourceIds&&r.props.dataSourceIds.length>1&&r.state.dss&&r.state.dss.length>1)){var d=b.getPreviouseNodeOfSelection(r.id,b.getNodeByPartId(e));return d?r.getPopoverItems(d.id,a.parts):s}s=r.getDssPopoverItems()}return s}},r.getDssPopoverItems=function(){var e=[];return r.state.dss&&b.getSortedArrayByLabel(r.state.dss).forEach(function(t){e.push({id:t.id,content:t.label,type:c.PopoverType.DataSource})}),e},r.getPopoverTarget=function(){if(!r.contentEditableContainer||!r.contentEditableContainer.current)return null;var e=r.contentEditableContainer.current.querySelector("#"+r.id);if(r.getWhetherInEditablePart())return b.getPartIdOfSelection(r.id);var t=b.getPreviouseNodeOfSelection(r.id,e);return t?t.id:null},r.getWhetherInEditablePart=function(){return!(r.state.isEditable||!r.state.editablePartId)},r.getSingleExpFromPopoverItem=function(e){switch(e.type){case c.PopoverType.Field:return"$"+b.removeOperator(e.content);default:return e.content}},r.renderPartsToHtml=function(e){return l.renderToStaticMarkup(o.jsx("p",{id:r.id,className:"w-100 m-0 p-1"},"\ufeff",e&&e.map(function(e,t){return r.getComponent(e,""+t)}),"\ufeff"))},r.addOneCharacterToParts=function(e,t,n,o){if(void 0===t&&(t=[]),!e||!n)return null;var i=Object.keys(n).map(function(e){return e}),a=t?t.slice():[],s=b.getLengthDiffBetweenExpsAndParts(e,a),l='"'!==o&&1===s?0:1,u=i.map(function(e,t){var i=l>0&&0===t?1:0,s=n[e];return r.addOneCharacterToOnePart(s,a[e],e,i,o)});return u.filter(function(e){return!!e}).forEach(function(e,t){u[t].editedPartIds.forEach(function(e,n){var o=b.getWhetherIsParentPartId(r.id,e),i=b.getIndexOfParentPart(r.id,e);if(o)a.splice(parseInt(i),u[t].isPartAdded?0:1,u[t].editedParts[n]);else{var s=b.getIndexOfChildPart(r.id,e),l=!u[t].isPartAdded||u[t].editedParts.length>1&&0===n?1:0;a[parseInt(i)]&&a[parseInt(i)].parts&&a[parseInt(i)].parts.splice(parseInt(s),l,u[t].editedParts[n])}})}),{parts:a,isPartAdded:s>0||!!u.find(function(e){return e.isPartAdded}),editedParts:Array.prototype.concat.apply([],u.map(function(e){return e.editedParts})),editedPartIds:Array.prototype.concat.apply([],u.map(function(e){return e.editedPartIds}))}},r.addOneCharacterToOnePart=function(e,t,n,o,i){if(void 0===e&&(e=""),void 0===t&&(t={}),!n)return null;var a,s=r.props.dataSourceIds&&r.props.dataSourceIds.length>1?t.dataSourceId:r.props.dataSourceIds&&r.props.dataSourceIds[0],l=b.getExpressionPart(e,s,t.jimuFieldName),u=b.getWhetherHaveChildParts(l.type);if(u){var c=b.getNextNodeOfSelection(r.id,b.getNodeByPartId(b.getParentPartId(r.id,n))),p=b.resolveFunctionExp(e),d=b.getNewPartsInfo(r.id,t.parts,p.innerExps,c,i,r.getWhetherInEditablePart(),!1,n);a=r.addOneCharacterToParts(p.innerExps,t.parts,d,i),l.parts=a.parts}return{parts:null,isPartAdded:u&&l.parts&&l.parts.length>0?a.isPartAdded:!o,editedParts:u&&l.parts&&l.parts.length>0?a.editedParts:[l],editedPartIds:u&&l.parts&&l.parts.length>0?a.editedPartIds.map(function(e){return b.getChildPartId(r.id,n,b.getIndexOfParentPart(r.id,e))}):[b.getParentPartId(r.id,n)]}},r.removeOneCharacterFromOnePart=function(e,t,n){void 0===e&&(e=[]);var o=e?e.slice():[],i=b.getWhetherIsParentPartId(r.id,t)?b.getIndexOfParentPart(r.id,t):b.getIndexOfChildPart(r.id,t),a=o&&o[parseInt(i)];if(!o||!a)return null;var s=!1,l=r.props.dataSourceIds&&r.props.dataSourceIds.length>1?a.dataSourceId:r.props.dataSourceIds&&r.props.dataSourceIds[0],u=null;return a.exp=b.removeOneCharacter(a.exp,n),(a=b.getExpressionPart(a.exp,l,a.jimuFieldName)).exp.length>0?o.splice(parseInt(i),1,a):(s=!0,o=(u=r.removeOnePart(o,t)).parts),{parts:o,isExpRemoved:s,editedPart:s?u&&u.editedPart:a,editedPartId:s?u&&u.editedPartId:t}},r.removeOneCharacterFromParts=function(e,t){if(!e)return null;var n,o=b.getIndexOfParentPart(r.id,e);if(b.getWhetherIsParentPartId(r.id,e))n=r.removeOneCharacterFromOnePart(r.props.expression&&r.props.expression.parts,e,t);else{var i=r.props.expression&&r.props.expression.parts?r.props.expression.parts.slice():[];if(!(n=i&&r.removeOneCharacterFromOnePart(i[o].parts,e,t)))return null;i[o].parts=n.parts,n.parts=i}return n},r.removeOnePart=function(e,t){if(void 0===e&&(e=[]),!e||!t)return null;var n=e.slice(),i=b.getWhetherIsParentPartId(r.id,t)?b.getIndexOfParentPart(r.id,t):b.getIndexOfChildPart(r.id,t);if(n[parseInt(i)].type===o.ExpressionPartType.Operator&&n[parseInt(i)-1]&&n[parseInt(i)+1]&&n[parseInt(i)-1].type!==o.ExpressionPartType.Operator&&n[parseInt(i)+1].type!==o.ExpressionPartType.Operator){var a=b.getNodeByPartId(t),s=a.previousElementSibling,l=a.nextElementSibling,u=s.textContent+l.textContent,c=b.getExps(u),p=c.map(function(e,t){var r=0===t?parseInt(i)-1:parseInt(i)+1,o=0===t?s.textContent:l.textContent,a=2===c.length&&o===e,u=b.getExpressionPart(e,a&&n[r].dataSourceId,a&&n[r].jimuFieldName);return a&&n[r].parts&&(u.parts=n[r].parts),u});n.splice.apply(n,[parseInt(i)-1,3].concat(p))}else n.splice(parseInt(i),1);return{parts:n,isExpRemoved:!0,editedPart:null,editedPartId:null}},r.getExpSelectionAndEditableStatusByAddResult=function(e,t){var n=null,i=r.state.isEditable,a=r.state.editablePartId;if(!e)return{expSelection:n,isEditable:i,editablePartId:a};var s=b.getLastAddedPart(e),l=b.getLastAddedPartId(e),u=b.getParentPartId(r.id,b.getIndexOfParentPart(r.id,l));if(s&&s.type===o.ExpressionPartType.String&&'""'===s.exp)i=!1,a=u,n={partId:l,type:c.ExpSelectionType.Char,startOffset:1};else if(s&&s.type===o.ExpressionPartType.Function&&0===s.parts.length)i=!1,a=u,n={partId:l,type:c.ExpSelectionType.Char,startOffset:s.exp.length+1};else if(e.isPartAdded)i=!1,a=u,n={partId:l,type:c.ExpSelectionType.Char,startOffset:s&&s.exp.length};else if(r.getWhetherInEditablePart()){var p=b.getSelectionPosInnerPart(r.id,!1,r.contentEditableContainer.current);n={partId:p&&p.partId,type:c.ExpSelectionType.Char,startOffset:p&&p.startOffset}}else i=!1,a=u,n={partId:l,type:c.ExpSelectionType.Char,startOffset:b.getWhetherAddToStart(r.id,t,r.props.expression)?1:s.exp.length};return{expSelection:n,isEditable:i,editablePartId:a}},r.getNewExpression=function(e){return{parts:e,name:r.props.expression&&r.props.expression.name||r.id}},r.onChange=function(e){var t=e.currentTarget.querySelector("#"+r.id);if(t&&e.isTrusted){var n=r.getExpressionString(t),o=b.getNewCharacterFromExpressionString(r.expressionString,n),i=t.textContent,a=b.getExps(i),s=b.getNextNodeOfSelection(r.id,t),l=b.getNewPartsInfo(r.id,r.props.expression&&r.props.expression.parts,a,s,o,r.getWhetherInEditablePart(),!0),u=r.addOneCharacterToParts(a,r.props.expression&&r.props.expression.parts,l,o),c=u.parts,p=r.getExpSelectionAndEditableStatusByAddResult(u,s);r.setState({isPopoverOpen:!1,isEditable:p.isEditable,editablePartId:p.editablePartId,expSelection:p.expSelection},function(){r.setState({isPopoverOpen:!0})}),r.props.onChange(r.getNewExpression(c))}},r.onBlur=function(e){r.props.onChange(r.props.expression)},r.onKeyDown=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation();var t=b.getSelectionRange();if(t&&t.collapsed){if(8===e.keyCode||46===e.keyCode||39===e.keyCode||37===e.keyCode||13===e.keyCode||40===e.keyCode||38===e.keyCode){var n=e.currentTarget.querySelector("#"+r.id);if(!n)return;e.preventDefault(),8!==e.keyCode&&46!==e.keyCode||b.triggerInputEvent(e.currentTarget),8===e.keyCode?r.handleBackspace(n):46===e.keyCode?r.handleDelete(n):37===e.keyCode?r.handleLeftArrow(n):39===e.keyCode?r.handleRightArrow(n):13===e.keyCode?r.handleEnter(n):40===e.keyCode?r.handleDownArrow(n):38===e.keyCode&&r.handleUpArrow(n)}}else e.preventDefault()},r.onClick=function(e){var t=b.getPartIdByChildNode(r.id,e.target),n=b.getIndexOfParentPart(r.id,t);if(n){var o=parseInt(n)>-1?b.getNodeByPartId(t,r.contentEditableContainer.current):null;if(o&&b.getIndexOfParentPart(r.id,r.state.editablePartId)!==n&&r.props.expression&&r.props.expression.parts&&r.props.expression.parts[n]){var i={partId:t,type:c.ExpSelectionType.Char,startOffset:o.textContent.length};r.setState({editablePartId:b.getParentPartId(r.id,n),isEditable:!1,expSelection:i,isPopoverOpen:!1},function(){return r.setState({isPopoverOpen:b.getWhetherPartNeedPopover(r.props.expression.parts[n].type)})})}}else e.target.id===r.id&&r.setSelectionToEnd()},r.onHelperItemSelect=function(e,t){if(r.props.onChange(e),e&&e.parts&&t){var n=b.getWhetherIsParentPartId(r.id,t),i=b.getIndexOfParentPart(r.id,t),a=e.parts[i],s=!1;if(!n){var l=b.getIndexOfChildPart(r.id,t);a=a.parts&&a.parts[l]}var u={type:c.ExpSelectionType.Char,partId:t,startOffset:a.type===o.ExpressionPartType.Function?a.exp.length+1:a.exp.length},p=!1;if(n&&a&&a.type===o.ExpressionPartType.Operator&&(u={type:c.ExpSelectionType.Part,partId:t,toStart:!1},p=!0),a&&a.type===o.ExpressionPartType.Function){var d=a.exp===o.ExpressionFunctions.Count,f=a.dataSourceId;d&&(f?(u.type=c.ExpSelectionType.Part,u.toStart=!1,p=!0):s=!0)}r.setState({expSelection:u,editablePartId:p?null:b.getParentPartId(r.id,b.getIndexOfParentPart(r.id,t)),isEditable:p,isPopoverOpen:!1},function(){return r.setState({isPopoverOpen:s})})}},r.handlePopoverItemSelect=function(e,t){if(e&&t){var n=b.getIndexOfParentPart(r.id,t),o=r.props.expression&&r.props.expression.parts?r.props.expression.parts.slice():[];e.type===c.PopoverType.Field?r.handleFieldPopoverClick(o,n,t,e):e.type===c.PopoverType.DataSource?r.handleDsPopoverClick(o,n,t,e):e.type===c.PopoverType.Function&&r.handleFunctionPopoverClick(o,n,t,e)}},r.handleFieldPopoverClick=function(e,t,n,i){var a,s;void 0===e&&(e=[]);var l,u=!0,p=r.state.editablePartId;if(b.getWhetherIsParentPartId(r.id,n))a=r.props.dataSourceIds&&r.props.dataSourceIds.length>1?e[t].dataSourceId:r.props.dataSourceIds&&r.props.dataSourceIds[0],s=b.getExpressionPart(r.getSingleExpFromPopoverItem(i),a,i.id),e.splice(parseInt(t),1,s,{exp:" ",type:o.ExpressionPartType.Operator}),l={partId:b.getParentPartId(r.id,""+(parseInt(t)+1)),toStart:!1,type:c.ExpSelectionType.Part};else{var d=b.getIndexOfChildPart(r.id,n);a=e[t].parts&&e[t].parts[d]&&e[t].parts[d].dataSourceId,a=r.props.dataSourceIds&&r.props.dataSourceIds.length>1?a:r.props.dataSourceIds&&r.props.dataSourceIds[0],(s=e[t]).parts[d]=b.getExpressionPart(r.getSingleExpFromPopoverItem(i),a,i.id),e.splice(parseInt(t),1,s),u=!1,p=b.getParentPartId(r.id,b.getIndexOfParentPart(r.id,n)),l={partId:n,type:c.ExpSelectionType.Char,startOffset:s.parts[d].exp.length}}r.setState({isPopoverOpen:!1,expSelection:l,isEditable:u,editablePartId:p}),r.props.onChange(r.getNewExpression(e))},r.handleDsPopoverClick=function(e,t,n,i){var a;void 0===e&&(e=[]);var s=r.state.isEditable,l=r.state.editablePartId;if(b.getWhetherIsParentPartId(r.id,n))e[t].dataSourceId=i.id,e[t].type===o.ExpressionPartType.Function&&e[t].exp===o.ExpressionFunctions.Count?(s=!0,l=null,a={partId:n,type:c.ExpSelectionType.Part,toStart:!1}):a={partId:n,type:c.ExpSelectionType.Char,startOffset:e[t].exp.length};else{var u=b.getIndexOfChildPart(r.id,n);e[t]&&e[t].parts&&e[t].parts[u]&&(e[t].parts[u].dataSourceId=i.id,a={partId:n,type:c.ExpSelectionType.Char,startOffset:e[t].parts[u].exp.length})}r.props.onChange(r.getNewExpression(e)),r.setState({isPopoverOpen:!1,expSelection:a,isEditable:s,editablePartId:l},function(){return r.setState({isPopoverOpen:!(e[t].type===o.ExpressionPartType.Function&&e[t].exp===o.ExpressionFunctions.Count)})})},r.handleFunctionPopoverClick=function(e,t,n,i){void 0===e&&(e=[]);var a=b.getExpressionPart(r.getSingleExpFromPopoverItem(i)),s=!1,l=n,u={partId:n,type:c.ExpSelectionType.Char,startOffset:a.exp.length+1};r.props.dataSourceIds&&1===r.props.dataSourceIds.length&&a.exp===o.ExpressionFunctions.Count&&(a.dataSourceId=r.props.dataSourceIds[0],s=!0,l=null,u={partId:n,type:c.ExpSelectionType.Part,toStart:!1}),e.splice(parseInt(t),1,a),r.props.onChange(r.getNewExpression(e)),r.setState({isPopoverOpen:r.props.dataSourceIds&&r.props.dataSourceIds.length>1&&a.type===o.ExpressionPartType.Function&&a.exp===o.ExpressionFunctions.Count,expSelection:u,isEditable:s,editablePartId:l})},r.handleBackspace=function(e){if(r.getWhetherInEditablePart()){var t=b.getSelectionPosInnerPart(r.id,!0,r.contentEditableContainer.current);if(t&&t.partId){var n=r.removeOneCharacterFromParts(t.partId,t.startOffset-1),o=n&&n.parts,i=n.isExpRemoved?b.getSiblingOfExpSelection(r.id,t.partId,!0,!0,o):{type:c.ExpSelectionType.Char,partId:t.partId,startOffset:t.startOffset-1},a=i.type===c.ExpSelectionType.Part,s=r.state.editablePartId;s=a?null:b.getParentPartId(r.id,b.getIndexOfParentPart(r.id,i.partId)),r.props.onChange(r.getNewExpression(o)),r.setState({isPopoverOpen:!1,expSelection:i,isEditable:a,editablePartId:s},function(){return r.setState({isPopoverOpen:!n.isExpRemoved&&n.editedPart&&b.getWhetherPartNeedPopover(n.editedPart.type)})})}}else{var l=b.getPreviouseNodeOfSelection(r.id,e);if(l){var u=r.removeOnePart(r.props.expression&&r.props.expression.parts,l.id);r.props.onChange(r.getNewExpression(u.parts)),r.setState({isPopoverOpen:!1,expSelection:{partId:l.id,toStart:!0,type:c.ExpSelectionType.Part}})}}},r.handleDelete=function(e){if(r.getWhetherInEditablePart()){var t=b.getSelectionPosInnerPart(r.id,!0,r.contentEditableContainer.current);if(t&&t.partId){var n=r.removeOneCharacterFromParts(t.partId,t.startOffset),o=n&&n.parts,i=n.isExpRemoved?b.getSiblingOfExpSelection(r.id,t.partId,!0,!0,o):{type:c.ExpSelectionType.Char,partId:t.partId,startOffset:t.startOffset},a=i.type===c.ExpSelectionType.Part,s=r.state.editablePartId;a||(s=b.getParentPartId(r.id,b.getIndexOfParentPart(r.id,i.partId))),r.props.onChange(r.getNewExpression(o)),r.setState({isPopoverOpen:!1,expSelection:i,isEditable:a,editablePartId:s},function(){return r.setState({isPopoverOpen:!n.isExpRemoved&&n.editedPart&&b.getWhetherPartNeedPopover(n.editedPart.type)})})}}else{var l=b.getNextNodeOfSelection(r.id,e);if(l){var u=r.removeOnePart(r.props.expression&&r.props.expression.parts,l.id);r.props.onChange(r.getNewExpression(u.parts)),r.setState({isPopoverOpen:!1,expSelection:{partId:l.id,toStart:!0,type:c.ExpSelectionType.Part}})}}},r.handleLeftArrow=function(e){if(r.getWhetherInEditablePart()){var t=b.getSelectionPosInnerPart(r.id,!1,r.contentEditableContainer.current);if(t&&t.partId){var n=t.startOffset-1>-1?{type:c.ExpSelectionType.Char,partId:t.partId,startOffset:t.startOffset-1}:b.getSiblingOfExpSelection(r.id,t.partId,!0,!1,r.props.expression&&r.props.expression.parts);r.setState({expSelection:n,isPopoverOpen:!1,isEditable:n&&n.type===c.ExpSelectionType.Part,editablePartId:n&&n.type===c.ExpSelectionType.Part?null:b.getParentPartId(r.id,b.getIndexOfParentPart(r.id,n.partId))})}}else{var o=b.getPreviouseNodeOfSelection(r.id,e);o&&r.setState({expSelection:{partId:o.id,toStart:!0,type:c.ExpSelectionType.Part},isPopoverOpen:!1})}},r.handleRightArrow=function(e){if(r.getWhetherInEditablePart()){var t=b.getSelectionPosInnerPart(r.id,!1,r.contentEditableContainer.current);if(t&&t.partId){var n=t.startOffset+1<=t.contentLength?{type:c.ExpSelectionType.Char,partId:t.partId,startOffset:t.startOffset+1}:b.getSiblingOfExpSelection(r.id,t.partId,!1,!1,r.props.expression&&r.props.expression.parts);r.setState({expSelection:n,isPopoverOpen:!1,isEditable:n&&n.type===c.ExpSelectionType.Part,editablePartId:n&&n.type===c.ExpSelectionType.Part?null:b.getParentPartId(r.id,b.getIndexOfParentPart(r.id,n.partId))})}}else{var o=b.getNextNodeOfSelection(r.id,e);o&&r.setState({expSelection:{partId:o.id,toStart:!1,type:c.ExpSelectionType.Part},isPopoverOpen:!1})}},r.handleDownArrow=function(e){if(r.state.isPopoverOpen){var t=r.getPopoverTarget(),n=r.getPopoverItems(t,r.props.expression&&r.props.expression.parts),o=r.state.selectedPopoverItemIndex;o=o?parseInt(o)<n.length-1?""+(parseInt(r.state.selectedPopoverItemIndex)+1):""+(n.length-1):"0",r.setState({selectedPopoverItemIndex:o})}},r.handleUpArrow=function(e){if(r.state.isPopoverOpen){var t=r.getPopoverTarget(),n=r.getPopoverItems(t,r.props.expression&&r.props.expression.parts),o=r.state.selectedPopoverItemIndex;o=o?parseInt(o)>0?""+(parseInt(r.state.selectedPopoverItemIndex)-1):"0":""+(n.length-1),r.setState({selectedPopoverItemIndex:o})}},r.handleEnter=function(e){if(r.state.isPopoverOpen&&r.state.selectedPopoverItemIndex){var t=r.getPopoverTarget(),n=r.getPopoverItems(t,r.props.expression&&r.props.expression.parts);r.setState({selectedPopoverItemIndex:null}),r.handlePopoverItemSelect(n[r.state.selectedPopoverItemIndex],t)}else{var o=r.props.expression&&r.props.expression.parts&&r.props.expression.parts.length||0;r.setState({editablePartId:null,isEditable:!0,isPopoverOpen:!1,expSelection:{partId:o>0?b.getParentPartId(r.id,""+(o-1)):null,toStart:!1,type:c.ExpSelectionType.Part}})}},t.count++,r.id=c.EXP_CONTAINER_PREFIX+"-"+t.count,r.contentEditableContainer=o.React.createRef(),r.state={isEditable:!0,isPopoverOpen:!1,isDataSourceInited:!1,editablePartId:null,dss:[],expSelection:null,selectedPopoverItemIndex:null},r}return r(t,e),t.prototype.componentDidMount=function(){this.__unmount=!1,this.expressionString=this.getExpressionString()||"",this.initDss(),this.props.autoFocus&&this.contentEditableContainer.current.focus(),this.contentEditableContainer.current.ondragstart=function(){return!1}},t.prototype.componentDidUpdate=function(e,t){this.state.expSelection&&this.state.expSelection.partId&&(t.expSelection!==this.state.expSelection||this.getWhetherLoseFocus())&&(this.state.expSelection.type===c.ExpSelectionType.Part?b.moveSelectionByPart(this.state.expSelection.partId,this.state.expSelection.toStart,this.contentEditableContainer.current):this.state.expSelection.type===c.ExpSelectionType.Char&&b.moveSelectionByCharacter(this.state.expSelection.partId,this.state.expSelection.startOffset,this.contentEditableContainer.current)),e.expression!==this.props.expression&&(this.props.expression&&this.props.expression.parts?this.expressionString=this.getExpressionString():this.expressionString=""),this.state.isDataSourceInited||this.initDss(),!0!==this.state.isDataSourceInited||this.getWhetherDssAreEqual(this.props.dataSourceIds,e.dataSourceIds)&&!1!==t.isDataSourceInited||this.setState({dss:this.getDss(this.props.dataSourceIds)})},t.prototype.componentWillUnmount=function(){this.__unmount=!0},t.prototype.render=function(){var e,t;this.state.isPopoverOpen&&(t=this.getPopoverTarget());var n=this.renderPartsToHtml(this.props.expression&&this.props.expression.parts);n=n&&n.replace(/&quot;/g,'"');var r=i.getWhetherExpressionValid(this.props.expression);return o.jsx("div",{css:u.getStyle(this.props.theme),style:this.props.style,onClick:this.onClick,className:o.classNames("w-100 h-100",(e={},e[this.props.className]=!!this.props.className,e))},o.jsx("div",{className:"w-100 h-100 component-expression-editor"},o.jsx("div",{className:o.classNames("w-100 expression-editor-input",{"error-border":!r})},o.jsx(s.default,{innerRef:this.contentEditableContainer,html:n,disabled:!this.state.isEditable,onChange:this.onChange,onKeyDown:this.onKeyDown,onBlur:this.onBlur,className:"w-100 break-all expression-editor-input-content-editable"}),this.state.isPopoverOpen&&o.jsx(y.default,{targetNodeId:t,items:this.getPopoverItems(t,this.props.expression&&this.props.expression.parts),onClick:this.handlePopoverItemSelect,theme:this.props.theme,selectedItemIndex:this.state.selectedPopoverItemIndex})),o.jsx("div",{className:"mt-2 error-message"},!r&&this.props.intl.formatMessage({id:"invalidExpression",defaultMessage:a.default.invalidExpression})),o.jsx("div",{className:"expression-editor-helper"},o.jsx(v.default,{expression:this.props.expression,dataSourceIds:this.props.dataSourceIds,onSelect:this.onHelperItemSelect,intl:this.props.intl,externalId:this.id,inEditablePart:this.getWhetherInEditablePart(),container:this.contentEditableContainer&&this.contentEditableContainer.current}))))},t.count=-1,t}(o.React.PureComponent),w=o.themeUtils.withTheme(o.injectIntl(x));t.default=w},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(2),s=n(160),l=n(40),u=n(14),c=n(4),p=n(26),d=function(e){function t(t){var n=e.call(this,t)||this;return n.panelWidth=""+i.polished.rem(260),n.defaultModalStyle={position:"absolute",top:"0",bottom:"0",right:"260px",left:"auto",width:n.panelWidth,height:"auto",zIndex:"3",padding:"0",border:"0",borderRadius:"0",backgroundColor:n.props.theme.colors.grays.gray100},n.cursorStyle={cursor:"pointer"},n.fontSizeStyle={fontSize:"16px"},n.titleStyle={height:"51px",borderBottom:"0"},n.dsManager=window&&window.jimuConfig&&window.jimuConfig.isBuilder?u.default.getInstance():i.DataSourceManager.getInstance(),n.getReactModalStyle=function(){return n.props.modalStyle?o({},n.defaultModalStyle,n.props.modalStyle):n.defaultModalStyle},n.onClose=function(){n.setState({isExpBuilderShown:!1})},n.modalStyle=n.getReactModalStyle(),n.state={isExpBuilderShown:!1,isDataSourceInited:!1},n}return r(t,e),t.prototype.render=function(){var e=this;return i.jsx("div",{css:s.getStyle(this.props.theme),className:"w-100"},this.props.isOpen&&!i.urlUtils.getAppIdPageIdFromUrl().pageId&&document&&document.getElementById("default")?i.ReactDOM.createPortal(i.jsx("div",{className:"bg-gray-100 border-color-gray-400 component-expression-builder-popup",style:this.modalStyle},i.jsx("div",{className:"w-100 h-100 expression-popup"},i.jsx("div",{className:"jimu-widget-setting--header d-flex",style:this.titleStyle},i.jsx("div",{className:"d-flex align-items-center w-100 m-0",style:this.fontSizeStyle},this.props.intl.formatMessage({id:"expressionBuilder",defaultMessage:c.default.expressionBuilder})),i.jsx("div",{className:"flex-shrink-0 text-center px-2 pt-1",style:this.cursorStyle,onClick:function(){return e.props.onClose()}},i.jsx(a.Icon,{icon:p,size:"16",className:"text-dark"}))),i.jsx(l.default,o({},this.props)))),document.getElementById("default")):null)},t}(i.React.PureComponent),f=i.themeUtils.withTheme(i.injectIntl(d));t.default=f},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(25),a=n(2),s=function(e){function t(t){var n=e.call(this,t)||this;return n.supportedResourceSuffix={IMAGE:[".png",".jpeg",".jpg",".gif",".bmp",".svg",".svgz"]},n.getFileFromBrowse=function(){var e=n.fileInput.current.files;if(e&&e[0]){var t=e[0].name,r="."+t.split(".")[t.split(".").length-1];if(!n.supportedResourceSuffix[n.props.type]||-1===n.supportedResourceSuffix[n.props.type].indexOf(r.toLocaleLowerCase()))return n.fileInput.current.value="",void(n.props.onResourceNotSupported&&n.props.onResourceNotSupported());var o=(new Date).getTime().toString(),a=o+r,s=e[0].size,l=e[0].type,u={file:e[0],fileName:a,originalName:t,type:n.props.type,widgetId:n.props.widgetId?n.props.widgetId.replace(/\./g,"_").replace(/\-/g,"_"):null};i.AppResourceManager.getInstance().getLocalCacheResourceUrl(u).then(function(e){var r={fileName:a,originalName:t,url:e.blobUrl,type:n.props.type,size:s,created:Number(o),resourcesPrefix:e.resourcesPrefix,fileFormat:l};n.props.onChange(r)},function(e){console.error(e)}),n.fileInput.current.value=""}},n.getAccept=function(e){var t=null;switch(e){case i.ResourceType.Image:t=".png, .jpeg, .jpg, .gif, .bmp, .svg, .svgz";break;default:t=""}return t},n.fileInput=o.React.createRef(),n}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.style,r=e.label,i=e.disabled,s=e.color,l=e.type,u=o.classNames("d-flex justify-content-center",t),c=o.Immutable({width:"100%"});c=c.merge(n);var p=this.getAccept(l);return o.React.createElement(a.Button,{disabled:i,className:u,style:c,color:s},r,o.React.createElement("input",{disabled:i,className:"w-100 h-100",style:{opacity:0,position:"absolute"},accept:p,ref:this.fileInput,type:"file",onChange:this.getFileFromBrowse}))},t.defaultProps={type:i.ResourceType.Image,style:{}},t}(o.React.PureComponent);t.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(163),s=function(e){function t(t){var n=e.call(this,t)||this;return n.modalStyle={position:"absolute",top:"0",bottom:"0",right:"260px",left:"auto",width:"259px",height:"auto",zIndex:"3",paddingBottom:"1px"},n.onShowImageResourcesPanel=function(){n.setState({showImageResourcesPanel:!0})},n.onCloseImageResourcesPanel=function(){n.setState({showImageResourcesPanel:!1})},n.modalStyle.borderRight="1px solid "+n.props.theme.colors.white,n.modalStyle.borderBottom="1px solid "+n.props.theme.colors.white,n.state={showImageResourcesPanel:!1},n}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.style,r=e.label,s=e.disabled,l=e.color,u=o.classNames("d-flex justify-content-center",t),c=o.Immutable({width:"100%"});return n&&(c=c.merge(n)),o.React.createElement("div",null,o.React.createElement(i.Button,{disabled:s,className:u,style:c,color:l,size:this.props.size,onClick:this.onShowImageResourcesPanel},r),this.state.showImageResourcesPanel&&document&&document.getElementById("default")&&o.ReactDOM.createPortal(o.React.createElement("div",{className:"bg-gray-100 border-color-gray-400",style:this.modalStyle},o.React.createElement(a.ImageResourcesPanel,{widgetId:this.props.widgetId,onClose:this.onCloseImageResourcesPanel,onChange:this.props.onChange,imageParam:this.props.imageParam,isSupportCrop:this.props.isSupportCrop})),document.getElementById("default")))},t}(o.React.PureComponent);t.ImageChooser=o.themeUtils.withTheme(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(164))},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(2),l=n(4),u=function(e){function t(t){var n=e.call(this,t)||this;return n.handleCloseBtn=function(){n.setState({isOpen:!1});var e=n.props,t=e.toggle;void 0!==e.isOpen&&t&&t(!1)},n.handleOkBtn=function(){n.setState({isOpen:!1});var e=n.props,t=e.toggle;void 0!==e.isOpen&&t&&t(!0)},n.handleToggle=function(){n.setState({isOpen:!1});var e=n.props,t=e.toggle;void 0!==e.isOpen&&t&&t(!1)},n.getStyle=function(){var e=n.props.theme;return a.css(i||(i=o(["\n      .modal-header {\n        border-bottom: 1px solid ",";\n        padding: 0.7rem 1rem;\n        .close {\n          color: ",";\n          opacity: 1;\n          padding: 0;\n          margin: 0;\n          transition: color .15s ease-in-out;\n          &:not(:disabled):not(.disabled):hover,\n          &:not(:disabled):not(.disabled):focus {\n            opacity: 1;\n          }\n        }\n      }\n      .modal-body{\n        overflow-y: auto;\n        max-height: 360px;\n        padding: 1rem 1rem;\n      }\n      .modal-content{\n        width: auto;\n        background-color: ",";\n        border: 1px solid ",";\n        border-radius: 0;\n      }\n      .modal-footer{\n        padding: 1rem;\n\n        .btn {\n          min-width: 80px;\n          + .btn {\n            margin-left: 10px;\n          }\n        }\n      }\n      &.modal-dialog{\n        width: auto;\n      }\n    "],["\n      .modal-header {\n        border-bottom: 1px solid ",";\n        padding: 0.7rem 1rem;\n        .close {\n          color: ",";\n          opacity: 1;\n          padding: 0;\n          margin: 0;\n          transition: color .15s ease-in-out;\n          &:not(:disabled):not(.disabled):hover,\n          &:not(:disabled):not(.disabled):focus {\n            opacity: 1;\n          }\n        }\n      }\n      .modal-body{\n        overflow-y: auto;\n        max-height: 360px;\n        padding: 1rem 1rem;\n      }\n      .modal-content{\n        width: auto;\n        background-color: ",";\n        border: 1px solid ",";\n        border-radius: 0;\n      }\n      .modal-footer{\n        padding: 1rem;\n\n        .btn {\n          min-width: 80px;\n          + .btn {\n            margin-left: 10px;\n          }\n        }\n      }\n      &.modal-dialog{\n        width: auto;\n      }\n    "])),e.colors.secondary,e.colors.grays.gray700,e.colors.grays.gray100,e.colors.grays.gray300)},n.state={isOpen:!!t.isOpen},n}return r(t,e),t.prototype.componentWillReceiveProps=function(e){void 0!==this.props.isOpen&&void 0===e.isOpen&&this.setState({isOpen:e.isOpen})},t.prototype.render=function(){var e=this.props.isOpen;return e=void 0===e?this.state.isOpen:e,a.jsx(s.Modal,{css:this.getStyle(),className:"d-flex justify-content-center",isOpen:e,centered:!0,toggle:this.handleToggle},a.jsx(s.ModalHeader,{tag:"h4",toggle:this.handleCloseBtn},this.props.title),a.jsx(s.ModalBody,null,a.jsx("div",null,this.props.children)),a.jsx(s.ModalFooter,null,!this.props.hideOK&&a.jsx(s.Button,{color:"primary",onClick:this.handleOkBtn},this.props.okLabel?this.props.okLabel:this.props.intl.formatMessage({id:"commonModalOk",defaultMessage:l.default.commonModalOk})),!this.props.hideCancel&&a.jsx(s.Button,{outline:!0,color:"secondary",onClick:this.handleCloseBtn},this.props.cancleLabel?this.props.cancleLabel:this.props.intl.formatMessage({id:"commonModalCancel",defaultMessage:l.default.commonModalCancel}))))},t}(a.React.PureComponent);t.default=a.themeUtils.withTheme(a.injectIntl(u))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24);t.ColorChooser=r.ColorChooser;var o=n(323);t.BackgroundSetting=o.BackgroundSetting;var i=n(56);t.UnitChooser=i.UnitChooser;var a=n(329);t.BorderSetting=a.BorderSetting;var s=n(331);t.BoxShadowSetting=s.BoxShadowSetting;var l=n(332);t.FourSides=l.FourSides;var u=n(39);t.InputUnit=u.InputUnit;var c=n(335);t.TextSetting=c.TextSetting;var p=n(359);t.SingleColorChooser=p.SingleColorChooser},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M6.886 7H2.114L1.026 9.623A.623.623 0 0 1 .448 10H.351A.345.345 0 0 1 0 9.661c0-.043.009-.085.025-.125L3.783.479a.777.777 0 0 1 1.434 0l3.758 9.057c.016.04.025.082.025.125a.345.345 0 0 1-.351.339h-.097a.623.623 0 0 1-.578-.377L6.886 7zM6.47 6L4.5 1.25 2.53 6h3.94z"});function a(e){return o.createElement("svg",r({width:9,height:10,viewBox:"0 0 9 10"},e),i)}e.exports=a,a.default=a},,function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showDiffLog=!1,t}return r(t,e),t}(n(1).React.PureComponent);t.default=o},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.InAppAppStateChanged="IN_APP_APP_STATE_CHANGED"}(r=t.ExtActionKeys||(t.ExtActionKeys={}));var o={inAppAppStateChanged:function(e){return{type:r.InAppAppStateChanged,appState:e}}};t.appStateActions=o;var i=function(){function e(){this.id="builder-app-state-redux-store-extension"}return e.prototype.getActions=function(){return Object.keys(r).map(function(e){return r[e]})},e.prototype.getInitLocalState=function(){return null},e.prototype.getReducer=function(){return function(e,t,n){switch(t.type){case r.InAppAppStateChanged:return t.appState;default:return e}}},e.prototype.getStoreKey=function(){return"appStateInBuilder"},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(131),i=n(116),a=n(115),s=n(365),l=n(117),u=n(14),c=n(25);function p(e,t){window._builderPubsub.publishSync(e,t)}t.publishAppConfigChangeToApp=function(e){p("to_app."+l.ToAppMessage.AppConfigChanged,e)},t.publishAppModeChangeToApp=function(e){p("to_app."+l.ToAppMessage.ChangeAppMode,e)},t.publishInSelectModeChangeToApp=function(e){p("to_app."+l.ToAppMessage.ChangeSelectMode,e)},t.publishPageChangeToApp=function(e){p("to_app."+l.ToAppMessage.ChangePage,e)},t.publishDialogChangeToApp=function(e){p("to_app."+l.ToAppMessage.ChangeDialog,e)},t.publishViewChangeToApp=function(e,t){p("to_app."+l.ToAppMessage.ChangeView,{sectionId:e,viewId:t})},t.publishChangeSelectionToApp=function(e){p("to_app."+l.ToAppMessage.ChangeSelection,e)},t.publishWidgetsStatePropChange=function(e){p("to_app."+l.ToAppMessage.ChangeWidgetsStateProp,e)},t.publishDraggingWidgetToApp=function(e){p("to_app."+l.ToAppMessage.DraggingWidgetToApp,e)},t.publishEndDragWidgetToApp=function(){p("to_app."+l.ToAppMessage.EndDragWidgetToApp)},t.publishKeyboardToApp=function(e){p("to_app."+l.ToAppMessage.BuilderTriggerKeyboard,e)},t.publishChangeBrowserSizeModeToApp=function(e){p("to_app."+l.ToAppMessage.ChangeBrowserSizeMode,e)},t.listenAppEvents=function(){window._builderPubsub.subscribe("to_builder",function(e,t){console.debug(e,t)}),window._builderPubsub.subscribe("to_builder."+l.ToBuilderMessage.AppStateChanged,function(e,t){r.getAppStore().getState().builder.currentAppId!==t.appId&&(r.getAppStore().dispatch(a.builderActions.changeCurrentApp(t.appId)),s.WidgetSettingManager.getInstance().deleteAllWidgetClasses(),u.default.getInstance().destroyAllDataSources()),r.getAppStore().getState().appStateInBuilder&&r.getAppStore().getState().appStateInBuilder.appConfig===t.appConfig||r.getAppStore().dispatch(i.appStateHistoryActions.InBuilderPutAppConfigIntoHistory(t.appConfig)),r.getAppStore().dispatch(o.appStateActions.inAppAppStateChanged(t))}),window._builderPubsub.subscribe("to_builder."+l.ToBuilderMessage.PopupChooseWidget,function(e,t){r.getAppStore().dispatch(a.builderActions.openChooseWidgetPopup(t.layoutId,t.layoutItemId))}),window._builderPubsub.subscribe("to_builder."+l.ToBuilderMessage.AppAddResource,function(e,t){var n=c.AppResourceManager.getInstance();n.getBlobByBlobUrl(t.file).then(function(e){t.file=e,n.upLoadFileToResource(t),t.type===c.ResourceType.Image&&t.originId&&c.AppResourceManager.getInstance().updateImageResourceItemInfo(t)})}),window._builderPubsub.subscribe("to_builder."+l.ToBuilderMessage.AppClearResources,function(e,t){c.AppResourceManager.getInstance().clearResources(t)}),window._builderPubsub.subscribe("to_builder."+l.ToBuilderMessage.AppTriggerKeyboard,function(e,t){r.keyboardUtils.triggerEvent(t)}),window._builderPubsub.subscribe("to_builder."+l.ToBuilderMessage.SetLayoutTools,function(e,t){r.getAppStore().dispatch(a.builderActions.setLayoutTools(t))})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(117),i=window.parent&&window.parent._builderPubsub;function a(e,t){i&&i.publishSync(e,t)}t.listenBuilderEvents=function(){if(i){i.unsubscribe("to_app");var e=r.getAppStore();i.subscribe("to_app",function(e,t){console.debug(e,t)}),i.subscribe("to_app."+o.ToAppMessage.AppConfigChanged,function(t,n){var o=e.getState();if(o.appRuntimeInfo.currentPageId&&!n.pages[o.appRuntimeInfo.currentPageId]){var i=Object.keys(n.pages).find(function(e){return n.pages[e].isDefault});r.jimuHistory.changePage(i)}e.dispatch(r.appActions.appConfigChanged(n))}),i.subscribe("to_app."+o.ToAppMessage.ChangeAppMode,function(t,n){e.dispatch(r.appActions.appModeChanged(n))}),i.subscribe("to_app."+o.ToAppMessage.ChangeSelectMode,function(t,n){e.dispatch(r.appActions.setSelectMode(n))}),i.subscribe("to_app."+o.ToAppMessage.ChangeWidgetsStateProp,function(t,n){e.dispatch(r.appActions.widgetStatePropChange(n.widgetId,n.propKey,n.value))}),i.subscribe("to_app."+o.ToAppMessage.ChangePage,function(e,t){var n=r.getAppStore().getState().appConfig.pages[t];n.type===r.PageType.Link||n.type===r.PageType.Folder||r.urlUtils.parseAppPath(location.pathname).pageId===t?r.getAppStore().dispatch(r.appActions.currentPageChanged(t)):r.jimuHistory.changePage(t)}),i.subscribe("to_app."+o.ToAppMessage.ChangeView,function(t,n){var o=n.sectionId,i=n.viewId;r.jimuHistory.changeView(o,i),e.dispatch(r.appActions.currentViewChanged(i))}),i.subscribe("to_app."+o.ToAppMessage.ChangeSelection,function(t,n){e.dispatch(r.appActions.selectionChanged(n))}),i.subscribe("to_app."+o.ToAppMessage.DraggingWidgetToApp,function(t,n){e.dispatch(r.appActions.dragWidgetFromList(n))}),i.subscribe("to_app."+o.ToAppMessage.EndDragWidgetToApp,function(t){e.dispatch(r.appActions.dropWidgetFromList())}),i.subscribe("to_app."+o.ToAppMessage.BuilderTriggerKeyboard,function(e,t){r.keyboardUtils.triggerEvent(t)}),i.subscribe("to_app."+o.ToAppMessage.ChangeBrowserSizeMode,function(t,n){e.dispatch(r.appActions.browserSizeModeChanged(n))})}},t.publishAppStateChangeToBuilder=function(){a("to_builder."+o.ToBuilderMessage.AppStateChanged,r.getAppStore().getState())},t.letBuilderPopupChooseWidget=function(e,t){a("to_builder."+o.ToBuilderMessage.PopupChooseWidget,{layoutId:e,layoutItemId:t})},t.letBuilderAddResource=function(e){a("to_builder."+o.ToBuilderMessage.AppAddResource,e)},t.letBuilderClearResource=function(e){a("to_builder."+o.ToBuilderMessage.AppClearResources,e)},t.letBuilderResponseToKeyboard=function(e){a("to_builder."+o.ToBuilderMessage.AppTriggerKeyboard,e)},t.letBuilderShowLayoutToolbar=function(e){a("to_builder."+o.ToBuilderMessage.SetLayoutTools,e)}},function(e,t){e.exports=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1),a=n(4),s=n(371),l=n(402),u=n(404);!function(e){e.WebMap="Web Map",e.WebScene="Web Scene",e.FeatureService="Feature Service"}(t.ItemTypes||(t.ItemTypes={})),function(e){e.MyContent="MY_CONTENT",e.MyOrganization="MY_ORGANIZATION",e.Public="PUBLIC"}(o=t.ItemCategory||(t.ItemCategory={})),function(e){e.Modified="modified",e.Title="title",e.Views="numViews"}(t.SortField||(t.SortField={})),function(e){e.Desc="desc",e.Asc="asc"}(t.SortOrder||(t.SortOrder={}));var c=function(e){function t(t){var n=e.call(this,t)||this;return n.__unmount=!1,n.pageStart=0,n.pageSize=document?Math.max(3,Math.min(10,Math.ceil((document.body.clientWidth-440)/240)))*Math.ceil((document.body.clientHeight-180)/212):60,n.setItems=function(e,t,r,o,a){var s=n.getSearchRequestOptions(e,t,r,o,a);i.esri.restPortal.searchItems(s).then(function(e){n.__unmount||n.setState({loaded:!0,items:a?n.state.items.concat(e.results):e.results})},function(e){n.__unmount||n.setState({loaded:!0}),console.error(e)})},n.getSearchRequestOptions=function(e,t,r,a,s){var l=a?"("+a+') AND type:"'+e+'"':'type:"'+e+'"',u=t;return s&&(n.pageStart=n.state.items.length+1),n.props.category===o.MyContent?l+=" AND owner: "+i.getAppStore().getState().user.username:n.props.category===o.MyOrganization&&(l+=" AND orgid: "+i.getAppStore().getState().user.orgId),{q:l+' AND NOT type:"Web Mapping Application"',sortField:u,sortOrder:r||"desc",num:n.pageSize,start:n.pageStart,authentication:i.SessionManager.getInstance().getSession()}},n.getWhetherItemSelected=function(e){return n.props.selectedItems&&n.props.selectedItems.some(function(t){return t.id===e.id})},n.getWhetherItemPartSelected=function(e){return n.props.partSelectedItems&&n.props.partSelectedItems.some(function(t){return t.id===e.id})},n.onScroll=function(e){var t=e.target.clientHeight,r=e.target.scrollHeight,o=t+e.target.scrollTop===r;n.state.loaded&&o&&(n.setState({loaded:!1}),n.setItems(n.props.itemType,n.props.selectedSortField,n.props.selectedSortOrder,n.props.searchValue,!0))},n.onShowDetailClicked=function(e,t){n.setState({showDetailItem:t})},n.onCloseDetailClicked=function(){n.setState({showDetailItem:null})},n.onAddDataClicked=function(e,t){var r;r=n.props.isRadio?[t]:n.props.selectedItems.concat(t),n.props.onSelect&&n.props.onSelect(r,t)},n.onRemoveDataClicked=function(e,t){var r=n.props.selectedItems.filter(function(e){return e.id!==t.id});n.props.onRemove&&n.props.onRemove(r,t)},n.state={loaded:!1,items:[],showDetailItem:null},n}return r(t,e),t.prototype.componentDidMount=function(){this.__unmount=!1,this.setItems(this.props.itemType,this.props.selectedSortField,this.props.selectedSortOrder)},t.prototype.componentDidUpdate=function(e,t){e.portalUrl===this.props.portalUrl&&e.category===this.props.category&&e.isRadio===this.props.isRadio&&e.itemType===this.props.itemType&&e.selectedSortField===this.props.selectedSortField&&e.searchValue===this.props.searchValue&&e.selectedSortOrder===this.props.selectedSortOrder||(this.setState({loaded:!1}),this.setItems(this.props.itemType,this.props.selectedSortField,this.props.selectedSortOrder,this.props.searchValue))},t.prototype.componentWillUnmount=function(){this.__unmount=!0,this.contentNode&&this.contentNode.removeEventListener("scroll",this.onScroll)},t.prototype.render=function(){var e=this,t=i.jsx("div",{className:"item-list"},this.state.items&&this.state.items.map(function(t,n){return i.jsx(l.default,{selected:e.getWhetherItemSelected(t),partSelected:e.getWhetherItemPartSelected(t),key:n,item:t,portalUrl:e.props.portalUrl,onAddDataClicked:e.onAddDataClicked,onRemoveDataClicked:e.onRemoveDataClicked,onShowDetailClicked:e.onShowDetailClicked})})),n=this.props.getDetailPosition&&this.props.getDetailPosition()||{l:"0",t:"0",r:"auto",b:"auto",h:"auto",w:"300px"};return i.jsx("div",{css:u.getStyle(this.props.theme),className:"h-100 w-100"},i.jsx("div",{className:"item-chooser"},i.jsx("div",{className:"w-100 h-100 d-flex flex-wrap justify-content-center align-items-start item-list-container",onScroll:this.onScroll,ref:function(t){return e.contentNode=t}},t,!this.state.loaded||this.state.items&&0!==this.state.items.length?null:i.jsx("div",{className:"w-100 h-100 p-2"},this.props.intl.formatMessage({id:"noItemFoundWarning",defaultMessage:a.default.noItemFoundWarning}))),this.state.showDetailItem?i.jsx(s.default,{item:this.state.showDetailItem,portalUrl:this.props.portalUrl,onClose:this.onCloseDetailClicked,style:{position:"fixed",right:""+n.r,left:""+n.l,top:""+n.t,bottom:""+n.b,height:""+n.h,width:""+n.w}}):null,!this.state.loaded&&i.jsx("div",{style:{position:"absolute",left:"50%",top:"50%"},className:"jimu-primary-loading"})))},t}(i.React.PureComponent),p=i.themeUtils.withTheme(i.injectIntl(c));t.default=p},function(e,t,n){"use strict";var r=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1);t.getStyle=function(e){return i.css(o||(o=r(["\n    .component-field-chooser{\n      font-size: ",";\n      .ds-name{\n        color: ",";\n        .ds-name-selected{\n          max-width: ","rem;\n        }\n      }\n\n      .field-list{\n        .field-item.field-item-selected{\n          border: 1px solid ",";\n        }\n        .field-item{\n          border: 1px solid transparent;\n          cursor: pointer;\n          background-color: ",";\n          user-select: none;\n        }\n        .field-item:hover{\n          background-color: ",";\n        }\n        .field-item:active.field-item:hover{\n          background-color: ",";\n        }\n      }\n\n      .search-icon{\n        position: relative;\n        right: -","rem;\n        bottom: -","rem;\n      }\n\n      .search-input{\n        height: ","rem;\n        text-indent: ","rem;\n      }\n\n    }\n\n  "],["\n    .component-field-chooser{\n      font-size: ",";\n      .ds-name{\n        color: ",";\n        .ds-name-selected{\n          max-width: ","rem;\n        }\n      }\n\n      .field-list{\n        .field-item.field-item-selected{\n          border: 1px solid ",";\n        }\n        .field-item{\n          border: 1px solid transparent;\n          cursor: pointer;\n          background-color: ",";\n          user-select: none;\n        }\n        .field-item:hover{\n          background-color: ",";\n        }\n        .field-item:active.field-item:hover{\n          background-color: ",";\n        }\n      }\n\n      .search-icon{\n        position: relative;\n        right: -","rem;\n        bottom: -","rem;\n      }\n\n      .search-input{\n        height: ","rem;\n        text-indent: ","rem;\n      }\n\n    }\n\n  "])),e.typography.fontSizeBase,e.colors.black,150/14,e.colors.cyan,e.colors.grays.gray200,e.colors.grays.gray300,e.colors.white,8/14,22/14,26/14,20/14)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=function(e){function t(t){var n=e.call(this,t)||this;return n.onFieldSelect=function(e){n.props.onSelect&&n.props.onSelect(e,n.props.ds)},n}return r(t,e),t.prototype.render=function(){var e=this,t=this.props.fields;return o.React.createElement("div",{className:"field-list p-2"},t&&Object.keys(t).map(function(n){return o.React.createElement("div",{key:n,onClick:function(){e.onFieldSelect(t[n])},className:o.classNames("field-item mt-2 p-1",{"field-item-selected":e.props.selectedFields&&e.props.selectedFields.some(function(e){return e===t[n].jimuName})})},t[n].alias||t[n].name)}))},t}(o.React.PureComponent);t.default=i},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M24.132 22.112h2.02l4.041 4.041a2.857 2.857 0 1 1-4.041 4.041l-4.041-4.041v-2.02l-1.066-1.066c-5.048 4.043-12.438 3.725-17.117-.955-5.021-5.021-5.021-13.162 0-18.183s13.162-5.021 18.183 0c4.68 4.68 4.998 12.069.955 17.117l1.066 1.066zm-5.051-3.031A8.572 8.572 0 1 0 6.957 6.959a8.572 8.572 0 0 0 12.124 12.122z"});function a(e){return o.createElement("svg",r({width:32,height:32,viewBox:"0 0 32 32"},e),i)}e.exports=a,a.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(23),a=n(140),s=n(4),l=function(e){function t(t){var n=e.call(this,t)||this;return n.getInitLinkParam=function(){var e=n.props.appConfig.pageStructure;if(!e||e.length<1)return{value:""};if(n.props.originLinkParam.linkType!==o.LinkType.Page){var t=n.getPageData();return{linkType:o.LinkType.Page,value:t&&t.some(function(e){return"default"===e.id})?"default":t&&t[0]&&t[0].id,openType:i.OpenTypes.CurrentWindow}}return o.Immutable(n.props.originLinkParam)},n.getPageData=function(){var e=n.props.appConfig&&n.props.appConfig.pages,t=e&&Object.keys(e).filter(function(t){return e[t].type===o.PageType.Normal});return t&&t.map(function(t){return{id:t,name:e[t].label}})},n.setLinkParam=function(e){var t=o.Immutable(n.props.linkParam);t=t.set("value",e.id),n.props.onLinkParamChange(t)},n}return r(t,e),t.prototype.componentDidMount=function(){var e=this.getInitLinkParam();this.props.onLinkParamChange(e)},t.prototype.render=function(){var e=this.getPageData();return o.React.createElement("div",{className:"w-100"},o.React.createElement("div",{className:"mb-3"},this.props.intl.formatMessage({id:"chooseAPage",defaultMessage:s.default.chooseAPage})),o.React.createElement("div",{style:{maxHeight:this.props.selectAreaMaxHeight?this.props.selectAreaMaxHeight:"",overflowY:this.props.selectAreaMaxHeight?"auto":""}},o.React.createElement(a.default,{linkParam:this.props.linkParam,datas:e,onClick:this.setLinkParam})))},t}(o.React.PureComponent);t.default=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=function(e){function t(t){var n=e.call(this,t)||this;return n.itemOnClick=function(e){n.props.onClick(e),n.setState({selectedItemName:e.name})},n}return r(t,e),t.prototype.getListContent=function(){var e=this;return this.props.datas.map(function(t,n){return o.React.createElement("div",{onClick:function(){return e.itemOnClick(t)},key:n,className:o.classNames("linksetting-list-item btn w-100 border text-left border-bottom-0 rounded-0",{itemselected:e.props.linkParam.value===t.id})},t.name)})},t.prototype.render=function(){var e=this,t=this.props.datas.find(function(t){return e.props.linkParam.value===t.id}),n=t&&t.name;return o.React.createElement("div",{className:"linksetting-list w-100"},o.React.createElement(i.Input,{type:"select",value:n,className:"w-100",onChange:function(t){return e.itemOnClick(e.props.datas.find(function(e){return e.name===t.target.value}))}},this.props.datas.map(function(e,t){return o.React.createElement("option",{key:t,value:e.name},e.name)})))},t}(o.React.PureComponent);t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.render=function(){return null},t}(n(1).React.PureComponent);t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(23),s=n(143),l=n(2),u=n(37),c=function(e){function t(t){var n=e.call(this,t)||this;return n.noScroll="Do not scroll",n.getInitLinkParam=function(){return n.props.originLinkParam.linkType===i.LinkType.View?n.props.originLinkParam:{linkType:i.LinkType.View,openType:a.OpenTypes.CurrentWindow,value:""}},n.pageChange=function(e){var t=i.Immutable(n.props.linkParam);t=t.set("value",e.target.value),n.props.onLinkParamChange(t)},n.viewChange=function(e,t){var r=[];(r=Object.assign(r,n.state.viewLinkParamArr))[0]||(r[0]=n.getDefaultPageId());for(var o=n.props.appConfig.sections[t].views,a=0;a<r.length;a++)o.indexOf(r[a])>-1&&e!==r[a]&&r.splice(a,1);var s=r.indexOf(e);s>-1?r.splice(s,1):r.push(e);var l=i.Immutable(n.props.linkParam);l=l.set("value",r.join(",")),n.props.onLinkParamChange(l)},n.viewRemove=function(e){var t=[];(t=Object.assign(t,n.state.viewLinkParamArr))[0]||(t[0]=n.getDefaultPageId()),t=t.slice(0,1).concat(t.slice(1).filter(function(t){return t!==e}));var r=i.Immutable(n.props.linkParam);r=r.set("value",t.join(",")),n.props.onLinkParamChange(r,!0)},n.onScrollToViewChange=function(e){n.setState({scrollToViewId:e})},n.getDefaultPageId=function(){var e=n.props.appConfig&&n.props.appConfig.pages,t=e&&Object.keys(e).filter(function(e){return n.getSectionIdsFromPage(e).length>0});return t&&t.some(function(e){return"default"===e})?"default":t&&t[0]},n.getSectionIdsFromPage=function(e){var t=n.props.appConfig&&n.props.appConfig.pages;return t&&t[e]&&t[e].type===i.PageType.Normal&&u.getWidgetsOrSectionsInPageBody(n.props.appConfig,e,i.LayoutItemType.Section)||[]},n.getViewIdsFromPage=function(e){var t=[],r=n.getSectionIdsFromPage(e);if(r.length>0)for(var o=0;o<r.length;o++)t=t.concat(n.props.appConfig.sections[r[o]].views);return t},n.getSectionIdsFromView=function(e){return u.getWidgetsOrSectionsInView(n.props.appConfig,e,i.LayoutItemType.Section)||[]},n.getViewInfoFromSection=function(e){for(var t=n.props.appConfig.sections[e].views,r=[],o=0;o<t.length;o++)r.push({id:t[o],name:n.props.appConfig.views[t[o]].label});return r},n.getSelectedVeiwIds=function(){return n.state.viewLinkParamArr.slice(1)},n.state={viewLinkParamArr:[],scrollToViewId:n.noScroll},n}return r(t,e),t.prototype.componentDidMount=function(){var e=this.getInitLinkParam(),t=e.value,n=e.linkType;t&&n===i.LinkType.View?this.setState({viewLinkParamArr:t.split(",")}):this.setState({viewLinkParamArr:[]}),this.props.onLinkParamChange(e)},t.prototype.componentWillReceiveProps=function(e){var t=e.linkParam,n=t.value,r=t.linkType;n&&r===i.LinkType.View?this.setState({viewLinkParamArr:n.split(",")}):this.setState({viewLinkParamArr:[]})},t.prototype.render=function(){var e=this;if(!this.props.appConfig)return null;var t={};Object.keys(this.props.appConfig.pages).forEach(function(n){e.props.appConfig.pages[n]&&e.props.appConfig.pages[n].type===i.PageType.Normal&&(t[n]=o({},e.props.appConfig.pages[n]))});var n=this.state.viewLinkParamArr[0]||this.getDefaultPageId();return t[n]?i.React.createElement("div",{className:"w-100"},i.React.createElement("div",{className:"mb-3"},"Choose views"),i.React.createElement("div",{style:{maxHeight:this.props.selectAreaMaxHeight?this.props.selectAreaMaxHeight:"",overflowY:this.props.selectAreaMaxHeight?"auto":""}},i.React.createElement(l.Input,{type:"select",value:n,onChange:this.pageChange,className:"w-100 mb-3"},Object.keys(t).filter(function(t){return e.getSectionIdsFromPage(t).length>0}).map(function(e,n){return i.React.createElement("option",{key:n,value:t[e].id},t[e].label)})),i.React.createElement("div",{className:"mb-3 choose-view"},this.getSectionIdsFromPage(n).map(function(t){return i.React.createElement(p,{sections:e.props.appConfig.sections,sectionId:t,viewsInfo:e.getViewInfoFromSection(t),viewLinkParamArr:e.state.viewLinkParamArr,viewChange:e.viewChange,viewRemove:e.viewRemove,key:t})})),i.React.createElement("div",{className:"mb-3 choose-view"},this.getSelectedVeiwIds().map(function(t){return e.getSectionIdsFromView(t).map(function(t){return i.React.createElement(p,{sections:e.props.appConfig.sections,sectionId:t,viewsInfo:e.getViewInfoFromSection(t),viewLinkParamArr:e.state.viewLinkParamArr,viewChange:e.viewChange,viewRemove:e.viewRemove,key:t})})})))):null},t}(i.React.PureComponent);t.default=c;var p=function(e){function t(t){var n=e.call(this,t)||this;return n.onViewChange=function(e){n.setState({viewId:e}),n.props.viewChange(e,n.props.sectionId)},n.state={viewId:null},n}return r(t,e),t.prototype.componentWillUnmount=function(){this.props.viewRemove(this.state.viewId)},t.prototype.render=function(){var e=this;return i.React.createElement(s.default,{className:"mb-3 choose-view",title:this.props.sections[this.props.sectionId]&&this.props.sections[this.props.sectionId].label,isOpen:!0,key:this.props.sectionId},i.React.createElement("div",{className:"linksetting-list w-100 view-border border-top-0 border-left-0 border-right-0 rounded-0"},this.props.viewsInfo.map(function(t,n){return i.React.createElement("div",{onClick:function(){return e.onViewChange(t.id)},key:n,className:i.classNames("linksetting-list-item btn w-100 view-border pl-2 pt-1 text-left d-flex justify-content-start border-bottom-0 rounded-0",{"item-common":!(e.props.viewLinkParamArr.indexOf(t.id)>-1)},{itemselected:e.props.viewLinkParamArr.indexOf(t.id)>-1})},t.name)})))},t}(i.React.PureComponent)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(118),s=n(119),l=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.componentWillMount=function(){this.setState({collapse:this.props.isOpen})},t.prototype.render=function(){var e=this;return o.React.createElement("div",{className:o.classNames("w-100",this.props.className)},o.React.createElement("div",{style:{overflow:"hidden"},className:"w-100 btn pl-2 pr-2 d-flex justify-content-between",onClick:function(){e.setState({collapse:!e.state.collapse})}},o.React.createElement("div",null,this.props.title),o.React.createElement(i.Icon,{icon:this.state.collapse?a:s})),o.React.createElement(i.Collapse,{isOpen:this.state.collapse},this.props.children))},t}(o.React.PureComponent);t.default=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(120),s=n(23),l=function(e){function t(t){var n=e.call(this,t)||this;return n.getInitLinkParam=function(){return n.props.originLinkParam.linkType===o.LinkType.WebAddress?n.props.originLinkParam:{linkType:o.LinkType.WebAddress,openType:s.OpenTypes.NewWindow,value:""}},n.webAddressInputChange=function(e){var t=e,r=o.Immutable(n.props.linkParam);r=r.set("value",t).set("expression",null),n.props.onLinkParamChange(r)},n.webAddressExpressionChange=function(e){var t=o.Immutable(n.props.linkParam);t=t.set("expression",e).set("value",""),n.props.onLinkParamChange(t),n.closeExpPopup()},n.openExpPopup=function(){return n.setState({isExpPopupOpen:!0})},n.closeExpPopup=function(){return n.setState({isExpPopupOpen:!1})},n.state={isExpPopupOpen:!1},n}return r(t,e),t.prototype.componentDidMount=function(){var e=this.getInitLinkParam();this.props.onLinkParamChange(e)},t.prototype.render=function(){var e=this;return o.React.createElement("div",{className:"w-100"},o.React.createElement("div",{className:"mb-3"},"URL"),o.React.createElement("div",null,this.props.dataSourceIds?o.React.createElement(a.default,{dataSourceIds:this.props.dataSourceIds,onChange:this.webAddressExpressionChange,expression:this.props.linkParam&&this.props.linkParam.expression&&this.props.linkParam.expression.asMutable({deep:!0}),closeExpPopup:this.closeExpPopup,openExpPopup:this.openExpPopup,isExpPopupOpen:this.state.isExpPopupOpen,from:[a.ExpressionInputFrom.Static,a.ExpressionInputFrom.Attribute,a.ExpressionInputFrom.Statistics,a.ExpressionInputFrom.Expression]}):o.React.createElement(i.Input,{value:this.props.linkParam.value?this.props.linkParam.value:"",className:"w-100",onChange:function(t){return e.webAddressInputChange(t.target.value)}})))},t}(o.React.PureComponent);t.default=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(16),a=n(61),s=function(e){function t(t){var n=e.call(this,t)||this;return n.getSelectedFields=function(){if(!n.props.expression)return null;var e=n.props.expression.parts&&n.props.expression.parts[0];return e&&!i.getWhetherDsDisabled(e,n.props.dataSourceIds)&&e.type===o.ExpressionPartType.Field?o.Immutable([e.jimuFieldName]):null},n.onSelect=function(e,t){if(e&&t){var r={type:o.ExpressionPartType.Field,exp:"$"+(e.alias||e.name),dataSourceId:t.id,jimuFieldName:e.jimuName};n.props.onChange({name:r.exp,parts:[r]})}},n}return r(t,e),t.prototype.render=function(){return o.React.createElement("div",{className:"expression-builder-tab attribute-tab"},o.React.createElement("div",{className:"field-chooser-container"},o.React.createElement(a.default,{dataSourceIds:this.props.dataSourceIds,onSelect:this.onSelect,selectedFields:this.getSelectedFields()})))},t}(o.React.PureComponent);t.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(2),s=n(121),l=n(16),u=n(4),c=function(e){function t(n){var r=e.call(this,n)||this;return r.getMutableExpression=function(e){var t=r.props.expression&&r.props.expression.asMutable?r.props.expression.asMutable({deep:!0}):r.props.expression;return t&&t.parts&&t.parts.asMutable&&(t.parts=t.parts.asMutable({deep:!0})),t},r.onExpChange=function(e){r.setState({expression:e})},r.onChange=function(){r.props.onChange({name:r.state.name||r.getDefaultName(),parts:r.state.expression&&r.state.expression.parts})},r.onNameChange=function(e){r.setState({name:e.target.value})},r.getDefaultName=function(){return"expression-"+t.count},r.getWhetherDisableInsert=function(){return!r.state.expression||!r.state.expression.parts||0===r.state.expression.parts.length||!l.getWhetherExpressionValid(r.state.expression)},t.count++,r.state={expression:r.getMutableExpression(r.props.expression),name:r.props.expression&&r.props.expression.name||r.getDefaultName()},r}return r(t,e),t.prototype.componentDidUpdate=function(e){e.expression!==this.props.expression&&this.setState({expression:this.getMutableExpression(this.props.expression)})},t.prototype.render=function(){return i.React.createElement("div",{className:"expression-builder-tab expression-tab"},i.React.createElement("div",{className:"d-flex justify-content-between mb-2 expression-name"},i.React.createElement(a.Label,{for:"expression-name-input",className:"expression-name-label"},this.props.intl.formatMessage({id:"name",defaultMessage:u.default.name})+": "),i.React.createElement("span",{className:"d-inline-block p-1"}),i.React.createElement(a.Input,{className:"flex-grow-1",value:this.state.name,onChange:this.onNameChange,id:"expression-name-input"})),i.React.createElement("div",{className:"d-flex justify-content-end mt-2 mb-2"},i.React.createElement(a.Button,{onClick:this.onChange,color:"primary",disabled:this.getWhetherDisableInsert(),className:"expression-insert-btn"},this.props.intl.formatMessage({id:"insert",defaultMessage:u.default.insert}))),i.React.createElement("div",{className:"expression-editor-container"},i.React.createElement(s.default,o({},this.props,{expression:this.state.expression,onChange:this.onExpChange}))))},t.count=-1,t}(i.React.PureComponent);t.default=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=a(n(0)),u=s(n(148)),c=a(n(7));function p(e){return e&&e.replace(/&nbsp;|\u202F|\u00A0/g," ")}function d(e){var t=function e(t){if(t.nodeType===Node.TEXT_NODE)return t;for(var n=t.childNodes,r=n.length-1;r>=0;r--){var o=e(n[r]);if(null!==o)return o}return null}(e),n=document.activeElement===e;if(null!==t&&null!==t.nodeValue&&n){var r=document.createRange(),o=window.getSelection();r.setStart(t,t.nodeValue.length),r.collapse(!0),o.removeAllRanges(),o.addRange(r),e instanceof HTMLElement&&e.focus()}}var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastHtml=t.props.html,t.el="function"==typeof t.props.innerRef?{current:null}:l.createRef(),t.getEl=function(){return(t.props.innerRef&&"function"!=typeof t.props.innerRef?t.props.innerRef:t.el).current},t.emitChange=function(e){var n=t.getEl();if(n){var r=n.innerHTML;if(t.props.onChange&&r!==t.lastHtml){var o=Object.assign({},e,{target:{value:r}});t.props.onChange(o)}t.lastHtml=r}},t}return r(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.tagName,r=t.html,a=t.innerRef,s=i(t,["tagName","html","innerRef"]);return l.createElement(n||"div",o({},s,{ref:"function"==typeof a?function(t){a(t),e.el.current=t}:a||this.el,onInput:this.emitChange,onBlur:this.props.onBlur||this.emitChange,onKeyDown:this.props.onKeyDown||this.emitChange,contentEditable:!this.props.disabled,dangerouslySetInnerHTML:{__html:r}}),this.props.children)},t.prototype.shouldComponentUpdate=function(e){var t=this.props,n=this.getEl();return!n||(p(e.html)!==p(n.innerHTML)||(t.disabled!==e.disabled||t.tagName!==e.tagName||t.className!==e.className||t.innerRef!==e.innerRef||!u.default(t.style,e.style)))},t.prototype.componentDidUpdate=function(){var e=this.getEl();e&&(this.props.html!==e.innerHTML&&(e.innerHTML=this.lastHtml=this.props.html),d(e))},t.propTypes={html:c.string.isRequired,onChange:c.func,onBlur:c.func,onKeyDown:c.func,disabled:c.bool,tagName:c.string,className:c.string,style:c.object,innerRef:c.oneOfType([c.object,c.func])},t}(l.Component);t.default=f},function(e,t,n){"use strict";var r=Array.isArray,o=Object.keys,i=Object.prototype.hasOwnProperty;e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var a,s,l,u=r(t),c=r(n);if(u&&c){if((s=t.length)!=n.length)return!1;for(a=s;0!=a--;)if(!e(t[a],n[a]))return!1;return!0}if(u!=c)return!1;var p=t instanceof Date,d=n instanceof Date;if(p!=d)return!1;if(p&&d)return t.getTime()==n.getTime();var f=t instanceof RegExp,h=n instanceof RegExp;if(f!=h)return!1;if(f&&h)return t.toString()==n.toString();var g=o(t);if((s=g.length)!==o(n).length)return!1;for(a=s;0!=a--;)if(!i.call(n,g[a]))return!1;for(a=s;0!=a--;)if(!e(t[l=g[a]],n[l]))return!1;return!0}return t!=t&&n!=n}},function(e,t,n){"use strict";e.exports=n(150)},function(e,t,n){"use strict";
/** @license React v16.8.4
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(151),o=n(0);function i(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,o,i,a,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,o,i,a,s],u=0;(e=Error(t.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var a="function"==typeof Symbol&&Symbol.for,s=a?Symbol.for("react.portal"):60106,l=a?Symbol.for("react.fragment"):60107,u=a?Symbol.for("react.strict_mode"):60108,c=a?Symbol.for("react.profiler"):60114,p=a?Symbol.for("react.provider"):60109,d=a?Symbol.for("react.context"):60110,f=a?Symbol.for("react.concurrent_mode"):60111,h=a?Symbol.for("react.forward_ref"):60112,g=a?Symbol.for("react.suspense"):60113,m=a?Symbol.for("react.memo"):60115,y=a?Symbol.for("react.lazy"):60116;function v(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case f:return"ConcurrentMode";case l:return"Fragment";case s:return"Portal";case c:return"Profiler";case u:return"StrictMode";case g:return"Suspense"}if("object"==typeof e)switch(e.$$typeof){case d:return"Context.Consumer";case p:return"Context.Provider";case h:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case m:return v(e.type);case y:if(e=1===e._status?e._result:null)return v(e)}return null}var b=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;b.hasOwnProperty("ReactCurrentDispatcher")||(b.ReactCurrentDispatcher={current:null});var x={};function w(e,t){for(var n=0|e._threadCount;n<=t;n++)e[n]=e._currentValue2,e._threadCount=n+1}for(var S=new Uint16Array(16),C=0;15>C;C++)S[C]=C+1;S[15]=0;var I=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_=Object.prototype.hasOwnProperty,P={},O={};function E(e){return!!_.call(O,e)||!_.call(P,e)&&(I.test(e)?O[e]=!0:(P[e]=!0,!1))}function j(e,t,n,r){if(null===t||void 0===t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function k(e,t,n,r,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){T[e]=new k(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];T[t]=new k(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){T[e]=new k(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){T[e]=new k(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){T[e]=new k(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){T[e]=new k(e,3,!0,e,null)}),["capture","download"].forEach(function(e){T[e]=new k(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){T[e]=new k(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){T[e]=new k(e,5,!1,e.toLowerCase(),null)});var R=/[\-:]([a-z])/g;function M(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(R,M);T[t]=new k(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(R,M);T[t]=new k(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(R,M);T[t]=new k(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(e){T[e]=new k(e,1,!1,e.toLowerCase(),null)});var A=/["'&<>]/;function D(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=A.exec(e);if(t){var n,r="",o=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}o!==n&&(r+=e.substring(o,n)),o=n+1,r+=t}e=o!==n?r+e.substring(o,n):r}return e}var N=null,F=null,L=null,B=!1,z=!1,U=null,W=0;function H(){return null===N&&i("307"),N}function V(){return 0<W&&i("312"),{memoizedState:null,queue:null,next:null}}function G(){return null===L?null===F?(B=!1,F=L=V()):(B=!0,L=F):null===L.next?(B=!1,L=L.next=V()):(B=!0,L=L.next),L}function J(e,t,n,r){for(;z;)z=!1,W+=1,L=null,n=e(t,r);return F=N=null,W=0,L=U=null,n}function q(e,t){return"function"==typeof t?t(e):t}function X(e,t,n){if(N=H(),L=G(),B){var r=L.queue;if(t=r.dispatch,null!==U&&void 0!==(n=U.get(r))){U.delete(r),r=L.memoizedState;do{r=e(r,n.action),n=n.next}while(null!==n);return L.memoizedState=r,[r,t]}return[L.memoizedState,t]}return e=e===q?"function"==typeof t?t():t:void 0!==n?n(t):t,L.memoizedState=e,e=(e=L.queue={last:null,dispatch:null}).dispatch=function(e,t,n){if(25>W||i("301"),e===N)if(z=!0,e={action:n,next:null},null===U&&(U=new Map),void 0===(n=U.get(t)))U.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}.bind(null,N,e),[L.memoizedState,e]}function $(){}var K=0,Y={readContext:function(e){var t=K;return w(e,t),e[t]},useContext:function(e){H();var t=K;return w(e,t),e[t]},useMemo:function(e,t){if(N=H(),L=G(),t=void 0===t?null:t,null!==L){var n=L.memoizedState;if(null!==n&&null!==t){e:{var r=n[1];if(null===r)r=!1;else{for(var o=0;o<r.length&&o<t.length;o++){var i=t[o],a=r[o];if((i!==a||0===i&&1/i!=1/a)&&(i==i||a==a)){r=!1;break e}}r=!0}}if(r)return n[0]}}return e=e(),L.memoizedState=[e,t],e},useReducer:X,useRef:function(e){N=H();var t=(L=G()).memoizedState;return null===t?(e={current:e},L.memoizedState=e):t},useState:function(e){return X(q,e)},useLayoutEffect:function(){},useCallback:function(e){return e},useImperativeHandle:$,useEffect:$,useDebugValue:$},Z={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Q(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var ee={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},te=r({menuitem:!0},ee),ne={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},re=["Webkit","ms","Moz","O"];Object.keys(ne).forEach(function(e){re.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ne[t]=ne[e]})});var oe=/([A-Z])/g,ie=/^ms-/,ae=o.Children.toArray,se=b.ReactCurrentDispatcher,le={listing:!0,pre:!0,textarea:!0},ue=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,ce={},pe={};var de=Object.prototype.hasOwnProperty,fe={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function he(e,t){void 0===e&&i("152",v(t)||"Component")}function ge(e,t,n){function a(o,a){var s=function(e,t,n){var r=e.contextType;if("object"==typeof r&&null!==r)return w(r,n),r[n];if(e=e.contextTypes){for(var o in n={},e)n[o]=t[o];t=n}else t=x;return t}(a,t,n),l=[],u=!1,c={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===l)return null},enqueueReplaceState:function(e,t){u=!0,l=[t]},enqueueSetState:function(e,t){if(null===l)return null;l.push(t)}},p=void 0;if(a.prototype&&a.prototype.isReactComponent){if(p=new a(o.props,s,c),"function"==typeof a.getDerivedStateFromProps){var d=a.getDerivedStateFromProps.call(null,o.props,p.state);null!=d&&(p.state=r({},p.state,d))}}else if(N={},p=a(o.props,s,c),null==(p=J(a,o.props,p,s))||null==p.render)return void he(e=p,a);if(p.props=o.props,p.context=s,p.updater=c,void 0===(c=p.state)&&(p.state=c=null),"function"==typeof p.UNSAFE_componentWillMount||"function"==typeof p.componentWillMount)if("function"==typeof p.componentWillMount&&"function"!=typeof a.getDerivedStateFromProps&&p.componentWillMount(),"function"==typeof p.UNSAFE_componentWillMount&&"function"!=typeof a.getDerivedStateFromProps&&p.UNSAFE_componentWillMount(),l.length){c=l;var f=u;if(l=null,u=!1,f&&1===c.length)p.state=c[0];else{d=f?c[0]:p.state;var h=!0;for(f=f?1:0;f<c.length;f++){var g=c[f];null!=(g="function"==typeof g?g.call(p,d,o.props,s):g)&&(h?(h=!1,d=r({},d,g)):r(d,g))}p.state=d}}else l=null;if(he(e=p.render(),a),o=void 0,"function"==typeof p.getChildContext&&"object"==typeof(s=a.childContextTypes))for(var m in o=p.getChildContext())m in s||i("108",v(a)||"Unknown",m);o&&(t=r({},t,o))}for(;o.isValidElement(e);){var s=e,l=s.type;if("function"!=typeof l)break;a(s,l)}return{child:e,context:t}}var me=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");o.isValidElement(t)?t.type!==l?t=[t]:(t=t.props.children,t=o.isValidElement(t)?[t]:ae(t)):t=ae(t),t={type:null,domNamespace:Z.html,children:t,childIndex:0,context:x,footer:""};var r=S[0];if(0===r){var a=S,s=2*(r=a.length);65536>=s||i("304");var u=new Uint16Array(s);for(u.set(a),(S=u)[0]=r+1,a=r;a<s-1;a++)S[a]=a+1;S[s-1]=0}else S[0]=S[r];this.threadID=r,this.stack=[t],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=n,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[]}return e.prototype.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var e=this.threadID;S[e]=S[0],S[0]=e}},e.prototype.pushProvider=function(e){var t=++this.contextIndex,n=e.type._context,r=this.threadID;w(n,r);var o=n[r];this.contextStack[t]=n,this.contextValueStack[t]=o,n[r]=e.props.value},e.prototype.popProvider=function(){var e=this.contextIndex,t=this.contextStack[e],n=this.contextValueStack[e];this.contextStack[e]=null,this.contextValueStack[e]=null,this.contextIndex--,t[this.threadID]=n},e.prototype.clearProviders=function(){for(var e=this.contextIndex;0<=e;e--)this.contextStack[e][this.threadID]=this.contextValueStack[e]},e.prototype.read=function(e){if(this.exhausted)return null;var t=K;K=this.threadID;var n=se.current;se.current=Y;try{for(var r=[""],o=!1;r[0].length<e;){if(0===this.stack.length){this.exhausted=!0;var a=this.threadID;S[a]=S[0],S[0]=a;break}var s=this.stack[this.stack.length-1];if(o||s.childIndex>=s.children.length){var l=s.footer;if(""!==l&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===s.type)this.currentSelectValue=null;else if(null!=s.type&&null!=s.type.type&&s.type.type.$$typeof===p)this.popProvider(s.type);else if(s.type===g){this.suspenseDepth--;var u=r.pop();if(o){o=!1;var c=s.fallbackFrame;c||i("303"),this.stack.push(c);continue}r[this.suspenseDepth]+=u}r[this.suspenseDepth]+=l}else{var d=s.children[s.childIndex++],f="";try{f+=this.render(d,s.context,s.domNamespace)}catch(e){throw e}r.length<=this.suspenseDepth&&r.push(""),r[this.suspenseDepth]+=f}}return r[0]}finally{se.current=n,K=t}},e.prototype.render=function(e,t,n){if("string"==typeof e||"number"==typeof e)return""===(n=""+e)?"":this.makeStaticMarkup?D(n):this.previousWasTextNode?"\x3c!-- --\x3e"+D(n):(this.previousWasTextNode=!0,D(n));if(e=(t=ge(e,t,this.threadID)).child,t=t.context,null===e||!1===e)return"";if(!o.isValidElement(e)){if(null!=e&&null!=e.$$typeof){var a=e.$$typeof;a===s&&i("257"),i("258",a.toString())}return e=ae(e),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""}if("string"==typeof(a=e.type))return this.renderDOM(e,t,n);switch(a){case u:case f:case c:case l:return e=ae(e.props.children),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case g:i("294")}if("object"==typeof a&&null!==a)switch(a.$$typeof){case h:N={};var v=a.render(e.props,e.ref);return v=J(a.render,e.props,v,e.ref),v=ae(v),this.stack.push({type:null,domNamespace:n,children:v,childIndex:0,context:t,footer:""}),"";case m:return e=[o.createElement(a.type,r({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case p:return n={type:e,domNamespace:n,children:a=ae(e.props.children),childIndex:0,context:t,footer:""},this.pushProvider(e),this.stack.push(n),"";case d:a=e.type,v=e.props;var b=this.threadID;return w(a,b),a=ae(v.children(a[b])),this.stack.push({type:e,domNamespace:n,children:a,childIndex:0,context:t,footer:""}),"";case y:i("295")}i("130",null==a?a:typeof a,"")},e.prototype.renderDOM=function(e,t,n){var a=e.type.toLowerCase();n===Z.html&&Q(a),ce.hasOwnProperty(a)||(ue.test(a)||i("65",a),ce[a]=!0);var s=e.props;if("input"===a)s=r({type:void 0},s,{defaultChecked:void 0,defaultValue:void 0,value:null!=s.value?s.value:s.defaultValue,checked:null!=s.checked?s.checked:s.defaultChecked});else if("textarea"===a){var l=s.value;if(null==l){l=s.defaultValue;var u=s.children;null!=u&&(null!=l&&i("92"),Array.isArray(u)&&(1>=u.length||i("93"),u=u[0]),l=""+u),null==l&&(l="")}s=r({},s,{value:void 0,children:""+l})}else if("select"===a)this.currentSelectValue=null!=s.value?s.value:s.defaultValue,s=r({},s,{value:void 0});else if("option"===a){u=this.currentSelectValue;var c=function(e){if(void 0===e||null===e)return e;var t="";return o.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(s.children);if(null!=u){var p=null!=s.value?s.value+"":c;if(l=!1,Array.isArray(u)){for(var d=0;d<u.length;d++)if(""+u[d]===p){l=!0;break}}else l=""+u===p;s=r({selected:void 0,children:void 0},s,{selected:l,children:c})}}for(x in(l=s)&&(te[a]&&(null!=l.children||null!=l.dangerouslySetInnerHTML)&&i("137",a,""),null!=l.dangerouslySetInnerHTML&&(null!=l.children&&i("60"),"object"==typeof l.dangerouslySetInnerHTML&&"__html"in l.dangerouslySetInnerHTML||i("61")),null!=l.style&&"object"!=typeof l.style&&i("62","")),l=s,u=this.makeStaticMarkup,c=1===this.stack.length,p="<"+e.type,l)if(de.call(l,x)){var f=l[x];if(null!=f){if("style"===x){d=void 0;var h="",g="";for(d in f)if(f.hasOwnProperty(d)){var m=0===d.indexOf("--"),y=f[d];if(null!=y){var v=d;if(pe.hasOwnProperty(v))v=pe[v];else{var b=v.replace(oe,"-$1").toLowerCase().replace(ie,"-ms-");v=pe[v]=b}h+=g+v+":",g=d,h+=m=null==y||"boolean"==typeof y||""===y?"":m||"number"!=typeof y||0===y||ne.hasOwnProperty(g)&&ne[g]?(""+y).trim():y+"px",g=";"}}f=h||null}d=null;e:if(m=a,y=l,-1===m.indexOf("-"))m="string"==typeof y.is;else switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":m=!1;break e;default:m=!0}m?fe.hasOwnProperty(x)||(d=E(d=x)&&null!=f?d+'="'+D(f)+'"':""):(m=x,d=f,f=T.hasOwnProperty(m)?T[m]:null,(y="style"!==m)&&(y=null!==f?0===f.type:2<m.length&&("o"===m[0]||"O"===m[0])&&("n"===m[1]||"N"===m[1])),y||j(m,d,f,!1)?d="":null!==f?(m=f.attributeName,d=3===(f=f.type)||4===f&&!0===d?m+'=""':m+'="'+D(d)+'"'):d=E(m)?m+'="'+D(d)+'"':""),d&&(p+=" "+d)}}u||c&&(p+=' data-reactroot=""');var x=p;l="",ee.hasOwnProperty(a)?x+="/>":(x+=">",l="</"+e.type+">");e:{if(null!=(u=s.dangerouslySetInnerHTML)){if(null!=u.__html){u=u.__html;break e}}else if("string"==typeof(u=s.children)||"number"==typeof u){u=D(u);break e}u=null}return null!=u?(s=[],le[a]&&"\n"===u.charAt(0)&&(x+="\n"),x+=u):s=ae(s.children),e=e.type,n=null==n||"http://www.w3.org/1999/xhtml"===n?Q(e):"http://www.w3.org/2000/svg"===n&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":n,this.stack.push({domNamespace:n,type:a,children:s,childIndex:0,context:t,footer:l}),this.previousWasTextNode=!1,x},e}(),ye={renderToString:function(e){e=new me(e,!1);try{return e.read(1/0)}finally{e.destroy()}},renderToStaticMarkup:function(e){e=new me(e,!0);try{return e.read(1/0)}finally{e.destroy()}},renderToNodeStream:function(){i("207")},renderToStaticNodeStream:function(){i("208")},version:"16.8.4"},ve={default:ye},be=ve&&ye||ve;e.exports=be.default||be},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in n=Object(arguments[l]))o.call(n,u)&&(s[u]=n[u]);if(r){a=r(n);for(var c=0;c<a.length;c++)i.call(n,a[c])&&(s[a[c]]=n[a[c]])}}return s}},function(e,t,n){"use strict";var r=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1);t.getStyle=function(e){return i.css(o||(o=r(["\n    .component-expression-editor{\n      .expression-editor-input{\n        font-size: 13px;\n        font-weight: 400;\n        border: 1px solid gray;\n        overflow: hidden;\n        min-height: ",";\n        user-select: none;\n        .expression-editor-input-content-editable{\n          min-height: ",";\n        }\n        p{\n          min-height: 100%;\n        }\n        .break-all{\n          word-break: break-all;\n        }\n        span.error-exp{\n          color: #DD4045;\n        }\n        .field-exp{\n          color: #B084DF;\n        }\n        .function-exp{\n          color: #FFB86C;\n        }\n        .number-exp{\n          color: #19F9CD;\n        }\n        .string-exp{\n          color: #6FC1FF;\n        }\n        .operator-exp{\n          color: #FF75B5;\n        }\n        .unknown-exp{\n          color: #DD4045;\n        }\n        .ds-disabled-exp{\n          color: ",";\n          background-color: ",";\n        }\n      }\n\n      .error-border{\n        border: 1px solid #DD4045;\n        outline: none;\n      }\n\n      .expression-editor-function-item{\n        border: 1px solid transparent;\n        cursor: pointer;\n        background-color: ",";\n        user-select: none;\n      }\n      .expression-editor-function-item:hover{\n        background-color: ",";\n      }\n      .expression-editor-function-item:active.expression-editor-function-item:hover{\n        background-color: ",";\n      }\n\n      .exp-editor-helper-tab{\n        overflow-y: auto;\n      }\n\n      .error-message{\n        height: 20px;\n        line-height: 20px;\n      }\n\n      .exp-poper{\n        background-color: ",";\n        border: 1px solid ",";\n        font-size: 13px;\n        width: ",";\n        z-index: 1;\n        padding: 0 !important;\n        box-shadow: 0 0 8px 0 ",";\n        .exp-popper-item{\n          padding-left: 8px;\n          padding-right: 8px;\n        }\n      }\n      .exp-popper-item:hover, .exp-popper-selected-item{\n        background-color: ",";\n      }\n\n    }\n\n  "],["\n    .component-expression-editor{\n      .expression-editor-input{\n        font-size: 13px;\n        font-weight: 400;\n        border: 1px solid gray;\n        overflow: hidden;\n        min-height: ",";\n        user-select: none;\n        .expression-editor-input-content-editable{\n          min-height: ",";\n        }\n        p{\n          min-height: 100%;\n        }\n        .break-all{\n          word-break: break-all;\n        }\n        span.error-exp{\n          color: #DD4045;\n        }\n        .field-exp{\n          color: #B084DF;\n        }\n        .function-exp{\n          color: #FFB86C;\n        }\n        .number-exp{\n          color: #19F9CD;\n        }\n        .string-exp{\n          color: #6FC1FF;\n        }\n        .operator-exp{\n          color: #FF75B5;\n        }\n        .unknown-exp{\n          color: #DD4045;\n        }\n        .ds-disabled-exp{\n          color: ",";\n          background-color: ",";\n        }\n      }\n\n      .error-border{\n        border: 1px solid #DD4045;\n        outline: none;\n      }\n\n      .expression-editor-function-item{\n        border: 1px solid transparent;\n        cursor: pointer;\n        background-color: ",";\n        user-select: none;\n      }\n      .expression-editor-function-item:hover{\n        background-color: ",";\n      }\n      .expression-editor-function-item:active.expression-editor-function-item:hover{\n        background-color: ",";\n      }\n\n      .exp-editor-helper-tab{\n        overflow-y: auto;\n      }\n\n      .error-message{\n        height: 20px;\n        line-height: 20px;\n      }\n\n      .exp-poper{\n        background-color: ",";\n        border: 1px solid ",";\n        font-size: 13px;\n        width: ",";\n        z-index: 1;\n        padding: 0 !important;\n        box-shadow: 0 0 8px 0 ",";\n        .exp-popper-item{\n          padding-left: 8px;\n          padding-right: 8px;\n        }\n      }\n      .exp-popper-item:hover, .exp-popper-selected-item{\n        background-color: ",";\n      }\n\n    }\n\n  "])),i.polished.rem(100),i.polished.rem(100),e.colors.dark,i.polished.rgba(e.colors.reds.red500,.5),e.colors.grays.gray200,e.colors.grays.gray300,e.colors.white,e.colors.grays.gray100,e.colors.grays.gray400,i.polished.rem(150),i.polished.rgba(e.colors.white,.5),e.colors.secondary)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(19),s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return r(t,e),t.prototype.render=function(){return i.React.createElement(a.default,o({},this.props,{className:"string-exp",tabIndex:0}))},t}(i.React.PureComponent);t.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(16),a=n(19),s=n(69),l=n(70),u=n(71),c=n(72),p=n(41),d=function(e){function t(t){var n=e.call(this,t)||this;return n.getComponent=function(e,t){var r=p.getIndexOfParentPart(n.props.externalId,n.props.id);switch(e.type){case o.ExpressionPartType.Field:return o.React.createElement(s.default,{exp:e.exp,id:p.getChildPartId(n.props.externalId,r,t),key:t,isEditable:n.props.isEditable,dataSourceId:e.dataSourceId,isDsDisabled:i.getWhetherDsDisabled(e,n.props.dataSourceIds),isError:!i.getWhetherFieldIsNumber(e.dataSourceId,e.jimuFieldName)});case o.ExpressionPartType.Number:return o.React.createElement(l.default,{exp:e.exp,id:p.getChildPartId(n.props.externalId,r,t),key:t,isEditable:n.props.isEditable});case o.ExpressionPartType.Unknown:return o.React.createElement(u.default,{exp:e.exp,id:p.getChildPartId(n.props.externalId,r,t),key:t,isEditable:n.props.isEditable});case o.ExpressionPartType.Operator:return o.React.createElement(c.default,{exp:e.exp,id:p.getChildPartId(n.props.externalId,r,t),key:t,isEditable:n.props.isEditable});default:return null}},n.getFunctionTooltip=function(e){if(!e)return null;switch(n.props.exp){case o.ExpressionFunctions.Average:return"Average ( fieldName ) returns  { Number }";case o.ExpressionFunctions.Count:return"Count ( fieldName ) returns  { Number }";case o.ExpressionFunctions.Sum:return"Sum ( fieldName ) returns  { Number }";case o.ExpressionFunctions.Max:return"Max ( fieldName ) returns  { Number }";case o.ExpressionFunctions.Min:return"Min ( fieldName ) returns  { Number }";default:return null}},n}return r(t,e),t.prototype.render=function(){var e,t=this;return o.React.createElement("span",{className:o.classNames("function-exp",(e={},e[this.props.className]=!!this.props.className,e["error-exp"]=this.props.isError,e["ds-disabled-exp"]=this.props.isDsDisabled,e)),contentEditable:!!this.props.isEditable,suppressContentEditableWarning:!0,id:this.props.id,title:this.getFunctionTooltip(this.props.exp)},o.React.createElement(a.default,{className:"function-exp-name",exp:this.props.exp,id:this.props.id+"-function",isEditable:!!this.props.isEditable,tabIndex:0}),o.React.createElement("span",null,"("),this.props.parts&&this.props.parts.map(function(e,n){return t.getComponent(e,""+n)}),o.React.createElement("span",null,")"))},t}(o.React.PureComponent);t.default=d},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=function(e){function t(t){var n=e.call(this,t)||this;return n.itemHeight=25,n.popoverItemStyle={height:n.itemHeight+"px !important",lineHeight:n.itemHeight+"px !important"},n.checkTarget=function(e){return!!e&&!(!document||!document.getElementById(e))},n}return r(t,e),t.prototype.componentDidUpdate=function(e){if(this.props.selectedItemIndex!==e.selectedItemIndex&&this.props.selectedItemIndex&&this.root){var t=void 0;if(parseInt(this.props.selectedItemIndex)>parseInt(e.selectedItemIndex))if(parseInt(this.props.selectedItemIndex)===this.props.items.length-1)t=this.root.scrollHeight-this.root.offsetHeight;else{var n=Math.floor((this.root.scrollTop+this.root.offsetHeight)/this.itemHeight)-1;t=parseInt(this.props.selectedItemIndex)>=n?this.root.scrollTop+this.itemHeight:this.root.scrollTop}else if(0===parseInt(this.props.selectedItemIndex))t=0;else{var r=Math.floor(this.root.scrollTop/this.itemHeight);t=parseInt(this.props.selectedItemIndex)<=r?this.root.scrollTop-this.itemHeight:this.root.scrollTop}this.root.scrollTo(null,t)}},t.prototype.render=function(){var e=this;return this.props.targetNodeId&&this.checkTarget(this.props.targetNodeId)&&this.props.items&&0!==this.props.items.length?o.jsx(i.Popper,{reference:this.props.targetNodeId,open:!0,placement:"bottom",className:"exp-poper"},o.jsx("div",{style:{width:"150px",maxHeight:"150px",overflow:"auto"},ref:function(t){return e.root=t}},this.props.items.map(function(t,n){return o.jsx("div",{key:n,onClick:function(){return e.props.onClick&&e.props.onClick(t,e.props.targetNodeId)},className:o.classNames("text-truncate exp-popper-item",{"exp-popper-selected-item":""+n===e.props.selectedItemIndex}),title:t.content,css:o.css(e.popoverItemStyle)},t.content)}))):null},t}(o.React.PureComponent);t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1),a=n(2),s=n(4),l=n(61),u=n(41);!function(e){e.Fields="FIELDS",e.Functions="FUNCTIONS"}(o||(o={}));var c=function(e){function t(t){var n,r=e.call(this,t)||this;return r.ExpEditorHelperTabs=((n={})[o.Fields]=r.props.intl.formatMessage({id:"fields",defaultMessage:s.default.fields}),n[o.Functions]=r.props.intl.formatMessage({id:"functions",defaultMessage:s.default.functions}),n),r.getTab=function(e){switch(e){case o.Fields:return i.React.createElement(l.default,{dataSourceIds:r.props.dataSourceIds,onSelect:r.onFieldSelect});case o.Functions:return i.React.createElement(p,{onSelect:r.onFunctionSelect});default:return null}},r.onFunctionSelect=function(e){if(e){var t={type:i.ExpressionPartType.Function,exp:e,parts:[]};r.props.dataSourceIds&&1===r.props.dataSourceIds.length&&(t.dataSourceId=r.props.dataSourceIds&&r.props.dataSourceIds[0]),r.changeExpression(t,r.props.expression)}},r.onFieldSelect=function(e,t){if(e&&t){var n={type:i.ExpressionPartType.Field,exp:"$"+u.removeOperator(e.alias||e.name),dataSourceId:t.id,jimuFieldName:e.jimuName};r.changeExpression(n,r.props.expression)}},r.onActiveTabChange=function(e){r.setState({active:e})},r.changeExpression=function(e,t){if(e){var n;if(r.props.inEditablePart){var o=u.getSelectionPosInnerPart(r.props.externalId,!1,r.props.container);n=o&&o.partId}else{var a=r.props.container.querySelector("#"+r.props.externalId),s=u.getPreviouseNodeOfSelection(r.props.externalId,a);n=s&&s.id}n||(n=u.getParentPartId(r.props.externalId,"0"));var l,c=t,p=c&&c.parts&&c.parts.slice()||[];if(0===p.length)e.type===i.ExpressionPartType.Field?(p=[e,{exp:" ",type:i.ExpressionPartType.Operator}],l=u.getParentPartId(r.props.externalId,"1")):(p=[e],l=u.getParentPartId(r.props.externalId,"0"));else{var d=u.getWhetherIsParentPartId(r.props.externalId,n),f=u.getIndexOfParentPart(r.props.externalId,n);if(d&&p[f]&&p[f].type!==i.ExpressionPartType.Function){var h=parseInt(f)+1;e.type===i.ExpressionPartType.Field?(p.splice(h,0,e,{exp:" ",type:i.ExpressionPartType.Operator}),l=u.getParentPartId(r.props.externalId,""+(h+1))):(p.splice(h,0,e),l=u.getParentPartId(r.props.externalId,""+h))}else if(p[f]&&p[f].parts&&e.type===i.ExpressionPartType.Field){var g=u.getIndexOfChildPart(r.props.externalId,n),m=g?parseInt(g)+1:0;p[f].parts.splice(m,0,e),l=u.getChildPartId(r.props.externalId,""+f,""+m)}}r.props.onSelect({name:c&&c.name||r.props.externalId,parts:p},l)}},r.state={active:o.Fields},r}return r(t,e),t.prototype.render=function(){var e=this;return this.props.container?i.React.createElement("div",{className:"exp-editor-helper"},i.React.createElement(a.Nav,{tabs:!0,fill:!0},Object.keys(o).map(function(t,n){return i.React.createElement(a.NavItem,{key:n},i.React.createElement(a.NavLink,{className:i.classNames({active:e.state.active===o[t]}),onClick:function(){e.onActiveTabChange(o[t])}},e.ExpEditorHelperTabs[o[t]]))})),i.React.createElement("div",{className:"exp-editor-helper-tab"},this.getTab(this.state.active))):null},t}(i.React.PureComponent);t.default=c;var p=function(e){var t=e.onSelect;return i.React.createElement("div",null,Object.keys(i.ExpressionFunctions).map(function(e,n){return i.React.createElement("div",{onClick:function(){return t(i.ExpressionFunctions[e])},key:n,className:"mt-2 p-1 expression-editor-function-item"},i.ExpressionFunctions[e])}))}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(14),s=n(16),l=n(4),u=function(e){function t(t){var n=e.call(this,t)||this;n.dsManager=window&&window.jimuConfig&&window.jimuConfig.isBuilder?a.default.getInstance():o.DataSourceManager.getInstance(),n.getWhetherExpressionIsLegal=function(){return!!(n.props.expression&&n.props.expression.parts&&1===n.props.expression.parts.length&&n.props.expression.parts[0]&&n.props.expression.parts[0].type===o.ExpressionPartType.Function)&&(!n.props.expression.parts[0].parts||1===n.props.expression.parts[0].parts.length&&!s.getWhetherDsDisabled(n.props.expression.parts[0].parts[0],n.props.dataSourceIds))},n.getDefaultDsId=function(){return n.getWhetherExpressionIsLegal()&&n.props.expression.parts[0].parts&&n.props.expression.parts[0].parts[0]&&(n.props.expression.parts[0].parts[0].dataSourceId||n.props.expression.parts[0].dataSourceId)||n.props.dataSourceIds&&n.props.dataSourceIds[0]},n.getDefaultFunc=function(){return n.getWhetherExpressionIsLegal()&&n.props.expression.parts[0].exp||o.ExpressionFunctions.Average},n.getDefaultJimuName=function(e){return n.getWhetherExpressionIsLegal()&&n.props.expression.parts[0].parts&&n.props.expression.parts[0].parts[0]&&n.props.expression.parts[0].parts[0].jimuFieldName||e&&Object.keys(e)[0]},n.getDataSourceId=function(){return n.state.selectedDsId},n.getSelectedFieldName=function(e,t){return e?t&&e[t]&&(e[t].alias||e[t].name):""},n.getSelectedFunction=function(){return n.state.selectedFunction},n.getNumberFields=function(e){if(!e)return{};var t=n.dsManager&&n.dsManager.getDataSource(e),r=t&&t.getSchema(),i=r&&r.fields;if(!i)return{};var a={};return Object.keys(i).forEach(function(e){i[e].type===o.JimuFieldType.Number&&(a[e]=i[e])}),a},n.getDsLabel=function(e){var t=n.dsManager&&n.dsManager.getDataSource(e);return t?t.label||t.id:e},n.onDsChange=function(e){var t=e.currentTarget.value;n.setState({selectedDsId:t})},n.onFieldChange=function(e){var t=e.currentTarget.value;n.setState({selectedJimuFieldName:t})},n.onFunctionChange=function(e){var t=e.currentTarget.value;n.setState({selectedFunction:t})},n.onChange=function(){var e=n.getNumberFields(n.state.selectedDsId),t=n.getSelectedFieldName(e,n.state.selectedJimuFieldName),r=n.state.selectedFunction===o.ExpressionFunctions.Count?n.state.selectedFunction:n.state.selectedFunction+"($"+t+")",i={type:o.ExpressionPartType.Function,exp:n.state.selectedFunction};n.state.selectedFunction===o.ExpressionFunctions.Count?i.dataSourceId=n.state.selectedDsId:i.parts=[{type:o.ExpressionPartType.Field,exp:t,dataSourceId:n.state.selectedDsId,jimuFieldName:n.state.selectedJimuFieldName}],n.props.onChange({name:r,parts:[i]})};var r=n.getDefaultDsId(),i=n.getNumberFields(r),l=n.getDefaultJimuName(i),u=n.getDefaultFunc();return n.state={selectedDsId:r,selectedJimuFieldName:l,selectedFunction:u},n}return r(t,e),t.prototype.componentDidUpdate=function(e){if(e.expression!==this.props.expression){var t=this.getDefaultDsId(),n=this.getNumberFields(t),r=this.getDefaultJimuName(n),o=this.getDefaultFunc();this.setState({selectedDsId:t,selectedJimuFieldName:r,selectedFunction:o})}},t.prototype.render=function(){var e=this,t=this.getNumberFields(this.state.selectedDsId);return o.React.createElement("div",{className:"expression-builder-tab statistics-tab"},o.React.createElement("div",{className:"line"},o.React.createElement("span",null,this.props.intl.formatMessage({id:"data",defaultMessage:l.default.data})),o.React.createElement("div",null,o.React.createElement(i.Input,{type:"select",value:this.getDataSourceId(),className:"select-max-width text-truncate",onChange:this.onDsChange},this.props.dataSourceIds&&this.props.dataSourceIds.map(function(t,n){return o.React.createElement("option",{value:t,key:n,className:"select-max-width text-truncate"},e.getDsLabel(t))})))),o.React.createElement("div",{className:"line"},o.React.createElement("span",null,this.props.intl.formatMessage({id:"operator",defaultMessage:l.default.operator})),o.React.createElement("div",null,o.React.createElement(i.Input,{type:"select",value:this.getSelectedFunction(),className:"select-max-width text-truncate",onChange:this.onFunctionChange},Object.keys(o.ExpressionFunctions).map(function(e,t){return o.React.createElement("option",{value:o.ExpressionFunctions[e],key:t,className:"select-max-width text-truncate"},o.ExpressionFunctions[e])})))),this.state.selectedFunction&&this.state.selectedFunction!==o.ExpressionFunctions.Count&&o.React.createElement("div",{className:"line"},o.React.createElement("span",null,this.props.intl.formatMessage({id:"field",defaultMessage:l.default.field})),o.React.createElement("div",null,o.React.createElement(i.Input,{type:"select",value:this.getSelectedFieldName(t,this.state.selectedJimuFieldName),onChange:this.onFieldChange,className:"select-max-width text-truncate"},t&&Object.keys(t).map(function(e,n){return o.React.createElement("option",{value:t[e].jimuName,key:n,className:"select-max-width text-truncate"},t[e].alias||t[e].name)})))),o.React.createElement("div",{className:"mt-3 expression-insert-btn"},o.React.createElement(i.Button,{outline:!0,onClick:this.onChange},this.props.intl.formatMessage({id:"insert",defaultMessage:l.default.insert}))))},t}(o.React.PureComponent);t.default=u},function(e,t,n){"use strict";var r=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1);t.getStyle=function(e){return i.css(o||(o=r(["\n    .component-expression-builder{\n      .expression-builder-tab{\n        padding: 1rem;\n        overflow: auto;\n        width: 100%;\n        height: calc(100% - 60px);\n      }\n      .statistics-tab{\n        .line{\n          margin-top: 1rem;\n          display: flex;\n          justify-content: space-between;\n          div, input{\n            display: inline-block;\n          }\n          .select-max-width{\n            max-width: ",";\n          }\n          >span{\n            margin-right: 0.5rem;\n            display: inline-block;\n            width: 5.2rem;\n          }\n          >div{\n            width: 100%;\n          }\n        }\n      }\n      .field-chooser-container, .expression-editor-container{\n        width: 100%;\n      }\n      .expression-name-label{\n        line-height: ",";\n        margin: 0;\n      }\n      .expression-insert-btn, #expression-name-input{\n        height: ",";\n      }\n      .expression-insert-btn{\n        width: ",";\n      }\n\n    }\n\n  "],["\n    .component-expression-builder{\n      .expression-builder-tab{\n        padding: 1rem;\n        overflow: auto;\n        width: 100%;\n        height: calc(100% - 60px);\n      }\n      .statistics-tab{\n        .line{\n          margin-top: 1rem;\n          display: flex;\n          justify-content: space-between;\n          div, input{\n            display: inline-block;\n          }\n          .select-max-width{\n            max-width: ",";\n          }\n          >span{\n            margin-right: 0.5rem;\n            display: inline-block;\n            width: 5.2rem;\n          }\n          >div{\n            width: 100%;\n          }\n        }\n      }\n      .field-chooser-container, .expression-editor-container{\n        width: 100%;\n      }\n      .expression-name-label{\n        line-height: ",";\n        margin: 0;\n      }\n      .expression-insert-btn, #expression-name-input{\n        height: ",";\n      }\n      .expression-insert-btn{\n        width: ",";\n      }\n\n    }\n\n  "])),i.polished.rem(170),i.polished.rem(30),i.polished.rem(30),i.polished.rem(68))}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(2),s=n(122);a.ReactModal.setAppElement(document&&document.getElementsByTagName("body")[0]);var l=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.render=function(){return i.jsx(s.default,o({},this.props))},t}(i.React.PureComponent),u=i.themeUtils.withTheme(l);t.default=u},function(e,t,n){"use strict";var r=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1);t.getStyle=function(e){return i.css(o||(o=r(["\n    .component-expression-builder-popup{\n\n    }\n\n  "],["\n    .component-expression-builder-popup{\n\n    }\n\n  "])))}},function(e,t,n){"use strict";var r=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1);t.getStyle=function(e){return i.css(o||(o=r(["\n    .component-expression-input{\n      font-size: ",";\n      .ds-disabled{\n        background-color: ",";\n        border: 1px solid ",";\n        >span{\n          color: ",";\n          background-color: ",";\n          vertical-align: sub;\n          margin-left: 5px;\n          margin-right: 5px;\n        }\n      }\n      .expression-builder-trigger{\n        cursor: pointer;\n        width: 25px;\n        height: 26px;\n        background-color: ",";\n        padding: 0;\n        .expression-builder-trigger-input{\n          width: 25px;\n          height: 25px;\n          padding: 0;\n          background-color: ",";\n          >button{\n            width: 25px;\n            height: 26px;\n            background-color: ",";\n            padding: 0 3px 0 0;\n            >svg{\n              margin: 0;\n            }\n          }\n        }\n      }\n    }\n\n  "],["\n    .component-expression-input{\n      font-size: ",";\n      .ds-disabled{\n        background-color: ",";\n        border: 1px solid ",";\n        >span{\n          color: ",";\n          background-color: ",";\n          vertical-align: sub;\n          margin-left: 5px;\n          margin-right: 5px;\n        }\n      }\n      .expression-builder-trigger{\n        cursor: pointer;\n        width: 25px;\n        height: 26px;\n        background-color: ",";\n        padding: 0;\n        .expression-builder-trigger-input{\n          width: 25px;\n          height: 25px;\n          padding: 0;\n          background-color: ",";\n          >button{\n            width: 25px;\n            height: 26px;\n            background-color: ",";\n            padding: 0 3px 0 0;\n            >svg{\n              margin: 0;\n            }\n          }\n        }\n      }\n    }\n\n  "])),e.typography.fontSizeBase,e.colors.secondary,e.colors.grays.gray300,e.colors.dark,i.polished.rgba(e.colors.reds.red500,.5),e.colors.white,e.colors.white,e.colors.white)}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(73);!function(e){e.Static="STATIC"}(o||(o={})),t.ExpressionInputFrom=r({},o,i.ExpressionFrom)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(2),l=n(25),u=n(123),c=n(125),p=n(4),d=n(126),f=n(74),h={png:"image/png",jpg:"image/jpeg",gif:"image/gif",bmp:"image/bmp",svg:"image/svg+xml"},g=function(e){function t(t){var n=e.call(this,t)||this;return n.onChange=function(e){var t={originalName:e.originalName,fileName:e.fileName,size:e.size,url:e.url,created:e.created,resourcesPrefix:e.resourcesPrefix,referedIds:[],originId:e.fileName.split(".")[0],fileFormat:e.fileFormat},r=Object.assign({},n.state.imageResources);r[t.fileName.split(".")[0]]=t,l.AppResourceManager.getInstance().setImageResourcesInDraft(r),n.setState({imageResources:r}),n.props.isSupportCrop?n.setState({cacheImageParam:{url:e.url,originalUrl:e.url,fileName:e.fileName,originalName:e.originalName,imgSourceType:s.ImgSourceType.ByUpload,fileFormat:e.fileFormat,originalId:e.fileName.split(".")[0]}}):n.props.onChange&&n.props.onChange({url:e.url,originalUrl:e.url,fileName:e.fileName,originalName:e.originalName,imgSourceType:s.ImgSourceType.ByUpload,fileFormat:e.fileFormat,originalId:e.fileName.split(".")[0]})},n.clearChoosedImageResource=function(){n.setState({cacheImageParam:{}}),n.props.onChange&&n.props.onChange({})},n.chooseImageResource=function(e,t){t?(n.setState({cacheImageParam:{}}),n.props.onChange&&n.props.onChange({})):n.props.isSupportCrop?n.setState({cacheImageParam:{url:e.url,originalUrl:e.url,fileName:e.fileName,originalName:e.originalName,imgSourceType:s.ImgSourceType.ByUpload,fileFormat:e.fileFormat,originalId:e.originId}}):n.props.onChange&&n.props.onChange({url:e.url,originalUrl:e.url,fileName:e.fileName,originalName:e.originalName,imgSourceType:s.ImgSourceType.ByUpload,fileFormat:e.fileFormat,originalId:e.originId})},n.onTextInputChanged=function(e){var t=n.getFileNameFromUrl(e.target.value);n.props.isSupportCrop?n.setState({cacheImageParam:{url:e.target.value,originalUrl:e.target.value,fileName:t,originalName:t,imgSourceType:s.ImgSourceType.ByURL}}):n.props.onChange&&n.props.onChange({url:e.target.value,originalUrl:e.target.value,fileName:t,originalName:t,imgSourceType:s.ImgSourceType.ByURL})},n.openImageCrop=function(){n.setState({isOpenImageCrop:!0})},n.onCancelCrop=function(){n.setState({isOpenImageCrop:!1})},n.onConfirmCrop=function(e,t){var r=n.state.cacheImageParam;e.cropType===s.CropType.Real&&t&&(r.set?r=r.set("url",t.blobUrl).set("fileFormat",t.fileFormat):(r.url=t.blobUrl,r.fileFormat=t.fileFormat)),r.set?r=r.set("cropParam",e):r.cropParam=e,n.setState({isOpenImageCrop:!1}),n.props.onChange&&n.props.onChange(r)},n.getFileNameFromUrl=function(e){if(e){var t=e.split("?")[0],n=t.lastIndexOf("/");return-1==n&&(n=t.lastIndexOf("\\")),t.substr(n+1)}return null},n.getImageFormat=function(e){var t=null;if(e)if(e.fileFormat)t=n.state.cacheImageParam.fileFormat;else if(e.fileName)t=h[e.fileName.split(".")[e.fileName.split(".").length-1].toLowerCase()];else if(e.url){var r=e.url.split("?")[0],o=r.lastIndexOf("/");-1==o&&(o=r.lastIndexOf("\\"));var i=r.substr(o+1);t=h[i.split(".")[i.split(".").length-1].toLowerCase()]}return t},n.handleResourceNotSupported=function(){n.setState({isOpenUnsupportedDialog:!0})},n.handleToggleUnsupportedDialog=function(){n.setState({isOpenUnsupportedDialog:!n.state.isOpenUnsupportedDialog})},n.state={imageResources:{},cacheImageParam:n.props.imageParam?n.props.imageParam:{},isOpenImageCrop:!1,isOpenUnsupportedDialog:!1},n}return r(t,e),t.prototype.getStyle=function(e){return a.css(i||(i=o(["\n      .image-resources-panel {\n\n        .setting-header {\n          padding: "," "," "," ","\n        }\n  \n        .setting-title {\n          font-size: ",";\n        }\n\n        .setting-container {\n          height: calc(100% - ",");\n        }\n\n        .tab-title-item{\n        }\n\n        .image-list {\n          position: absolute;\n          overflow-y: auto;\n          height: calc(100% - ",");\n        }\n\n        .image-list-hascrop {\n          position: absolute;\n          overflow-y: auto;\n          height: calc(100% - ",");\n        }\n\n        .image-list-item {\n          float: left;\n          width: 113px;\n          height: 90px;\n          cursor: pointer;\n          border: 2px solid "," !important;\n          background-size: cover;\n          background-position: center center;\n          background-repeat: no-repeat;\n        }\n\n        .image-list-item: hover {\n          opacity: 0.9;\n        }\n\n        .image-list-item-choosed {\n          border: 2px solid "," !important;\n        }\n      }\n    "],["\n      .image-resources-panel {\n\n        .setting-header {\n          padding: "," "," "," ","\n        }\n  \n        .setting-title {\n          font-size: ",";\n        }\n\n        .setting-container {\n          height: calc(100% - ",");\n        }\n\n        .tab-title-item{\n        }\n\n        .image-list {\n          position: absolute;\n          overflow-y: auto;\n          height: calc(100% - ",");\n        }\n\n        .image-list-hascrop {\n          position: absolute;\n          overflow-y: auto;\n          height: calc(100% - ",");\n        }\n\n        .image-list-item {\n          float: left;\n          width: 113px;\n          height: 90px;\n          cursor: pointer;\n          border: 2px solid "," !important;\n          background-size: cover;\n          background-position: center center;\n          background-repeat: no-repeat;\n        }\n\n        .image-list-item: hover {\n          opacity: 0.9;\n        }\n\n        .image-list-item-choosed {\n          border: 2px solid "," !important;\n        }\n      }\n    "])),a.polished.rem(10),a.polished.rem(16),a.polished.rem(0),a.polished.rem(16),a.polished.rem(16),a.polished.rem(50),a.polished.rem(30),a.polished.rem(70),e.colors.grays.gray300,e.colors.cyans.cyan500)},t.prototype.componentDidMount=function(){var e=this,t=a.getAppStore().getState().appStateInBuilder&&a.getAppStore().getState().appStateInBuilder.appId;l.AppResourceManager.getInstance().getImageResourcesInDraft(t,this.props.widgetId).then(function(t){l.AppResourceManager.getInstance().setImageResourcesInDraft(t),e.setState({imageResources:t})})},t.prototype.componentWillReceiveProps=function(e){e.imageParam!==this.props.imageParam&&this.setState({cacheImageParam:e.imageParam})},t.prototype.render=function(){var e=this;return a.jsx("div",{className:"w-100 h-100",css:this.getStyle(this.props.theme)},a.jsx("div",{className:"w-100 h-100 image-resources-panel"},a.jsx("div",{className:"w-100 d-flex align-items-center justify-content-between setting-header setting-title pb-2"},a.jsx("div",null,this.props.intl.formatMessage({id:"setAnImage",defaultMessage:p.default.setAnImage})),a.jsx("div",{style:{cursor:"pointer"},onClick:this.props.onClose},a.jsx(s.Icon,{icon:f,size:"12",className:"text-dark"}))),a.jsx("div",{className:"setting-container"},a.jsx(s.Tabs,{className:"h-100"},a.jsx(s.Tab,{title:this.props.intl.formatMessage({id:"localImage",defaultMessage:p.default.localImage}),className:"tab-title-item",active:!this.state.cacheImageParam||!this.state.cacheImageParam.imgSourceType||this.state.cacheImageParam&&this.state.cacheImageParam.imgSourceType===s.ImgSourceType.ByUpload},a.jsx("div",{className:"w-100 h-100",style:{position:"relative"}},a.jsx("div",{className:"mt-2 ml-2 mr-2"},a.jsx(u.default,{widgetId:this.props.widgetId,style:{position:"relative"},className:"w-100",color:"secondary",label:this.props.intl.formatMessage({id:"uploadImage",defaultMessage:p.default.uploadImage}),onChange:this.onChange,type:l.ResourceType.Image,onResourceNotSupported:this.handleResourceNotSupported})),a.jsx("div",{className:a.classNames("w-100 pl-1 mt-1",{"image-list":!this.props.isSupportCrop},{"image-list-hascrop":this.props.isSupportCrop})},Object.keys(this.state.imageResources).length>0&&a.jsx("div",{className:"w-100 pb-3",style:{overflow:"hidden",paddingLeft:"2px"}},Object.keys(this.state.imageResources).map(function(t,n){var r=e.state.imageResources[t];return t!==r.originId?null:a.jsx("div",{key:n,className:a.classNames("m-1 image-list-item",{"image-list-item-choosed":e.state.cacheImageParam&&(e.state.cacheImageParam.fileName&&e.state.cacheImageParam.fileName===r.fileName||e.state.cacheImageParam.url&&e.state.cacheImageParam.url===r.url)}),onClick:function(){return e.chooseImageResource(r,e.state.cacheImageParam&&(e.state.cacheImageParam.fileName&&e.state.cacheImageParam.fileName===r.fileName||e.state.cacheImageParam.url&&e.state.cacheImageParam.url===r.url))}},a.jsx(s.ImageWithParam,{imageParam:{url:r.url}}))}))),this.props.isSupportCrop&&a.jsx("div",{className:"w-100 pr-2 pl-2",style:{position:"absolute",bottom:"10px"}},a.jsx(s.Button,{disabled:this.state.cacheImageParam.imgSourceType!==s.ImgSourceType.ByUpload,className:"w-100",color:"secondary",onClick:this.openImageCrop},this.props.intl.formatMessage({id:"nextStepForImage",defaultMessage:p.default.nextStepForImage}))))),a.jsx(s.Tab,{title:this.props.intl.formatMessage({id:"urlImage",defaultMessage:p.default.urlImage}),className:"tab-title-item",active:this.state.cacheImageParam&&this.state.cacheImageParam.imgSourceType===s.ImgSourceType.ByURL},a.jsx("div",{className:"mt-2 ml-2 mr-2 d-flex justify-content-between align-items-center"},a.jsx(s.Input,{className:"border-0 w-100",placeholder:this.props.intl.formatMessage({id:"urlIsHereForImage",defaultMessage:p.default.urlIsHereForImage}),value:this.state.cacheImageParam&&this.state.cacheImageParam.imgSourceType===s.ImgSourceType.ByURL?this.state.cacheImageParam.url:"",onBlur:function(t){e.onTextInputChanged(t)},onKeyUp:function(t){return e.onTextInputChanged(t)}})),this.props.isSupportCrop&&a.jsx("div",{className:"w-100 pr-2 pl-2",style:{position:"absolute",bottom:"10px"}},a.jsx(s.Button,{disabled:this.state.cacheImageParam.imgSourceType!==s.ImgSourceType.ByURL,className:"w-100",color:"secondary",onClick:this.openImageCrop},this.props.intl.formatMessage({id:"nextStepForImage",defaultMessage:p.default.nextStepForImage})))))),this.state.isOpenImageCrop&&a.jsx(c.ImageCrop,{widgetId:this.props.widgetId,originId:this.state.cacheImageParam.originalId,image:this.state.cacheImageParam.originalUrl,onCancelCrop:this.onCancelCrop,onConfirmCrop:this.onConfirmCrop,widgetArea:{width:this.props.crop.width,height:this.props.crop.width/this.props.crop.aspect},imageFormat:this.getImageFormat(this.state.cacheImageParam),cropParam:this.state.cacheImageParam.cropParam,cropType:this.state.cacheImageParam.imgSourceType===s.ImgSourceType.ByURL?s.CropType.Fake:null}),a.jsx(d.default,{hideCancel:!0,isOpen:this.state.isOpenUnsupportedDialog,title:this.props.intl.formatMessage({id:"uploadImageError",defaultMessage:p.default.uploadImageError}),toggle:this.handleToggleUnsupportedDialog},a.jsx("div",{style:{fontSize:"1rem"}},this.props.intl.formatMessage({id:"imageTypeError",defaultMessage:p.default.imageTypeError})))))},t.defaultProps={crop:{aspect:1,width:300}},t}(a.React.PureComponent);t.ImageResourcesPanel=a.themeUtils.withTheme(a.injectIntl(g))},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(165),a=n(2);t.CropType=a.CropType;var s=n(75),l=["image/gif","image/svg+xml"],u=function(e){function t(t){var n=e.call(this,t)||this;return n.eidtInfoStyle={width:"100%",height:"100%",margin:0},n.onCropChange=function(e){n.setState({crop:e})},n.onCropAreaComplete=function(e,t){n.setState({croppedAreaPixels:t})},n.onZoomChange=function(e){n.setState({zoom:e})},n.onConfirmCrop=function(e,t,r){if(l.indexOf(n.props.imageFormat)>-1||n.props.cropType===a.CropType.Fake){var o={cropPosition:n.state.crop,cropZoom:n.state.zoom,svgViewBox:e||"0 0 28 28",svgPath:t||"m0,0l0,28l28,0l0,-28l-28,0z",cropShape:r||"rectangle",cropPixel:n.state.croppedAreaPixels,cropType:a.CropType.Fake};n.props.onConfirmCrop&&n.props.onConfirmCrop(o)}else{var i={cropPosition:n.state.crop,cropZoom:n.state.zoom,svgViewBox:e,svgPath:t,cropShape:r,cropPixel:n.state.croppedAreaPixels,cropType:a.CropType.Real};n.setState({loading:!0}),s.getCroppedImgBlobUrl(n.props.image,i.cropPixel,n.props.originId).then(function(e){n.setState({loading:!1}),n.props.onConfirmCrop&&n.props.onConfirmCrop(i,e)},function(){n.setState({loading:!1})})}},n.state={modal:!0,crop:n.props.crop?n.props.crop:{x:0,y:0},zoom:n.props.cropZoom?n.props.cropZoom:1,aspect:1,showGrid:!1,zoomSpeed:.1,croppedAreaPixels:null,loading:!1},n}return r(t,e),t.prototype.render=function(){var e=window.jimuConfig.isBuilder;return o.ReactDOM.createPortal(o.jsx("div",null,o.jsx("div",{className:"jimu-widget",style:{zIndex:9999,position:"fixed",top:0,left:0,backgroundColor:"rgb(0, 0, 0, .5)"}}),o.jsx("div",{style:{zIndex:1e4,position:"absolute",top:0},className:o.classNames({"jimu-widget d-flex justify-content-center align-items-center":e})},o.jsx(i.Cropper,{image:this.props.image,crop:this.state.crop,zoom:this.state.zoom,aspect:this.state.aspect,showGrid:this.state.showGrid,zoomSpeed:this.state.zoomSpeed,onCropChange:this.onCropChange,onCropComplete:this.onCropAreaComplete,onZoomChange:this.onZoomChange,onCancelCrop:this.props.onCancelCrop,onConfirmCrop:this.onConfirmCrop,widgetArea:this.props.widgetArea,widgetId:this.props.widgetId,svgViewBox:this.props.cropParam&&this.props.cropParam.svgViewBox,svgPath:this.props.cropParam&&this.props.cropParam.svgPath,cropShape:this.props.cropParam&&this.props.cropParam.cropShape,loading:this.state.loading}))),document&&document.getElementsByTagName("body")[0])},t}(o.React.Component);t.ImageCrop=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(166),l=n(364),u=n(75),c=function(e){function t(n){var r=e.call(this,n)||this;return r.image=null,r.container=null,r.containerRect={},r.imageSize={width:0,height:0,naturalWidth:0,naturalHeight:0},r.dragStartPosition={x:0,y:0},r.dragStartCrop={x:0,y:0},r.lastPinchDistance=0,r.rafDragTimeout=null,r.rafZoomTimeout=null,r.screenWidth=document?document.documentElement.clientWidth:null,r.screenHeight=document?document.documentElement.clientHeight:null,r.getStyle=function(){var e=window.location.href.replace(window.location.hash,"");return a.css(i||(i=o(['\n      .cropperArea {\n        position: relative;\n        border: 1px solid rgba(255, 255, 255, 0.5);\n        box-sizing: border-box;\n        box-shadow: 0 0 0 9999em;\n        color: rgba(0,0,0,0.5);\n\n        .tool-item {\n          background-color: #EEF0F3;\n          cursor: pointer;\n\n          &:hover {\n            background-color: #c8cbcd;\n            cursor: pointer;\n          }\n        }\n      }\n\n      .gridLines {\n        &::before {\n          content: " ";\n          box-sizing: border-box;\n          position: absolute;\n          border: 1px solid rgba(255, 255, 255, 0.5);\n          top: 0;\n          bottom: 0;\n          left: 33.33%;\n          right: 33.33%;\n          borderTop: 0;\n          borderBottom: 0;\n        }\n\n        &::after {\n          content: " ";\n          box-sizing: border-box;\n          position: absolute;\n          border: 1px solid rgba(255, 255, 255, 0.5);\n          top: 33.33%;\n          bottom: 33.33%;\n          left: 0;\n          right: 0;\n          borderLeft: 0;\n          borderRight: 0;\n        },\n      }\n\n      .roundShape {\n        border-radius: 50%\n      }\n\n      .mask-border {\n        path {\n          transition:all 1s linear;\n          animation-name:ring;\n          animation-duration:9.2s;\n          animation-timing-function: linear;\n          animation-iteration-count:infinite;\n        }\n        \n        @keyframes ring {\n            from {\n                stroke-dashoffset:0;\n            }\n            to {\n                stroke-dashoffset:6000;\n            }\n        }\n      }\n\n      .mask-image {\n        -webkit-mask-image: url(',"#mask-setting-",");\n        mask: url(","#mask-setting-",");\n        mask-image: url(","#mask-setting-",");\n      }\n    "],['\n      .cropperArea {\n        position: relative;\n        border: 1px solid rgba(255, 255, 255, 0.5);\n        box-sizing: border-box;\n        box-shadow: 0 0 0 9999em;\n        color: rgba(0,0,0,0.5);\n\n        .tool-item {\n          background-color: #EEF0F3;\n          cursor: pointer;\n\n          &:hover {\n            background-color: #c8cbcd;\n            cursor: pointer;\n          }\n        }\n      }\n\n      .gridLines {\n        &::before {\n          content: " ";\n          box-sizing: border-box;\n          position: absolute;\n          border: 1px solid rgba(255, 255, 255, 0.5);\n          top: 0;\n          bottom: 0;\n          left: 33.33%;\n          right: 33.33%;\n          borderTop: 0;\n          borderBottom: 0;\n        }\n\n        &::after {\n          content: " ";\n          box-sizing: border-box;\n          position: absolute;\n          border: 1px solid rgba(255, 255, 255, 0.5);\n          top: 33.33%;\n          bottom: 33.33%;\n          left: 0;\n          right: 0;\n          borderLeft: 0;\n          borderRight: 0;\n        },\n      }\n\n      .roundShape {\n        border-radius: 50%\n      }\n\n      .mask-border {\n        path {\n          transition:all 1s linear;\n          animation-name:ring;\n          animation-duration:9.2s;\n          animation-timing-function: linear;\n          animation-iteration-count:infinite;\n        }\n        \n        @keyframes ring {\n            from {\n                stroke-dashoffset:0;\n            }\n            to {\n                stroke-dashoffset:6000;\n            }\n        }\n      }\n\n      .mask-image {\n        -webkit-mask-image: url(',"#mask-setting-",");\n        mask: url(","#mask-setting-",");\n        mask-image: url(","#mask-setting-",");\n      }\n    "])),e,r.props.widgetId,e,r.props.widgetId,e,r.props.widgetId)},r.preventZoomSafari=function(e){return e.preventDefault()},r.cleanEvents=function(){document.removeEventListener("mousemove",r.onMouseMove),document.removeEventListener("mouseup",r.onDragStopped),document.removeEventListener("touchmove",r.onTouchMove),document.removeEventListener("touchend",r.onDragStopped)},r.onImgLoad=function(){r.computeSizes(),r.emitCropData()},r.computeSizes=function(){if(r.image){r.imageSize={width:r.image.width,height:r.image.height,naturalWidth:r.image.naturalWidth,naturalHeight:r.image.naturalHeight};var e=r.props.widgetArea.width,t=r.props.widgetArea.height,n=r.state.minZoom,o=r.state.maxZoom;o=r.image.width/r.image.height>=e/t?(n=t/r.image.height)+5:(n=e/r.image.width)+5,n>r.props.zoom&&r.props.onZoomChange&&r.props.onZoomChange(n);var i={width:e,height:t};r.setState({cropSize:i,minZoom:n,maxZoom:o},r.recomputeCropPosition)}r.container&&(r.containerRect=r.container.getBoundingClientRect())},r.onMouseDown=function(e){e.preventDefault(),document.addEventListener("mousemove",r.onMouseMove),document.addEventListener("mouseup",r.onDragStopped),r.onDragStart(t.getMousePoint(e))},r.onMouseMove=function(e){return r.onDrag(t.getMousePoint(e))},r.onTouchStart=function(e){e.preventDefault(),document.addEventListener("touchmove",r.onTouchMove,{passive:!1}),document.addEventListener("touchend",r.onDragStopped),2===e.touches.length?r.onPinchStart(e):1===e.touches.length&&r.onDragStart(t.getTouchPoint(e.touches[0]))},r.onTouchMove=function(e){2===e.touches.length?r.onPinchMove(e):1===e.touches.length&&r.onDrag(t.getTouchPoint(e.touches[0]))},r.onDragStart=function(e){var t=e.x,n=e.y;r.dragStartPosition={x:t,y:n},r.dragStartCrop={x:r.props.crop.x,y:r.props.crop.y}},r.onDrag=function(e){var t=e.x,n=e.y;r.rafDragTimeout&&window.cancelAnimationFrame(r.rafDragTimeout),r.rafDragTimeout=window.requestAnimationFrame(function(){if(void 0!==t&&void 0!==n){var e=t-r.dragStartPosition.x,o=n-r.dragStartPosition.y,i={x:r.dragStartCrop.x+e,y:r.dragStartCrop.y+o},a=u.restrictPosition(i,r.imageSize,r.state.cropSize,r.props.zoom);r.props.onCropChange(a)}})},r.onDragStopped=function(){r.cleanEvents(),r.emitCropData()},r.onWheel=function(e){e.preventDefault();var n=t.getMousePoint(e),o=null;o=e.deltaY<=0?1.05*r.props.zoom:.95*r.props.zoom,r.setNewZoom(o,n)},r.getPointOnContainer=function(e,t){var n=e.x,o=e.y;if(!r.containerRect)throw new Error("The Cropper is not mounted");return{x:r.containerRect.width/2-(n-r.containerRect.left),y:r.containerRect.height/2-(o-r.containerRect.top)}},r.getPointOnImage=function(e){var t=e.x,n=e.y,o=r.props,i=o.crop,a=o.zoom;return{x:(t+i.x)/a,y:(n+i.y)/a}},r.setNewZoom=function(e,t){var n=r.getPointOnContainer(t),o=r.getPointOnImage(n),i=Math.min(r.state.maxZoom,Math.max(e,r.state.minZoom)),a={x:o.x*i-n.x,y:o.y*i-n.y},s=u.restrictPosition(a,r.imageSize,r.state.cropSize,i);r.props.onCropChange(s),r.props.onZoomChange&&r.props.onZoomChange(i)},r.emitCropData=function(){if(r.state.cropSize){var e=u.restrictPosition(r.props.crop,r.imageSize,r.state.cropSize,r.props.zoom),t=u.computeCroppedArea(e,r.imageSize,r.state.cropSize,r.props.zoom),n=t.croppedAreaPercentages,o=t.croppedAreaPixels;r.props.onCropComplete&&r.props.onCropComplete(n,o)}},r.recomputeCropPosition=function(){var e=u.restrictPosition(r.props.crop,r.imageSize,r.state.cropSize,r.props.zoom);r.props.onCropChange(e),r.emitCropData()},r.onImgError=function(){var e={width:r.props.widgetArea.width,height:r.props.widgetArea.height};r.setState({cropSize:e})},r.onResize=function(e,t){r.screenWidth=e,r.screenHeight=t},r.state={cropSize:null,minZoom:r.props.minZoom,maxZoom:r.props.maxZoom},r}return r(t,e),t.prototype.componentDidMount=function(){window.addEventListener("resize",this.computeSizes),this.container.addEventListener("gesturestart",this.preventZoomSafari),this.container.addEventListener("gesturechange",this.preventZoomSafari),this.container.addEventListener("wheel",this.onWheel)},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.computeSizes),this.container.removeEventListener("gesturestart",this.preventZoomSafari),this.container.removeEventListener("gesturechange",this.preventZoomSafari),this.container.removeEventListener("wheel",this.onWheel),this.cleanEvents()},t.prototype.componentDidUpdate=function(e){e.aspect!==this.props.aspect?this.computeSizes():e.zoom!==this.props.zoom&&this.recomputeCropPosition()},t.prototype.onPinchStart=function(e){var n=t.getTouchPoint(e.touches[0]),r=t.getTouchPoint(e.touches[1]);this.lastPinchDistance=u.getDistanceBetweenPoints(n,r),this.onDragStart(u.getCenter(n,r))},t.prototype.onPinchMove=function(e){var n=this,r=t.getTouchPoint(e.touches[0]),o=t.getTouchPoint(e.touches[1]),i=u.getCenter(r,o);this.onDrag(i),this.rafZoomTimeout&&window.cancelAnimationFrame(this.rafZoomTimeout),this.rafZoomTimeout=window.requestAnimationFrame(function(){var e=u.getDistanceBetweenPoints(r,o),t=n.props.zoom*(e/n.lastPinchDistance);n.setNewZoom(t,i),n.lastPinchDistance=e})},t.prototype.render=function(){var e=this,t=this.props,n=t.crop,r=n.x,o=n.y,i=t.zoom,u=t.showGrid,c=(t.style,t.classes),p=c.containerClassName,d=c.cropAreaClassName,f=c.imageClassName;return a.jsx("div",{css:this.getStyle,onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,"data-testid":"container",className:p,style:{userSelect:"none",touchAction:"none",cursor:"move",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:this.props.widgetArea.top,left:this.props.widgetArea.left,width:this.props.widgetArea.width,height:this.props.widgetArea.height},ref:function(t){e.container=t}},a.jsx(l.default,{handleWidth:!0,handleHeight:!0,onResize:this.onResize}),a.jsx("img",{src:this.props.image,ref:function(t){e.image=t},onLoad:this.onImgLoad,onError:this.onImgError,alt:"",style:{position:"absolute",transform:"translate("+r+"px, "+o+"px) scale("+i+")",willChange:"transform"},className:f}),this.state.cropSize&&a.jsx(s.CropArea,{onCancelCrop:this.props.onCancelCrop,onConfirmCrop:this.props.onConfirmCrop,showGrid:u,style:{width:this.state.cropSize.width,height:this.state.cropSize.height},className:d,svgViewBox:this.props.svgViewBox,svgPath:this.props.svgPath,cropShape:this.props.cropShape,widgetId:this.props.widgetId,screenWidth:this.screenWidth,screenHeight:this.screenHeight,widgetArea:this.props.widgetArea}),this.props.loading&&a.jsx("div",{style:{position:"absolute",left:"50%",top:"50%"},className:"jimu-small-loading"}))},t.defaultProps={zoom:1,aspect:4/3,maxZoom:10,minZoom:1,showGrid:!0,style:{},classes:{},zoomSpeed:1},t.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},t.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},t}(a.React.Component);t.Cropper=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(58),s=n(74),l=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.showGrid,r=t.style,l=t.className;l||(l="");var u=r.width,c={display:"flex",alignItems:"center",justifyContent:"flex-end",minWidth:"75px",paddingBottom:"5px",left:"-1px",paddingTop:"5px",position:"absolute",top:"-40px",height:"40px",width:Math.min(this.props.screenWidth,u)+"px",boxShadow:"0 2px 8px 1px rgba(0,0,0,0.20)",backgroundColor:"#fff",borderRadius:"2px",cursor:"default"};this.props.widgetArea.top-40<0&&(c.top=this.props.widgetArea.height+"px");var p=o.React.createElement("div",{onMouseDown:function(e){e.stopPropagation()},style:c},o.React.createElement("div",{className:"tool-item mr-1",style:{float:"right",padding:"0.42rem 0.5rem"},onClick:function(){e.props.onConfirmCrop&&e.props.onConfirmCrop(e.props.svgViewBox,e.props.svgPath,e.props.cropShape)}},o.React.createElement(i.Icon,{icon:a,width:16,height:16,className:"mr-0"})),o.React.createElement("div",{className:"tool-item mr-1",style:{float:"right",padding:"0.42rem 0.5rem",marginLeft:"0.1rem"},onClick:function(){e.props.onCancelCrop&&e.props.onCancelCrop()}},o.React.createElement(i.Icon,{icon:s,width:13,height:13,className:"mr-0"})));return o.React.createElement("div",{style:r,className:o.classNames("cropperArea "+l,{gridLines:n})},o.React.createElement("svg",{width:"100%",height:"100%",viewBox:this.props.svgViewBox?this.props.svgViewBox:"0 0 28 28",preserveAspectRatio:"none"},o.React.createElement("defs",null,o.React.createElement("mask",{id:"mask-setting-"+this.props.widgetId,maskContentUnits:"userSpaceOnUse"},o.React.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",stroke:"none",fill:"rgb(255, 255, 255, 1)"}),o.React.createElement("svg",{width:"100%",height:"100%",viewBox:this.props.svgViewBox?this.props.svgViewBox:"0 0 28 28",preserveAspectRatio:"none"},o.React.createElement("g",null,o.React.createElement("path",{strokeWidth:"2",strokeDasharray:"10",strokeDashoffset:"0",fill:"#000",d:this.props.svgPath?this.props.svgPath:"m0,0l0,28l28,0l0,-28l-28,0z"}))))),o.React.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",className:"mask-image",style:{stroke:"none",fill:"rgb(0, 0, 0, 0.7)"}}),o.React.createElement("g",null,o.React.createElement("path",{stroke:"#fff",strokeWidth:".1",fill:"none",strokeDashoffset:"0",d:this.props.svgPath?this.props.svgPath:"m0,0l0,28l28,0l0,-28l-28,0z"}))),p)},t}(o.React.Component);t.CropArea=l},function(e,t,n){"use strict";var r=n(168);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlphaPicker=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=l(n(0)),i=l(n(3)),a=n(5),s=l(n(289));function l(e){return e&&e.__esModule?e:{default:e}}var u=t.AlphaPicker=function(e){var t=e.rgb,n=e.hsl,s=e.width,l=e.height,u=e.onChange,c=e.direction,p=e.style,d=e.renderers,f=e.pointer,h=e.className,g=void 0===h?"":h,m=(0,i.default)({default:{picker:{position:"relative",width:s,height:l},alpha:{radius:"2px",style:p}}});return o.default.createElement("div",{style:m.picker,className:"alpha-picker "+g},o.default.createElement(a.Alpha,r({},m.alpha,{rgb:t,hsl:n,pointer:f,renderers:d,onChange:u,direction:c})))};u.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:s.default},t.default=(0,a.ColorWrap)(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenNames=void 0;var r=s(n(171)),o=s(n(42)),i=s(n(182)),a=s(n(15));function s(e){return e&&e.__esModule?e:{default:e}}var l=t.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,a.default)(t,function(t){Array.isArray(t)?e(t).map(function(e){return n.push(e)}):(0,i.default)(t)?(0,o.default)(t,function(e,t){!0===e&&n.push(t),n.push(t+"-"+e)}):(0,r.default)(t)&&n.push(t)}),n};t.default=l},function(e,t,n){var r=n(17),o=n(9),i=n(12),a="[object String]";e.exports=function(e){return"string"==typeof e||!o(e)&&i(e)&&r(e)==a}},function(e,t,n){var r=n(21),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var o=a.call(e);return r&&(t?e[s]=n:delete e[s]),o}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r=n(175)();e.exports=r},function(e,t){e.exports=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++o];if(!1===n(i[l],l,i))break}return t}}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(17),o=n(12),i="[object Arguments]";e.exports=function(e){return o(e)&&r(e)==i}},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(17),o=n(44),i=n(12),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!a[r(e)]}},function(e,t,n){var r=n(47),o=n(181),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t,n){var r=n(82)(Object.keys,Object);e.exports=r},function(e,t,n){var r=n(17),o=n(48),i=n(12),a="[object Object]",s=Function.prototype,l=Object.prototype,u=s.toString,c=l.hasOwnProperty,p=u.call(Object);e.exports=function(e){if(!i(e)||r(e)!=a)return!1;var t=o(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==p}},function(e,t,n){var r=n(184),o=n(228),i=n(85),a=n(9),s=n(238);e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?a(e)?o(e[0],e[1]):r(e):s(e)}},function(e,t,n){var r=n(185),o=n(227),i=n(96);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},function(e,t,n){var r=n(49),o=n(88),i=1,a=2;e.exports=function(e,t,n,s){var l=n.length,u=l,c=!s;if(null==e)return!u;for(e=Object(e);l--;){var p=n[l];if(c&&p[2]?p[1]!==e[p[0]]:!(p[0]in e))return!1}for(;++l<u;){var d=(p=n[l])[0],f=e[d],h=p[1];if(c&&p[2]){if(void 0===f&&!(d in e))return!1}else{var g=new r;if(s)var m=s(f,h,d,e,t,g);if(!(void 0===m?o(h,f,i|a,s,g):m))return!1}}return!0}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(30),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))}},function(e,t,n){var r=n(30);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(30);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(30);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},function(e,t,n){var r=n(29);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(29),o=n(51),i=n(52),a=200;e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!o||s.length<a-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(s)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(83),o=n(197),i=n(13),a=n(87),s=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,p=u.hasOwnProperty,d=RegExp("^"+c.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(r(e)?d:s).test(a(e))}},function(e,t,n){var r=n(198),o=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!o&&o in e}},function(e,t,n){var r=n(10)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(201),o=n(29),i=n(51);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(e,t,n){var r=n(202),o=n(203),i=n(204),a=n(205),s=n(206);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,t,n){var r=n(31);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(31),o="__lodash_hash_undefined__",i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return n===o?void 0:n}return i.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(31),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},function(e,t,n){var r=n(31),o="__lodash_hash_undefined__";e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?o:t,this}},function(e,t,n){var r=n(32);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(32);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(32);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(32);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},function(e,t,n){var r=n(49),o=n(89),i=n(218),a=n(221),s=n(33),l=n(9),u=n(43),c=n(81),p=1,d="[object Arguments]",f="[object Array]",h="[object Object]",g=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,y,v){var b=l(e),x=l(t),w=b?f:s(e),S=x?f:s(t),C=(w=w==d?h:w)==h,I=(S=S==d?h:S)==h,_=w==S;if(_&&u(e)){if(!u(t))return!1;b=!0,C=!1}if(_&&!C)return v||(v=new r),b||c(e)?o(e,t,n,m,y,v):i(e,t,w,n,m,y,v);if(!(n&p)){var P=C&&g.call(e,"__wrapped__"),O=I&&g.call(t,"__wrapped__");if(P||O){var E=P?e.value():e,j=O?t.value():t;return v||(v=new r),y(E,j,n,m,v)}}return!!_&&(v||(v=new r),a(e,t,n,m,y,v))}},function(e,t,n){var r=n(52),o=n(214),i=n(215);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,e.exports=a},function(e,t){var n="__lodash_hash_undefined__";e.exports=function(e){return this.__data__.set(e,n),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var r=n(21),o=n(90),i=n(50),a=n(89),s=n(219),l=n(220),u=1,c=2,p="[object Boolean]",d="[object Date]",f="[object Error]",h="[object Map]",g="[object Number]",m="[object RegExp]",y="[object Set]",v="[object String]",b="[object Symbol]",x="[object ArrayBuffer]",w="[object DataView]",S=r?r.prototype:void 0,C=S?S.valueOf:void 0;e.exports=function(e,t,n,r,S,I,_){switch(n){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case x:return!(e.byteLength!=t.byteLength||!I(new o(e),new o(t)));case p:case d:case g:return i(+e,+t);case f:return e.name==t.name&&e.message==t.message;case m:case v:return e==t+"";case h:var P=s;case y:var O=r&u;if(P||(P=l),e.size!=t.size&&!O)return!1;var E=_.get(e);if(E)return E==t;r|=c,_.set(e,t);var j=a(P(e),P(t),r,S,I,_);return _.delete(e),j;case b:if(C)return C.call(e)==C.call(t)}return!1}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},function(e,t,n){var r=n(91),o=1,i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,s,l){var u=n&o,c=r(e),p=c.length;if(p!=r(t).length&&!u)return!1;for(var d=p;d--;){var f=c[d];if(!(u?f in t:i.call(t,f)))return!1}var h=l.get(e);if(h&&l.get(t))return h==t;var g=!0;l.set(e,t),l.set(t,e);for(var m=u;++d<p;){var y=e[f=c[d]],v=t[f];if(a)var b=u?a(v,y,f,t,e,l):a(y,v,f,e,t,l);if(!(void 0===b?y===v||s(y,v,n,a,l):b)){g=!1;break}m||(m="constructor"==f)}if(g&&!m){var x=e.constructor,w=t.constructor;x!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w)&&(g=!1)}return l.delete(e),l.delete(t),g}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}},function(e,t,n){var r=n(18)(n(10),"DataView");e.exports=r},function(e,t,n){var r=n(18)(n(10),"Promise");e.exports=r},function(e,t,n){var r=n(18)(n(10),"Set");e.exports=r},function(e,t,n){var r=n(18)(n(10),"WeakMap");e.exports=r},function(e,t,n){var r=n(95),o=n(22);e.exports=function(e){for(var t=o(e),n=t.length;n--;){var i=t[n],a=e[i];t[n]=[i,a,r(a)]}return t}},function(e,t,n){var r=n(88),o=n(229),i=n(235),a=n(54),s=n(95),l=n(96),u=n(35),c=1,p=2;e.exports=function(e,t){return a(e)&&s(t)?l(u(e),t):function(n){var a=o(n,e);return void 0===a&&a===t?i(n,e):r(t,a,c|p)}}},function(e,t,n){var r=n(97);e.exports=function(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}},function(e,t,n){var r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,i=n(231)(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(r,function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)}),t});e.exports=i},function(e,t,n){var r=n(232),o=500;e.exports=function(e){var t=r(e,function(e){return n.size===o&&n.clear(),e}),n=t.cache;return t}},function(e,t,n){var r=n(52),o="Expected a function";function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(o);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},function(e,t,n){var r=n(234);e.exports=function(e){return null==e?"":r(e)}},function(e,t,n){var r=n(21),o=n(86),i=n(9),a=n(34),s=1/0,l=r?r.prototype:void 0,u=l?l.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(a(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-s?"-0":n}},function(e,t,n){var r=n(236),o=n(237);e.exports=function(e,t){return null!=e&&o(e,t,r)}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,n){var r=n(98),o=n(79),i=n(9),a=n(80),s=n(44),l=n(35);e.exports=function(e,t,n){for(var u=-1,c=(t=r(t,e)).length,p=!1;++u<c;){var d=l(t[u]);if(!(p=null!=e&&n(e,d)))break;e=e[d]}return p||++u!=c?p:!!(c=null==e?0:e.length)&&s(c)&&a(d,c)&&(i(e)||o(e))}},function(e,t,n){var r=n(239),o=n(240),i=n(54),a=n(35);e.exports=function(e){return i(e)?r(a(e)):o(e)}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t,n){var r=n(97);e.exports=function(e){return function(t){return r(t,e)}}},function(e,t,n){var r=n(99),o=n(28);e.exports=function(e,t){var n=-1,i=o(e)?Array(e.length):[];return r(e,function(e,r,o){i[++n]=t(e,r,o)}),i}},function(e,t,n){var r=n(28);e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var i=n.length,a=t?i:-1,s=Object(n);(t?a--:++a<i)&&!1!==o(s[a],a,s););return n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeClasses=void 0;var r=a(n(42)),o=a(n(244)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function a(e){return e&&e.__esModule?e:{default:e}}var s=t.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.default&&(0,o.default)(e.default)||{};return t.map(function(t){var o=e[t];return o&&(0,r.default)(o,function(e,t){n[t]||(n[t]={}),n[t]=i({},n[t],o[t])}),t}),n};t.default=s},function(e,t,n){var r=n(245),o=1,i=4;e.exports=function(e){return r(e,o|i)}},function(e,t,n){var r=n(49),o=n(100),i=n(101),a=n(247),s=n(248),l=n(251),u=n(252),c=n(253),p=n(254),d=n(91),f=n(255),h=n(33),g=n(256),m=n(257),y=n(262),v=n(9),b=n(43),x=n(264),w=n(13),S=n(266),C=n(22),I=1,_=2,P=4,O="[object Arguments]",E="[object Function]",j="[object GeneratorFunction]",k="[object Object]",T={};T[O]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T[k]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T[E]=T["[object WeakMap]"]=!1,e.exports=function e(t,n,R,M,A,D){var N,F=n&I,L=n&_,B=n&P;if(R&&(N=A?R(t,M,A,D):R(t)),void 0!==N)return N;if(!w(t))return t;var z=v(t);if(z){if(N=g(t),!F)return u(t,N)}else{var U=h(t),W=U==E||U==j;if(b(t))return l(t,F);if(U==k||U==O||W&&!A){if(N=L||W?{}:y(t),!F)return L?p(t,s(N,t)):c(t,a(N,t))}else{if(!T[U])return A?t:{};N=m(t,U,F)}}D||(D=new r);var H=D.get(t);if(H)return H;if(D.set(t,N),S(t))return t.forEach(function(r){N.add(e(r,n,R,r,t,D))}),N;if(x(t))return t.forEach(function(r,o){N.set(o,e(r,n,R,o,t,D))}),N;var V=B?L?f:d:L?keysIn:C,G=z?void 0:V(t);return o(G||t,function(r,o){G&&(r=t[o=r]),i(N,o,e(r,n,R,o,t,D))}),N}},function(e,t,n){var r=n(18),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){var r=n(36),o=n(22);e.exports=function(e,t){return e&&r(t,o(t),e)}},function(e,t,n){var r=n(36),o=n(103);e.exports=function(e,t){return e&&r(t,o(t),e)}},function(e,t,n){var r=n(13),o=n(47),i=n(250),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=o(e),n=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&n.push(s);return n}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){(function(e){var r=n(10),o=t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(27)(e))},function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){var r=n(36),o=n(53);e.exports=function(e,t){return r(e,o(e),t)}},function(e,t,n){var r=n(36),o=n(104);e.exports=function(e,t){return r(e,o(e),t)}},function(e,t,n){var r=n(92),o=n(104),i=n(103);e.exports=function(e){return r(e,i,o)}},function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},function(e,t,n){var r=n(55),o=n(258),i=n(259),a=n(260),s=n(261),l="[object Boolean]",u="[object Date]",c="[object Map]",p="[object Number]",d="[object RegExp]",f="[object Set]",h="[object String]",g="[object Symbol]",m="[object ArrayBuffer]",y="[object DataView]",v="[object Float32Array]",b="[object Float64Array]",x="[object Int8Array]",w="[object Int16Array]",S="[object Int32Array]",C="[object Uint8Array]",I="[object Uint8ClampedArray]",_="[object Uint16Array]",P="[object Uint32Array]";e.exports=function(e,t,n){var O=e.constructor;switch(t){case m:return r(e);case l:case u:return new O(+e);case y:return o(e,n);case v:case b:case x:case w:case S:case C:case I:case _:case P:return s(e,n);case c:return new O;case p:case h:return new O(e);case d:return i(e);case f:return new O;case g:return a(e)}}},function(e,t,n){var r=n(55);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,n){var r=n(21),o=r?r.prototype:void 0,i=o?o.valueOf:void 0;e.exports=function(e){return i?Object(i.call(e)):{}}},function(e,t,n){var r=n(55);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(263),o=n(48),i=n(47);e.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:r(o(e))}},function(e,t,n){var r=n(13),o=Object.create,i=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=i},function(e,t,n){var r=n(265),o=n(45),i=n(46),a=i&&i.isMap,s=a?o(a):r;e.exports=s},function(e,t,n){var r=n(33),o=n(12),i="[object Map]";e.exports=function(e){return o(e)&&r(e)==i}},function(e,t,n){var r=n(267),o=n(45),i=n(46),a=i&&i.isSet,s=a?o(a):r;e.exports=s},function(e,t,n){var r=n(33),o=n(12),i="[object Set]";e.exports=function(e){return o(e)&&r(e)==i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autoprefix=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(42)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var i={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var n=t[e];return n||{extend:e}}},a=t.autoprefix=function(e){var t={};return(0,r.default)(e,function(e,n){var a={};(0,r.default)(e,function(e,t){var n=i[t];n?a=o({},a,n(e)):a[t]=e}),t[n]=a}),t};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hover=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e){return e&&e.__esModule?e:{default:e}}(n(0));function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=t.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function a(){var n,s,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var u=arguments.length,c=Array(u),p=0;p<u;p++)c[p]=arguments[p];return s=l=i(this,(n=a.__proto__||Object.getPrototypeOf(a)).call.apply(n,[this].concat(c))),l.state={hover:!1},l.handleMouseOver=function(){return l.setState({hover:!0})},l.handleMouseOut=function(){return l.setState({hover:!1})},l.render=function(){return o.default.createElement(t,{onMouseOver:l.handleMouseOver,onMouseOut:l.handleMouseOut},o.default.createElement(e,r({},l.props,l.state)))},i(l,s)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o.default.Component),a}()};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.active=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e){return e&&e.__esModule?e:{default:e}}(n(0));function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=t.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function a(){var n,s,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var u=arguments.length,c=Array(u),p=0;p<u;p++)c[p]=arguments[p];return s=l=i(this,(n=a.__proto__||Object.getPrototypeOf(a)).call.apply(n,[this].concat(c))),l.state={active:!1},l.handleMouseDown=function(){return l.setState({active:!0})},l.handleMouseUp=function(){return l.setState({active:!1})},l.render=function(){return o.default.createElement(t,{onMouseDown:l.handleMouseDown,onMouseUp:l.handleMouseUp},o.default.createElement(e,r({},l.props,l.state)))},i(l,s)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o.default.Component),a}()};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var n={},r=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[e]=t};return 0===e&&r("first-child"),e===t-1&&r("last-child"),(0===e||e%2==0)&&r("even"),1===Math.abs(e%2)&&r("odd"),r("nth-child",e),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Alpha=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=c(i),s=c(n(3)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(273)),u=c(n(105));function c(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=t.Alpha=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(e,t){var n=l.calculateChange(e,t,r.props,r.container);n&&r.props.onChange&&r.props.onChange(n,e)},r.handleMouseDown=function(e){r.handleChange(e,!0),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.PureComponent||i.Component),o(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,n=(0,s.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:r({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return a.default.createElement("div",{style:n.alpha},a.default.createElement("div",{style:n.checkboard},a.default.createElement(u.default,{renderers:this.props.renderers})),a.default.createElement("div",{style:n.gradient}),a.default.createElement("div",{style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},a.default.createElement("div",{style:n.pointer},this.props.pointer?a.default.createElement(this.props.pointer,this.props):a.default.createElement("div",{style:n.slider}))))}}]),t}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,n,r){e.preventDefault();var o=r.clientWidth,i=r.clientHeight,a="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=a-(r.getBoundingClientRect().left+window.pageXOffset),u=s-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n.direction){var c=void 0;if(c=u<0?0:u>i?1:Math.round(100*u/i)/100,n.hsl.a!==c)return{h:n.hsl.h,s:n.hsl.s,l:n.hsl.l,a:c,source:"rgb"}}else{var p=void 0;if(p=l<0?0:l>o?1:Math.round(100*l/o)/100,n.a!==p)return{h:n.hsl.h,s:n.hsl.s,l:n.hsl.l,a:p,source:"rgb"}}return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={},o=t.render=function(e,t,n,r){if("undefined"==typeof document&&!r)return null;var o=r?new r:document.createElement("canvas");o.width=2*n,o.height=2*n;var i=o.getContext("2d");return i?(i.fillStyle=e,i.fillRect(0,0,o.width,o.height),i.fillStyle=t,i.fillRect(0,0,n,n),i.translate(n,n),i.fillRect(0,0,n,n),o.toDataURL()):null};t.get=function(e,t,n,i){var a=e+"-"+t+"-"+n+(i?"-server":""),s=o(e,t,n,i);return r[a]?r[a]:(r[a]=s,s)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditableInput=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=s(o),a=s(n(3));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=t.EditableInput=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(e){n.props.label?n.props.onChange&&n.props.onChange(l({},n.props.label,e.target.value),e):n.props.onChange&&n.props.onChange(e.target.value,e),n.setState({value:e.target.value})},n.handleKeyDown=function(e){var t=String(e.target.value),r=t.indexOf("%")>-1,o=Number(t.replace(/%/g,""));if(!isNaN(o)){var i=n.props.arrowOffset||1;38===e.keyCode&&(null!==n.props.label?n.props.onChange&&n.props.onChange(l({},n.props.label,o+i),e):n.props.onChange&&n.props.onChange(o+i,e),r?n.setState({value:o+i+"%"}):n.setState({value:o+i})),40===e.keyCode&&(null!==n.props.label?n.props.onChange&&n.props.onChange(l({},n.props.label,o-i),e):n.props.onChange&&n.props.onChange(o-i,e),r?n.setState({value:o-i+"%"}):n.setState({value:o-i}))}},n.handleDrag=function(e){if(n.props.dragLabel){var t=Math.round(n.props.value+e.movementX);t>=0&&t<=n.props.dragMax&&n.props.onChange&&n.props.onChange(l({},n.props.label,t),e)}},n.handleMouseDown=function(e){n.props.dragLabel&&(e.preventDefault(),n.handleDrag(e),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.PureComponent||o.Component),r(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.input;e.value!==this.state.value&&(t===document.activeElement?this.setState({blurValue:String(e.value).toUpperCase()}):this.setState({value:String(e.value).toUpperCase(),blurValue:!this.state.blurValue&&String(e.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=(0,a.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return i.default.createElement("div",{style:t.wrap},i.default.createElement("input",{style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?i.default.createElement("span",{style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hue=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=l(o),a=l(n(3)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(277));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=t.Hue=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChange=function(e,t){var n=s.calculateChange(e,t,r.props,r.container);n&&r.props.onChange&&r.props.onChange(n,e)},r.handleMouseDown=function(e){r.handleChange(e,!0),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.PureComponent||o.Component),r(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,n=void 0===t?"horizontal":t,r=(0,a.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return i.default.createElement("div",{style:r.hue},i.default.createElement("div",{className:"hue-"+n,style:r.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.default.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),i.default.createElement("div",{style:r.pointer},this.props.pointer?i.default.createElement(this.props.pointer,this.props):i.default.createElement("div",{style:r.slider}))))}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,n,r){e.preventDefault();var o=r.clientWidth,i=r.clientHeight,a="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=a-(r.getBoundingClientRect().left+window.pageXOffset),u=s-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n.direction){var c=void 0;if(u<0)c=359;else if(u>i)c=0;else{c=360*(-100*u/i+100)/100}if(n.hsl.h!==c)return{h:c,s:n.hsl.s,l:n.hsl.l,a:n.hsl.a,source:"rgb"}}else{var p=void 0;if(l<0)p=0;else if(l>o)p=359;else{p=360*(100*l/o)/100}if(n.hsl.h!==p)return{h:p,s:n.hsl.s,l:n.hsl.l,a:n.hsl.a,source:"rgb"}}return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Raised=void 0;var r=a(n(0)),o=a(n(7)),i=a(n(3));function a(e){return e&&e.__esModule?e:{default:e}}var s=t.Raised=function(e){var t=e.zDepth,n=e.radius,o=e.background,a=e.children,s=(0,i.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:n,background:o}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},{"zDepth-1":1===t});return r.default.createElement("div",{style:s.wrap},r.default.createElement("div",{style:s.bg}),r.default.createElement("div",{style:s.content},a))};s.propTypes={background:o.default.string,zDepth:o.default.oneOf([0,1,2,3,4,5]),radius:o.default.number},s.defaultProps={background:"#fff",zDepth:1,radius:2},t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Saturation=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),i=u(o),a=u(n(3)),s=u(n(280)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(283));function u(e){return e&&e.__esModule?e:{default:e}}var c=t.Saturation=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e,t){n.props.onChange&&n.throttle(n.props.onChange,l.calculateChange(e,t,n.props,n.container),e)},n.handleMouseDown=function(e){n.handleChange(e,!0),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=(0,s.default)(function(e,t,n){e(t,n)},50),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.PureComponent||o.Component),r(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},n=t.color,r=t.white,o=t.black,s=t.pointer,l=t.circle,u=(0,a.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:r,black:o,pointer:s,circle:l}},{custom:!!this.props.style});return i.default.createElement("div",{style:u.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.default.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),i.default.createElement("div",{style:u.white,className:"saturation-white"},i.default.createElement("div",{style:u.black,className:"saturation-black"}),i.default.createElement("div",{style:u.pointer},this.props.pointer?i.default.createElement(this.props.pointer,this.props):i.default.createElement("div",{style:u.circle}))))}}]),t}();t.default=c},function(e,t,n){var r=n(106),o=n(13),i="Expected a function";e.exports=function(e,t,n){var a=!0,s=!0;if("function"!=typeof e)throw new TypeError(i);return o(n)&&(a="leading"in n?!!n.leading:a,s="trailing"in n?!!n.trailing:s),r(e,t,{leading:a,maxWait:t,trailing:s})}},function(e,t,n){var r=n(10);e.exports=function(){return r.Date.now()}},function(e,t,n){var r=n(13),o=n(34),i=NaN,a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return i;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=l.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):s.test(e)?i:+e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,n,r){e.preventDefault();var o=r.getBoundingClientRect(),i=o.width,a=o.height,s="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,u=s-(r.getBoundingClientRect().left+window.pageXOffset),c=l-(r.getBoundingClientRect().top+window.pageYOffset);u<0?u=0:u>i?u=i:c<0?c=0:c>a&&(c=a);var p=100*u/i,d=-100*c/a+100;return{h:n.hsl.h,s:p,v:d,a:n.hsl.a,source:"rgb"}}},function(e,t,n){e.exports=n(285)},function(e,t,n){var r=n(100),o=n(99),i=n(84),a=n(9);e.exports=function(e,t){return(a(e)?r:o)(e,i(t))}},function(e,t,n){var r;!function(o){var i=/^\s+/,a=/\s+$/,s=0,l=o.round,u=o.min,c=o.max,p=o.random;function d(e,t){if(e=e||"",t=t||{},e instanceof d)return e;if(!(this instanceof d))return new d(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,s=null,l=null,p=!1,d=!1;"string"==typeof e&&(e=function(e){e=e.replace(i,"").replace(a,"").toLowerCase();var t,n=!1;if(k[e])e=k[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=z.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=z.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=z.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=z.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=z.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=z.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=z.hex8.exec(e))return{r:D(t[1]),g:D(t[2]),b:D(t[3]),a:B(t[4]),format:n?"name":"hex8"};if(t=z.hex6.exec(e))return{r:D(t[1]),g:D(t[2]),b:D(t[3]),format:n?"name":"hex"};if(t=z.hex4.exec(e))return{r:D(t[1]+""+t[1]),g:D(t[2]+""+t[2]),b:D(t[3]+""+t[3]),a:B(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=z.hex3.exec(e))return{r:D(t[1]+""+t[1]),g:D(t[2]+""+t[2]),b:D(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==typeof e&&(U(e.r)&&U(e.g)&&U(e.b)?(t=function(e,t,n){return{r:255*M(e,255),g:255*M(t,255),b:255*M(n,255)}}(e.r,e.g,e.b),p=!0,d="%"===String(e.r).substr(-1)?"prgb":"rgb"):U(e.h)&&U(e.s)&&U(e.v)?(r=F(e.s),s=F(e.v),t=function(e,t,n){e=6*M(e,360),t=M(t,100),n=M(n,100);var r=o.floor(e),i=e-r,a=n*(1-t),s=n*(1-i*t),l=n*(1-(1-i)*t),u=r%6;return{r:255*[n,s,a,a,l,n][u],g:255*[l,n,n,s,a,a][u],b:255*[a,a,l,n,n,s][u]}}(e.h,r,s),p=!0,d="hsv"):U(e.h)&&U(e.s)&&U(e.l)&&(r=F(e.s),l=F(e.l),t=function(e,t,n){var r,o,i;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=M(e,360),t=M(t,100),n=M(n,100),0===t)r=o=i=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=a(l,s,e+1/3),o=a(l,s,e),i=a(l,s,e-1/3)}return{r:255*r,g:255*o,b:255*i}}(e.h,r,l),p=!0,d="hsl"),e.hasOwnProperty("a")&&(n=e.a));return n=R(n),{ok:p,format:e.format||d,r:u(255,c(t.r,0)),g:u(255,c(t.g,0)),b:u(255,c(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=l(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=l(this._r)),this._g<1&&(this._g=l(this._g)),this._b<1&&(this._b=l(this._b)),this._ok=n.ok,this._tc_id=s++}function f(e,t,n){e=M(e,255),t=M(t,255),n=M(n,255);var r,o,i=c(e,t,n),a=u(e,t,n),s=(i+a)/2;if(i==a)r=o=0;else{var l=i-a;switch(o=s>.5?l/(2-i-a):l/(i+a),i){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:o,l:s}}function h(e,t,n){e=M(e,255),t=M(t,255),n=M(n,255);var r,o,i=c(e,t,n),a=u(e,t,n),s=i,l=i-a;if(o=0===i?0:l/i,i==a)r=0;else{switch(i){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:o,v:s}}function g(e,t,n,r){var o=[N(l(e).toString(16)),N(l(t).toString(16)),N(l(n).toString(16))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function m(e,t,n,r){return[N(L(r)),N(l(e).toString(16)),N(l(t).toString(16)),N(l(n).toString(16))].join("")}function y(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.s-=t/100,n.s=A(n.s),d(n)}function v(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.s+=t/100,n.s=A(n.s),d(n)}function b(e){return d(e).desaturate(100)}function x(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.l+=t/100,n.l=A(n.l),d(n)}function w(e,t){t=0===t?0:t||10;var n=d(e).toRgb();return n.r=c(0,u(255,n.r-l(-t/100*255))),n.g=c(0,u(255,n.g-l(-t/100*255))),n.b=c(0,u(255,n.b-l(-t/100*255))),d(n)}function S(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.l-=t/100,n.l=A(n.l),d(n)}function C(e,t){var n=d(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,d(n)}function I(e){var t=d(e).toHsl();return t.h=(t.h+180)%360,d(t)}function _(e){var t=d(e).toHsl(),n=t.h;return[d(e),d({h:(n+120)%360,s:t.s,l:t.l}),d({h:(n+240)%360,s:t.s,l:t.l})]}function P(e){var t=d(e).toHsl(),n=t.h;return[d(e),d({h:(n+90)%360,s:t.s,l:t.l}),d({h:(n+180)%360,s:t.s,l:t.l}),d({h:(n+270)%360,s:t.s,l:t.l})]}function O(e){var t=d(e).toHsl(),n=t.h;return[d(e),d({h:(n+72)%360,s:t.s,l:t.l}),d({h:(n+216)%360,s:t.s,l:t.l})]}function E(e,t,n){t=t||6,n=n||30;var r=d(e).toHsl(),o=360/n,i=[d(e)];for(r.h=(r.h-(o*t>>1)+720)%360;--t;)r.h=(r.h+o)%360,i.push(d(r));return i}function j(e,t){t=t||6;for(var n=d(e).toHsv(),r=n.h,o=n.s,i=n.v,a=[],s=1/t;t--;)a.push(d({h:r,s:o,v:i})),i=(i+s)%1;return a}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:o.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:o.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:o.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=R(e),this._roundA=l(100*this._a)/100,this},toHsv:function(){var e=h(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=h(this._r,this._g,this._b),t=l(360*e.h),n=l(100*e.s),r=l(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=f(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=f(this._r,this._g,this._b),t=l(360*e.h),n=l(100*e.s),r=l(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return g(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,o){var i=[N(l(e).toString(16)),N(l(t).toString(16)),N(l(n).toString(16)),N(L(r))];if(o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1))return i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0);return i.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:l(this._r),g:l(this._g),b:l(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+l(this._r)+", "+l(this._g)+", "+l(this._b)+")":"rgba("+l(this._r)+", "+l(this._g)+", "+l(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:l(100*M(this._r,255))+"%",g:l(100*M(this._g,255))+"%",b:l(100*M(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+l(100*M(this._r,255))+"%, "+l(100*M(this._g,255))+"%, "+l(100*M(this._b,255))+"%)":"rgba("+l(100*M(this._r,255))+"%, "+l(100*M(this._g,255))+"%, "+l(100*M(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(T[g(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+m(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var o=d(e);n="#"+m(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(x,arguments)},brighten:function(){return this._applyModification(w,arguments)},darken:function(){return this._applyModification(S,arguments)},desaturate:function(){return this._applyModification(y,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(C,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(E,arguments)},complement:function(){return this._applyCombination(I,arguments)},monochromatic:function(){return this._applyCombination(j,arguments)},splitcomplement:function(){return this._applyCombination(O,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(P,arguments)}},d.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:F(e[r]));e=n}return d(e,t)},d.equals=function(e,t){return!(!e||!t)&&d(e).toRgbString()==d(t).toRgbString()},d.random=function(){return d.fromRatio({r:p(),g:p(),b:p()})},d.mix=function(e,t,n){n=0===n?0:n||50;var r=d(e).toRgb(),o=d(t).toRgb(),i=n/100;return d({r:(o.r-r.r)*i+r.r,g:(o.g-r.g)*i+r.g,b:(o.b-r.b)*i+r.b,a:(o.a-r.a)*i+r.a})},d.readability=function(e,t){var n=d(e),r=d(t);return(o.max(n.getLuminance(),r.getLuminance())+.05)/(o.min(n.getLuminance(),r.getLuminance())+.05)},d.isReadable=function(e,t,n){var r,o,i=d.readability(e,t);switch(o=!1,(r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7}return o},d.mostReadable=function(e,t,n){var r,o,i,a,s=null,l=0;o=(n=n||{}).includeFallbackColors,i=n.level,a=n.size;for(var u=0;u<t.length;u++)(r=d.readability(e,t[u]))>l&&(l=r,s=d(t[u]));return d.isReadable(e,s,{level:i,size:a})||!o?s:(n.includeFallbackColors=!1,d.mostReadable(e,["#fff","#000"],n))};var k=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},T=d.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(k);function R(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function M(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=u(t,c(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),o.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function A(e){return u(1,c(0,e))}function D(e){return parseInt(e,16)}function N(e){return 1==e.length?"0"+e:""+e}function F(e){return e<=1&&(e=100*e+"%"),e}function L(e){return o.round(255*parseFloat(e)).toString(16)}function B(e){return D(e)/255}var z=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function U(e){return!!z.CSS_UNIT.exec(e)}e.exports?e.exports=d:void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}(Math)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Swatch=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=l(n(0)),i=l(n(3)),a=n(288),s=n(5);function l(e){return e&&e.__esModule?e:{default:e}}var u=t.Swatch=function(e){var t=e.color,n=e.style,a=e.onClick,l=void 0===a?function(){}:a,u=e.onHover,c=e.title,p=void 0===c?t:c,d=e.children,f=e.focus,h=e.focusStyle,g=void 0===h?{}:h,m="transparent"===t,y=(0,i.default)({default:{swatch:r({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,f?g:{})}}),v={};return u&&(v.onMouseOver=function(e){return u(t,e)}),o.default.createElement("div",r({style:y.swatch,onClick:function(e){return l(t,e)},title:p,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&l(t,e)}},v),d,m&&o.default.createElement(s.Checkboard,{borderRadius:y.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};t.default=(0,a.handleFocus)(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleFocus=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(0));function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.handleFocus=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function s(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=n=a(this,(e=s.__proto__||Object.getPrototypeOf(s)).call.apply(e,[this].concat(o))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},a(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,i.default.Component),o(s,[{key:"render",value:function(){return i.default.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},i.default.createElement(e,r({},this.props,this.state)))}}]),s}()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlphaPointer=void 0;var r=i(n(0)),o=i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}var a=t.AlphaPointer=function(e){var t=e.direction,n=(0,o.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return r.default.createElement("div",{style:n.picker})};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Block=void 0;var r=u(n(0)),o=u(n(7)),i=u(n(3)),a=u(n(11)),s=n(5),l=u(n(291));function u(e){return e&&e.__esModule?e:{default:e}}var c=t.Block=function(e){var t=e.onChange,n=e.onSwatchHover,o=e.hex,u=e.colors,c=e.width,p=e.triangle,d=e.className,f=void 0===d?"":d,h="transparent"===o,g=function(e,n){a.default.isValidHex(e)&&t({hex:e,source:"hex"},n)},m=(0,i.default)({default:{card:{width:c,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:o,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:a.default.getContrastingColor(o),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+o+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},{"hide-triangle":"hide"===p});return r.default.createElement("div",{style:m.card,className:"block-picker "+f},r.default.createElement("div",{style:m.triangle}),r.default.createElement("div",{style:m.head},h&&r.default.createElement(s.Checkboard,{borderRadius:"6px 6px 0 0"}),r.default.createElement("div",{style:m.label},o)),r.default.createElement("div",{style:m.body},r.default.createElement(l.default,{colors:u,onClick:g,onSwatchHover:n}),r.default.createElement(s.EditableInput,{style:{input:m.input},value:o,onChange:g})))};c.propTypes={width:o.default.oneOfType([o.default.string,o.default.number]),colors:o.default.arrayOf(o.default.string),triangle:o.default.oneOf(["top","hide"])},c.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top"},t.default=(0,s.ColorWrap)(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockSwatches=void 0;var r=s(n(0)),o=s(n(3)),i=s(n(15)),a=n(5);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.BlockSwatches=function(e){var t=e.colors,n=e.onClick,s=e.onSwatchHover,l=(0,o.default)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return r.default.createElement("div",{style:l.swatches},(0,i.default)(t,function(e){return r.default.createElement(a.Swatch,{key:e,color:e,style:l.swatch,onClick:n,onHover:s,focusStyle:{boxShadow:"0 0 4px "+e}})}),r.default.createElement("div",{style:l.clear}))};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Circle=void 0;var r=c(n(0)),o=c(n(7)),i=c(n(3)),a=c(n(15)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(108)),l=n(5),u=c(n(293));function c(e){return e&&e.__esModule?e:{default:e}}var p=t.Circle=function(e){var t=e.width,n=e.onChange,o=e.onSwatchHover,s=e.colors,l=e.hex,c=e.circleSize,p=e.circleSpacing,d=e.className,f=void 0===d?"":d,h=(0,i.default)({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-p,marginBottom:-p}}}),g=function(e,t){return n({hex:e,source:"hex"},t)};return r.default.createElement("div",{style:h.card,className:"circle-picker "+f},(0,a.default)(s,function(e){return r.default.createElement(u.default,{key:e,color:e,onClick:g,onSwatchHover:o,active:l===e.toLowerCase(),circleSize:c,circleSpacing:p})}))};p.propTypes={width:o.default.oneOfType([o.default.string,o.default.number]),circleSize:o.default.number,circleSpacing:o.default.number},p.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[s.red[500],s.pink[500],s.purple[500],s.deepPurple[500],s.indigo[500],s.blue[500],s.lightBlue[500],s.cyan[500],s.teal[500],s.green[500],s.lightGreen[500],s.lime[500],s.yellow[500],s.amber[500],s.orange[500],s.deepOrange[500],s.brown[500],s.blueGrey[500]]},t.default=(0,l.ColorWrap)(p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CircleSwatch=void 0;var r=s(n(0)),o=n(3),i=s(o),a=n(5);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.CircleSwatch=function(e){var t=e.color,n=e.onClick,o=e.onSwatchHover,s=e.hover,l=e.active,u=e.circleSize,c=e.circleSpacing,p=(0,i.default)({default:{swatch:{width:u,height:u,marginRight:c,marginBottom:c,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+u/2+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:s,active:l});return r.default.createElement("div",{style:p.swatch},r.default.createElement(a.Swatch,{style:p.Swatch,color:t,onClick:n,onHover:o,focusStyle:{boxShadow:p.Swatch.boxShadow+", 0 0 5px "+t}}))};l.defaultProps={circleSize:28,circleSpacing:14},t.default=(0,o.handleHover)(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome=void 0;var r=c(n(0)),o=c(n(7)),i=c(n(3)),a=n(5),s=c(n(295)),l=c(n(296)),u=c(n(297));function c(e){return e&&e.__esModule?e:{default:e}}var p=t.Chrome=function(e){var t=e.onChange,n=e.disableAlpha,o=e.rgb,c=e.hsl,p=e.hsv,d=e.hex,f=e.renderers,h=e.className,g=void 0===h?"":h,m=(0,i.default)({default:{picker:{background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",width:"225px",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+o.r+", "+o.g+", "+o.b+", "+o.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},{disableAlpha:n});return r.default.createElement("div",{style:m.picker,className:"chrome-picker "+g},r.default.createElement("div",{style:m.saturation},r.default.createElement(a.Saturation,{style:m.Saturation,hsl:c,hsv:p,pointer:u.default,onChange:t})),r.default.createElement("div",{style:m.body},r.default.createElement("div",{style:m.controls,className:"flexbox-fix"},r.default.createElement("div",{style:m.color},r.default.createElement("div",{style:m.swatch},r.default.createElement("div",{style:m.active}),r.default.createElement(a.Checkboard,{renderers:f}))),r.default.createElement("div",{style:m.toggles},r.default.createElement("div",{style:m.hue},r.default.createElement(a.Hue,{style:m.Hue,hsl:c,pointer:l.default,onChange:t})),r.default.createElement("div",{style:m.alpha},r.default.createElement(a.Alpha,{style:m.Alpha,rgb:o,hsl:c,pointer:l.default,renderers:f,onChange:t})))),r.default.createElement(s.default,{rgb:o,hsl:c,hex:d,onChange:t,disableAlpha:n})))};p.propTypes={disableAlpha:o.default.bool},p.defaultProps={disableAlpha:!1},t.default=(0,a.ColorWrap)(p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromeFields=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=l(n(0)),i=l(n(3)),a=l(n(11)),s=n(5);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=t.ChromeFields=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={view:""},r.toggleViews=function(){"hex"===r.state.view?r.setState({view:"rgb"}):"rgb"===r.state.view?r.setState({view:"hsl"}):"hsl"===r.state.view&&(1===r.props.hsl.a?r.setState({view:"hex"}):r.setState({view:"rgb"}))},r.handleChange=function(e,t){e.hex?a.default.isValidHex(e.hex)&&r.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?r.props.onChange({r:e.r||r.props.rgb.r,g:e.g||r.props.rgb.g,b:e.b||r.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),r.props.onChange({h:r.props.hsl.h,s:r.props.hsl.s,l:r.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&r.props.onChange({h:e.h||r.props.hsl.h,s:Number(e.s&&e.s||r.props.hsl.s),l:Number(e.l&&e.l||r.props.hsl.l),source:"hsl"},t)},r.showHighlight=function(e){e.target.style.background="#eee"},r.hideHighlight=function(e){e.target.style.background="transparent"},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"componentDidMount",value:function(){1===this.props.hsl.a&&"hex"!==this.state.view?this.setState({view:"hex"}):"rgb"!==this.state.view&&"hsl"!==this.state.view&&this.setState({view:"rgb"})}},{key:"componentWillReceiveProps",value:function(e){1!==e.hsl.a&&"hex"===this.state.view&&this.setState({view:"rgb"})}},{key:"render",value:function(){var e=this,t=(0,i.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),n=void 0;return"hex"===this.state.view?n=o.default.createElement("div",{style:t.fields,className:"flexbox-fix"},o.default.createElement("div",{style:t.field},o.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?n=o.default.createElement("div",{style:t.fields,className:"flexbox-fix"},o.default.createElement("div",{style:t.field},o.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),o.default.createElement("div",{style:t.field},o.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),o.default.createElement("div",{style:t.field},o.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),o.default.createElement("div",{style:t.alpha},o.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(n=o.default.createElement("div",{style:t.fields,className:"flexbox-fix"},o.default.createElement("div",{style:t.field},o.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),o.default.createElement("div",{style:t.field},o.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),o.default.createElement("div",{style:t.field},o.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),o.default.createElement("div",{style:t.alpha},o.default.createElement(s.EditableInput,{style:{input:t.input,label:t.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),o.default.createElement("div",{style:t.wrap,className:"flexbox-fix"},n,o.default.createElement("div",{style:t.toggle},o.default.createElement("div",{style:t.icon,onClick:this.toggleViews,ref:function(t){return e.icon=t}},o.default.createElement("svg",{style:t.svg,viewBox:"0 0 24 24",onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight},o.default.createElement("path",{ref:function(t){return e.iconUp=t},fill:"#333",d:"M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}),o.default.createElement("path",{ref:function(t){return e.iconDown=t},fill:"#333",d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15Z"})))))}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromePointer=void 0;var r=i(n(0)),o=i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}var a=t.ChromePointer=function(){var e=(0,o.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return r.default.createElement("div",{style:e.picker})};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromePointerCircle=void 0;var r=i(n(0)),o=i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}var a=t.ChromePointerCircle=function(){var e=(0,o.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return r.default.createElement("div",{style:e.picker})};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Compact=void 0;var r=p(n(0)),o=p(n(7)),i=p(n(3)),a=p(n(15)),s=p(n(11)),l=n(5),u=p(n(299)),c=p(n(300));function p(e){return e&&e.__esModule?e:{default:e}}var d=t.Compact=function(e){var t=e.onChange,n=e.onSwatchHover,o=e.colors,p=e.hex,d=e.rgb,f=e.className,h=void 0===f?"":f,g=(0,i.default)({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}}),m=function(e,n){e.hex?s.default.isValidHex(e.hex)&&t({hex:e.hex,source:"hex"},n):t(e,n)};return r.default.createElement(l.Raised,{style:g.Compact},r.default.createElement("div",{style:g.compact,className:"compact-picker "+h},r.default.createElement("div",null,(0,a.default)(o,function(e){return r.default.createElement(u.default,{key:e,color:e,active:e.toLowerCase()===p,onClick:m,onSwatchHover:n})}),r.default.createElement("div",{style:g.clear})),r.default.createElement(c.default,{hex:p,rgb:d,onChange:m})))};d.propTypes={colors:o.default.arrayOf(o.default.string)},d.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"]},t.default=(0,l.ColorWrap)(d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompactColor=void 0;var r=s(n(0)),o=s(n(3)),i=s(n(11)),a=n(5);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.CompactColor=function(e){var t=e.color,n=e.onClick,s=void 0===n?function(){}:n,l=e.onSwatchHover,u=e.active,c=(0,o.default)({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:i.default.getContrastingColor(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:u,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return r.default.createElement(a.Swatch,{style:c.color,color:t,onClick:s,onHover:l,focusStyle:{boxShadow:"0 0 4px "+t}},r.default.createElement("div",{style:c.dot}))};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompactFields=void 0;var r=a(n(0)),o=a(n(3)),i=n(5);function a(e){return e&&e.__esModule?e:{default:e}}var s=t.CompactFields=function(e){var t=e.hex,n=e.rgb,a=e.onChange,s=(0,o.default)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),l=function(e,t){e.r||e.g||e.b?a({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},t):a({hex:e.hex,source:"hex"},t)};return r.default.createElement("div",{style:s.fields,className:"flexbox-fix"},r.default.createElement("div",{style:s.active}),r.default.createElement(i.EditableInput,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"hex",value:t,onChange:l}),r.default.createElement(i.EditableInput,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:n.r,onChange:l}),r.default.createElement(i.EditableInput,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:n.g,onChange:l}),r.default.createElement(i.EditableInput,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:n.b,onChange:l}))};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Github=void 0;var r=u(n(0)),o=u(n(7)),i=u(n(3)),a=u(n(15)),s=n(5),l=u(n(302));function u(e){return e&&e.__esModule?e:{default:e}}var c=t.Github=function(e){var t=e.width,n=e.colors,o=e.onChange,s=e.onSwatchHover,u=e.triangle,c=e.className,p=void 0===c?"":c,d=(0,i.default)({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},{"hide-triangle":"hide"===u,"top-left-triangle":"top-left"===u,"top-right-triangle":"top-right"===u,"bottom-left-triangle":"bottom-left"==u,"bottom-right-triangle":"bottom-right"===u}),f=function(e,t){return o({hex:e,source:"hex"},t)};return r.default.createElement("div",{style:d.card,className:"github-picker "+p},r.default.createElement("div",{style:d.triangleShadow}),r.default.createElement("div",{style:d.triangle}),(0,a.default)(n,function(e){return r.default.createElement(l.default,{color:e,key:e,onClick:f,onSwatchHover:s})}))};c.propTypes={width:o.default.oneOfType([o.default.string,o.default.number]),colors:o.default.arrayOf(o.default.string),triangle:o.default.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"])},c.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left"},t.default=(0,s.ColorWrap)(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GithubSwatch=void 0;var r=s(n(0)),o=n(3),i=s(o),a=n(5);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.GithubSwatch=function(e){var t=e.hover,n=e.color,o=e.onClick,s=e.onSwatchHover,l={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},u=(0,i.default)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:l}},{hover:t});return r.default.createElement("div",{style:u.swatch},r.default.createElement(a.Swatch,{color:n,onClick:o,onHover:s,focusStyle:l}))};t.default=(0,o.handleHover)(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HuePicker=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=l(n(0)),i=l(n(3)),a=n(5),s=l(n(304));function l(e){return e&&e.__esModule?e:{default:e}}var u=t.HuePicker=function(e){var t=e.width,n=e.height,s=e.onChange,l=e.hsl,u=e.direction,c=e.pointer,p=e.className,d=void 0===p?"":p,f=(0,i.default)({default:{picker:{position:"relative",width:t,height:n},hue:{radius:"2px"}}});return o.default.createElement("div",{style:f.picker,className:"hue-picker "+d},o.default.createElement(a.Hue,r({},f.hue,{hsl:l,pointer:c,onChange:function(e){return s({a:1,h:e.h,l:.5,s:1})},direction:u})))};u.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:s.default},t.default=(0,a.ColorWrap)(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderPointer=void 0;var r=i(n(0)),o=i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}var a=t.SliderPointer=function(e){var t=e.direction,n=(0,o.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return r.default.createElement("div",{style:n.picker})};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Material=void 0;var r=s(n(0)),o=s(n(3)),i=s(n(11)),a=n(5);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.Material=function(e){var t=e.onChange,n=e.hex,s=e.rgb,l=e.className,u=void 0===l?"":l,c=(0,o.default)({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}}),p=function(e,n){e.hex?i.default.isValidHex(e.hex)&&t({hex:e.hex,source:"hex"},n):(e.r||e.g||e.b)&&t({r:e.r||s.r,g:e.g||s.g,b:e.b||s.b,source:"rgb"},n)};return r.default.createElement(a.Raised,null,r.default.createElement("div",{style:c.material,className:"material-picker "+u},r.default.createElement(a.EditableInput,{style:{wrap:c.HEXwrap,input:c.HEXinput,label:c.HEXlabel},label:"hex",value:n,onChange:p}),r.default.createElement("div",{style:c.split,className:"flexbox-fix"},r.default.createElement("div",{style:c.third},r.default.createElement(a.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"r",value:s.r,onChange:p})),r.default.createElement("div",{style:c.third},r.default.createElement(a.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"g",value:s.g,onChange:p})),r.default.createElement("div",{style:c.third},r.default.createElement(a.EditableInput,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"b",value:s.b,onChange:p})))))};t.default=(0,a.ColorWrap)(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Photoshop=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=f(n(0)),i=f(n(7)),a=f(n(3)),s=n(5),l=f(n(307)),u=f(n(308)),c=f(n(309)),p=f(n(310)),d=f(n(311));function f(e){return e&&e.__esModule?e:{default:e}}var h=t.Photoshop=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:e.hex},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.props.className,t=void 0===e?"":e,n=(0,a.default)({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}});return o.default.createElement("div",{style:n.picker,className:"photoshop-picker "+t},o.default.createElement("div",{style:n.head},this.props.header),o.default.createElement("div",{style:n.body,className:"flexbox-fix"},o.default.createElement("div",{style:n.saturation},o.default.createElement(s.Saturation,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:u.default,onChange:this.props.onChange})),o.default.createElement("div",{style:n.hue},o.default.createElement(s.Hue,{direction:"vertical",hsl:this.props.hsl,pointer:c.default,onChange:this.props.onChange})),o.default.createElement("div",{style:n.controls},o.default.createElement("div",{style:n.top,className:"flexbox-fix"},o.default.createElement("div",{style:n.previews},o.default.createElement(d.default,{rgb:this.props.rgb,currentColor:this.state.currentColor})),o.default.createElement("div",{style:n.actions},o.default.createElement(p.default,{label:"OK",onClick:this.props.onAccept,active:!0}),o.default.createElement(p.default,{label:"Cancel",onClick:this.props.onCancel}),o.default.createElement(l.default,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}();h.propTypes={header:i.default.string},h.defaultProps={header:"Color Picker"},t.default=(0,s.ColorWrap)(h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPicker=void 0;var r=s(n(0)),o=s(n(3)),i=s(n(11)),a=n(5);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.PhotoshopPicker=function(e){var t=e.onChange,n=e.rgb,s=e.hsv,l=e.hex,u=(0,o.default)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),c=function(e,r){e["#"]?i.default.isValidHex(e["#"])&&t({hex:e["#"],source:"hex"},r):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},r):(e.h||e.s||e.v)&&t({h:e.h||s.h,s:e.s||s.s,v:e.v||s.v,source:"hsv"},r)};return r.default.createElement("div",{style:u.fields},r.default.createElement(a.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"h",value:Math.round(s.h),onChange:c}),r.default.createElement(a.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"s",value:Math.round(100*s.s),onChange:c}),r.default.createElement(a.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"v",value:Math.round(100*s.v),onChange:c}),r.default.createElement("div",{style:u.divider}),r.default.createElement(a.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"r",value:n.r,onChange:c}),r.default.createElement(a.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"g",value:n.g,onChange:c}),r.default.createElement(a.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"b",value:n.b,onChange:c}),r.default.createElement("div",{style:u.divider}),r.default.createElement(a.EditableInput,{style:{wrap:u.HEXwrap,input:u.HEXinput,label:u.HEXlabel},label:"#",value:l.replace("#",""),onChange:c}),r.default.createElement("div",{style:u.fieldSymbols},r.default.createElement("div",{style:u.symbol},""),r.default.createElement("div",{style:u.symbol},"%"),r.default.createElement("div",{style:u.symbol},"%")))};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPointerCircle=void 0;var r=i(n(0)),o=i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}var a=t.PhotoshopPointerCircle=function(e){var t=e.hsl,n=(0,o.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return r.default.createElement("div",{style:n.picker})};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPointerCircle=void 0;var r=i(n(0)),o=i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}var a=t.PhotoshopPointerCircle=function(){var e=(0,o.default)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return r.default.createElement("div",{style:e.pointer},r.default.createElement("div",{style:e.left},r.default.createElement("div",{style:e.leftInside})),r.default.createElement("div",{style:e.right},r.default.createElement("div",{style:e.rightInside})))};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopBotton=void 0;var r=i(n(0)),o=i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}var a=t.PhotoshopBotton=function(e){var t=e.onClick,n=e.label,i=e.children,a=e.active,s=(0,o.default)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:a});return r.default.createElement("div",{style:s.button,onClick:t},n||i)};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPreviews=void 0;var r=i(n(0)),o=i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}var a=t.PhotoshopPreviews=function(e){var t=e.rgb,n=e.currentColor,i=(0,o.default)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return r.default.createElement("div",null,r.default.createElement("div",{style:i.label},"new"),r.default.createElement("div",{style:i.swatches},r.default.createElement("div",{style:i.new}),r.default.createElement("div",{style:i.current})),r.default.createElement("div",{style:i.label},"current"))};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sketch=void 0;var r=u(n(0)),o=u(n(7)),i=u(n(3)),a=n(5),s=u(n(313)),l=u(n(314));function u(e){return e&&e.__esModule?e:{default:e}}var c=t.Sketch=function(e){var t=e.width,n=e.rgb,o=e.hex,u=e.hsv,c=e.hsl,p=e.onChange,d=e.onSwatchHover,f=e.disableAlpha,h=e.presetColors,g=e.renderers,m=e.className,y=void 0===m?"":m,v=(0,i.default)({default:{picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},{disableAlpha:f});return r.default.createElement("div",{style:v.picker,className:"sketch-picker "+y},r.default.createElement("div",{style:v.saturation},r.default.createElement(a.Saturation,{style:v.Saturation,hsl:c,hsv:u,onChange:p})),r.default.createElement("div",{style:v.controls,className:"flexbox-fix"},r.default.createElement("div",{style:v.sliders},r.default.createElement("div",{style:v.hue},r.default.createElement(a.Hue,{style:v.Hue,hsl:c,onChange:p})),r.default.createElement("div",{style:v.alpha},r.default.createElement(a.Alpha,{style:v.Alpha,rgb:n,hsl:c,renderers:g,onChange:p}))),r.default.createElement("div",{style:v.color},r.default.createElement(a.Checkboard,null),r.default.createElement("div",{style:v.activeColor}))),r.default.createElement(s.default,{rgb:n,hsl:c,hex:o,onChange:p,disableAlpha:f}),r.default.createElement(l.default,{colors:h,onClick:p,onSwatchHover:d}))};c.propTypes={disableAlpha:o.default.bool,width:o.default.oneOfType([o.default.string,o.default.number])},c.defaultProps={disableAlpha:!1,width:200,presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]},t.default=(0,a.ColorWrap)(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SketchFields=void 0;var r=s(n(0)),o=s(n(3)),i=s(n(11)),a=n(5);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.SketchFields=function(e){var t=e.onChange,n=e.rgb,s=e.hsl,l=e.hex,u=e.disableAlpha,c=(0,o.default)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:u}),p=function(e,r){e.hex?i.default.isValidHex(e.hex)&&t({hex:e.hex,source:"hex"},r):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,a:n.a,source:"rgb"},r):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:s.h,s:s.s,l:s.l,a:e.a,source:"rgb"},r))};return r.default.createElement("div",{style:c.fields,className:"flexbox-fix"},r.default.createElement("div",{style:c.double},r.default.createElement(a.EditableInput,{style:{input:c.input,label:c.label},label:"hex",value:l.replace("#",""),onChange:p})),r.default.createElement("div",{style:c.single},r.default.createElement(a.EditableInput,{style:{input:c.input,label:c.label},label:"r",value:n.r,onChange:p,dragLabel:"true",dragMax:"255"})),r.default.createElement("div",{style:c.single},r.default.createElement(a.EditableInput,{style:{input:c.input,label:c.label},label:"g",value:n.g,onChange:p,dragLabel:"true",dragMax:"255"})),r.default.createElement("div",{style:c.single},r.default.createElement(a.EditableInput,{style:{input:c.input,label:c.label},label:"b",value:n.b,onChange:p,dragLabel:"true",dragMax:"255"})),r.default.createElement("div",{style:c.alpha},r.default.createElement(a.EditableInput,{style:{input:c.input,label:c.label},label:"a",value:Math.round(100*n.a),onChange:p,dragLabel:"true",dragMax:"100"})))};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SketchPresetColors=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=l(n(0)),i=l(n(7)),a=l(n(3)),s=n(5);function l(e){return e&&e.__esModule?e:{default:e}}var u=t.SketchPresetColors=function(e){var t=e.colors,n=e.onClick,i=void 0===n?function(){}:n,l=e.onSwatchHover,u=(0,a.default)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),c=function(e,t){i({hex:e,source:"hex"},t)};return o.default.createElement("div",{style:u.colors,className:"flexbox-fix"},t.map(function(e){var t="string"==typeof e?{color:e}:e,n=""+t.color+(t.title||"");return o.default.createElement("div",{key:n,style:u.swatchWrap},o.default.createElement(s.Swatch,r({},t,{style:u.swatch,onClick:c,onHover:l,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))}))};u.propTypes={colors:i.default.arrayOf(i.default.oneOfType([i.default.string,i.default.shape({color:i.default.string,title:i.default.string})])).isRequired},t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Slider=void 0;var r=l(n(0)),o=l(n(3)),i=n(5),a=l(n(316)),s=l(n(318));function l(e){return e&&e.__esModule?e:{default:e}}var u=t.Slider=function(e){var t=e.hsl,n=e.onChange,s=e.pointer,l=e.className,u=void 0===l?"":l,c=(0,o.default)({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}});return r.default.createElement("div",{className:"slider-picker "+u},r.default.createElement("div",{style:c.hue},r.default.createElement(i.Hue,{style:c.Hue,hsl:t,pointer:s,onChange:n})),r.default.createElement("div",{style:c.swatches},r.default.createElement(a.default,{hsl:t,onClick:n})))};u.defaultProps={pointer:s.default},t.default=(0,i.ColorWrap)(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderSwatches=void 0;var r=a(n(0)),o=a(n(3)),i=a(n(317));function a(e){return e&&e.__esModule?e:{default:e}}var s=t.SliderSwatches=function(e){var t=e.onClick,n=e.hsl,a=(0,o.default)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}});return r.default.createElement("div",{style:a.swatches},r.default.createElement("div",{style:a.swatch},r.default.createElement(i.default,{hsl:n,offset:".80",active:Math.round(100*n.l)/100==.8&&Math.round(100*n.s)/100==.5,onClick:t,first:!0})),r.default.createElement("div",{style:a.swatch},r.default.createElement(i.default,{hsl:n,offset:".65",active:Math.round(100*n.l)/100==.65&&Math.round(100*n.s)/100==.5,onClick:t})),r.default.createElement("div",{style:a.swatch},r.default.createElement(i.default,{hsl:n,offset:".50",active:Math.round(100*n.l)/100==.5&&Math.round(100*n.s)/100==.5,onClick:t})),r.default.createElement("div",{style:a.swatch},r.default.createElement(i.default,{hsl:n,offset:".35",active:Math.round(100*n.l)/100==.35&&Math.round(100*n.s)/100==.5,onClick:t})),r.default.createElement("div",{style:a.swatch},r.default.createElement(i.default,{hsl:n,offset:".20",active:Math.round(100*n.l)/100==.2&&Math.round(100*n.s)/100==.5,onClick:t,last:!0})),r.default.createElement("div",{style:a.clear}))};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderSwatch=void 0;var r=i(n(0)),o=i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}var a=t.SliderSwatch=function(e){var t=e.hsl,n=e.offset,i=e.onClick,a=void 0===i?function(){}:i,s=e.active,l=e.first,u=e.last,c=(0,o.default)({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*n+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:s,first:l,last:u});return r.default.createElement("div",{style:c.swatch,onClick:function(e){return a({h:t.h,s:.5,l:n,source:"hsl"},e)}})};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderPointer=void 0;var r=i(n(0)),o=i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}var a=t.SliderPointer=function(){var e=(0,o.default)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return r.default.createElement("div",{style:e.picker})};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Swatches=void 0;var r=p(n(0)),o=p(n(7)),i=p(n(3)),a=p(n(15)),s=p(n(11)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(108)),u=n(5),c=p(n(320));function p(e){return e&&e.__esModule?e:{default:e}}var d=t.Swatches=function(e){var t=e.width,n=e.height,o=e.onChange,l=e.onSwatchHover,p=e.colors,d=e.hex,f=e.className,h=void 0===f?"":f,g=(0,i.default)({default:{picker:{width:t,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}}),m=function(e,t){s.default.isValidHex(e)&&o({hex:e,source:"hex"},t)};return r.default.createElement("div",{style:g.picker,className:"swatches-picker "+h},r.default.createElement(u.Raised,null,r.default.createElement("div",{style:g.overflow},r.default.createElement("div",{style:g.body},(0,a.default)(p,function(e){return r.default.createElement(c.default,{key:e.toString(),group:e,active:d,onClick:m,onSwatchHover:l})}),r.default.createElement("div",{style:g.clear})))))};d.propTypes={width:o.default.oneOfType([o.default.string,o.default.number]),height:o.default.oneOfType([o.default.string,o.default.number]),colors:o.default.arrayOf(o.default.arrayOf(o.default.string))},d.defaultProps={width:320,height:240,colors:[[l.red[900],l.red[700],l.red[500],l.red[300],l.red[100]],[l.pink[900],l.pink[700],l.pink[500],l.pink[300],l.pink[100]],[l.purple[900],l.purple[700],l.purple[500],l.purple[300],l.purple[100]],[l.deepPurple[900],l.deepPurple[700],l.deepPurple[500],l.deepPurple[300],l.deepPurple[100]],[l.indigo[900],l.indigo[700],l.indigo[500],l.indigo[300],l.indigo[100]],[l.blue[900],l.blue[700],l.blue[500],l.blue[300],l.blue[100]],[l.lightBlue[900],l.lightBlue[700],l.lightBlue[500],l.lightBlue[300],l.lightBlue[100]],[l.cyan[900],l.cyan[700],l.cyan[500],l.cyan[300],l.cyan[100]],[l.teal[900],l.teal[700],l.teal[500],l.teal[300],l.teal[100]],["#194D33",l.green[700],l.green[500],l.green[300],l.green[100]],[l.lightGreen[900],l.lightGreen[700],l.lightGreen[500],l.lightGreen[300],l.lightGreen[100]],[l.lime[900],l.lime[700],l.lime[500],l.lime[300],l.lime[100]],[l.yellow[900],l.yellow[700],l.yellow[500],l.yellow[300],l.yellow[100]],[l.amber[900],l.amber[700],l.amber[500],l.amber[300],l.amber[100]],[l.orange[900],l.orange[700],l.orange[500],l.orange[300],l.orange[100]],[l.deepOrange[900],l.deepOrange[700],l.deepOrange[500],l.deepOrange[300],l.deepOrange[100]],[l.brown[900],l.brown[700],l.brown[500],l.brown[300],l.brown[100]],[l.blueGrey[900],l.blueGrey[700],l.blueGrey[500],l.blueGrey[300],l.blueGrey[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]]},t.default=(0,u.ColorWrap)(d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SwatchesGroup=void 0;var r=s(n(0)),o=s(n(3)),i=s(n(15)),a=s(n(321));function s(e){return e&&e.__esModule?e:{default:e}}var l=t.SwatchesGroup=function(e){var t=e.onClick,n=e.onSwatchHover,s=e.group,l=e.active,u=(0,o.default)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return r.default.createElement("div",{style:u.group},(0,i.default)(s,function(e,o){return r.default.createElement(a.default,{key:e,color:e,active:e.toLowerCase()===l,first:0===o,last:o===s.length-1,onClick:t,onSwatchHover:n})}))};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SwatchesColor=void 0;var r=s(n(0)),o=s(n(3)),i=s(n(11)),a=n(5);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.SwatchesColor=function(e){var t=e.color,n=e.onClick,s=void 0===n?function(){}:n,l=e.onSwatchHover,u=e.first,c=e.last,p=e.active,d=(0,o.default)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{fill:i.default.getContrastingColor(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{fill:"#333"}},transparent:{check:{fill:"#333"}}},{first:u,last:c,active:p,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return r.default.createElement(a.Swatch,{color:t,style:d.color,onClick:s,onHover:l,focusStyle:{boxShadow:"0 0 4px "+t}},r.default.createElement("div",{style:d.check},r.default.createElement("svg",{style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},r.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))))};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Twitter=void 0;var r=u(n(0)),o=u(n(7)),i=u(n(3)),a=u(n(15)),s=u(n(11)),l=n(5);function u(e){return e&&e.__esModule?e:{default:e}}var c=t.Twitter=function(e){var t=e.onChange,n=e.onSwatchHover,o=e.hex,u=e.colors,c=e.width,p=e.triangle,d=e.className,f=void 0===d?"":d,h=(0,i.default)({default:{card:{width:c,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},{"hide-triangle":"hide"===p,"top-left-triangle":"top-left"===p,"top-right-triangle":"top-right"===p}),g=function(e,n){s.default.isValidHex(e)&&t({hex:e,source:"hex"},n)};return r.default.createElement("div",{style:h.card,className:"twitter-picker "+f},r.default.createElement("div",{style:h.triangleShadow}),r.default.createElement("div",{style:h.triangle}),r.default.createElement("div",{style:h.body},(0,a.default)(u,function(e,t){return r.default.createElement(l.Swatch,{key:t,color:e,hex:e,style:h.swatch,onClick:g,onHover:n,focusStyle:{boxShadow:"0 0 4px "+e}})}),r.default.createElement("div",{style:h.hash},"#"),r.default.createElement(l.EditableInput,{style:{input:h.input},value:o.replace("#",""),onChange:g}),r.default.createElement("div",{style:h.clear})))};c.propTypes={width:o.default.oneOfType([o.default.string,o.default.number]),triangle:o.default.oneOf(["hide","top-left","top-right"]),colors:o.default.arrayOf(o.default.string)},c.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left"},t.default=(0,l.ColorWrap)(c)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(2),l=n(24),u=n(38),c=n(124),p=n(4),d=function(e){function t(t){var n=e.call(this,t)||this;return n.openBrowseImage=function(e){var t=n.props.background;n.props.onChange(a.lodash.assign({},t,{image:e}))},n._onPositionChange=function(e){var t=n.props.background,r=e.target.value;n.props.onChange(a.lodash.assign({},t,{fillType:r}))},n._onColorChange=function(e){var t=n.props.background;n.props.onChange(a.lodash.assign({},t,{color:e}))},n.getStyle=function(){return a.css(i||(i=o(["\n        .jimu-builder--color {\n          width: ",";\n          height: ",";\n        }\n        .fill-type {\n          width: 50%;\n        }\n      "],["\n        .jimu-builder--color {\n          width: ",";\n          height: ",";\n        }\n        .fill-type {\n          width: 50%;\n        }\n      "])),a.polished.rem(40),a.polished.rem(20))},n.nls=function(e){return n.props.intl?n.props.intl.formatMessage({id:e,defaultMessage:p.default[e]}):e},n.getFillType=function(){return[{value:s.FillType.FIT,label:n.nls("fit")},{value:s.FillType.FILL,label:n.nls("fill")},{value:s.FillType.CENTER,label:n.nls("center")},{value:s.FillType.TILE,label:n.nls("tile")},{value:s.FillType.STRETCH,label:n.nls("stretch")}]},n.fileInput=a.React.createRef(),n}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.background,n=e.className,r=e.style;return a.jsx("div",{css:this.getStyle(),className:a.classNames(n,"jimu-builder--background-setting","d-flex flex-column w-100"),style:r},a.jsx(u.SettingRow,{flow:"no-wrap",label:this.nls("fill")},a.jsx(l.ColorChooser,{onChange:this._onColorChange,color:t.color})),a.jsx(u.SettingRow,{flow:"no-wrap",label:this.nls("image")},a.jsx(c.ImageChooser,{widgetId:"background-setting",color:"secondary",label:this.nls("browse"),size:"sm",className:"text-dark d-flex justify-content-center btn-browse",onChange:this.openBrowseImage,imageParam:t.image})),a.jsx(u.SettingRow,{flow:"no-wrap",label:this.nls("position")},a.jsx(s.Input,{className:"fill-type",type:"select",name:"bg-position",value:t.fillType,onChange:this._onPositionChange.bind(this)},this.getFillType().map(function(e,t){return a.jsx("option",{key:t,value:e.value},e.label)}))))},t.defaultProps={background:{color:void 0,fillType:s.FillType.FIT,image:{url:""}},onChange:function(){}},t}(a.React.PureComponent);t._BackgroundSetting=d,t.BackgroundSetting=a.injectIntl(d)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.render=function(){return o.React.createElement(i.Container,{className:o.classNames(this.props.className,"jimu-widget-setting--section")},this.props.title&&o.React.createElement(i.Row,{className:"jimu-widget-setting--section-header"},o.React.createElement("h5",{className:"w-100"},this.props.title)),this.props.children,o.React.createElement("hr",{className:"split-line"}))},t}(o.React.PureComponent);t.SettingSection=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.render=function(){var e=o.classNames("jimu-widget-setting--row","form-group",{"form-inline":"wrap"!==this.props.flow,"pl-4":this.props.indented});return o.React.createElement(i.Row,{className:e},this.props.label&&o.React.createElement("label",{className:o.classNames("justify-content-start flex-grow-1 mb-0",{"w-100 mr-0 mb-2":"wrap"===this.props.flow})},this.props.label),this.props.children)},t}(o.React.PureComponent);t.SettingRow=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=function(e){function t(t){var n=e.call(this,t)||this;return n.onStyleClick=function(e){n.state.selectedValue!==e&&(n.setState({selectedValue:e}),n.props.onChange&&n.props.onChange(e))},n.state={selectedValue:n.props.value},n}return r(t,e),t.prototype.componentDidUpdate=function(e,t){e.value!==this.props.value&&this.setState({selectedValue:this.props.value})},t.prototype.render=function(){var e=this,t=this.props.styles;return o.React.createElement("div",{className:o.classNames("widget-setting--stylepicker w-100",{small:"small"===this.props.size})},Object.keys(t).map(function(n,r){return o.React.createElement("div",{key:n,role:"button",className:o.classNames("widget-setting--stylepicker-item",{active:n===e.state.selectedValue,"full-width":"full"===t[n].size}),style:{backgroundImage:"url("+t[n].thumbnail+")"},onClick:function(){return e.onStyleClick(n)}})}))},t}(o.React.PureComponent);t.StylePicker=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=function(e){function t(t){var n=e.call(this,t)||this;return n.onRadioButtonClick=function(e){n.state.selectedValue!==e&&(n.setState({selectedValue:e}),n.props.onChange&&n.props.onChange(e))},n.state={selectedValue:n.props.value},n}return r(t,e),t.prototype.render=function(){var e=this,t=this.props.options;return o.React.createElement(i.ButtonGroup,{className:"jimu-widget-setting--button-group"},t.map(function(t){return o.React.createElement(i.Button,{key:t.value.toString(),size:"sm",style:e.props.buttonWidth?{width:e.props.buttonWidth+"px"}:null,onClick:function(){e.onRadioButtonClick(t.value)},active:e.state.selectedValue===t.value},t.content)}))},t}(o.React.PureComponent);t.SettingButtonGroup=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(2),l=n(58),u=function(e){function t(t){var n=e.call(this,t)||this;return n.handleClick=function(e){var t=n.props.value;n.props.onChange&&n.props.onChange(t)},n.getStyle=function(){var e=n.props.theme,t=e&&e.colors?e.colors.black:"black",r=e&&e.colors?e.colors.primary:"primary";return a.css(i||(i=o(["\n            padding-right: ",";\n            display: flex;\n            align-items: center;\n            justify-content: space-around;\n            cursor: pointer;\n            color: ",";\n            font-size: ",";\n\n            &:hover {\n              background: ",";\n            }\n            \n            > div {\n              padding: 0 ",";\n              visibility: hidden;\n            }\n\n            &.marked {\n              > div {\n                visibility: visible;\n              }\n            }\n        }\n        "],["\n            padding-right: ",";\n            display: flex;\n            align-items: center;\n            justify-content: space-around;\n            cursor: pointer;\n            color: ",";\n            font-size: ",";\n\n            &:hover {\n              background: ",";\n            }\n            \n            > div {\n              padding: 0 ",";\n              visibility: hidden;\n            }\n\n            &.marked {\n              > div {\n                visibility: visible;\n              }\n            }\n        }\n        "])),a.polished.rem(8),t,a.polished.rem(13),r,a.polished.rem(8))},n}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.style,r=e.label,o=e.marked;return a.jsx("div",{css:this.getStyle(),style:n,onClick:this.handleClick,className:a.classNames(t,"jimu-builder--markable-item",{marked:o})},a.jsx("div",null,a.jsx(s.Icon,{size:12,icon:l})),a.jsx("span",null,r))},t}(a.React.PureComponent);t.MarkableItem=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(330),l=n(24),u=n(39),c=n(2),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getStyle=function(){return a.css(i||(i=o(["\n      >.item {\n        flex: 0 1 auto;\n      }\n      >.item:nth-of-type(1){\n        width: 20%;\n      }\n      >.item:nth-of-type(2){\n        width: 40%;\n      }\n      >.item:nth-of-type(3){\n        width:30%;\n      }\n    "],["\n      >.item {\n        flex: 0 1 auto;\n      }\n      >.item:nth-of-type(1){\n        width: 20%;\n      }\n      >.item:nth-of-type(2){\n        width: 40%;\n      }\n      >.item:nth-of-type(3){\n        width:30%;\n      }\n    "])))},t}return r(t,e),t.prototype._updateBorder=function(e,t){var n={};n[e]=t,this.props.onChange(a.lodash.assign({},this.props.value,n))},t.prototype.render=function(){var e=this,t=this.props.value,n=t.width,r=t.type,o=t.color;return a.jsx("div",{css:this.getStyle(),className:a.classNames("d-flex justify-content-between w-100","jimu-builder--border-setting")},a.jsx(l.ColorChooser,{style:{height:"26px"},className:"item",color:o,onChange:function(t){e._updateBorder("color",t)}}),a.jsx(s.LineStyleChooser,{intl:this.props.intl,className:"item",value:r,onChange:function(t){e._updateBorder("type",t)}}),a.jsx(u.InputUnit,{units:[c.UnitTypes.PIXEL,c.UnitTypes.PERCENTAGE],className:"item",value:n,onChange:function(t){e._updateBorder("width",t)}}))},t.defaultProps={value:{type:c.LineType.DASHED,color:void 0,width:{distance:0,unit:c.UnitTypes.PIXEL}},onChange:function(){}},t}(a.React.PureComponent);t._BorderSetting=p,t.BorderSetting=a.themeUtils.withTheme(a.injectIntl(p))},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(4),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nls=function(e){return t.props.intl?t.props.intl.formatMessage({id:e,defaultMessage:a.default[e]}):e},t.getLineStyles=function(){return[{label:t.nls("dashed"),value:i.LineType.DASHED},{label:t.nls("dotted"),value:i.LineType.DOTTED},{label:t.nls("double"),value:i.LineType.DOUBLE},{label:t.nls("solid"),value:i.LineType.SOLID}]},t}return r(t,e),t.prototype._onLineStyleChange=function(e){var t=e.target.value;this.props.onChange(t)},t.prototype.render=function(){var e=this.props,t=e.value,n=e.className,r=e.style;return o.React.createElement("div",{className:o.classNames(n,"jimu-builder--line-style-chooser"),style:r},o.React.createElement(i.Input,{type:"select",name:"lineType",value:t,onChange:this._onLineStyleChange.bind(this)},this.getLineStyles().map(function(e,t){return o.React.createElement("option",{key:t,value:e.value,label:e.label},e.label)})))},t.defaultProps={value:i.LineType.SOLID,onChange:function(){}},t}(o.React.PureComponent);t.LineStyleChooser=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(24),s=n(39),l=n(38),u=n(4),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nls=function(e){return t.props.intl?t.props.intl.formatMessage({id:e,defaultMessage:u.default[e]}):e},t.getShadows=function(){return[{name:"offsetX",label:t.nls("offsetX"),min:-200,max:200},{name:"offsetY",label:t.nls("offsetY"),min:-200,max:200},{name:"blur",label:t.nls("blurRadius"),min:0,max:300},{name:"spread",label:t.nls("spreadRadius"),min:-200,max:200}]},t}return r(t,e),t.prototype._updateShadow=function(e,t){var n={};n[e]=t,this.props.onChange(o.lodash.assign({},this.props.value,n))},t.prototype.render=function(){var e=this,t=this.props.value;return o.React.createElement("div",{className:o.classNames("jimu-builder--box-shadow-setting","d-flex flex-column w-100")},this.getShadows().map(function(n,r){return o.React.createElement(l.SettingRow,{flow:"no-wrap",key:r,label:n.label},o.React.createElement(s.InputUnit,{style:{width:"30%",flex:"0 0 auto"},min:n.min,max:n.max,value:t[n.name],onChange:function(t){return e._updateShadow(n.name,t)}}))}),o.React.createElement(l.SettingRow,{flow:"no-wrap",label:this.nls("color")},o.React.createElement(a.ColorChooser,{style:{width:"40px",height:"20px"},color:t.color,onChange:function(t){return e._updateShadow("color",t)}})))},t.defaultProps={value:{offsetX:{distance:0,unit:i.UnitTypes.PIXEL},offsetY:{distance:0,unit:i.UnitTypes.PIXEL},blur:{distance:0,unit:i.UnitTypes.PIXEL},spread:{distance:0,unit:i.UnitTypes.PIXEL},color:void 0},onChange:function(){}},t}(o.React.PureComponent);t._BoxShadowSetting=c,t.BoxShadowSetting=o.injectIntl(c)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(2),l=n(2),u=n(56),c=n(333),p=n(334),d=n(4),f=function(e){function t(t){var n=e.call(this,t)||this;return n._onSideValueChange=function(e,t){if(n.state.bindAll)n._onAllSidesValueChange(e);else{var r=n.props.value,o=l.styleUtils.expandStyleArray(r.number);o[t]=e,n.props.onChange({number:o,unit:r.unit})}},n._onUnitChange=function(e){var t=n.props.value;if(e!==t.unit){var r=l.styleUtils.expandStyleArray(t.number);n.props.onChange({number:r,unit:e})}},n._onAllSidesValueChange=function(e){n.props.onChange({number:[e],unit:n.props.value.unit})},n._toggleBindAll=function(){if(!n.props.disabled){var e=!n.state.bindAll;if(e){var t=n.props.value,r=l.styleUtils.expandStyleArray(t.number);n._onAllSidesValueChange(r[0])}n.setState({bindAll:e})}},n.getStyle=function(){var e=n.props.theme,t=e&&e.colors?e.colors.grays.gray600:"#c8cbcd";return a.css(i||(i=o(["\n      width: 100%;\n      .content {\n        display: flex;\n        width: 100%;\n        justify-content: space-between;\n        align-items: center;\n        .input-group {\n          width: 87%;\n          flex-wrap: nowrap;\n          flex-shrink: 0;\n          flex-grow: 0;\n          > input {\n            width: 21%;\n          }\n          .form-control {\n            padding-left: 0.25rem;\n            padding-right: 0.25rem;\n          }\n          >.jimu-builder--unit-chooser {\n            width: 16%;\n            margin-left: -1px;\n            border-top-right-radius: 2px;\n            border-bottom-right-radius: 2px;\n          }\n        }\n        .lock-btn {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          width: 10%;\n          cursor: pointer;\n        }  \n      }\n      .tips {\n        color: ",";\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        width: 100%;\n        font-size: ",";\n        .tip-group {\n          text-align: center;\n          display: flex;\n          flex-shrink: 0;\n          flex-grow: 0;\n          width: 73%;\n          > div {\n            width: 25%;\n            ","\n          }\n        }\n      }\n    "],["\n      width: 100%;\n      .content {\n        display: flex;\n        width: 100%;\n        justify-content: space-between;\n        align-items: center;\n        .input-group {\n          width: 87%;\n          flex-wrap: nowrap;\n          flex-shrink: 0;\n          flex-grow: 0;\n          > input {\n            width: 21%;\n          }\n          .form-control {\n            padding-left: 0.25rem;\n            padding-right: 0.25rem;\n          }\n          >.jimu-builder--unit-chooser {\n            width: 16%;\n            margin-left: -1px;\n            border-top-right-radius: 2px;\n            border-bottom-right-radius: 2px;\n          }\n        }\n        .lock-btn {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          width: 10%;\n          cursor: pointer;\n        }  \n      }\n      .tips {\n        color: ",";\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        width: 100%;\n        font-size: ",";\n        .tip-group {\n          text-align: center;\n          display: flex;\n          flex-shrink: 0;\n          flex-grow: 0;\n          width: 73%;\n          > div {\n            width: 25%;\n            ","\n          }\n        }\n      }\n    "])),t,a.polished.rem(10),a.polished.ellipsis())},n.nls=function(e){return n.props.intl?n.props.intl.formatMessage({id:e,defaultMessage:d.default[e]}):e},n.state={bindAll:!1},n}return r(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.value,r=t.showTip,o=void 0===r||r,i=t.sides,d=t.min,f=t.max,h=t.disabled,g=this.state.bindAll,m=l.styleUtils.expandStyleArray(n.number);return a.jsx("div",{css:this.getStyle(),className:"jimu-builder--four-sides-setting"},a.jsx("div",{className:"content"},a.jsx(s.InputGroup,null,i.map(function(t,n){return a.jsx(s.Input,{key:n,placeholder:o?t:"",title:e.nls(t),type:"number",min:d,max:f,disabled:h,value:m[n],onAcceptValue:function(t){return e._onSideValueChange(+t,n)}})}),a.jsx(u.UnitChooser,{units:[s.UnitTypes.PIXEL,s.UnitTypes.PERCENTAGE],unit:n.unit,onChange:this._onUnitChange})),a.jsx("div",{className:"lock-btn",onClick:this._toggleBindAll,title:g?this.nls("lock"):this.nls("unlock")},a.jsx(s.Icon,{size:14,icon:g?c:p,className:h?"text-gray-600":"text-black"}))),o&&a.jsx("div",{className:"tips w-100 d-flex justify-content-between"},a.jsx("div",{className:"tip-group"},i.map(function(t,n){return a.jsx("div",{key:n,title:e.nls(t)},t)})),a.jsx("div",null)))},t.defaultProps={value:{number:[0],unit:s.UnitTypes.PIXEL},disabled:!1,min:0,max:100,sides:[s.Sides.T,s.Sides.R,s.Sides.B,s.Sides.L],onChange:function(){}},t}(a.React.PureComponent);t._FourSides=f,t.FourSides=a.themeUtils.withTheme(a.injectIntl(f))},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M7.875 4h-.563V2.857C7.313 1.257 6.075 0 4.5 0 2.925 0 1.687 1.257 1.687 2.857V4h-.562C.506 4 0 4.514 0 5.143v5.714C0 11.486.506 12 1.125 12h6.75C8.494 12 9 11.486 9 10.857V5.143C9 4.514 8.494 4 7.875 4zM4.5 1.086c.956 0 1.744.8 1.744 1.771V4H2.813V2.857h-.057c0-.971.788-1.771 1.744-1.771zm3.375 9.771h-6.75V5.143h6.75v5.714zM4.5 9.143c.619 0 1.125-.514 1.125-1.143S5.119 6.857 4.5 6.857 3.375 7.371 3.375 8 3.881 9.143 4.5 9.143z",fill:"currentColor",fillRule:"evenodd"});function a(e){return o.createElement("svg",r({width:12,height:12,viewBox:"0 0 12 12"},e),i)}e.exports=a,a.default=a},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M6.244 2.857C6.244 1.257 7.511 0 9.124 0c1.416 0 2.565.968 2.825 2.287a.478.478 0 0 1-.469.57h-.023a.635.635 0 0 1-.615-.478 1.796 1.796 0 0 0-1.718-1.294c-.98 0-1.786.8-1.786 1.772V3h-.026v1h.563C8.494 4 9 4.514 9 5.143v5.714C9 11.486 8.494 12 7.875 12h-6.75A1.137 1.137 0 0 1 0 10.857V5.143C0 4.514.506 4 1.125 4h5.119V2.857zM5.625 8c0 .629-.506 1.143-1.125 1.143A1.137 1.137 0 0 1 3.375 8c0-.629.506-1.143 1.125-1.143S5.625 7.371 5.625 8zm-4.5 2.857h6.75V5.143h-6.75v5.714z",fill:"currentColor",fillRule:"evenodd"});function a(e){return o.createElement("svg",r({width:12,height:12,viewBox:"0 0 12 12"},e),i)}e.exports=a,a.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(111),s=n(128),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._updateText=function(e,n){var r={};r[e]=n;var i=o.lodash.assign({},t.props.value,r);t.props.onChange(i)},t}return r(t,e),t.prototype.render=function(){var e=this,t=this.props.value,n=t.font,r=t.size,l=t.color,u=t.bold,c=t.italic,p=t.underline,d=t.strike,f=t.align,h={bold:u,italic:c,underline:p,strike:d};return o.React.createElement("div",{className:o.classNames("d-flex flex-column w-100 h-100","jimu-builder--text-setting")},o.React.createElement("div",{className:"d-flex justify-content-between mb-2"},o.React.createElement(a.FontFamily,{style:{width:"100%"},font:n,onChange:function(t){return e._updateText(i.TextFormats.FONT,t)}})),o.React.createElement("div",{className:"d-flex justify-content-between mb-2"},o.React.createElement(a.Size,{value:r,onChange:function(t){return e._updateText(i.TextFormats.SIZE,t)},className:"mr-2"}),o.React.createElement(a.Color,{title:i.TextFormats.COLOR,color:l,icon:s,onChange:function(t){return e._updateText(i.TextFormats.COLOR,t)}})),o.React.createElement("div",{className:"d-flex justify-content-between"},o.React.createElement(a.BIUS,{intl:this.props.intl,formats:h,onClick:function(t){return e._updateText(t,!h[t])},className:"mr-2"}),o.React.createElement(a.Align,{intl:this.props.intl,align:f,onChange:function(t){return e._updateText(i.TextFormats.ALIGN,t)}})))},t.defaultProps={value:{font:i.FontFamilyValue.CALIBRI,size:"14px",color:void 0,bold:!1,italic:!1,underline:!1,strike:!1,align:i.AlignValue.LEFT},onChange:function(){}},t}(o.React.PureComponent);t.TextSetting=o.themeUtils.withTheme(o.injectIntl(l))},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(4),s=n(337),l=n(338),u=n(339),c=n(340),p=((r={})[i.TextFormats.BOLD]=s,r[i.TextFormats.ITALIC]=l,r[i.TextFormats.UNDERLINE]=u,r[i.TextFormats.STRIKE]=c,r),d=[{key:"bold",value:i.TextFormats.BOLD},{key:"italic",value:i.TextFormats.ITALIC},{key:"underline",value:i.TextFormats.UNDERLINE},{key:"strike",value:i.TextFormats.STRIKE}];t._BIUS=function(e){var t=e.formats,n=void 0===t?{}:t,r=e.onClick,s=void 0===r?function(){}:r,l=e.className,u=e.intl;return o.React.createElement(i.ButtonGroup,{className:o.classNames(l,"jimu-builder-common--bius"),size:"sm"},d.map(function(e,t){return o.React.createElement(i.Button,{key:t,color:"secondary",title:function(e){return u?u.formatMessage({id:e,defaultMessage:a.default[e]}):e}(e.key),icon:!0,size:"sm",active:!!n[e.value],onClick:function(){return s(e.value,!n[e.value])}},o.React.createElement(i.Icon,{size:14,icon:p[e.value]}))}))},t.BIUS=o.themeUtils.withTheme(t._BIUS)},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M.857 4.5h2.786c.828 0 1.5-.784 1.5-1.75S4.47 1 3.643 1H.857v3.5zm4.498.14C6.31 5.004 7 6.035 7 7.25 7 8.769 5.923 10 4.594 10H.875C.392 10 0 9.552 0 9V1c0-.552.384-1 .857-1h2.786C4.945 0 6 1.231 6 2.75a3 3 0 0 1-.645 1.89zm-1.712.86H.875V9h3.719c.845 0 1.531-.784 1.531-1.75S5.439 5.5 4.594 5.5h-.951z"});function a(e){return o.createElement("svg",r({width:7,height:10,viewBox:"0 0 7 10"},e),i)}e.exports=a,a.default=a},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M2.7 9H4a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1h1.2l1.6-8H2a.5.5 0 0 1 0-1h3.5a.5.5 0 0 1 0 1H4.3L2.7 9z"});function a(e){return o.createElement("svg",r({width:6,height:10,viewBox:"0 0 6 10"},e),i)}e.exports=a,a.default=a},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M.875.438V4.8c0 1.325 1.175 2.4 2.625 2.4s2.625-1.075 2.625-2.4V.438a.437.437 0 1 1 .875 0V4.8C7 6.567 5.433 8 3.5 8S0 6.567 0 4.8V.438a.437.437 0 1 1 .875 0zM.5 9h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1 0-1z"});function a(e){return o.createElement("svg",r({width:7,height:10,viewBox:"0 0 7 10"},e),i)}e.exports=a,a.default=a},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M3.75 5.5H.5a.5.5 0 0 1 0-1h1.129A2.75 2.75 0 0 1 3.75 0c.994 0 1.761.423 2.301 1.27a.52.52 0 0 1-.18.732.424.424 0 0 1-.591-.181C5.013 1.274 4.503 1 3.75 1a1.75 1.75 0 0 0 0 3.5H7.5a.5.5 0 0 1 0 1H5.871A2.75 2.75 0 0 1 3.75 10c-1.212 0-2.047-.412-2.505-1.236a.437.437 0 0 1 .17-.594.437.437 0 0 1 .099-.04.559.559 0 0 1 .623.252C2.384 8.794 2.92 9 3.75 9a1.75 1.75 0 0 0 0-3.5z"});function a(e){return o.createElement("svg",r({width:8,height:10,viewBox:"0 0 8 10"},e),i)}e.exports=a,a.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(2);t.fontValue=[o.FontFamilyValue.AVENIRNEXT,o.FontFamilyValue.CALIBRI,o.FontFamilyValue.PMINGLIU,o.FontFamilyValue.IMPACT,o.FontFamilyValue.GEORGIA,o.FontFamilyValue.ARIAL,o.FontFamilyValue.TIMESNEWROMAN,o.FontFamilyValue.SIMHEI,o.FontFamilyValue.MICROSOFTYAHEI],t.FontFamily=function(e){var n=e.font,i=void 0===n?o.FontFamilyValue.AVENIRNEXT:n,a=e.onChange,s=void 0===a?function(){}:a,l=e.style,u=e.className;return r.React.createElement(o.Input,{title:i,className:r.classNames(u,"jimu-builder-common--font-family"),style:l,type:"select",name:"font-family",value:i,onChange:function(e){s(e.target.value)}},t.fontValue.map(function(e,t){return r.React.createElement("option",{key:t,value:e,label:e},e)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(343),i=n(2),a=n(4),s=n(345),l=n(346),u=n(347),c=n(348);t._Align=function(e){var t=e.align,n=void 0===t?i.AlignValue.LEFT:t,p=e.onChange,d=void 0===p?function(){}:p,f=e.className,h=e.intl,g=function(e){return h?h.formatMessage({id:e,defaultMessage:a.default[e]}):e};return r.React.createElement(o.Picker,{className:f,value:n,options:[{icon:s,value:i.AlignValue.LEFT,label:g("left")},{icon:l,value:i.AlignValue.CENTER,label:g("center")},{icon:u,value:i.AlignValue.RIGHT,label:g("right")},{icon:c,value:i.AlignValue.JUSTIFY,label:g("justify")}],onChange:function(e){d(e)}})},t.Align=r.themeUtils.withTheme(t._Align)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(2),l=n(344),u=function(e){function t(t){var n=e.call(this,t)||this;return n.handleChange=function(e){n.props.onChange(e.target.value)},n.handleClick=function(){n.setState({showPicker:!n.state.showPicker})},n.onOptionClick=function(e){n.setState({showPicker:!1}),n.props.onChange(e)},n.getIconByValue=function(e){var t=n.props.options.filter(function(t){return t.value===e})[0];return t&&t.icon},n.getStyle=function(){var e=n.props.theme,t=e&&e.colors?e.colors.white:"white";return a.css(i||(i=o(["\n            cursor: pointer;\n            width: ",";\n            height: ",";\n            > .picker-label {\n                display: flex;\n                justify-content: space-around;\n                align-items: center;\n                cursor: inherit;\n                width: ",";\n                height: ",";\n            }\n            .picker-options {\n                background: ",";\n                width: ",";\n                white-space: nowrap;\n                > .option {\n                    cursor: pointer;\n                    width: 100%;\n                    height: ",";\n                    display: flex;\n                    justify-content: center;\n                    align-items: center;\n                }\n            }\n        "],["\n            cursor: pointer;\n            width: ",";\n            height: ",";\n            > .picker-label {\n                display: flex;\n                justify-content: space-around;\n                align-items: center;\n                cursor: inherit;\n                width: ",";\n                height: ",";\n            }\n            .picker-options {\n                background: ",";\n                width: ",";\n                white-space: nowrap;\n                > .option {\n                    cursor: pointer;\n                    width: 100%;\n                    height: ",";\n                    display: flex;\n                    justify-content: center;\n                    align-items: center;\n                }\n            }\n        "])),a.polished.rem(50),a.polished.rem(26),a.polished.rem(50),a.polished.rem(26),t,a.polished.rem(50),a.polished.rem(26))},n.getLabel=function(e){var t=n.props.options,r=(void 0===t?[]:t).find(function(t){return t.value===e});return r?r.label||r.value:e},n.state={showPicker:!1},n.domNode=a.React.createRef(),n}return r(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.value,r=t.style,o=t.className,i=t.options,u=this.state.showPicker;return a.jsx("div",{css:this.getStyle(),className:a.classNames(o,"jimu-builder-common--picker"),style:r,onChange:this.handleChange},a.jsx("div",{className:"picker-label border rounded",title:this.getLabel(n),ref:this.domNode,onClick:this.handleClick},a.jsx(s.Icon,{icon:this.getIconByValue(n),size:12}),a.jsx(s.Icon,{icon:l,size:8})),a.jsx(s.Popper,{className:"picker-options flex-column",open:u,reference:this.domNode,offset:[0,0]},i.map(function(t,n){return a.jsx("div",{title:e.getLabel(t.value),className:"option",key:n,onClick:function(n){return e.onOptionClick(t.value)}},a.jsx(s.Icon,{icon:t.icon,size:12}))})))},t.defaultProps={options:[],onChange:function(){}},t}(a.React.PureComponent);t._Picker=u,t.Picker=a.themeUtils.withTheme(u)},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M1.521 2.307L4 4.677l2.479-2.37a.517.517 0 0 1 .708 0 .464.464 0 0 1 0 .677l-2.833 2.71a.517.517 0 0 1-.708 0L.813 2.983a.464.464 0 0 1 0-.677.517.517 0 0 1 .708 0z"}),a=o.createElement("path",{d:"M0 0h8v8H0z",fill:"none"});function s(e){return o.createElement("svg",r({width:8,height:8,viewBox:"0 0 8 8"},e),i,a)}e.exports=s,s.default=s},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M.5 0h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1 0-1zm0 6h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1zm0-3h8a.5.5 0 0 1 0 1h-8a.5.5 0 0 1 0-1zm0 6h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1 0-1z"});function a(e){return o.createElement("svg",r({width:10,height:10,viewBox:"0 0 10 10"},e),i)}e.exports=a,a.default=a},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M2.5 0h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1zm0 6h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1zm-2-3h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1 0-1zm0 6h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1 0-1z"});function a(e){return o.createElement("svg",r({width:10,height:10,viewBox:"0 0 10 10"},e),i)}e.exports=a,a.default=a},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M3.5 0h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1 0-1zm1 6h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1zm-3-3h8a.5.5 0 0 1 0 1h-8a.5.5 0 0 1 0-1zm-1 6h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1 0-1z"});function a(e){return o.createElement("svg",r({width:10,height:10,viewBox:"0 0 10 10"},e),i)}e.exports=a,a.default=a},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M.5 0h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1 0-1zm0 6h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1 0-1zm0-3h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1 0-1zm0 6h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1 0-1z"});function a(e){return o.createElement("svg",r({width:10,height:10,viewBox:"0 0 10 10"},e),i)}e.exports=a,a.default=a},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(4),s=n(350),l=n(351),u=((r={})[i.ListValue.ORDERED]=l,r[i.ListValue.BULLET]=s,r),c=[i.ListValue.ORDERED,i.ListValue.BULLET];t._List=function(e){var t=e.list,n=e.onClick,r=void 0===n?function(){}:n,s=e.className,l=e.intl;return o.React.createElement(i.ButtonGroup,{className:o.classNames(s,"jimu-builder-common--list"),size:"sm"},c.map(function(e,n){return o.React.createElement(i.Button,{key:n,title:function(e){return l?l.formatMessage({id:e,defaultMessage:a.default[e]}):e}(e),icon:!0,size:"sm",active:t===e,onClick:function(){return r(t!==e&&e)},color:"secondary"},o.React.createElement(i.Icon,{size:14,icon:u[e]}))}))},t.List=o.themeUtils.withTheme(t._List)},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M3.5 1h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1 0-1zM1 2.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2zM1 6a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 3.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm2.5-5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1 0-1zm0 3.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1 0-1z"});function a(e){return o.createElement("svg",r({width:10,height:10,viewBox:"0 0 10 10"},e),i)}e.exports=a,a.default=a},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M3.5 1h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1 0-1zM.905 2.8V.744l-.545.403L0 .677.963 0H1.6v2.8H.905zM.057 6.4v-.54l1.048-.962c.065-.064.118-.13.159-.196a.422.422 0 0 0 .06-.224.32.32 0 0 0-.09-.237.33.33 0 0 0-.243-.09.331.331 0 0 0-.26.113.517.517 0 0 0-.12.299L0 4.478a.978.978 0 0 1 .112-.37.952.952 0 0 1 .226-.275.972.972 0 0 1 .313-.173 1.159 1.159 0 0 1 .374-.06c.124 0 .244.017.36.05a.933.933 0 0 1 .311.154.766.766 0 0 1 .219.262.794.794 0 0 1 .081.37.856.856 0 0 1-.038.264.882.882 0 0 1-.104.217 1.25 1.25 0 0 1-.152.187 5.664 5.664 0 0 1-.176.171l-.623.563H2V6.4H.057zM2 9.155c0 .146-.028.271-.085.378a.786.786 0 0 1-.223.262.97.97 0 0 1-.31.154A1.236 1.236 0 0 1 1.03 10a1.394 1.394 0 0 1-.34-.041 1.05 1.05 0 0 1-.3-.126.884.884 0 0 1-.238-.218.916.916 0 0 1-.153-.32l.566-.155a.473.473 0 0 0 .15.231c.074.067.17.1.286.1a.49.49 0 0 0 .132-.019.359.359 0 0 0 .12-.058.312.312 0 0 0 .087-.103.328.328 0 0 0 .035-.158.296.296 0 0 0-.046-.169.325.325 0 0 0-.12-.107.575.575 0 0 0-.168-.056 1.07 1.07 0 0 0-.189-.017H.69v-.462h.178c.057 0 .113-.004.166-.013a.434.434 0 0 0 .144-.049.281.281 0 0 0 .102-.095.29.29 0 0 0 .038-.158.258.258 0 0 0-.098-.218.36.36 0 0 0-.225-.075.342.342 0 0 0-.227.08.375.375 0 0 0-.126.217l-.566-.135a.88.88 0 0 1 .142-.295.882.882 0 0 1 .223-.21 1.014 1.014 0 0 1 .281-.128 1.14 1.14 0 0 1 .313-.043c.113 0 .224.015.332.045a.877.877 0 0 1 .288.139.725.725 0 0 1 .205.234.675.675 0 0 1 .078.333c0 .147-.04.272-.121.373a.59.59 0 0 1-.31.205v.01a.649.649 0 0 1 .199.085.651.651 0 0 1 .156.14.624.624 0 0 1 .102.18.614.614 0 0 1 .036.211zM3.5 4.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1 0-1zm0 3.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1 0-1z"});function a(e){return o.createElement("svg",r({width:10,height:10,viewBox:"0 0 10 10"},e),i)}e.exports=a,a.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(2),i=n(4),a=n(353),s=n(354);t._Indent=function(e){var t=e.value,n=void 0===t?o.IndentValue.ZERO:t,l=e.onClick,u=void 0===l?function(){}:l,c=e.className,p=e.intl,d=function(e){var t=n+e;t<0&&(t=0),t>8&&(t=8),u(t)},f=function(e){return p?p.formatMessage({id:e,defaultMessage:i.default[e]}):e};return r.React.createElement(o.ButtonGroup,{className:r.classNames(c,"jimu-builder-common--intent"),size:"sm"},r.React.createElement(o.Button,{title:f("left"),icon:!0,size:"sm",onClick:function(){return d(-1)},color:"secondary"},r.React.createElement(o.Icon,{size:14,icon:a})),r.React.createElement(o.Button,{title:f("right"),icon:!0,size:"sm",onClick:function(){return d(1)},color:"secondary"},r.React.createElement(o.Icon,{size:14,icon:s})))},t.Indent=r.themeUtils.withTheme(t._Indent)},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M.5 0h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1 0-1zm4 6h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1zM2 3v4L0 5l2-2zm2.5 0h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1zm-4 6h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1 0-1z"});function a(e){return o.createElement("svg",r({width:10,height:10,viewBox:"0 0 10 10"},e),i)}e.exports=a,a.default=a},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M9.5 0a.5.5 0 0 1 0 1h-9a.5.5 0 0 1 0-1h9zm-4 6a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h5zM8 3l2 2-2 2V3zM5.5 3a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h5zm4 6a.5.5 0 0 1 0 1h-9a.5.5 0 0 1 0-1h9z"});function a(e){return o.createElement("svg",r({width:10,height:10,viewBox:"0 0 10 10"},e),i)}e.exports=a,a.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var i,a,s=n(1),l=n(2),u=n(65),c=n(4),p=n(356),d=function(e){function t(n){var r=e.call(this,n)||this;return r.getStyle=function(){return s.css(i||(i=o(["\n      display: flex;\n      height: ",";\n    "],["\n      display: flex;\n      height: ",";\n    "])),s.polished.rem(26))},r.onSettingConfirm=function(e){r.toggle(),r.props.onChange(e)},r.handleClick=function(e){r.props.onClick(e),r.toggle()},r.toggle=function(){r.setState({show:!r.state.show})},r.nls=function(e){return r.props.intl?r.props.intl.formatMessage({id:e,defaultMessage:c.default[e]}):e},r.state={show:!1},t.count++,r.id="text-link-"+t.count,r}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.link,n=e.style,r=e.innerClassName,i=e.className,c=e.title,d=e.dataSourceIds;return s.jsx("div",{title:c,css:this.getStyle(),style:n,className:s.classNames(i,"jimu-builder-common--link")},s.jsx(l.Button,{id:this.id,title:this.nls("link"),icon:!0,size:"sm",onClick:this.handleClick,color:"secondary",active:!!t},s.jsx(l.Icon,{size:14,icon:p})),s.jsx(l.Popper,{toggle:this.toggle,toggleClass:".component-expression-builder-popup",css:s.css(a||(a=o(["height: ",";width: ",";"],["height: ",";width: ",";"])),s.polished.rem(550),s.polished.rem(260)),zIndex:61,offset:[0,5],className:s.classNames(r,"popper-for-jimu-builder-common--link"),placement:"bottom",open:this.state.show,reference:this.id},s.jsx(u.default,{className:"p-3 bg-white border shadow rounded",dataSourceIds:d,linkParam:t,onSettingConfirm:this.onSettingConfirm,selectAreaMaxHeight:"130px"})))},t.count=0,t.defaultProps={onChange:function(){},onClick:function(){}},t}(s.React.PureComponent);t._Link=d,t.Link=s.themeUtils.withTheme(s.injectIntl(d))},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M19.6 26.267a2.8 2.8 0 0 1-2.8 2.8h-3.733C5.85 29.067 0 23.217 0 16S5.85 2.933 13.067 2.933H16.8a2.8 2.8 0 0 1 0 5.6h-3.733a7.467 7.467 0 1 0 0 14.934H16.8a2.8 2.8 0 0 1 2.8 2.8zm8.4-2.8h3.733a7.467 7.467 0 1 0 0-14.934H28a2.8 2.8 0 0 1 0-5.6h3.733C38.95 2.933 44.8 8.783 44.8 16s-5.85 13.067-13.067 13.067H28a2.8 2.8 0 0 1 0-5.6zM15.867 13.2h13.067a2.8 2.8 0 0 1 0 5.6H15.867a2.8 2.8 0 0 1 0-5.6z"});function a(e){return o.createElement("svg",r({width:45,height:32,viewBox:"0 0 45 32"},e),i)}e.exports=a,a.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(2),l=n(127),u=n(358),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toFix2=function(e){return u.default.calculateDigits(e)>2?e.toFixed(2):e.toString()},t.getStyle=function(){return a.css(i||(i=o(["\n      .jimu-builder--input-unit {\n        width: 100%;\n      }\n      .input-group-append {\n        width: ",";\n      }\n    "],["\n      .jimu-builder--input-unit {\n        width: 100%;\n      }\n      .input-group-append {\n        width: ",";\n      }\n    "])),a.polished.rem(36))},t.convertValue=function(e){return"object"==typeof e?""+e.distance+e.unit:"string"==typeof e?{distance:a.polished.stripUnit(e),unit:a.polished.stripUnit(e,!0)[1]}:void 0},t.convertToRem=function(e){return a.polished.stripUnit(a.polished.rem(e))},t.convertToPx=function(e){return 16*e},t.handleChange=function(e){var n=t.convertValue(t.props.value),r=e.distance;if(n.unit!==s.UnitTypes.REM&&n.unit!==s.UnitTypes.PIXEL)return t.props.onChange(""+r+e.unit);e.unit!==n.unit&&(e.unit===s.UnitTypes.REM?r=t.convertToRem(e.distance):e.unit===s.UnitTypes.PIXEL&&(r=t.convertToPx(e.distance))),t.props.onChange(""+r+e.unit)},t}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.value,n=e.style,r=e.className;return a.jsx("div",{css:this.getStyle(),style:n,className:r},a.jsx(l.InputUnit,{units:[s.UnitTypes.PIXEL,s.UnitTypes.REM],value:this.convertValue(t),onChange:this.handleChange}))},t.defaultProps={value:"14px",onChange:function(){}},t}(a.React.PureComponent);t.Size=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};t.default={calculateDigits:function(e){return e.toString().indexOf(".")<0?0:e.toString().split(".")[1].length},getUUID:function(){return r()+r()+"_"+r()+"_"+r()+"_"+r()+"_"+r()+r()+r()}}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(2),l=function(e){function t(t){var n=e.call(this,t)||this;return n.getStyle=function(){var e=n.props.theme,t=e?e.colors.grays.gray300:"",r=e?e.colors.cyans.cyan500:"";return a.css(i||(i=o(["\n      display: flex;\n      .btn {\n          border-radius: 0;\n          height:",";\n          width:",";\n          border: 1px solid ",";\n          &.active {\n              outline: 1px solid ",";\n          }\n      }\n      .btn:not(:last-of-type) {\n        margin-right: 6px;\n      }\n    "],["\n      display: flex;\n      .btn {\n          border-radius: 0;\n          height:",";\n          width:",";\n          border: 1px solid ",";\n          &.active {\n              outline: 1px solid ",";\n          }\n      }\n      .btn:not(:last-of-type) {\n        margin-right: 6px;\n      }\n    "])),a.polished.rem(20),a.polished.rem(20),t,r)},n.state={},n}return r(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.color,r=t.colors,o=t.className,i=t.style,l=t.showTip;return a.jsx("div",{css:this.getStyle(),className:a.classNames(o,"jimu-builder--single-color-chooser"),style:i},r.map(function(t,r){return a.jsx(s.Button,{title:l?t.name:"",key:r,style:{background:t.background||t.value},outline:!0,size:"sm",active:n===t.name,onClick:function(n){return e.props.onChange(t.name)}})}))},t.defaultProps={showTip:!1,onChange:function(){}},t}(a.React.PureComponent);t._SingleColorChooser=l,t.SingleColorChooser=a.themeUtils.withTheme(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(4);t.loadI18nMessage=function(){return function(e,t){return(e=r.i18n.getLocaleToLoad(e,t))?r.i18n.loadLocaleMessages("jimu-for-builder/lib/translations",e).then(function(e){return e}):Promise.resolve(o.default)}(r.getAppStore().getState().appContext.locale,["en"]).then(function(e){return e&&r.getAppStore().dispatch(r.appActions.i18nMessagesLoaded("jimu-for-builder",e)),e})}},,,function(e,t,n){"use strict";n.r(t);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function i(e,t,n){var r=o({params:{}},n,e);return r.params=t.reduce(function(t,n){return(e[n]||"boolean"==typeof e[n])&&(t[n]=e[n]),t},r.params),["params","httpMethod","rawResponse","authentication","portal","fetch","maxUrlLength","headers"].reduce(function(e,t){return r[t]&&(e[t]=r[t]),e},{})}function a(e){return Object.keys(e).some(function(t){var n=e[t];if(!n)return!1;switch(n&&n.toParam&&(n=n.toParam()),n.constructor.name){case"Array":case"Object":case"Date":case"Function":case"Boolean":case"String":case"Number":return!1;default:return!0}})}function s(e){var t={};return Object.keys(e).forEach(function(n){var r=e[n];if(r&&r.toParam&&(r=r.toParam()),r||0===r||"boolean"==typeof r||"string"==typeof r){var o;switch(r.constructor.name){case"Array":o=r[0]&&r[0].constructor&&"Object"===r[0].constructor.name?JSON.stringify(r):r.join(",");break;case"Object":o=JSON.stringify(r);break;case"Date":o=r.valueOf();break;case"Function":o=null;break;case"Boolean":o=r+"";break;default:o=r}(o||0===o||"string"==typeof o)&&(t[n]=o)}}),t}function l(e){var t=s(e);return Object.keys(t).map(function(e){return function(e,t){return encodeURIComponent(e)+"="+encodeURIComponent(t)}(e,t[e])}).join("&")}var u=function(){return function(e,t,n,r,o){e=e||"UNKNOWN_ERROR",t=t||"UNKNOWN_ERROR_CODE",this.name="ArcGISRequestError",this.message="UNKNOWN_ERROR_CODE"===t?e:t+": "+e,this.originalMessage=e,this.code=t,this.response=n,this.url=r,this.options=o}}();function c(e){console&&console.warn&&console.warn.apply(console,[e])}u.prototype=Object.create(Error.prototype),u.prototype.constructor=u;var p="@esri/arcgis-rest-js",d={httpMethod:"POST",params:{f:"json"}};var f=function(e){function t(t,n,r,o,i){void 0===t&&(t="AUTHENTICATION_ERROR"),void 0===n&&(n="AUTHENTICATION_ERROR_CODE");var a=e.call(this,t,n,r,o,i)||this;return a.name="ArcGISAuthError",a.message="AUTHENTICATION_ERROR_CODE"===n?t:n+": "+t,a}return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.retry=function(e,t){var n=this;void 0===t&&(t=3);var r=0,i=function(a,s){e(n.url,n.options).then(function(e){var t=o({},n.options,{authentication:e});return r+=1,h(n.url,t)}).then(function(e){a(e)}).catch(function(e){"ArcGISAuthError"===e.name&&r<t?i(a,s):"ArcGISAuthError"===e.name&&r>=t?s(n):s(e)})};return new Promise(function(e,t){i(e,t)})},t}(u);function h(e,t){void 0===t&&(t={params:{f:"json"}});var n=o({httpMethod:"POST"},d,t,{params:o({},d.params,t.params),headers:o({},d.headers,t.headers)}),r=[],i=[];if(n.fetch||"undefined"==typeof fetch?(r.push("`fetch`"),i.push("`node-fetch`")):n.fetch=fetch.bind(Function("return this")()),"undefined"==typeof Promise&&(r.push("`Promise`"),i.push("`es6-promise`")),"undefined"==typeof FormData&&(r.push("`FormData`"),i.push("`isomorphic-form-data`")),!n.fetch||"undefined"==typeof Promise||"undefined"==typeof FormData)throw new Error("`arcgis-rest-request` requires a `fetch` implementation and global variables for `Promise` and `FormData` to be present in the global scope. You are missing "+r.join(", ")+". We recommend installing the "+i.join(", ")+" modules at the root of your application to add these to the global scope. See https://bit.ly/2KNwWaJ for more info.");var c=n.httpMethod,h=n.authentication,g=n.rawResponse,m=o({f:"json"},n.params),y=null,v={method:c,credentials:"same-origin"};return(h?h.getToken(e,{fetch:n.fetch}).catch(function(t){return t.url=e,t.options=n,y=t,Promise.resolve("")}):Promise.resolve("")).then(function(t){if(t.length&&(m.token=t),"GET"===v.method){var r=""===l(m)?e:e+"?"+l(m);n.maxUrlLength&&r.length>n.maxUrlLength?v.method="POST":e=r}var i=new RegExp("/items/.+/updateResources").test(e);return"POST"===v.method&&(v.body=function(e,t){var n=a(e)||t,r=s(e);if(n){var o=new FormData;return Object.keys(r).forEach(function(e){if("undefined"!=typeof Blob&&r[e]instanceof Blob){var t=r.fileName||r[e].name||e;o.append(e,r[e],t)}else o.append(e,r[e])}),o}return l(e)}(m,i)),v.headers=o({},n.headers),"undefined"!=typeof window||v.headers.referer||(v.headers.referer=p),a(m)||i||(v.headers["Content-Type"]="application/x-www-form-urlencoded"),n.fetch(e,v)}).then(function(t){if(!t.ok){var r=t.status,o=t.statusText;throw new u(o,"HTTP "+r,t,e,n)}if(g)return t;switch(m.f){case"json":case"geojson":return t.json();case"html":case"text":return t.text();default:return t.blob()}}).then(function(t){if("json"!==m.f&&"geojson"!==m.f||g)return t;var r=function(e,t,n,r,o){if(e.code>=400){var i=e.message,a=e.code;throw new u(i,a,e,t,r)}if(e.error){var s=e.error,l=(i=s.message,a=s.code,s.messageCode),c=l||a||"UNKNOWN_ERROR_CODE";if(498===a||499===a||"GWM_0003"===l||400===a&&"Unable to generate token."===i)throw o||new f(i,c,e,t,r);throw new u(i,c,e,t,r)}if("failed"===e.status||"failure"===e.status){i=void 0,a="UNKNOWN_ERROR_CODE";try{i=JSON.parse(e.statusMessage).message,a=JSON.parse(e.statusMessage).code}catch(t){i=e.statusMessage||e.message}throw new u(i,a,e,t,r)}return e}(t,e,0,n,y);if(y){var o=e.toLowerCase().split(/\/rest(\/admin)?\/services\//)[0];n.authentication.trustedServers[o]={token:[],expires:new Date(Date.now()+864e5)},y=null}return r})}function g(e){return void 0===e&&(e={}),e.portal?function(e){return"/"===(e=e.trim())[e.length-1]&&(e=e.slice(0,-1)),e}(e.portal):e.authentication?e.authentication.portal:"https://www.arcgis.com/sharing/rest"}function m(e){var t=JSON.parse(JSON.stringify(e));return t.data&&("undefined"!=typeof Blob&&e.data instanceof Blob||"ReadStream"===e.data.constructor.name?t.file=e.data:t.text=e.data,delete t.data),t}function y(e){return e.owner?e.owner:e.item&&e.item.owner?e.item.owner:e.authentication.username}function v(e){var t=y(e),n=g(e)+"/content/users/"+t+"/items/"+e.item.id+"/update";return e.params=o({},e.params,m(e.item)),h(n,e)}function b(e){var t=y(e),n=g(e)+"/content/users/"+t+"/items/"+e.id+"/updateResources";return e.params=o({file:e.resource,fileName:e.name,text:e.content},e.params),void 0!==e.private&&(e.params.access=e.private?"private":"inherit"),h(n,e)}function x(e){var t=y(e),n=g(e)+"/content/users/"+t+"/items/"+e.itemId+"/move",r=e.folderId;return r||(r="/"),e.params=o({folder:r},e.params),h(n,e)}function w(e){y(e);var t=o({item:{id:e.id,data:e.data}},e);return delete t.id,delete t.data,v(t)}function S(e){var t=y(e);return h(g(e)+"/content/users/"+t+"/addRelationship",i(e,["originItemId","destinationItemId","relationshipType"],{params:o({},e.params)}))}function C(e){var t=y(e),n=g(e)+"/content/users/"+t+"/items/"+e.id+"/addResources";return e.params=o({file:e.resource,fileName:e.name,text:e.content,access:e.private?"private":"inherit"},e.params),h(n,e)}function I(e){var t=y(e),n=g(e)+"/content/users/"+t+"/createFolder";return e.params=o({title:e.title},e.params),h(n,e)}function _(e){var t=y(e),n=g(e)+"/content/users/"+t,r=n+"/addItem";return e.folderId&&(r=n+"/"+e.folderId+"/addItem"),e.params=o({},e.params,m(e.item)),h(r,e)}function P(e){return _(o({folderId:null},e))}function O(e,t){return h(g(t)+"/content/items/"+e,o({httpMethod:"GET"},t))}function E(e,t){var n=g(t)+"/content/items/"+e+"/data",r=o({httpMethod:"GET",params:{}},t);return r.file&&(r.params.f=null),h(n,r).catch(function(e){if(!RegExp(/Unexpected end of (JSON input|data at line 1 column 1)/i).test(e.message))throw e})}function j(e){var t=g(e)+"/content/items/"+e.id+"/relatedItems",n=o({httpMethod:"GET",params:{direction:e.direction}},e);return"string"==typeof e.relationshipType?n.params.relationshipType=e.relationshipType:n.params.relationshipTypes=e.relationshipType,delete n.direction,delete n.relationshipType,h(t,n)}function k(e,t){var n=g(t)+"/content/items/"+e+"/resources";return t.params=o({},t.params,{num:1e3}),h(n,t)}function T(e,t){return h(g(t)+"/content/items/"+e+"/groups",t)}function R(e){var t=y(e);return h(g(e)+"/content/users/"+t+"/items/"+e.id+"/protect",e)}function M(e){var t=y(e);return h(g(e)+"/content/users/"+t+"/items/"+e.id+"/unprotect",e)}function A(e){var t=y(e);return h(g(e)+"/content/users/"+t+"/items/"+e.id+"/delete",e)}function D(e){var t=y(e);return h(g(e)+"/content/users/"+t+"/removeRelationship",i(e,["originItemId","destinationItemId","relationshipType"],{params:o({},e.params)}))}function N(e){var t=y(e),n=g(e)+"/content/users/"+t+"/items/"+e.id+"/removeResources";return e.params=o({},e.params,{resource:e.resource}),h(n,e)}function F(e){var t=y(e);return h(g(e)+"/content/users/"+encodeURIComponent(t)+"/"+e.folderId+"/delete",e)}var L=function(){function e(e){void 0===e&&(e=""),this.termStack=[],this.rangeStack=[],this.openGroups=0,this.q=e}return e.prototype.match=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.termStack=this.termStack.concat(e),this},e.prototype.in=function(e){var t="`in("+(e?'"'+e+'"':"")+")`";return this.hasRange||this.hasTerms?(e&&"*"!==e&&(this.q+=e+":"),this.commit()):(c(t+" was called with no call to `match(...)` or `from(...)`/`to(...)`. Your query was not modified."),this)},e.prototype.startGroup=function(){return this.commit(),this.openGroups>0&&(this.q+=" "),this.openGroups++,this.q+="(",this},e.prototype.endGroup=function(){return this.openGroups<=0?(c("`endGroup(...)` was called without calling `startGroup(...)` first. Your query was not modified."),this):(this.commit(),this.openGroups--,this.q+=")",this)},e.prototype.and=function(){return this.addModifier("and")},e.prototype.or=function(){return this.addModifier("or")},e.prototype.not=function(){return this.addModifier("not")},e.prototype.from=function(e){return this.hasTerms?(c("`from(...)` is not allowed after `match(...)` try using `.from(...).to(...).in(...)`. Your query was not modified."),this):(this.rangeStack[0]=e,this)},e.prototype.to=function(e){return this.hasTerms?(c("`to(...)` is not allowed after `match(...)` try using `.from(...).to(...).in(...)`. Your query was not modified."),this):(this.rangeStack[1]=e,this)},e.prototype.boost=function(e){return this.commit(),this.q+="^"+e,this},e.prototype.toParam=function(){return this.commit(),this.cleanup(),this.q},e.prototype.clone=function(){return this.commit(),this.cleanup(),new e(this.q+"")},e.prototype.addModifier=function(e){return this.currentModifer?(c("You have called `"+this.currentModifer+"()` after `"+e+"()`. Your current query was not modified."),this):(this.commit(),""===this.q&&"not"!==e?(c("You have called `"+e+"()` without calling another method to modify your query first. Try calling `match()` first."),this):(this.currentModifer=e,this.q+=""===this.q?"":" ",this.q+=e.toUpperCase()+" ",this))},e.prototype.hasWhiteSpace=function(e){return/\s/g.test(e)},e.prototype.formatTerm=function(e){return e instanceof Date?e.getTime():"string"==typeof e&&this.hasWhiteSpace(e)?'"'+e+'"':e},e.prototype.commit=function(){var e=this;return this.currentModifer=void 0,this.hasRange&&(this.q+="["+this.formatTerm(this.rangeStack[0])+" TO "+this.formatTerm(this.rangeStack[1])+"]",this.rangeStack=[void 0,void 0]),this.hasTerms&&(this.q+=this.termStack.map(function(t){return e.formatTerm(t)}).join(" "),this.termStack=[]),this},Object.defineProperty(e.prototype,"hasTerms",{get:function(){return this.termStack.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasRange",{get:function(){return this.rangeStack.length&&this.rangeStack[0]&&this.rangeStack[1]},enumerable:!0,configurable:!0}),e.prototype.cleanup=function(){if(this.openGroups>0)for(c("Automatically closing "+this.openGroups+" group(s). You can use `endGroup(...)` to remove this warning.");this.openGroups>0;)this.q+=")",this.openGroups--;var e=this.q;this.q=e.replace(/( AND ?| NOT ?| OR ?)*$/,""),e!==this.q&&c("`startGroup(...)` was called without calling `endGroup(...)` first. Your query was not modified."),this.q=this.q.replace(/(\(\))*/,"")},e}();function B(e,t){var n;return h(g(n="string"==typeof e||e instanceof L?{httpMethod:"GET",params:{q:e}}:i(e,["q","num","start","sortField","sortOrder"],{httpMethod:"GET"}))+("item"===t?"/search":"/community/groups"),n).then(function(n){return n.nextStart&&-1!==n.nextStart&&(n.nextPage=function(){var r;return"string"==typeof e||e instanceof L?r={q:e,start:n.nextStart}:(r=e).start=n.nextStart,B(r,t)}),n})}function z(e){return B(e,"item")}function U(e){var t=e.id,n=g(e)+"/community/groups/"+t+"/addUsers",r=Object.assign({},e,{admins:void 0,users:void 0}),o=W("users",e.users,r).concat(W("admins",e.admins,r)).map(function(e){return function(e,t){return h(e,t).catch(function(e){return{errors:[e]}})}(n,e)});return Promise.all(o).then(H)}function W(e,t,n){return!t||t.length<1?[]:function(e,t){if(0===e.length)return[];for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}(t,25).map(function(t){return function(e,t,n){var r,i;return Object.assign({},n,((r={})[e]=t,r.params=o({},n.params,((i={})[e]=t,i)),r))}(e,t,n)})}function H(e){var t=e.filter(function(e){return e.notAdded}).reduce(function(e,t){return e.concat(t.notAdded)},[]),n=e.filter(function(e){return e.errors}).reduce(function(e,t){return e.concat(t.errors)},[]),r={notAdded:t};return n.length>0&&(r.errors=n),r}function V(e){var t=g(e)+"/community/createGroup";return e.params=o({},e.params,e.group),h(t,e)}function G(e,t){return h(g(t)+"/community/groups/"+e,o({httpMethod:"GET"},t))}function J(e,t){var n=g(t)+"/content/groups/"+e,r=o({httpMethod:"GET"},{params:{start:1,num:100}},t);return t&&t.paging&&(r.params=o({},t.paging)),h(n,r)}function q(e,t){return h(g(t)+"/community/groups/"+e+"/users",o({httpMethod:"GET"},t))}function X(e){return h(g(e)+"/community/groups/"+e.id+"/createNotification",o({params:o({subject:e.subject,message:e.message,users:e.users,notificationChannelType:e.notificationChannelType||"email",clientId:e.clientId,silentNotification:e.silentNotification,notifyAll:!e.users||0===e.users.length},e.params)},e))}function $(e){return h(g(e)+"/community/groups/"+e.id+"/protect",e)}function K(e){return h(g(e)+"/community/groups/"+e.id+"/unprotect",e)}function Y(e){return h(g(e)+"/community/groups/"+e.id+"/delete",o({},e))}function Z(e){return B(e,"group")}function Q(e){var t=g(e)+"/community/groups/"+e.group.id+"/update";return e.params=o({},e.params,e.group),h(t,e)}function ee(e){return h(g(e)+"/community/groups/"+e.id+"/join",e)}function te(e){return h(g(e)+"/community/groups/"+e.id+"/leave",e)}function ne(e){var t,n={httpMethod:"GET"};if("string"==typeof e)t="https://www.arcgis.com/sharing/rest/community/users/"+e;else{var r=e.username||e.authentication.username;t=g(e)+"/community/users/"+encodeURIComponent(r),n=o({},e,n)}return h(t,n)}function re(e){return g(e)+"/community/users/"+encodeURIComponent(e.username)}function oe(e){var t={httpMethod:"GET"},n=encodeURIComponent(e.authentication.username);return h(g(e)+"/community/users/"+n+"/invitations",t=o({},e,t))}function ie(e){var t=encodeURIComponent(e.authentication.username),n={httpMethod:"GET"};return h(g(e)+"/community/users/"+t+"/invitations/"+e.invitationId,n=o({},e,n))}function ae(e){var t=encodeURIComponent(e.authentication.username);return h(g(e)+"/community/users/"+t+"/invitations/"+e.invitationId+"/accept",o({},e))}function se(e){var t=encodeURIComponent(e.authentication.username);return h(g(e)+"/community/users/"+t+"/invitations/"+e.invitationId+"/decline",o({},e))}function le(e){var t={httpMethod:"GET"},n=encodeURIComponent(e.authentication.username);return h(g(e)+"/community/users/"+n+"/notifications",t=o({},e,t))}function ue(e){var t=encodeURIComponent(e.authentication.username);return h(g(e)+"/community/users/"+t+"/notifications/"+e.id+"/delete",e)}function ce(e){var t=e.user.username||e.authentication.username,n=g(e)+"/community/users/"+encodeURIComponent(t)+"/update";return e.params=o({},e.user,e.params),delete e.user,h(n,e)}function pe(e){var t=e.authentication.username,n=e.owner||t;return g(e)+"/content/users/"+encodeURIComponent(n)+"/items/"+e.id+"/share"}function de(e){var t=e.authentication.username;return(e.owner||t)===t}function fe(e){return e.authentication.getUser(e).then(function(e){return!(!e||"org_admin"!==e.role)})}function he(e){return G(e.groupId,e).then(function(e){return e.userMembership.memberType}).catch(function(){return"nonmember"})}function ge(e){var t=pe(e);return de(e)?me(t,e):fe(e).then(function(n){if(n)return me(t,e);throw Error("This item can not be shared by "+e.authentication.username+". They are neither the item owner nor an organization admin.")})}function me(e,t){return t.params=o({org:!1,everyone:!1},t.params),"private"===t.access&&(t.params.groups=" "),"org"===t.access&&(t.params.org=!0),"public"===t.access&&(t.params.org=!0,t.params.everyone=!0),h(e,t)}function ye(e){return be(o({action:"share"},e))}function ve(e){return be(o({action:"unshare"},e))}function be(e){var t=e.authentication.username,n=e.owner||t;return fe(e).then(function(r){var i="share"===e.action?"notSharedWith":"notUnsharedFrom";return function(e){var t={q:"id: "+e.id+" AND group: "+e.groupId,start:1,num:10,sortField:"title"},n=o({},e,{rawResponse:!1});return n.params=o({},t,e.params),h(g(n)+"/search",n).then(function(t){return 0!==t.total&&(t.results.some(function(t){var r=t.id===e.id;return r&&(n=t),r}),!!n);var n})}(e).then(function(o){if("share"===e.action&&!0===o||"unshare"===e.action&&!1===o){var a={itemId:e.id,shortcut:!0};return a[i]=[],a}return he(e).then(function(o){if("nonmember"===o)throw Error("This item can not be "+e.action+"d by "+t+" as they are not a member of the specified group "+e.groupId+".");if(n===t)return g(e)+"/content/users/"+n+"/items/"+e.id+"/"+e.action;if("admin"===o||"owner"===o||r)return g(e)+"/content/items/"+e.id+"/"+e.action;throw Error("This item can not be "+e.action+"d by "+t+" as they are neither the owner, a groupAdmin of "+e.groupId+", nor an org_admin.")}).then(function(t){return e.params={groups:e.groupId,confirmItemControl:e.confirmItemControl},h(t,e)}).then(function(t){if(t[i].length)throw Error("Item "+e.id+" could not be "+e.action+"d to group "+e.groupId+".");return t})})})}function xe(e){return we(null,e)}function we(e,t){var n=e||"self";return h(g(t)+"/portals/"+n,o({httpMethod:"GET"},t))}n.d(t,"addItemData",function(){return w}),n.d(t,"addItemRelationship",function(){return S}),n.d(t,"addItemResource",function(){return C}),n.d(t,"createFolder",function(){return I}),n.d(t,"createItemInFolder",function(){return _}),n.d(t,"createItem",function(){return P}),n.d(t,"getItem",function(){return O}),n.d(t,"getItemData",function(){return E}),n.d(t,"getRelatedItems",function(){return j}),n.d(t,"getItemResources",function(){return k}),n.d(t,"getItemGroups",function(){return T}),n.d(t,"protectItem",function(){return R}),n.d(t,"unprotectItem",function(){return M}),n.d(t,"removeItem",function(){return A}),n.d(t,"removeItemRelationship",function(){return D}),n.d(t,"removeItemResource",function(){return N}),n.d(t,"removeFolder",function(){return F}),n.d(t,"searchItems",function(){return z}),n.d(t,"updateItem",function(){return v}),n.d(t,"updateItemResource",function(){return b}),n.d(t,"moveItem",function(){return x}),n.d(t,"serializeItem",function(){return m}),n.d(t,"determineOwner",function(){return y}),n.d(t,"addGroupUsers",function(){return U}),n.d(t,"createGroup",function(){return V}),n.d(t,"getGroup",function(){return G}),n.d(t,"getGroupContent",function(){return J}),n.d(t,"getGroupUsers",function(){return q}),n.d(t,"createGroupNotification",function(){return X}),n.d(t,"protectGroup",function(){return $}),n.d(t,"unprotectGroup",function(){return K}),n.d(t,"removeGroup",function(){return Y}),n.d(t,"searchGroups",function(){return Z}),n.d(t,"updateGroup",function(){return Q}),n.d(t,"joinGroup",function(){return ee}),n.d(t,"leaveGroup",function(){return te}),n.d(t,"getUser",function(){return ne}),n.d(t,"getUserUrl",function(){return re}),n.d(t,"getUserInvitations",function(){return oe}),n.d(t,"getUserInvitation",function(){return ie}),n.d(t,"acceptInvitation",function(){return ae}),n.d(t,"declineInvitation",function(){return se}),n.d(t,"getUserNotifications",function(){return le}),n.d(t,"removeNotification",function(){return ue}),n.d(t,"updateUser",function(){return ce}),n.d(t,"setItemAccess",function(){return ge}),n.d(t,"shareItemWithGroup",function(){return ye}),n.d(t,"unshareItemWithGroup",function(){return ve}),n.d(t,"getSharingUrl",function(){return pe}),n.d(t,"isItemOwner",function(){return de}),n.d(t,"isOrgAdmin",function(){return fe}),n.d(t,"getUserMembership",function(){return he}),n.d(t,"getSelf",function(){return xe}),n.d(t,"getPortal",function(){return we}),n.d(t,"getPortalUrl",function(){return g}),n.d(t,"SearchQueryBuilder",function(){return L})},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(112),a=n(113),s=function(e){var t=[],n=null,r=function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];t=o,n||(n=requestAnimationFrame(function(){n=null,e.apply(void 0,t)}))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r},l=n(8);var u=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},c=n(114),p="object"==typeof self&&self&&self.Object===Object&&self,d=c.a||p||Function("return this")(),f=function(){return d.Date.now()},h=d.Symbol,g=Object.prototype,m=g.hasOwnProperty,y=g.toString,v=h?h.toStringTag:void 0;var b=function(e){var t=m.call(e,v),n=e[v];try{e[v]=void 0;var r=!0}catch(e){}var o=y.call(e);return r&&(t?e[v]=n:delete e[v]),o},x=Object.prototype.toString;var w=function(e){return x.call(e)},S="[object Null]",C="[object Undefined]",I=h?h.toStringTag:void 0;var _=function(e){return null==e?void 0===e?C:S:I&&I in Object(e)?b(e):w(e)};var P=function(e){return null!=e&&"object"==typeof e},O="[object Symbol]";var E=function(e){return"symbol"==typeof e||P(e)&&_(e)==O},j=NaN,k=/^\s+|\s+$/g,T=/^[-+]0x[0-9a-f]+$/i,R=/^0b[01]+$/i,M=/^0o[0-7]+$/i,A=parseInt;var D=function(e){if("number"==typeof e)return e;if(E(e))return j;if(u(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=u(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(k,"");var n=R.test(e);return n||M.test(e)?A(e.slice(2),n?2:8):T.test(e)?j:+e},N="Expected a function",F=Math.max,L=Math.min;var B=function(e,t,n){var r,o,i,a,s,l,c=0,p=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError(N);function g(t){var n=r,i=o;return r=o=void 0,c=t,a=e.apply(i,n)}function m(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=i}function y(){var e=f();if(m(e))return v(e);s=setTimeout(y,function(e){var n=t-(e-l);return d?L(n,i-(e-c)):n}(e))}function v(e){return s=void 0,h&&r?g(e):(r=o=void 0,a)}function b(){var e=f(),n=m(e);if(r=arguments,o=this,l=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(y,t),p?g(e):a}(l);if(d)return s=setTimeout(y,t),g(l)}return void 0===s&&(s=setTimeout(y,t)),a}return t=D(t)||0,u(n)&&(p=!!n.leading,i=(d="maxWait"in n)?F(D(n.maxWait)||0,t):i,h="trailing"in n?!!n.trailing:h),b.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=o=s=void 0},b.flush=function(){return void 0===s?a:v(f())},b},z="Expected a function";var U={debounce:B,throttle:function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError(z);return u(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),B(e,t,{leading:r,maxWait:t,trailing:o})}},W=function(e){return U[e]},H=function(e){return"function"==typeof e},V=function(){return"undefined"==typeof window};function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),q(this,X(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,r["PureComponent"]),function(e,t,n){t&&J(e.prototype,t),n&&J(e,n)}(t,[{key:"render",value:function(){return this.props.children}}]),t}();function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ne(ee(n=function(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?ee(e):t}(this,Q(t).call(this,e))),"cancelHandler",function(){n.resizeHandler&&n.resizeHandler.cancel&&(n.resizeHandler.cancel(),n.resizeHandler=null)}),ne(ee(n),"rafClean",function(){n.raf&&n.raf.cancel&&(n.raf.cancel(),n.raf=null)}),ne(ee(n),"toggleObserver",function(e){var t=n.getElement();t&&n.resizeObserver[e]&&n.resizeObserver[e](t)}),ne(ee(n),"getElement",function(){var e=n.props.querySelector;if(!V()){if(e)return document.querySelector(e);var t=n.element&&Object(i.findDOMNode)(n.element);if(t)return t.parentElement}}),ne(ee(n),"createUpdater",function(){return n.rafClean(),n.raf=s(function(e){var t=e.width,r=e.height,o=n.props.onResize;H(o)&&o(t,r),n.setState({width:t,height:r})}),n.raf}),ne(ee(n),"createResizeHandler",function(e){var t=n.state,r=t.width,o=t.height,i=n.props,a=i.handleWidth,s=i.handleHeight;if(a||s){var l=n.createUpdater();e.forEach(function(e){var t=e&&e.contentRect||{},i=t.width,u=t.height,c=a&&r!==i||s&&o!==u;!n.skipOnMount&&c&&!V()&&l({width:i,height:u}),n.skipOnMount=!1})}}),ne(ee(n),"onRef",function(e){n.element=e}),ne(ee(n),"getRenderType",function(){var e=n.props,t=e.render,o=e.children;return H(t)?"renderProp":H(o)?"childFunction":Object(r.isValidElement)(o)?"child":Array.isArray(o)?"childArray":"parent"}),ne(ee(n),"getTargetComponent",function(){var e=n.props,t=e.render,o=e.children,i=e.nodeType,a=n.state,s={width:a.width,height:a.height};switch(n.getRenderType()){case"renderProp":return Object(r.cloneElement)(t(s),{key:"resize-detector"});case"childFunction":return Object(r.cloneElement)(o(s));case"child":return Object(r.cloneElement)(o,s);case"childArray":return o.map(function(e){return Object(r.cloneElement)(e,s)});default:return Object(r.createElement)(i)}});var o=e.skipOnMount,l=e.refreshMode,u=e.refreshRate,c=e.refreshOptions;n.state={width:void 0,height:void 0},n.skipOnMount=o,n.raf=null,n.element=null,n.unmounted=!1;var p=W(l);return n.resizeHandler=p?p(n.createResizeHandler,u,c):n.createResizeHandler,n.resizeObserver=new a.a(n.resizeHandler),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(t,r["PureComponent"]),function(e,t,n){t&&Z(e.prototype,t),n&&Z(e,n)}(t,[{key:"componentDidMount",value:function(){this.toggleObserver("observe")}},{key:"componentWillUnmount",value:function(){this.toggleObserver("unobserve"),this.rafClean(),this.cancelHandler(),this.unmounted=!0}},{key:"render",value:function(){return o.a.createElement(K,{ref:this.onRef},this.getTargetComponent())}}]),t}();re.propTypes={handleWidth:l.bool,handleHeight:l.bool,skipOnMount:l.bool,refreshRate:l.number,refreshMode:l.string,refreshOptions:Object(l.shape)({leading:l.bool,trailing:l.bool}),querySelector:l.string,onResize:l.func,render:l.func,children:l.any,nodeType:l.node},re.defaultProps={handleWidth:!1,handleHeight:!1,skipOnMount:!1,refreshRate:1e3,refreshMode:void 0,refreshOptions:void 0,querySelector:null,onResize:null,render:void 0,children:null,nodeType:"div"};var oe=re;function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handleWidth:!0,handleHeight:!0};return function(n){function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),se(this,le(i).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(i,r.Component),function(e,t,n){t&&ae(e.prototype,t),n&&ae(e,n)}(i,[{key:"render",value:function(){return o.a.createElement(oe,t,o.a.createElement(e,this.props))}}]),i}()};n.d(t,"withResizeDetector",function(){return ce});t.default=oe},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});var o=n(130);t.BaseWidgetSetting=o.default;var i=n(366);t.WidgetSettingManager=i.default;var a=n(14);t.AppDataSourceManager=a.default;var s=n(367);t.AppMessageManager=s.default;var l=n(395);t.AppDataSourceComponent=l.default;var u=n(131);t.AppStateReduxStoreExtension=u.default;var c=n(116);t.AppStateHistoryExtension=c.default;var p=n(115);t.BuilderStateReduxStoreExtension=p.default;var d=n(64);t.BuilderStateResourceExtension=d.default;var f=n(132);t.builderAppSync=f;var h=n(133);t.appBuilderSync=h,r(n(57));var g=n(4);t.defaultMessages=g.default;var m=n(396);t.utils=m;var y=n(16);t.expressionUtils=y;var v=n(37);t.appConfigUtils=v;var b=n(368);t.ExternalDataSourceChooser=b.default;var x=n(135);t.ItemChooser=x.default;var w=n(371);t.ItemDetail=w.default;var S=n(411);t.ChooseWidgetPopup=S.ChooseWidgetPopup;var C=n(412);t.DataSourceChooser=C.default;var I=n(61);t.FieldChooser=I.default;var _=n(382);t.DataSourceList=_.default,t.AllDataSourceTypes=_.AllDataSourceTypes;var P=n(65);t.LinkSetting=P.default;var O=n(423);t.LinkSettingPopup=O.default;var E=n(121);t.ExpressionEditor=E.default;var j=n(40);t.ExpressionBuilder=j.default,t.ExpressionFrom=j.ExpressionFrom;var k=n(122);t.ExpressionBuilderPopup=k.default;var T=n(120);t.ExpressionInput=T.default,t.ExpressionInputFrom=T.ExpressionInputFrom;var R=n(123);t.ResourceComponent=R.default;var M=n(424);t.BuilderKeyboardComponent=M.default;var A=n(124);t.ImageChooser=A.ImageChooser;var D=n(425);t.ColorPicker=D.default;var N=n(126);t.AlertPopup=N.default,r(n(62)),r(n(131)),r(n(116)),r(n(115)),r(n(64)),r(n(25)),r(n(127)),r(n(23)),r(n(426)),r(n(38)),r(n(439))},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(1),s=n(115),l=n(1),u=l.i18n.getLocaleToLoad,c=l.i18n.loadLocaleMessages,p=l.i18n.getSupportedLocale;function d(e,t){if(e&&e.id&&e.manifest&&e.manifest.supportedLocales){var n=a.getAppStore().getState().appContext.locale;return(n=u(n,e.manifest.supportedLocales))?c(e.uri+"dist/setting/translations",n).then(function(e){return Promise.resolve({clazz:t,i18nMessages:e})}):Promise.resolve({clazz:t,i18nMessages:{}})}return Promise.resolve({clazz:t,i18nMessages:{}})}t.loadLocaleMessagesForSetting=d;var f=function(){function e(){this.widgetSettingClasses={},this.widgetSettingClassesPromise={},this.widgetItemSettingClasses={},this.widgetRawSettingClasses={},this.widgetItemRawSettingClasses={},a.observeStore(this.onStoreChange.bind(this),["appStateInBuilder","appConfig","widgets"])}return e.getInstance=function(){return e.instance||(e.instance=new e,window._widgetSettingManager=e.instance),e.instance},e.prototype.getWidgetSettingClass=function(e){return this.widgetSettingClasses[e]},e.prototype.deleteWidgetSettingClass=function(e){delete this.widgetSettingClasses[e],delete this.widgetItemSettingClasses[e],delete this.widgetSettingClassesPromise[e]},e.prototype.getItemSettingClass=function(e){return this.widgetItemSettingClasses[e]},e.prototype.deleteAllWidgetClasses=function(){this.widgetSettingClasses={},this.widgetItemSettingClasses={}},e.prototype.loadWidgetSettingClass=function(e){var t,n=this;if(!(t="string"==typeof e?a.getAppStore().getState().appStateInBuilder.appConfig.widgets[e]:e))return Promise.resolve(null);if(this.getWidgetSettingClass(t.id))return Promise.resolve(this.getWidgetSettingClass(t.id));if(this.widgetSettingClassesPromise[t.id])return this.widgetSettingClassesPromise[t.id];return this.widgetSettingClassesPromise[t.id]=this.loadRawSettingClass(t).then(function(e){return function(e,r){var o=e.default?e.default:e;return n.injectWidgetSettingProps(o,r,t.id)}(e.clazz,e.i18nMessages)}).then(function(e){return n.widgetSettingClasses[t.id]=e,a.getAppStore().dispatch(s.builderActions.widgetSettingClassLoaded(t.id)),e}),this.widgetSettingClassesPromise[t.id]},e.prototype.loadRawSettingClass=function(e){var t=e.manifest.name;if(this.widgetRawSettingClasses[t])return this.widgetRawSettingClasses[t];var n=e.uri+"dist/setting/setting";return e.manifest.properties.hasSettingPage||(n="jimu-for-builder/json-editor-setting"),this.widgetRawSettingClasses[t]=a.WidgetManager.getInstance().loadWidgetDependency(e,"setting").then(function(){return a.moduleLoader.loadModule(n)}).then(function(t){return d(e,t)}),this.widgetRawSettingClasses[t]},e.prototype.loadItemSettingClass=function(e){var t,n=this;if(t="string"==typeof e?a.getAppStore().getState().appStateInBuilder.appConfig.widgets[e]:e,this.getItemSettingClass(t.id))return Promise.resolve(this.getItemSettingClass(t.id));return this.loadRawItemSettingClass(t).then(function(e){return function(e,t){return e.default?e.default:e}(e.clazz,e.i18nMessages)}).then(function(e){return n.widgetItemSettingClasses[t.id]=e,a.getAppStore().dispatch(s.builderActions.widgetItemSettingClassLoaded(t.id)),e})},e.prototype.loadRawItemSettingClass=function(e){var t=e.manifest.name;if(this.widgetItemRawSettingClasses[t])return this.widgetItemRawSettingClasses[t];var n=e.uri+"dist/setting/item-setting";return this.widgetItemRawSettingClasses[t]=a.moduleLoader.loadModule(n).then(function(t){return d(e,t)}),this.widgetItemRawSettingClasses[t]},e.prototype.injectWidgetSettingProps=function(e,t,n){if(!a.getAppStore().getState().appStateInBuilder.appConfig.widgets[n])return e;var s=l.injectIntl(e),u=l.themeUtils.withTheme(s),c=a.getAppStore().getState().appStateInBuilder.appConfig.widgets[n].manifest.name,d=function(e){function n(t){return e.call(this,t)||this}return r(n,e),n.prototype.render=function(){var e={messages:t},n=Object.assign({},t,this.props.appI18nMessages),r=p(this.props.locale,this.props.manifest.supportedLocales);return r||(r=this.props.manifest.supportedLocales&&this.props.manifest.supportedLocales[0]),r||(r=this.props.locale),r=this.props.locale,i.createElement(l.IntlProvider,{locale:r,messages:n},i.createElement(u,o({},this.props,e)))},n.displayName="WidgetSettingWrapper("+c+")",n}(i.PureComponent);for(var f in e)d[f]||(d[f]=e[f]);return a.ReactRedux.connect(function(t){var r={queryObject:t.queryObject,user:t.user,token:t.token,portalUrl:t.portalUrl,portalSelf:t.portalSelf,locale:t.appContext.locale,appI18nMessages:t.appI18nMessages},o=t.appStateInBuilder.appConfig.widgets[n];if(!o)return{};var i=Object.assign(r,t.appStateInBuilder.appConfig.widgets[o.id]);return Object.assign(i,e.mapExtraStateProps?e.mapExtraStateProps(t,i):{})})(d)},e.prototype.onStoreChange=function(e,t){var n=this;e&&t&&Object.keys(e).forEach(function(e){t[e]||(n.deleteWidgetSettingClass(e),a.lodash.defer(function(){a.getAppStore().dispatch(s.builderActions.widgetRemoved(e))}))})},e}();t.default=f},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(366),s=i.i18n.getSupportedLocale,l=function(){function e(){var e=this;this.actionSettingClasses={},this.actionRawSettingClasses={},this.getActionSettingClassUri=function(t){for(var n=e.getAllActions(),r=0;r<n.length;r++)if(t.indexOf(n[r].id)>-1){var o=n[r].widgetId;if(o){var a=i.getAppStore().getState().appStateInBuilder.appConfig.widgets[o],s=a.manifest.messageActions,l=null;if(s)for(var u=0;u<s.length;u++)s[u].name===n[r].name&&(l=s[u]);if(l&&l.settingUri){return a.context.isRemote?a.context.folderUrl+"dist/"+l.settingUri+".js":a.uri+"dist/"+l.settingUri}return null}return n[r].id}return null}}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.getAllActions=function(){return window._appWindow._messageManager?window._appWindow._messageManager.getActions():[]},e.prototype.getFilteredActions=function(e){if(window._appWindow._messageManager){for(var t=window._appWindow._messageManager.getActions(),n=[],r=0;r<t.length;r++)t[r].filterMessageType(e)&&n.push(t[r]);return n}return[]},e.prototype.loadActionSettingClass=function(e){var t=this,n=this.getActionSettingClassUri(e.actionId);if(n||Promise.resolve(null),this.actionSettingClasses[n])return Promise.resolve(this.actionSettingClasses[n]);var r=e.widgetId,o=i.getAppStore().getState().appStateInBuilder.appConfig.widgets[r];return this.loadRawSettingClass(o,n).then(function(e){return function(e,n){var r=e.default?e.default:e;return t.injectActionSettingProps(r,n,o&&o.id)}(e.clazz,e.i18nMessages)}).then(function(e){return t.actionSettingClasses[n]=e,e})},e.prototype.loadRawSettingClass=function(e,t){return this.actionRawSettingClasses[t]?this.actionRawSettingClasses[t]:(this.actionRawSettingClasses[t]=i.moduleLoader.loadModule(t).then(function(t){return a.loadLocaleMessagesForSetting(e,t)}),this.actionRawSettingClasses[t])},e.prototype.injectActionSettingProps=function(e,t,n){var a=i.injectIntl(e),l=i.getAppStore().getState().appStateInBuilder.appConfig.widgets[n],u=null;u=n&&l?i.getAppStore().getState().appStateInBuilder.appConfig.widgets[n].manifest.name:"Framework";var c=function(e){function c(t){return e.call(this,t)||this}return r(c,e),c.prototype.render=function(){var e={messages:t},r=i.getAppStore().getState().appI18nMessages,u=null;n&&l?((u=s(i.getAppStore().getState().appContext.locale,l.manifest.supportedLocales))||(u=l.manifest.supportedLocales&&l.manifest.supportedLocales[0]),u||(u=i.getAppStore().getState().appContext.locale)):u=i.getAppStore().getState().appContext.locale;var c=Object.assign({},t,r);return i.React.createElement(i.IntlProvider,{locale:u,messages:c},i.React.createElement(a,o({},this.props,e)))},c.displayName="ActionSettingWrapper("+u+")",c}(i.React.PureComponent);for(var p in e)c[p]||(c[p]=e[p]);return c},e.prototype.registerActionRawSettingClassInfo=function(e,t){this.actionRawSettingClasses[e]=Promise.resolve(t)},e.prototype.getActionRawSettingClassInfo=function(e){return this.actionRawSettingClasses[e]},e}();t.default=l},function(e,t,n){"use strict";var r,o,i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s,l=n(1),u=n(2),c=n(369),p=n(370),d=n(135),f=n(405),h=n(406),g=n(372),m=n(410),y=n(4),v=n(26);!function(e){e.Url="URL"}(s||(s={}));var b=a({},l.DataSourceTypes,c.ArcGISDataSourceTypes,p.HubDataSourceTypes),x=a({},d.ItemTypes,s),w=((r={})[d.ItemTypes.WebMap]=b.WebMap,r[d.ItemTypes.WebScene]=b.WebScene,r[d.ItemTypes.FeatureService]=b.FeatureQuery,r),S=((o={})[b.WebMap]=x.WebMap,o[b.WebScene]=x.WebScene,o[b.FeatureLayer]=x.FeatureService,o[b.FeatureQuery]=[x.FeatureService,x.Url],o),C=function(e){function t(t){var n,r=e.call(this,t)||this;return r.tabLabel=((n={})[x.WebMap]=r.props.intl.formatMessage({id:"webMap",defaultMessage:y.default.webMap}),n[x.WebScene]=r.props.intl.formatMessage({id:"webScene",defaultMessage:y.default.webScene}),n[x.FeatureService]=r.props.intl.formatMessage({id:"featureLayer",defaultMessage:y.default.featureLayer}),n[x.Url]=r.props.intl.formatMessage({id:"url",defaultMessage:y.default.url}),n),r.getDsTypeFromItemType=function(e){return e?w[e]:null},r.getTabTypeFromDsType=function(e){return e?Array.isArray(S[e])?S[e]:[S[e]]:null},r.getTabLabel=function(e){return e?r.tabLabel[e]:null},r.getElementPosition=function(e){if(!e)return null;for(var t=e.offsetLeft,n=e.offsetTop,r=e.offsetParent;null!==r;)t+=r.offsetLeft,n+=r.offsetTop,r=r.offsetParent;return{x:t,y:n}},r.getRootDomPosition=function(){if(!r.rootDom)return null;var e=r.getElementPosition(r.rootDom);return{t:e.y+80+"px",b:"5px",l:e.x+"px",r:"auto",w:"300px",h:"auto"}},r.getConfigDsId=function(){var e=l.getAppStore().getState(),t=e&&e.appStateInBuilder&&e.appStateInBuilder.appConfig;return l.appConfigUtils.getUniqueId(t,"dataSource")},r.getNextDsId=function(){if(!r.dataSourceId)return r.dataSourceId=r.getConfigDsId(),r.dataSourceId;var e=r.dataSourceId.split("_"),t=e[1]?parseInt(e[1])+1:l.uuidv1(),n=e[0]||"dataSource";return r.dataSourceId=n+"_"+t,r.dataSourceId},r.getDsJsonsFromItem=function(e){var t,n=[];if(!e)return Promise.resolve(n);var o=r.getDsTypeFromItemType(e.type);return e.url&&o===b.FeatureQuery&&!g.isFeatureLayerUrl(e.url)?fetch(e.url+"?f=json&token="+l.SessionManager.getInstance().getSession().token).then(function(e){return e.json()}).then(function(o){if(o&&o.layers)return Promise.all(o.layers.map(function(t){return fetch(g.getDsJsonUrl(e.url,t,!0)+"?f=json&token="+l.SessionManager.getInstance().getSession().token).then(function(e){return e.json()})})).then(function(o){return o.forEach(function(o){o&&o.type&&o.type===g.FEATURE_LAYER_TYPE&&(t=g.getSingleDsJsonFromLayer(e.url,r.getNextDsId(),o,!0))&&(t=t.set("itemId",e.id).set("portalUrl",r.props.portalUrl),n.push(t))}),n})},function(e){return console.error(e),n}):(t=r.getSingleDsJsonFromItem(e),n=[t],Promise.resolve(n))},r.getSingleDsJsonFromItem=function(e){if(!e)return null;var t=l.Immutable({type:r.getDsTypeFromItemType(e.type),itemId:e.id,id:r.getNextDsId(),label:e.title,portalUrl:r.props.portalUrl});return e.url&&(t=t.set("url",e.url)),t},r.onItemAdded=function(e,t){void 0===e&&(e=[]),r.setState({loaded:!1,selectedItems:e,partSelectedItems:r.state.partSelectedItems.filter(function(t){return!e.some(function(e){return e.id===t.id})})}),r.getDsJsonsFromItem(t).then(function(e){r.props.onSelect&&r.props.onSelect(e),r.setState({selectedDss:r.state.selectedDss.concat(e),loaded:!0})},function(e){console.error(e),r.setState({loaded:!0})})},r.onItemRemoved=function(e,t){r.setState({loaded:!1,selectedItems:e,partSelectedItems:r.state.partSelectedItems.filter(function(e){return e.id!==t.id})}),r.getDsJsonsFromItem(t).then(function(e){r.props.onRemove&&r.props.onRemove(e),r.setState({selectedDss:r.state.selectedDss.filter(function(t){return e.every(function(e){return t.itemId!==e.itemId})}),loaded:!0})},function(e){console.error(e),r.setState({loaded:!0})})},r.onDsJsonAdded=function(e){r.props.onSelect&&r.props.onSelect(e),r.setState({selectedDss:r.state.selectedDss.concat(e)})},r.onDsJsonRemoved=function(e){r.props.onRemove&&r.props.onRemove([e]),r.setState({selectedDss:r.state.selectedDss.filter(function(t){return t.id!==e.id}),selectedItems:r.state.selectedItems.filter(function(t){return e.itemId&&t.id!==e.itemId}),partSelectedItems:r.getPartSelectedItems(e)})},r.getPartSelectedItems=function(e){var t=r.state.selectedItems.find(function(t){return e.itemId&&t.id===e.itemId}),n=t&&r.state.selectedDss.filter(function(e){return e.itemId&&e.itemId===t.id}),o=r.state.partSelectedItems.find(function(t){return e.itemId&&t.id===e.itemId}),i=o&&r.state.selectedDss.filter(function(e){return e.itemId&&e.itemId===o.id}),a=r.state.partSelectedItems;return n&&n.length>1&&(a=a.concat(t)),i&&1===i.length&&(a=a.filter(function(e){return e.id!==o.id})),a},r.onFinish=function(){r.props.onFinish&&r.props.onFinish(r.state.selectedDss.map(function(e){return e&&e.without("geometryType")}))},r.onActiveTabChange=function(e){r.setState({activeTab:e})},r.AddedItem=function(e){var t=e.dsJson,n=e.onRemoved;return l.jsx("div",{className:"m-3 list-item",ref:function(e){r.rootDom=e}},l.jsx("div",{className:"mb-2 d-flex justify-content-between ds-type"},l.jsx("div",{className:"flex-grow-1 text-truncate ds-type-name"},g.getDsTypeString(t.type,r.props.intl)),l.jsx("div",{className:"ds-remove",onClick:function(){return n(t)}},l.jsx(u.Icon,{icon:v,className:"text-dark",size:"12"}))),l.jsx("div",{className:"d-flex align-items-center pr-2"},l.jsx("div",{className:"d-flex align-items-center justify-content-center mr-1 flex-shrink-0 ds-thumbnail"},l.jsx(u.Icon,{icon:g.getDsIcon(t,t.geometryType),className:"text-dark",size:"20"})),l.jsx("div",{className:"d-flex"},l.jsx("div",{className:"flex-shrink-0 ml-1 mr-1 two-line-truncate ds-label",title:t.label},t.label))))},r.state={selectedDss:[],selectedItems:[],partSelectedItems:[],activeTab:r.props.types&&r.getTabTypeFromDsType(r.props.types[0])?r.getTabTypeFromDsType(r.props.types[0])[0]:x.WebMap,loaded:!0},r}return i(t,e),t.prototype.render=function(){var e=this,t=this.AddedItem,n=this.props.types?Array.prototype.concat.apply([],this.props.types.map(function(t){return e.getTabTypeFromDsType(t)}).filter(function(e){return!!e})):Object.keys(x).map(function(e){return x[e]});return l.jsx("div",{css:m.getStyle(this.props.theme),className:"h-100"},l.jsx("div",{className:"w-100 component-external-data-source-chooser",ref:function(t){return e.rootDom=t}},this.props.isRadio?l.jsx(u.ModalHeader,{tag:"h2",className:"chooser-header"},this.props.intl.formatMessage({id:"chooseData",defaultMessage:y.default.chooseData})):l.jsx(u.ModalHeader,{tag:"h2",className:"chooser-header",toggle:function(){return e.props.onCancel&&e.props.onCancel()}},this.props.intl.formatMessage({id:"addData",defaultMessage:y.default.addData})),l.jsx("div",{className:"d-flex align-items-start chooser-body"},l.jsx("div",{className:"flex-grow-1 chooser-body-items"},l.jsx(u.Nav,{tabs:!0},n.map(function(t){return l.jsx(u.NavItem,{key:t},l.jsx(u.NavLink,{className:l.classNames({active:e.state.activeTab===t}),onClick:function(){e.onActiveTabChange(t)}},e.getTabLabel(t)))})),Object.keys(d.ItemTypes).map(function(t,n){return l.jsx("div",{className:l.classNames("inner-item-chooser-container",{"d-none":d.ItemTypes[t]!==e.state.activeTab}),key:n},l.jsx(h.default,{itemType:d.ItemTypes[t],intl:e.props.intl,portalUrl:e.props.portalUrl,isRadio:e.props.isRadio,onSelect:e.onItemAdded,onRemove:e.onItemRemoved,getRootDomPosition:e.getRootDomPosition,selectedItems:e.state.selectedItems,partSelectedItems:e.state.partSelectedItems}))}),this.state.activeTab===x.Url&&l.jsx(f.default,{onAdded:this.onDsJsonAdded,onRemoved:this.onDsJsonRemoved,getDsId:this.getNextDsId,intl:this.props.intl})),this.props.isRadio?null:l.jsx("div",{className:"bg-gray-100 chooser-body-added"},l.jsx("div",{className:"d-flex align-items-center pl-3 pt-3 w-100 chooser-body-added-title"},l.jsx("h3",null,this.props.intl.formatMessage({id:"selected",defaultMessage:y.default.selected}))),l.jsx("div",{className:"chooser-body-added-list"},this.state.selectedDss.map(function(n){return n&&n.id?l.jsx(t,{key:n.id,dsJson:n,onRemoved:e.onDsJsonRemoved}):null})),l.jsx("div",{className:"d-flex justify-content-center finish-btn"},l.jsx(u.Button,{className:"btn btn-primary text-truncate m-2 text-center w-100 h-100",onClick:this.onFinish,disabled:!this.state.loaded},this.props.intl.formatMessage({id:"done",defaultMessage:y.default.done})))),l.jsx("div",null,!this.state.loaded&&l.jsx("div",{style:{position:"absolute",left:"50%",top:"50%"},className:"jimu-primary-loading"})))))},t}(l.React.PureComponent),I=l.themeUtils.withTheme(l.injectIntl(C));t.default=I},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(400);t.ArcGISDataSourceTypes=r.DataSourceTypes},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(401);t.HubDataSourceTypes=r.DataSourceTypes},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(2),l=n(4),u=n(26),c=function(e){function t(t){var n=e.call(this,t)||this;return n.getStyle=function(e){return a.css(i||(i=o(["\n      .component-item-detail{\n        border: ","rem solid ",";\n        overflow: auto;\n        padding: 0 16px 16px 16px;\n        z-index: 3;\n        font-size: 14px;\n        .item-header{\n          height: 41px;\n          border-bottom: 1px solid ",";\n          height: ",";\n          .item-header-title{\n            font-size: 16px;\n            line-height: 41px;\n          }\n        }\n        .item-close{\n          cursor: pointer;\n        }\n        .item-img{\n          img{\n            width: 100%;\n          }\n        }\n        .item-line{\n          width: 100%;\n          height: ","rem;\n          border-bottom: ","rem solid ",";\n        }\n        .item-detial-title, .item-detial-title:hover, .item-detial-title:focus, .item-detial-title:active{\n          outline: none;\n          box-shadow: 0 0 0 !important;\n          border: 0 !important;\n          font-size: 16px;\n          color: ",";\n          .item-detial-title-text{\n            max-width: 290px;\n          }\n        }\n      }\n\n    "],["\n      .component-item-detail{\n        border: ","rem solid ",";\n        overflow: auto;\n        padding: 0 16px 16px 16px;\n        z-index: 3;\n        font-size: 14px;\n        .item-header{\n          height: 41px;\n          border-bottom: 1px solid ",";\n          height: ",";\n          .item-header-title{\n            font-size: 16px;\n            line-height: 41px;\n          }\n        }\n        .item-close{\n          cursor: pointer;\n        }\n        .item-img{\n          img{\n            width: 100%;\n          }\n        }\n        .item-line{\n          width: 100%;\n          height: ","rem;\n          border-bottom: ","rem solid ",";\n        }\n        .item-detial-title, .item-detial-title:hover, .item-detial-title:focus, .item-detial-title:active{\n          outline: none;\n          box-shadow: 0 0 0 !important;\n          border: 0 !important;\n          font-size: 16px;\n          color: ",";\n          .item-detial-title-text{\n            max-width: 290px;\n          }\n        }\n      }\n\n    "])),1/14,e.colors.grays.gray300,e.colors.grays.gray300,a.polished.rem(45),1/14,1/14,e.colors.grays.gray300,e.colors.black)},n.state={},n}return r(t,e),t.prototype.render=function(){if(!this.props.item)return null;var e=this.props.item.thumbnail&&this.props.portalUrl?this.props.portalUrl.replace(/\/$/,"")+"/sharing/rest/content/items/"+this.props.item.id+"/info/"+this.props.item.thumbnail+"?token="+a.SessionManager.getInstance().getSession().token:"Web Scene"===this.props.item.type?"https://static.arcgis.com/images/scene.png":"https://static.arcgis.com/images/desktopapp.png",t=this.props.item.id&&this.props.portalUrl?this.props.portalUrl.replace(/\/sharing\/rest/,"").replace(/\/$/,"")+"/home/item.html?id="+this.props.item.id:null,n=this.props.item,r=n.title,o=n.owner,i=n.modified,c=n.description,p=n.snippet;return a.jsx("div",{css:this.getStyle(this.props.theme)},a.jsx("div",{className:"component-item-detail bg-gray-100",style:this.props.style},a.jsx("div",{className:"container-fluid"},a.jsx("div",{className:"row item-header"},a.jsx("div",{className:"col-10 item-header-title"},this.props.intl.formatMessage({id:"details",defaultMessage:l.default.details})),a.jsx("div",{className:"col-2 mt-2 item-close",onClick:this.props.onClose},a.jsx("div",{className:"text-right mw-50"},a.jsx(s.Icon,{icon:u,className:"text-dark"})))),a.jsx("div",{className:"row mt-2 mb-3"},t?a.jsx(s.Link,{to:t,className:"col item-img",color:"link",target:"_blank"},a.jsx("img",{src:e,alt:r})):a.jsx("div",{className:"col item-img"},a.jsx("img",{src:e,alt:r}))),a.jsx("div",{className:"row mt-2 mb-3"},t?a.jsx(s.Link,{to:t,className:"item-detial-title p-0 d-flex justify-content-start",color:"link",target:"_blank"},a.jsx("div",{className:"col item-detial-title-text text-truncate",title:r},r)):a.jsx("div",{className:"col text-truncate item-detial-title",title:r},r)),a.jsx("div",{className:"row mt-2 mb-3"},a.jsx("div",{className:"col"},"Owner "+o)),a.jsx("div",{className:"row mt-2 mb-3"},a.jsx("div",{className:"col"},"Updated: "+new Date(i))),a.jsx("div",{className:"row mt-2 mb-3"},a.jsx("div",{className:"col item-line"})),p&&a.jsx("div",{className:"row mt-2 mb-3"},a.jsx("p",{className:"col text-justify"},p)),a.jsx("div",{className:"row mt-2 mb-3"},a.jsx("h3",{className:"col"},this.props.intl.formatMessage({id:"description",defaultMessage:l.default.description}))),a.jsx("div",{className:"row mt-2 mb-3"},a.jsx("div",{className:"col text-justify"},c)))))},t}(a.React.PureComponent),p=a.themeUtils.withTheme(a.injectIntl(c));t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(1),i=n(59),a=n(4);function s(e,t,n){var r=e&&e.split("?")[0];return r=r&&r.replace(/^http:/,"https:"),n?/\/$/.test(r)?""+r+t.id:r+"/"+t.id:r.replace(/\/$/,"")}!function(e){e.Point="POINT",e.Polyline="POLYLINE",e.Polygon="POLYGON"}(r=t.GeoType||(t.GeoType={})),t.getDsIcon=function(e,t){switch(function(e,t){switch(e){case i.AllDataSourceTypes.WebMap:case i.AllDataSourceTypes.MapView:case i.AllDataSourceTypes.WebScene:case i.AllDataSourceTypes.SceneView:case i.AllDataSourceTypes.HubAnnotations:case i.AllDataSourceTypes.HubEvents:return e;case i.AllDataSourceTypes.FeatureLayer:case i.AllDataSourceTypes.FeatureLayerView:case i.AllDataSourceTypes.FeatureQuery:return t?e+"_"+t:e;default:return"UNKNOWN"}}(e&&e.type,function(e){var t;if("[object Object]"===Object.prototype.toString.call(e)){var n=e,o=n&&n.getSchema&&n.getSchema();t=o&&o.layerDefinition&&o.layerDefinition.geometryType}else"[object String]"===Object.prototype.toString.call(e)&&(t=e);if(t){if(-1!==t.toLocaleLowerCase().indexOf(r.Point.toLocaleLowerCase()))return r.Point;if(-1!==t.toLocaleLowerCase().indexOf(r.Polyline.toLocaleLowerCase()))return r.Polyline;if(-1!==t.toLocaleLowerCase().indexOf(r.Polygon.toLocaleLowerCase()))return r.Polygon}return null}(e&&e.dataSourceJson||t))){case i.AllDataSourceTypes.WebMap:case i.AllDataSourceTypes.MapView:return n(373);case i.AllDataSourceTypes.WebScene:case i.AllDataSourceTypes.SceneView:return n(374);case i.AllDataSourceTypes.HubAnnotations:return n(375);case i.AllDataSourceTypes.HubEvents:return n(376);case i.AllDataSourceTypes.FeatureLayer+"_"+r.Point:case i.AllDataSourceTypes.FeatureLayerView+"_"+r.Point:case i.AllDataSourceTypes.FeatureQuery+"_"+r.Point:return n(377);case i.AllDataSourceTypes.FeatureLayer+"_"+r.Polyline:case i.AllDataSourceTypes.FeatureLayerView+"_"+r.Polyline:case i.AllDataSourceTypes.FeatureQuery+"_"+r.Polyline:return n(378);case i.AllDataSourceTypes.FeatureLayer+"_"+r.Polygon:case i.AllDataSourceTypes.FeatureLayerView+"_"+r.Polygon:case i.AllDataSourceTypes.FeatureQuery+"_"+r.Polygon:return n(379);case""+i.AllDataSourceTypes.FeatureLayer:case""+i.AllDataSourceTypes.FeatureLayerView:case""+i.AllDataSourceTypes.FeatureQuery:return n(380);default:return n(381)}},t.getDsTypeString=function(e,t){if(!e||!t)return"";switch(e){case i.AllDataSourceTypes.FeatureLayer:case i.AllDataSourceTypes.FeatureQuery:return t.formatMessage({id:"featureLayer",defaultMessage:a.default.featureLayerType});case i.AllDataSourceTypes.FeatureLayerView:return t.formatMessage({id:"featureLayerView",defaultMessage:a.default.featureLayerViewType});case i.AllDataSourceTypes.HubAnnotations:return t.formatMessage({id:"hubAnnotations",defaultMessage:a.default.hubAnnotationsType});case i.AllDataSourceTypes.HubEvents:return t.formatMessage({id:"hubEvents",defaultMessage:a.default.hubEventsType});case i.AllDataSourceTypes.Map:return t.formatMessage({id:"map",defaultMessage:a.default.mapType});case i.AllDataSourceTypes.MapView:return t.formatMessage({id:"mapView",defaultMessage:a.default.mapViewType});case i.AllDataSourceTypes.SceneView:return t.formatMessage({id:"sceneView",defaultMessage:a.default.sceneViewType});case i.AllDataSourceTypes.SimpleLocal:return t.formatMessage({id:"simpleLocal",defaultMessage:a.default.simpleLocalType});case i.AllDataSourceTypes.WebMap:return t.formatMessage({id:"webMap",defaultMessage:a.default.webMapType});case i.AllDataSourceTypes.WebScene:return t.formatMessage({id:"webScene",defaultMessage:a.default.webSceneType});case i.AllDataSourceTypes.CSV:return t.formatMessage({id:"csv",defaultMessage:a.default.csvType});default:return""}},t.isFeatureLayerUrl=function(e){return!!(e&&/^(http(s)?:)?\/\//.test(e)&&/\/\d+\/?$/.test(e))},t.FEATURE_LAYER_TYPE="Feature Layer",t.getDsJsonUrl=s,t.getSingleDsJsonFromLayer=function(e,t,n,r){return n?o.Immutable({id:t,type:i.AllDataSourceTypes.FeatureQuery,label:n.name,url:s(e,n,r),geometryType:n.geometryType,layerId:n.id}):null}},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M6 11.943l4 1.711V4.057L6 2.346v9.597zm-1 .17V2.494l-4 1.48v9.619l4-1.48zm6 1.393l4-1.48V2.407l-4 1.48v9.619zM0 15V3.307L5.75 1.18l4.528 1.937L16 1v11.693l-5.75 2.127-4.528-1.937L0 15z",fill:"currentColor",fillRule:"nonzero"});function a(e){return o.createElement("svg",r({width:16,height:16,viewBox:"0 0 16 16"},e),i)}e.exports=a,a.default=a},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M7.5 4V1.39C6.402 2.12 5.565 2.99 4.985 4H7.5zm0 3.5V5H4.512a8.13 8.13 0 0 0-.5 2.5H7.5zm0 3.5V8.5H4.012a8.13 8.13 0 0 0 .5 2.5H7.5zm0 3.61V12H4.985c.58 1.01 1.417 1.88 2.515 2.61zm2.543.087A7.014 7.014 0 0 0 13.745 12h-1.6a8.278 8.278 0 0 1-2.102 2.697zM11.015 12H8.5v2.61c1.098-.73 1.935-1.6 2.515-2.61zm1.974-3.5a9.328 9.328 0 0 1-.441 2.5h1.778c.365-.767.594-1.61.656-2.5H12.99zm-1.001 0H8.5V11h2.988a8.13 8.13 0 0 0 .5-2.5zm.56-3.5c.254.775.401 1.609.441 2.5h1.993a6.957 6.957 0 0 0-.656-2.5h-1.778zm-1.06 0H8.5v2.5h3.488a8.13 8.13 0 0 0-.5-2.5zm-1.445-3.697c.91.78 1.611 1.68 2.102 2.697h1.6a7.014 7.014 0 0 0-3.702-2.697zM8.5 4h2.515c-.58-1.01-1.417-1.88-2.515-2.61V4zm-.527 12a8 8 0 1 1 .055-16 8 8 0 0 1-.055 16zM5.957 1.302A7.014 7.014 0 0 0 2.255 4h1.6a8.278 8.278 0 0 1 2.102-2.697zM3.011 7.5c.04-.891.187-1.725.441-2.5H1.674a6.957 6.957 0 0 0-.656 2.5H3.01zm.441 3.5a9.328 9.328 0 0 1-.441-2.5H1.018c.062.89.291 1.733.656 2.5h1.778zm2.505 3.697A8.278 8.278 0 0 1 3.855 12h-1.6a7.014 7.014 0 0 0 3.702 2.697z",fill:"currentColor",fillRule:"nonzero"});function a(e){return o.createElement("svg",r({width:16,height:16,viewBox:"0 0 16 16"},e),i)}e.exports=a,a.default=a},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M5.162 12.969A8.28 8.28 0 0 0 8 13.461c3.9 0 7-2.607 7-5.73S11.9 2 8 2 1 4.608 1 7.73c0 1.093.375 2.141 1.078 3.052.409.53.465 1.341.243 2.596 1.369-.482 2.251-.624 2.84-.409zM8 14.461a9.279 9.279 0 0 1-3.181-.553c-.46-.167-1.76.196-3.901 1.092.544-2.018.667-3.22.369-3.607C.473 10.339 0 9.08 0 7.73 0 4.013 3.582 1 8 1s8 3.013 8 6.73c0 3.718-3.582 6.731-8 6.731zM4 9a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm4 0a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm4 0a1 1 0 1 1 0-2 1 1 0 0 1 0 2z",fill:"currentColor",fillRule:"nonzero"});function a(e){return o.createElement("svg",r({width:16,height:16,viewBox:"0 0 16 16"},e),i)}e.exports=a,a.default=a},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M1.143 5h13.714V2.154H12V3h-1v-.846H5V3H4v-.846H1.143V5zm0 1v8.846h13.714V6H1.143zM12 1h4v15H0V1h4V0h1v1h6V0h1v1zM3 8.5h2v1H3v-1zm4 0h2v1H7v-1zm4 0h2v1h-2v-1zm-8 3h2v1H3v-1zm4 0h2v1H7v-1zm4 0h2v1h-2v-1z",fill:"currentColor",fillRule:"nonzero"});function a(e){return o.createElement("svg",r({width:16,height:16,viewBox:"0 0 16 16"},e),i)}e.exports=a,a.default=a},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M1.5 16a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0-13a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm13 13a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0-13a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM8 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z",fillRule:"nonzero"});function a(e){return o.createElement("svg",r({width:16,height:16,viewBox:"0 0 16 16"},e),i)}e.exports=a,a.default=a},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M2.147 13.146l11-11a1.5 1.5 0 1 1 .707.707l-11 11a1.5 1.5 0 1 1-.707-.707z",fillRule:"nonzero"});function a(e){return o.createElement("svg",r({width:16,height:16,viewBox:"0 0 16 16"},e),i)}e.exports=a,a.default=a},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M2.915 14h10.17c.05-.14.12-.271.207-.389l-2.204-4.114a1.5 1.5 0 1 1 0-2.995l2.204-4.113A1.496 1.496 0 0 1 13.085 2H2.915c-.151.426-.489.764-.915.915v10.17c.426.151.764.489.915.915zm0 1A1.5 1.5 0 1 1 1 13.085V2.915A1.5 1.5 0 1 1 2.915 1h10.17a1.5 1.5 0 1 1 1.276 1.994l-2.272 3.975a1.495 1.495 0 0 1 0 2.063l2.272 3.974A1.5 1.5 0 1 1 13.086 15H2.914z",fillRule:"nonzero"});function a(e){return o.createElement("svg",r({width:16,height:16,viewBox:"0 0 16 16"},e),i)}e.exports=a,a.default=a},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M8 0l8 6-8 6-8-6 8-6zM1.887 6L8 10.82 14.113 6 8 1.18 1.887 6zM.563 9L8 14.775 15.437 9l.563.81L8 16 0 9.81.563 9z",fill:"currentColor",fillRule:"nonzero"});function a(e){return o.createElement("svg",r({width:16,height:16,viewBox:"0 0 16 16"},e),i)}e.exports=a,a.default=a},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M1 5.304V6.5C1 7.692 3.615 9 7 9s6-1.308 6-2.5V5.304C11.775 6.32 9.546 7 7 7s-4.775-.68-6-1.696zM14 3.5v9c0 1.933-3.134 3.5-7 3.5s-7-1.567-7-3.5v-9C0 1.567 3.134 0 7 0s7 1.567 7 3.5zm-1 4.804C11.775 9.32 9.546 10 7 10s-4.775-.68-6-1.696V9.5C1 10.692 3.615 12 7 12s6-1.308 6-2.5V8.304zm0 3C11.775 12.32 9.546 13 7 13s-4.775-.68-6-1.696V12.5C1 13.692 3.615 15 7 15s6-1.308 6-2.5v-1.196zM7 6c3.385 0 6-1.308 6-2.5S10.385 1 7 1 1 2.308 1 3.5 3.615 6 7 6z",fill:"currentColor",fillRule:"nonzero"});function a(e){return o.createElement("svg",r({width:14,height:16,viewBox:"0 0 14 16"},e),i)}e.exports=a,a.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(57),s=n(368),l=n(414),u=n(59);t.AllDataSourceTypes=u.AllDataSourceTypes;var c=n(419),p=n(4),d=n(26),f=n(420),h=function(e){function t(t){var n=e.call(this,t)||this;return n.externalDsStyle={width:"100%",height:"100%",maxWidth:"5000px",margin:0},n.fontSizeStyle={fontSize:"16px"},n.titleStyle={height:"51px",borderBottom:"0"},n.showExternalDs=function(){n.setState({isExternalDsShown:!0})},n.onSelectDataFinished=function(e){e?(a.getAppConfigAction().addDataSources(e).exec(),n.props.changeInitStatus&&n.props.changeInitStatus(!1),n.setState({isExternalDsShown:!1})):n.setState({isExternalDsShown:!1})},n.onSelectDataCanceled=function(){n.setState({isExternalDsShown:!1})},n.onToggleExternalDs=function(){n.setState({isExternalDsShown:!n.state.isExternalDsShown})},n.ExternalDs=o.jsx(s.default,{portalUrl:o.getAppStore().getState().portalUrl,onCancel:n.onSelectDataCanceled,onFinish:n.onSelectDataFinished,types:n.props.types&&n.props.types.some(function(e){return e===u.AllDataSourceTypes.FeatureLayer||e===u.AllDataSourceTypes.FeatureQuery})?null:n.props.types}),n.state={isExternalDsShown:!1},n}return r(t,e),t.prototype.render=function(){var e=this;return o.jsx("div",{css:c.getStyle(this.props.theme),className:"h-100 w-100"},o.jsx("div",{className:"component-data-source-list"},o.jsx("div",{className:"ds-list-header jimu-widget-setting--header d-flex",style:this.titleStyle},o.jsx("div",{className:"d-flex align-items-center w-100",style:this.fontSizeStyle},this.props.intl.formatMessage({id:"setDataSource",defaultMessage:p.default.setDataSource})),o.jsx("div",{className:"flex-shrink-0 text-center ds-list-close px-2",onClick:function(){return e.props.onClose&&e.props.onClose()}},o.jsx(i.Icon,{icon:d,size:"16",className:"text-dark"}))),o.jsx("div",{className:"w-100 h-100"},o.jsx("div",{className:"ds-list-tabs"},o.jsx(i.Tabs,null,o.jsx(i.Tab,{title:this.props.intl.formatMessage({id:"added",defaultMessage:p.default.added}),active:!0},o.jsx(l.default,{types:this.props.types,isDataSourceInited:this.props.isDataSourceInited,selectedDsIds:this.props.selectedDsIds,onRemove:this.props.onRemove,onSelect:this.props.onSelect,disableSelection:this.props.disableSelection,disableRemove:this.props.disableRemove,intl:this.props.intl})))),o.jsx("div",{className:"d-flex justify-content-center w-100 ds-add-data"},o.jsx(i.Button,{color:"primary",className:"btn btn-primary text-truncate m-2 text-center add-data",onClick:this.showExternalDs},o.jsx(i.Icon,{icon:f,size:12}),this.props.intl.formatMessage({id:"addData",defaultMessage:p.default.addData})))),this.props.isDataSourceInited?null:o.jsx("div",{className:"jimu-small-loading"})),this.state.isExternalDsShown?o.jsx(i.Modal,{isOpen:this.state.isExternalDsShown,style:this.externalDsStyle,toggle:this.onToggleExternalDs,contentClassName:"h-100",className:"widget-ds-setting-add-data-popup"},this.ExternalDs):null)},t}(o.React.PureComponent);t._DataSourceList=h;var g=o.themeUtils.withTheme(o.injectIntl(h));t.default=g},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(60),s=function(e){function t(t){var n=e.call(this,t)||this;return n.getWhetherSelected=function(){return n.props.selectedDsIds&&n.props.selectedDsIds.some(function(e){return e===n.props.ds.dataSourceJson.id})},n.getDsJsonWithRootId=function(){var e=n.props.ds.getRootDataSource();return{dataSourceJson:n.props.ds.dataSourceJson,rootDataSourceId:e&&e.id}},n.onItemClick=function(e){if(n.getWhetherSelected()){if(n.props.disableRemove)return;n.props.onRemove&&n.props.onRemove(n.getDsJsonWithRootId())}else{if(n.props.disableSelection)return;n.props.onSelect&&n.props.onSelect(n.getDsJsonWithRootId())}},n.state={subDataSources:null},n}return r(t,e),t.prototype.render=function(){return this.props.ds&&this.props.ds.dataSourceJson?o.React.createElement("div",{onClick:this.onItemClick,className:o.classNames("ds-items",{"selected-item":this.getWhetherSelected()})},o.React.createElement("div",{className:o.classNames("ds-items-border",{"border-transparent":this.getWhetherSelected()})},o.React.createElement("div",{className:"mb-2 d-flex justify-content-between ds-items-type"},o.React.createElement("div",{className:"flex-grow-1 text-truncate ds-items-type-name"},a.getDsTypeString(this.props.ds.type,this.props.intl))),o.React.createElement("div",{className:"d-flex align-items-center pr-2"},o.React.createElement("div",{className:"d-flex align-items-center justify-content-center mr-1 flex-shrink-0 ds-items-label-icon"},o.React.createElement(i.Icon,{icon:a.getDsIcon(this.props.ds),className:"text-dark",size:"20"})),o.React.createElement("div",{className:"d-flex"},o.React.createElement("div",{className:"flex-shrink-0 ml-1 mr-1 two-line-truncate ds-items-label-name",title:this.props.ds.dataSourceJson.label||this.props.ds.dataSourceJson.id},this.props.ds.dataSourceJson.label||this.props.ds.dataSourceJson.id))))):null},t}(o.React.PureComponent);t.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(2),s=n(4),l=function(e){function t(t){var n=e.call(this,t)||this;return n.handleClick=function(e){if(!n.state.selected){var t=n.props.onSelect;n.setState({selected:!0}),t&&t(n.props.themeInfo)}},n.state={selected:n.props.selected},n.handleClick.bind(n),n}return r(t,e),t.prototype.componentDidUpdate=function(e){e.selected!==this.props.selected&&this.setState({selected:this.props.selected})},t.prototype.render=function(){var e=this.props.themeInfo,t=i.classNames("theme-preview",{selected:this.state.selected});return i.jsx("li",{className:t,title:e.label},i.jsx(a.Button,{color:"link",className:"theme-preview--inner",onClick:this.handleClick},i.jsx("img",{src:"../"+e.path+"thumbnail.png"})),i.jsx(a.Label,null,e.label))},t}(i.React.PureComponent),u=function(e){function t(t){var n=e.call(this,t)||this;return n.themesPerPage=6,n.onThemeChange=function(e){n.setState({selectedTheme:e.name}),n.props.onChange&&n.props.onChange(e.name)},n.state={selectedTheme:n.props.selectedTheme},n}return r(t,e),t.prototype.renderPage=function(e,t){var r=this,o=this.state.selectedTheme,u=this.props.intl;return i.jsx(i.React.Fragment,{key:t},i.jsx("ul",null,e.asMutable().map(function(e,t){return i.jsx(l,{selected:o===e.name,key:t,themeInfo:e,onSelect:r.onThemeChange})})),i.jsx("hr",null),i.jsx("p",{className:"pt-4 text-muted text-center"},i.jsx(a.Icon,{className:"d-block mx-auto mb-2",icon:n(428)}),u?u.formatMessage({id:"themeCustomizationComing",defaultMessage:s.default.themeCustomizationComing}):"test Theme customization is coming soon."))},t.prototype.componentDidUpdate=function(e){this.props.selectedTheme!==e.selectedTheme&&this.setState({selectedTheme:this.props.selectedTheme})},t.prototype.render=function(){var e=this,t=this.props,n=t.themeListInfo,r=t.intl,o=i.classNames("jimu-builder-theme-chooser");if(!n)return i.jsx("div",{className:"loading"},r?r.formatMessage({id:"loading",defaultMessage:s.default.loading}):"Loading...");for(var a=[],l=0,u=n.length;l<u;l+=this.themesPerPage)a.push(n.slice(l,l+this.themesPerPage));return i.jsx("div",{className:o,css:p(this.props.theme),ref:function(t){return e.themeChooser=t}},a.map(function(t,n){return e.renderPage(t,n)}))},t}(i.React.PureComponent);t.ThemeChooser=i.themeUtils.withTheme(u);var c,p=function(e){var t={item:{marginY:"0",marginX:"5px",padding:"9px",border:{color:e.colors.grays.gray300,width:"1px"},hover:{borderColor:e.colors.primary},active:{border:{color:e.colors.cyans.cyan500,width:"2px"}}}};return i.css(c||(c=o(["\n    ul {\n      list-style: none;\n      padding: 0;\n      margin: -"," -",";\n      li.theme-preview {\n        display: inline-flex;\n        flex-direction: column;\n        align-items: center;\n        vertical-align: top;\n        margin: "," ",";\n        padding: 0;\n        .btn {\n          padding: ",";\n          border: 0;\n          outline: "," solid ",";\n          position: relative;\n          &:hover {\n            outline-color: ",";\n          }\n        }\n        &.selected {\n          .btn {\n            outline-width: ",";\n            outline-color: ",";\n          }\n        }\n        .theme-preview--inner {\n          font-size: small;\n          text-align: center;\n          line-height: 1;\n          > img {\n            width: 89px;\n          }\n        }\n        > label {\n          white-space: nowrap;\n          text-overflow: ellipsis;\n          overflow: hidden;\n          max-width: 100%;\n          margin-top: .5rem;\n          margin-bottom: 1rem;\n        }\n      }\n    }\n  "],["\n    ul {\n      list-style: none;\n      padding: 0;\n      margin: -"," -",";\n      li.theme-preview {\n        display: inline-flex;\n        flex-direction: column;\n        align-items: center;\n        vertical-align: top;\n        margin: "," ",";\n        padding: 0;\n        .btn {\n          padding: ",";\n          border: 0;\n          outline: "," solid ",";\n          position: relative;\n          &:hover {\n            outline-color: ",";\n          }\n        }\n        &.selected {\n          .btn {\n            outline-width: ",";\n            outline-color: ",";\n          }\n        }\n        .theme-preview--inner {\n          font-size: small;\n          text-align: center;\n          line-height: 1;\n          > img {\n            width: 89px;\n          }\n        }\n        > label {\n          white-space: nowrap;\n          text-overflow: ellipsis;\n          overflow: hidden;\n          max-width: 100%;\n          margin-top: .5rem;\n          margin-bottom: 1rem;\n        }\n      }\n    }\n  "])),t.item.marginY,t.item.marginX,t.item.marginY,t.item.marginX,t.item.padding,t.item.border.width,t.item.border.color,t.item.hover.borderColor,t.item.active.border.width,t.item.active.border.color)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.before=null}var t=e.prototype;return t.insert=function(e){if(this.ctr%(this.isSpeedy?65e3:1)==0){var t,n=function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t}(this);t=0===this.tags.length?this.before:this.tags[this.tags.length-1].nextSibling,this.container.insertBefore(n,t),this.tags.push(n)}var r=this.tags[this.tags.length-1];if(this.isSpeedy){var o=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(r);try{var i=105===e.charCodeAt(1)&&64===e.charCodeAt(0);o.insertRule(e,i?0:o.cssRules.length)}catch(e){0}}else r.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach(function(e){return e.parentNode.removeChild(e)}),this.tags=[],this.ctr=0},e}();t.StyleSheet=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(436),o=n(437),i=/[A-Z]|^ms/g,a=/_EMO_([^_]+?)_([^]*?)_EMO_/g,s=n(438).default(function(e){return e.replace(i,"-$&").toLowerCase()}),l=function(e,t){if(null==t||"boolean"==typeof t)return"";switch(e){case"animation":case"animationName":"string"==typeof t&&(t=t.replace(a,function(e,t,n){return c={name:t,styles:n,next:c},t}))}return 1!==o.default[e]&&45!==e.charCodeAt(1)&&"number"==typeof t&&0!==t?t+"px":t};function u(e,t,n,r){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return c={name:n.name,styles:n.styles,next:c},n.name;if(void 0!==n.styles){var o=n.next;if(void 0!==o)for(;void 0!==o;)c={name:o.name,styles:o.styles,next:c},o=o.next;return n.styles}return function(e,t,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=u(e,t,n[o],!1);else for(var i in n){var a=n[i];if("object"!=typeof a)null!=t&&void 0!==t[a]?r+=i+"{"+t[a]+"}":r+=s(i)+":"+l(i,a)+";";else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]])r+=i+"{"+u(e,t,a,!1)+"}";else for(var c=0;c<a.length;c++)r+=s(i)+":"+l(i,a[c])+";"}return r}(e,t,n);case"function":if(void 0!==e){var i=c,a=n(e);return c=i,u(e,t,a,r)}default:if(null==t)return n;var p=t[n];return void 0===p||r?n:p}}var c,p=/label:\s*([^\s;\n{]+)\s*;/g;t.serializeStyles=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var o=!0,i="";c=void 0;var a=e[0];null==a||void 0===a.raw?(o=!1,i+=u(n,t,a,!1)):i+=a[0];for(var s=1;s<e.length;s++)i+=u(n,t,e[s],46===i.charCodeAt(i.length-1)),o&&(i+=a[s]);p.lastIndex=0;for(var l,d="";null!==(l=p.exec(i));)d+="-"+l[1];return{name:r.default(i)+d,styles:i,next:c}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(386);t.default=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.serializeStyles(t)}},,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(14);t.default=r.ReactRedux.connect(function(e,t){var n=o.default.getInstance(),r=e.appStateInBuilder;return r?{dataSourceInfo:t.useDataSource&&r.dataSourcesInfo[t.useDataSource.dataSourceId],dataSourceJson:t.useDataSource&&r.appConfig.dataSources[t.useDataSource.dataSourceId],rootDataSourceJson:t.useDataSource&&r.appConfig.dataSources[t.useDataSource.rootDataSourceId],dataSource:t.useDataSource&&n.getDataSource(t.useDataSource.dataSourceId),dataSourceManager:n}:{}})(r.DataSourceComponentInner)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.getDefaultTocPageIcon=function(e){return e.type===r.PageType.Folder?n(397):e.type===r.PageType.Link?n(398):n(399)}},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M1 0h3a1 1 0 0 1 1 1v1h6a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1zm0 1v10h10V3H4V1H1zm0 3.5h10v1H1v-1z",fill:"currentColor",fillRule:"nonzero"});function a(e){return o.createElement("svg",r({width:12,height:12,viewBox:"0 0 12 12"},e),i)}e.exports=a,a.default=a},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M7.42 8.839a.5.5 0 0 1 0 .71L6 10.966a3.502 3.502 0 0 1-4.967 0 3.501 3.501 0 0 1 0-4.966l1.416-1.422a.504.504 0 0 1 .713.712L1.746 6.713a2.497 2.497 0 0 0-.003 3.545c.983.983 2.56.98 3.544-.003l1.42-1.42a.504.504 0 0 1 .712.004zm1.415-2.132l1.422-1.416a2.5 2.5 0 0 0 0-3.547 2.502 2.502 0 0 0-3.547 0L5.29 3.163a.504.504 0 1 1-.713-.712l1.42-1.42a3.506 3.506 0 0 1 4.97.003 3.501 3.501 0 0 1 0 4.967L9.547 7.42a.504.504 0 1 1-.713-.712zm-4.967.71l3.548-3.548a.504.504 0 0 1 .713.713L4.58 8.129a.504.504 0 1 1-.713-.712z",fillRule:"nonzero"});function a(e){return o.createElement("svg",r({width:12,height:12,viewBox:"0 0 12 12"},e),i)}e.exports=a,a.default=a},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M1 0h8a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1zm0 1v10h8V1H1zm2 2h4a.5.5 0 0 1 0 1H3a.5.5 0 0 1 0-1zm0 2.5h4a.5.5 0 0 1 0 1H3a.5.5 0 0 1 0-1z",fill:"currentColor",fillRule:"nonzero"});function a(e){return o.createElement("svg",r({width:10,height:12,viewBox:"0 0 10 12"},e),i)}e.exports=a,a.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Map="MAP",e.WebMap="WEB_MAP",e.WebScene="WEB_SCENE",e.MapView="MAP_VIEW",e.SceneView="SCENE_VIEW",e.FeatureLayer="FEATURE_LAYER",e.FeatureLayerView="FEATURE_LAYER_VIEW"}(t.DataSourceTypes||(t.DataSourceTypes={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.HubAnnotations="HUB_ANNOTATIONS",e.HubEvents="HUB_EVENTS"}(t.DataSourceTypes||(t.DataSourceTypes={}))},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(58),s=n(403),l=function(e){function t(t){var n=e.call(this,t)||this;return n.onItemClicked=function(e){n.props.selected||n.props.partSelected?n.props.onRemoveDataClicked(e,n.props.item):n.props.onAddDataClicked(e,n.props.item)},n.onShowDetailClicked=function(e){n.props.onShowDetailClicked(e,n.props.item)},n}return r(t,e),t.prototype.render=function(){if(!this.props.item)return null;var e=this.props.item.thumbnail&&this.props.portalUrl?this.props.portalUrl.replace(/\/$/,"")+"/sharing/rest/content/items/"+this.props.item.id+"/info/"+this.props.item.thumbnail+"?token="+o.SessionManager.getInstance().getSession().token:"Web Scene"===this.props.item.type?"https://static.arcgis.com/images/scene.png":"https://static.arcgis.com/images/desktopapp.png";return o.React.createElement("div",{className:"item"},o.React.createElement("div",{className:o.classNames("item-active-border-transparent",{"item-border-color-cyan":this.props.selected||this.props.partSelected})},o.React.createElement("div",{className:"item-card-container"},o.React.createElement("div",{className:"h-100 w-100 item-card"},o.React.createElement("div",{className:o.classNames({"item-active-icon":this.props.selected},{"d-none":!this.props.selected})},o.React.createElement("div",{className:"text-center bg-primary item-active-icon-container"},o.React.createElement(i.Icon,{icon:a,className:"text-dark",size:12}))),o.React.createElement("div",{className:o.classNames({"item-part-active-icon":this.props.partSelected},{"d-none":!this.props.partSelected})},o.React.createElement("div",{className:"bg-secondary item-part-active-icon-container"},o.React.createElement("div",{className:"bg-primary item-part-active-icon-innerbox"}))),o.React.createElement("div",{className:"w-100 item-thumbnail",style:{backgroundImage:"url("+e+")"},onClick:this.onItemClicked}),o.React.createElement("div",{className:"w-100 nav flex-column item-info-container"},o.React.createElement("div",{className:"text-truncate item-label",title:this.props.item.title},this.props.item.title),o.React.createElement("div",{className:"d-flex justify-content-between"},o.React.createElement("h5",{className:"text-truncate item-sub-label",title:this.props.item.type},"By "+this.props.item.owner||!1),o.React.createElement("div",{className:"mw-50 d-flex align-items-top justify-content-end item-icon",onClick:this.onShowDetailClicked},o.React.createElement(i.Icon,{icon:s,className:"text-dark"}))))))))},t}(o.React.PureComponent);t.default=l},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M6 11A5 5 0 1 0 6 1a5 5 0 0 0 0 10zm0 1A6 6 0 1 1 6 0a6 6 0 0 1 0 12zm-.5-7.5h1v4H7a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1h.5v-3H5a.5.5 0 0 1 0-1h.5zm.5-1a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1z",fill:"currentColor",fillRule:"nonzero"});function a(e){return o.createElement("svg",r({width:12,height:12,viewBox:"0 0 12 12"},e),i)}e.exports=a,a.default=a},function(e,t,n){"use strict";var r=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1);t.getStyle=function(e){return i.css(o||(o=r(["\n    .modal-dialog{\n      max-width: auto;\n    }\n\n    .item-chooser{\n      width: 100%;\n      height: 100%;\n      padding: 0;\n      position: relative;\n\n      .item-list-container{\n        overflow-x: hidden;\n        overflow-y: auto;\n        height: calc(100% - ",");\n      }\n\n      .item-border-color-cyan{\n        border: "," solid "," !important;\n      }\n\n      @media only screen and (max-width: 1280px){\n        .item-list{\n          width: 480px;\n        }\n      }\n\n      @media only screen and (min-width: 1280px){\n        .item-list{\n          width: 720px;\n        }\n      }\n\n      @media only screen and (min-width: 1400px){\n        .item-list{\n          width: 960px;\n        }\n      }\n\n      @media only screen and (min-width: 1680px){\n        .item-list{\n          width: 1200px;\n        }\n      }\n\n      @media only screen and (min-width: 1880px){\n        .item-list{\n          width: 1440px;\n        }\n      }\n\n      @media only screen and (min-width: 2120px){\n        .item-list{\n            width: 1680px;\n        }\n      }\n\n      @media only screen and (min-width: 2360px){\n        .item-list{\n            width: 1920px;\n        }\n      }\n\n      @media only screen and (min-width: 2600px){\n        .item-list{\n            width: 2160px;\n        }\n      }\n\n      @media only screen and (min-width: 2840px){\n        .item-list{\n            width: 2400px;\n        }\n      }\n\n      .item-list{\n        display: flex;\n        flex-wrap: wrap;\n        padding-top: 0.25rem;\n        margin-left: -0.5rem;\n        margin-right: -0.5rem;\n        overflow: visible;\n\n        .item{\n          width: ",";\n          height: ",";\n          margin: 0 "," "," ",";\n\n          .item-active-border-transparent{\n            border: "," solid transparent;\n\n            &:hover{\n              border-color: ",";\n            }\n          }\n\n          .item-card-container.item-border-transparent{\n            border: "," solid transparent;\n          }\n\n          .item-card-container{\n            padding-bottom: 87%;\n            position: relative;\n            overflow: hidden;\n\n            &:hover{\n              border-color: transparent !important;\n            }\n\n            .item-card{\n              position: absolute;\n              background-color: ",";\n\n              .item-info-container{\n                padding: ",";\n              }\n\n              .item-icon{\n                cursor: pointer;\n                width: ",";\n              }\n\n              .item-label, .item-sub-label{\n                width: 80%;\n                max-height: ",";\n                overflow: hidden;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n              }\n\n              .item-label{\n                font-size: ",";\n              }\n\n              .item-sub-label{\n                font-size: ",";\n              }\n\n              .item-thumbnail{\n                background-size: cover;\n                background-position: top center;\n                cursor: pointer;\n                height: 66%;\n              }\n\n              .item-active-icon, .item-part-active-icon{\n                position: absolute;\n                top: ",";\n                left: ",";\n\n                .item-active-icon-container, .item-part-active-icon-container{\n                  width: ",";\n                  height: ",";\n                  line-height: ",";\n                  border-radius: ",";\n                }\n\n                .item-part-active-icon-container{\n                  padding: ",";\n                }\n\n              }\n\n              .item-part-active-icon-container{\n                border: "," solid ",";\n                .item-part-active-icon-innerbox{\n                  width: ",";\n                  height: ",";\n                  border-radius: ",";\n                }\n              }\n            }\n          }\n        }\n      }\n\n    }\n\n  "],["\n    .modal-dialog{\n      max-width: auto;\n    }\n\n    .item-chooser{\n      width: 100%;\n      height: 100%;\n      padding: 0;\n      position: relative;\n\n      .item-list-container{\n        overflow-x: hidden;\n        overflow-y: auto;\n        height: calc(100% - ",");\n      }\n\n      .item-border-color-cyan{\n        border: "," solid "," !important;\n      }\n\n      @media only screen and (max-width: 1280px){\n        .item-list{\n          width: 480px;\n        }\n      }\n\n      @media only screen and (min-width: 1280px){\n        .item-list{\n          width: 720px;\n        }\n      }\n\n      @media only screen and (min-width: 1400px){\n        .item-list{\n          width: 960px;\n        }\n      }\n\n      @media only screen and (min-width: 1680px){\n        .item-list{\n          width: 1200px;\n        }\n      }\n\n      @media only screen and (min-width: 1880px){\n        .item-list{\n          width: 1440px;\n        }\n      }\n\n      @media only screen and (min-width: 2120px){\n        .item-list{\n            width: 1680px;\n        }\n      }\n\n      @media only screen and (min-width: 2360px){\n        .item-list{\n            width: 1920px;\n        }\n      }\n\n      @media only screen and (min-width: 2600px){\n        .item-list{\n            width: 2160px;\n        }\n      }\n\n      @media only screen and (min-width: 2840px){\n        .item-list{\n            width: 2400px;\n        }\n      }\n\n      .item-list{\n        display: flex;\n        flex-wrap: wrap;\n        padding-top: 0.25rem;\n        margin-left: -0.5rem;\n        margin-right: -0.5rem;\n        overflow: visible;\n\n        .item{\n          width: ",";\n          height: ",";\n          margin: 0 "," "," ",";\n\n          .item-active-border-transparent{\n            border: "," solid transparent;\n\n            &:hover{\n              border-color: ",";\n            }\n          }\n\n          .item-card-container.item-border-transparent{\n            border: "," solid transparent;\n          }\n\n          .item-card-container{\n            padding-bottom: 87%;\n            position: relative;\n            overflow: hidden;\n\n            &:hover{\n              border-color: transparent !important;\n            }\n\n            .item-card{\n              position: absolute;\n              background-color: ",";\n\n              .item-info-container{\n                padding: ",";\n              }\n\n              .item-icon{\n                cursor: pointer;\n                width: ",";\n              }\n\n              .item-label, .item-sub-label{\n                width: 80%;\n                max-height: ",";\n                overflow: hidden;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n              }\n\n              .item-label{\n                font-size: ",";\n              }\n\n              .item-sub-label{\n                font-size: ",";\n              }\n\n              .item-thumbnail{\n                background-size: cover;\n                background-position: top center;\n                cursor: pointer;\n                height: 66%;\n              }\n\n              .item-active-icon, .item-part-active-icon{\n                position: absolute;\n                top: ",";\n                left: ",";\n\n                .item-active-icon-container, .item-part-active-icon-container{\n                  width: ",";\n                  height: ",";\n                  line-height: ",";\n                  border-radius: ",";\n                }\n\n                .item-part-active-icon-container{\n                  padding: ",";\n                }\n\n              }\n\n              .item-part-active-icon-container{\n                border: "," solid ",";\n                .item-part-active-icon-innerbox{\n                  width: ",";\n                  height: ",";\n                  border-radius: ",";\n                }\n              }\n            }\n          }\n        }\n      }\n\n    }\n\n  "])),i.polished.rem(100),i.polished.rem(1),e.colors.cyans.cyan500,i.polished.rem(220),i.polished.rem(192),i.polished.rem(10),i.polished.rem(20),i.polished.rem(10),i.polished.rem(1),e.colors.cyans.cyan500,i.polished.rem(1),e.colors.secondary,i.polished.rem(10),i.polished.rem(50),i.polished.rem(58),i.polished.rem(16),i.polished.rem(14),i.polished.rem(8),i.polished.rem(8),i.polished.rem(16),i.polished.rem(16),i.polished.rem(16),i.polished.rem(3),i.polished.rem(3),i.polished.rem(1),e.colors.grays.gray500,i.polished.rem(8),i.polished.rem(8),i.polished.rem(1))}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(372),s=n(4),l=function(e){function t(t){var n=e.call(this,t)||this;return n.dataSourceUrlTypes=[{label:"Feature layer"}],n.onUrlTypesClicked=function(e){n.setState({selectedDataSourceUrlType:e.target.value})},n.onInputUrl=function(e){n.setState({url:e.target.value})},n.onAdded=function(){if(n.state.url){var e=n.state.url.replace(/^https?:/,"").split("?")[0];fetch(e+"?f=json").then(function(e){return e.json()}).then(function(e){var t,r=[];e&&e.layers&&Array.isArray(e.layers)?Promise.all(e.layers.map(function(e){return fetch(a.getDsJsonUrl(n.state.url,e,!0)+"?f=json").then(function(e){return e.json()})})).then(function(e){e.forEach(function(e){e&&e.type&&e.type===a.FEATURE_LAYER_TYPE&&(t=a.getSingleDsJsonFromLayer(n.state.url,n.props.getDsId(),e,!0))&&r.push(t)}),n.changeDsJsons(r)}):e&&e.type&&e.type===a.FEATURE_LAYER_TYPE&&((t=a.getSingleDsJsonFromLayer(n.state.url,n.props.getDsId(),e,!1))&&(r=[t]),n.changeDsJsons(r))},function(e){console.error(e),n.setState({isSupported:!1})})}},n.changeDsJsons=function(e){e.length>0?(n.props.onAdded(e),n.setState({isSupported:!0})):n.setState({isSupported:!1})},n.state={selectedDataSourceUrlType:n.dataSourceUrlTypes[0],url:"",isSupported:!0},n}return r(t,e),t.prototype.componentDidMount=function(){},t.prototype.render=function(){return o.React.createElement("div",{className:"external-data-source-url-input"},o.React.createElement("div",{className:"mt-3 ml-2"},o.React.createElement("h5",null,this.props.intl.formatMessage({id:"serviceType",defaultMessage:s.default.serviceType})),o.React.createElement(i.Input,{type:"select",value:this.state.selectedDataSourceUrlType.label,title:this.state.selectedDataSourceUrlType.label,onChange:this.onUrlTypesClicked,className:"text-truncate url-type-select"},this.dataSourceUrlTypes.map(function(e){return o.React.createElement("option",{key:e.label,value:e.label},e.label)}))),o.React.createElement("div",{className:"mt-3 ml-2"},o.React.createElement("h5",null,this.props.intl.formatMessage({id:"url",defaultMessage:s.default.url})),o.React.createElement(i.Input,{placeholder:"URL",onChange:this.onInputUrl,className:"url-input",value:this.state.url}),!this.state.isSupported&&o.React.createElement("p",{className:"mt-2"},this.props.intl.formatMessage({id:"unSupported",defaultMessage:s.default.unSupported}))),o.React.createElement("div",{className:"mt-3 ml-2"},o.React.createElement(i.Button,{onClick:this.onAdded,color:"primary",disabled:!this.state.url,className:"url-input-add-btn"},this.props.intl.formatMessage({id:"add",defaultMessage:s.default.add}))))},t}(o.React.PureComponent);t.default=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(135),s=n(407),l=n(408),u=n(409),c=n(4),p=function(e){function t(t){var n,r,o=e.call(this,t)||this;return o.itemCategory=((n={})[a.ItemCategory.MyContent]=o.props.intl.formatMessage({id:"myContent",defaultMessage:c.default.myContent}),n[a.ItemCategory.MyOrganization]=o.props.intl.formatMessage({id:"myOrganization",defaultMessage:c.default.myOrganization}),n[a.ItemCategory.Public]=o.props.intl.formatMessage({id:"public",defaultMessage:c.default.public}),n),o.sortField=((r={})[a.SortField.Modified]=o.props.intl.formatMessage({id:"modified",defaultMessage:c.default.modified}),r[a.SortField.Title]=o.props.intl.formatMessage({id:"title",defaultMessage:c.default.title}),r[a.SortField.Views]=o.props.intl.formatMessage({id:"numViews",defaultMessage:c.default.numViews}),r),o.onCategoryChange=function(e){o.setState({activeCategory:e})},o.onSearchInputKeyDown=function(e){13===e.which?o.doSearch():o.setState({isSearchValueDone:!1})},o.doSearch=function(){o.searchValueWhenDone=o.state.searchValue,o.setState({isSearchValueDone:!0})},o.onSearchChange=function(e){o.setState({searchValue:e.target.value})},o.onSortFieldChange=function(e){var t=e.target.value;o.setState({selectedSortField:t})},o.onSortOrderChange=function(){o.setState({selectedSortOrder:o.state.selectedSortOrder===a.SortOrder.Desc?a.SortOrder.Asc:a.SortOrder.Desc})},o.onItemAdded=function(e,t){o.props.onSelect(e,t)},o.onItemRemoved=function(e,t){o.props.onRemove(e,t)},o.state={searchValue:"",selectedSortField:a.SortField.Modified,selectedSortOrder:a.SortOrder.Desc,isSearchValueDone:!1,activeCategory:a.ItemCategory.MyContent},o}return r(t,e),t.prototype.render=function(){var e=this;return o.React.createElement("div",{className:"external-data-source-item-chooser w-100 h-100"},Object.keys(a.ItemCategory).map(function(t,n){return o.React.createElement("div",{className:o.classNames("h-100",{"d-none":a.ItemCategory[t]!==e.state.activeCategory}),key:n},o.React.createElement("div",{className:"d-flex justify-content-between item-search-sort"},o.React.createElement("div",{className:"flex-grow-1 mr-3"},o.React.createElement("div",{className:"d-flex item-chooser-seach"},o.React.createElement(i.Button,{color:"light",className:"mt-2 ml-2 pl-2 pr-2 btn bg-white border-0 search-icon",onClick:e.doSearch},o.React.createElement(i.Icon,{width:16,height:16,icon:s})),o.React.createElement(i.Input,{onKeyDown:e.onSearchInputKeyDown,placeholder:e.props.intl.formatMessage({id:"search",defaultMessage:c.default.search}),onChange:e.onSearchChange,className:"d-inline-block w-100 search-input",value:e.state.searchValue}))),o.React.createElement("div",{className:"item-chooser-sort-field"},o.React.createElement("h5",{className:"d-inline-block mr-2 text-dark search-icon"},e.props.intl.formatMessage({id:"sort",defaultMessage:c.default.sort})),o.React.createElement(i.Input,{type:"select",value:e.state.selectedSortField,title:e.state.selectedSortField,onChange:e.onSortFieldChange,className:"text-truncate d-inline-block item-chooser-select"},Object.keys(a.SortField).map(function(t){return o.React.createElement("option",{key:t,value:t},e.sortField[a.SortField[t]])}))),o.React.createElement("div",{className:"ml-3 item-chooser-sort-order",onClick:e.onSortOrderChange},e.state.selectedSortOrder===a.SortOrder.Desc?o.React.createElement(i.Icon,{width:16,height:16,icon:l}):o.React.createElement(i.Icon,{width:16,height:16,icon:u}))),o.React.createElement("div",{className:"d-flex justify-content-between item-category-item-chooser"},o.React.createElement("div",{className:"h-100 item-category"},Object.keys(a.ItemCategory).map(function(t){return o.React.createElement("div",{className:o.classNames("p-2 pl-3 item-category-item",{"item-category-item-seleted":e.state.activeCategory===a.ItemCategory[t]}),key:t,onClick:function(){e.onCategoryChange(a.ItemCategory[t])}},e.itemCategory[a.ItemCategory[t]])})),o.React.createElement("div",{className:"h-100 w-100 item-chooser-container"},o.React.createElement(a.default,{category:a.ItemCategory[t],portalUrl:e.props.portalUrl,searchValue:e.state.isSearchValueDone?e.state.searchValue:e.searchValueWhenDone,itemType:e.props.itemType,getDetailPosition:e.props.getRootDomPosition,selectedItems:e.props.selectedItems,selectedSortField:e.state.selectedSortField,onSelect:e.onItemAdded,onRemove:e.onItemRemoved,isRadio:e.props.isRadio,partSelectedItems:e.props.partSelectedItems,selectedSortOrder:e.state.selectedSortOrder}))))}))},t}(o.React.PureComponent);t.default=p},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm0 2C4.477 20 0 15.523 0 10S4.477 0 10 0s10 4.477 10 10-4.477 10-10 10zm8.282-1.718a.961.961 0 0 1 1.359 0l4.077 4.077a.961.961 0 0 1-1.359 1.36l-4.077-4.078a.961.961 0 0 1 0-1.36z",fill:"currentColor",fillRule:"nonzero"});function a(e){return o.createElement("svg",r({width:24,height:24,viewBox:"0 0 24 24"},e),i)}e.exports=a,a.default=a},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M12.827 0a.5.5 0 0 1 .5.5v14.158l1.794-2.598a.5.5 0 1 1 .759.652l-2.146 3.008a.8.8 0 0 1-1.407-.52V.5a.5.5 0 0 1 .5-.5zM.5 16a.5.5 0 0 1 0-1h9a.5.5 0 0 1 0 1h-9zm0-7.5a.5.5 0 0 1 0-1h9a.5.5 0 0 1 0 1h-9zM.5 1a.5.5 0 0 1 0-1h9a.5.5 0 0 1 0 1h-9z",fill:"currentColor",fillRule:"nonzero"});function a(e){return o.createElement("svg",r({width:16,height:16,viewBox:"0 0 16 16"},e),i)}e.exports=a,a.default=a},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M12.827 16a.5.5 0 0 1-.5-.5V.8a.8.8 0 0 1 1.407-.52l2.146 3.008a.5.5 0 0 1-.76.652l-1.793-2.598V15.5a.5.5 0 0 1-.5.5zM.5 0h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1 0-1zm0 7.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1 0-1zm0 7.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1 0-1z",fill:"currentColor",fillRule:"nonzero"});function a(e){return o.createElement("svg",r({width:16,height:16,viewBox:"0 0 16 16"},e),i)}e.exports=a,a.default=a},function(e,t,n){"use strict";var r=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1);t.getStyle=function(e){return i.css(o||(o=r(["\n    .component-external-data-source-chooser{\n      height: 100%;\n      overflow: hidden;\n      position: relative;\n      .finish-btn{\n        position: absolute;\n        bottom: ",";\n        right: 5px;\n        height: ",";\n        line-height: ",";\n        width: 246px;\n        padding: 0;\n      }\n\n      .ds-thumbnail{\n        width: ",";\n        height: ",";\n        background-color: ",";\n        border-radius: ","rem;\n      }\n\n      .inner-item-chooser-container{\n        height: calc(100% - ",");\n        min-width: ",";\n      }\n\n      .chooser-body{\n        height: calc(100% - ",");\n        background-color: ",";\n        .chooser-body-items{\n          margin-right: ",";\n          padding: "," ",";\n          height: 100%;\n          background-color: ",";\n          > .nav-tabs {\n            margin-left: -1.875rem;\n            margin-right: -1.875rem;\n            .jimu-link {\n              padding-left: 1.875rem;\n              padding-right: 1.875rem;\n            }\n          }\n        }\n        .chooser-body-added{\n          width: ",";\n          position: absolute;\n          border-left: "," solid ",";\n          right: 0;\n          bottom: 0;\n          top: ",";\n          .chooser-body-added-list{\n            height: calc(100% - ",");\n            overflow: auto;\n          }\n          .chooser-body-added-title{\n            height: ",";\n            line-height: ",";\n          }\n        }\n        .item-chooser-container{\n          margin-top: ",";\n        }\n        .item-category{\n          width: ",";\n          margin-top: ",";\n          border-right: 1px solid ",";\n          .item-category-item{\n            cursor: pointer;\n            user-select: none;\n            height: ",";\n          }\n          .item-category-item:hover{\n            background-color: ",";\n          }\n          .item-category-item:hover.item-category-item:active{\n            background-color: ",";\n          }\n          .item-category-item-seleted, .item-category-item-seleted:hover{\n            background-color: ",";\n          }\n        }\n      }\n\n      .chooser-header{\n        height: ",";\n        padding-left: ",";\n        padding-right: ",";\n        &.modal-header {\n          .close {\n            .jimu-icon {\n              width: 1.5rem;\n              height: 1.5rem;\n            }\n          }\n        }\n      }\n\n      .external-data-source-url-input{\n        .url-type-select{\n          width: ",";\n        }\n        .url-input{\n          width: ",";\n        }\n        .url-input-add-btn{\n          width: ",";\n          height: ",";\n        }\n      }\n\n      .external-data-source-app-data{\n        .item-list{\n          display: flex;\n          flex-wrap: wrap;\n          margin-top: 2rem;\n          margin-left: -0.5rem;\n          margin-right: -0.5rem;\n          overflow-x: hidden;\n          overflow-y: auto;\n\n          .item{\n            width: ","%;\n            margin-bottom: 1rem;\n            padding: 0 0.5rem;\n\n            .item-active-border-transparent{\n              border: "," solid transparent;\n\n              &:hover{\n                border-color: ",";\n              }\n            }\n\n            .item-card-container.item-border-transparent{\n              border: "," solid transparent;\n            }\n\n            .item-card-container{\n              border: "," solid;\n              padding-bottom: ",";\n              position: relative;\n              overflow: hidden;\n\n              &:hover{\n                border-color: transparent !important;\n              }\n\n              .item-card{\n                position: absolute;\n\n                .item-card-content{\n                  padding: ",";\n                }\n\n                .item-label{\n                  max-height: ",";\n                  overflow: hidden;\n                  text-overflow: ellipsis;\n                  white-space: nowrap;\n                }\n\n                .item-logo{\n                  width: ",";\n                  height: ",";\n                }\n\n                .item-active-icon{\n                  position: absolute;\n                  top: ",";\n                  left: ",";\n\n                  .item-active-icon-container{\n                    width: ",";\n                    height: ",";\n                    line-height: ",";\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n\n      .item-category-item-chooser{\n        height: calc(100% - ",");\n      }\n\n      .external-data-source-item-chooser{\n        .item-search-sort{\n          padding: 0;\n          margin-top: ",";\n          width: 100%;\n        }\n        .item-chooser-seach{\n          height: ",";\n          line-height: ",";\n\n          .search-icon{\n            position: relative;\n            left: ",";\n            top: ",";\n            padding: 0;\n            .jimu-icon{\n              color: ",";\n              margin: 0;\n            }\n          }\n\n          .search-input{\n            width: ",";\n            height: ",";\n            text-indent: ",";\n            margin-left: ",";\n          }\n        }\n\n        .item-chooser-sort-field{\n          .item-chooser-select{\n            width: ",";\n          }\n        }\n\n        .item-chooser-sort-order{\n          cursor: pointer;\n          width: 20px;\n        }\n      }\n\n      .list-item{\n        background-color: ",";\n        width: ",";\n        height: ",";\n        padding: ",";\n        font-size: ",";\n        .two-line-truncate{\n          overflow: hidden;\n          text-overflow: ellipsis;\n          display: -webkit-box;\n          -webkit-line-clamp: 2;\n          -webkit-box-orient: vertical;\n          word-break: break-all;\n          word-wrap: break-word;\n        }\n        .ds-remove{\n          cursor: pointer;\n        }\n        .ds-label{\n          max-width: ",";\n          font-size: ",";\n        }\n        .ds-type{\n          .ds-type-name{\n            max-width: ",";\n            color: ",";\n          }\n        }\n      }\n\n    }\n\n  "],["\n    .component-external-data-source-chooser{\n      height: 100%;\n      overflow: hidden;\n      position: relative;\n      .finish-btn{\n        position: absolute;\n        bottom: ",";\n        right: 5px;\n        height: ",";\n        line-height: ",";\n        width: 246px;\n        padding: 0;\n      }\n\n      .ds-thumbnail{\n        width: ",";\n        height: ",";\n        background-color: ",";\n        border-radius: ","rem;\n      }\n\n      .inner-item-chooser-container{\n        height: calc(100% - ",");\n        min-width: ",";\n      }\n\n      .chooser-body{\n        height: calc(100% - ",");\n        background-color: ",";\n        .chooser-body-items{\n          margin-right: ",";\n          padding: "," ",";\n          height: 100%;\n          background-color: ",";\n          > .nav-tabs {\n            margin-left: -1.875rem;\n            margin-right: -1.875rem;\n            .jimu-link {\n              padding-left: 1.875rem;\n              padding-right: 1.875rem;\n            }\n          }\n        }\n        .chooser-body-added{\n          width: ",";\n          position: absolute;\n          border-left: "," solid ",";\n          right: 0;\n          bottom: 0;\n          top: ",";\n          .chooser-body-added-list{\n            height: calc(100% - ",");\n            overflow: auto;\n          }\n          .chooser-body-added-title{\n            height: ",";\n            line-height: ",";\n          }\n        }\n        .item-chooser-container{\n          margin-top: ",";\n        }\n        .item-category{\n          width: ",";\n          margin-top: ",";\n          border-right: 1px solid ",";\n          .item-category-item{\n            cursor: pointer;\n            user-select: none;\n            height: ",";\n          }\n          .item-category-item:hover{\n            background-color: ",";\n          }\n          .item-category-item:hover.item-category-item:active{\n            background-color: ",";\n          }\n          .item-category-item-seleted, .item-category-item-seleted:hover{\n            background-color: ",";\n          }\n        }\n      }\n\n      .chooser-header{\n        height: ",";\n        padding-left: ",";\n        padding-right: ",";\n        &.modal-header {\n          .close {\n            .jimu-icon {\n              width: 1.5rem;\n              height: 1.5rem;\n            }\n          }\n        }\n      }\n\n      .external-data-source-url-input{\n        .url-type-select{\n          width: ",";\n        }\n        .url-input{\n          width: ",";\n        }\n        .url-input-add-btn{\n          width: ",";\n          height: ",";\n        }\n      }\n\n      .external-data-source-app-data{\n        .item-list{\n          display: flex;\n          flex-wrap: wrap;\n          margin-top: 2rem;\n          margin-left: -0.5rem;\n          margin-right: -0.5rem;\n          overflow-x: hidden;\n          overflow-y: auto;\n\n          .item{\n            width: ","%;\n            margin-bottom: 1rem;\n            padding: 0 0.5rem;\n\n            .item-active-border-transparent{\n              border: "," solid transparent;\n\n              &:hover{\n                border-color: ",";\n              }\n            }\n\n            .item-card-container.item-border-transparent{\n              border: "," solid transparent;\n            }\n\n            .item-card-container{\n              border: "," solid;\n              padding-bottom: ",";\n              position: relative;\n              overflow: hidden;\n\n              &:hover{\n                border-color: transparent !important;\n              }\n\n              .item-card{\n                position: absolute;\n\n                .item-card-content{\n                  padding: ",";\n                }\n\n                .item-label{\n                  max-height: ",";\n                  overflow: hidden;\n                  text-overflow: ellipsis;\n                  white-space: nowrap;\n                }\n\n                .item-logo{\n                  width: ",";\n                  height: ",";\n                }\n\n                .item-active-icon{\n                  position: absolute;\n                  top: ",";\n                  left: ",";\n\n                  .item-active-icon-container{\n                    width: ",";\n                    height: ",";\n                    line-height: ",";\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n\n      .item-category-item-chooser{\n        height: calc(100% - ",");\n      }\n\n      .external-data-source-item-chooser{\n        .item-search-sort{\n          padding: 0;\n          margin-top: ",";\n          width: 100%;\n        }\n        .item-chooser-seach{\n          height: ",";\n          line-height: ",";\n\n          .search-icon{\n            position: relative;\n            left: ",";\n            top: ",";\n            padding: 0;\n            .jimu-icon{\n              color: ",";\n              margin: 0;\n            }\n          }\n\n          .search-input{\n            width: ",";\n            height: ",";\n            text-indent: ",";\n            margin-left: ",";\n          }\n        }\n\n        .item-chooser-sort-field{\n          .item-chooser-select{\n            width: ",";\n          }\n        }\n\n        .item-chooser-sort-order{\n          cursor: pointer;\n          width: 20px;\n        }\n      }\n\n      .list-item{\n        background-color: ",";\n        width: ",";\n        height: ",";\n        padding: ",";\n        font-size: ",";\n        .two-line-truncate{\n          overflow: hidden;\n          text-overflow: ellipsis;\n          display: -webkit-box;\n          -webkit-line-clamp: 2;\n          -webkit-box-orient: vertical;\n          word-break: break-all;\n          word-wrap: break-word;\n        }\n        .ds-remove{\n          cursor: pointer;\n        }\n        .ds-label{\n          max-width: ",";\n          font-size: ",";\n        }\n        .ds-type{\n          .ds-type-name{\n            max-width: ",";\n            color: ",";\n          }\n        }\n      }\n\n    }\n\n  "])),i.polished.rem(16),i.polished.rem(30),i.polished.rem(30),i.polished.rem(36),i.polished.rem(36),e.colors.blues.blue200,2/14,i.polished.rem(40),i.polished.rem(950),i.polished.rem(100),e.colors.white,i.polished.rem(260),i.polished.rem(20),i.polished.rem(30),i.polished.rgba(e.colors.grays.gray100,.7),i.polished.rem(260),i.polished.rem(1),e.colors.grays.gray200,i.polished.rem(80),i.polished.rem(100),i.polished.rem(42),i.polished.rem(42),i.polished.rem(20),i.polished.rem(150),i.polished.rem(20),e.colors.secondary,i.polished.rem(34),i.polished.rgba(e.colors.secondary,.4),i.polished.rgba(e.colors.secondary,.4),e.colors.cyans.cyan100,i.polished.rem(80),i.polished.rem(30),i.polished.rem(30),i.polished.rem(200),i.polished.rem(500),i.polished.rem(60),i.polished.rem(30),20,i.polished.rem(2),e.colors.cyan,i.polished.rem(2),i.polished.rem(1),i.polished.rem(135),i.polished.rem(5),i.polished.rem(60),i.polished.rem(60),i.polished.rem(60),i.polished.rem(5),i.polished.rem(5),i.polished.rem(20),i.polished.rem(20),i.polished.rem(20),i.polished.rem(50),i.polished.rem(20),i.polished.rem(26),i.polished.rem(26),i.polished.rem(-6),i.polished.rem(-4),e.colors.grays.gray500,i.polished.rem(777),i.polished.rem(26),i.polished.rem(25),i.polished.rem(-40),i.polished.rem(120),e.colors.secondary,i.polished.rem(228),i.polished.rem(82),i.polished.rem(10),i.polished.rem(12),i.polished.rem(160),i.polished.rem(13),i.polished.rem(180),e.colors.grays.gray700)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=function(e){function t(t){var n=e.call(this,t)||this;return n.onSelectWidget=function(e){n.setState({currentWidget:e})},n.getListItemJSX=function(e){return o.React.createElement(i.BSCard,{className:o.classNames("widget-card-item",{"widget-card-selected":n.state.currentWidget&&0===n.state.currentWidget.indexOf(e.uri)}),key:e.title,onClick:function(){return n.onSelectWidget(e.uri)}},o.React.createElement("div",{className:"widget-card-image bg-gray-200"},o.React.createElement("div",null,o.React.createElement(i.CardImg,{top:!0,width:"100%",src:e.image.src,alt:e.image.alt}))),o.React.createElement(i.CardBody,{className:"widget-card-content"},o.React.createElement("span",{className:"text-capitalize",title:e.title},e.title)))},n.state={currentWidget:null,listInfo:[]},n}return r(t,e),t.prototype.componentDidMount=function(){var e=this;this.getListInfo().then(function(t){e.setState({listInfo:t.listInfo})})},t.prototype.getListInfo=function(){return fetch(o.urlUtils.getAbsoluteRootUrl()+"widgets/widgets-info.json").then(function(e){return e.json()}).then(function(e){return{listInfo:e.map(function(e){var t={title:"",uri:"",image:{src:""}};return t.title=e.label,t.uri=e.path,t.image.src="../"+e.icon,t})}})},t.prototype.render=function(){var e=this;return o.React.createElement("div",{className:"component-choose-widget-popup"},o.React.createElement(i.Modal,{isOpen:!0,className:"component-choose-widget-popup-modal"},o.React.createElement(i.ModalHeader,{className:"component-choose-widget-clear-border component-choose-widget-modal-header"},this.props.title,o.React.createElement("span",{className:"choose-widget-popup-close",onClick:this.props.onCancel})),o.React.createElement(i.ModalBody,{className:"component-choose-widget-clear-border component-choose-widget-modal-body"},this.state.listInfo.length>0?this.state.listInfo.map(function(t){return e.getListItemJSX(t)}):"Loading..."),o.React.createElement(i.ModalFooter,{className:"component-choose-widget-clear-border component-choose-widget-modal-footer"},o.React.createElement(i.Button,{onClick:function(){return e.props.onOK(e.state.currentWidget)}},"OK"),o.React.createElement(i.Button,{onClick:this.props.onCancel},"Cancel"))))},t}(o.React.PureComponent);t.ChooseWidgetPopup=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),l=n(2),u=n(57),c=n(413),p=n(422),d=n(37),f=n(4),h=function(e){function t(t){var n=e.call(this,t)||this;return n.__unmount=!1,n.getStyle=function(e){return s.css(g||(g=o(["\n      .component-data-source-chooser{\n        .ds-chooser-button{\n          width: 220px;\n          height: ",";\n          line-height: ",";\n          padding: 0;\n          border: 0;\n          border-radius: ","rem;\n          cursor: pointer;\n        }\n        .ds-chooser-label{\n          width: 220px;\n          height: ","rem;\n          line-height: ","rem;\n          color: ",";\n          margin-bottom: -5px;\n        }\n      }\n\n    "],["\n      .component-data-source-chooser{\n        .ds-chooser-button{\n          width: 220px;\n          height: ",";\n          line-height: ",";\n          padding: 0;\n          border: 0;\n          border-radius: ","rem;\n          cursor: pointer;\n        }\n        .ds-chooser-label{\n          width: 220px;\n          height: ","rem;\n          line-height: ","rem;\n          color: ",";\n          margin-bottom: -5px;\n        }\n      }\n\n    "])),s.polished.rem(30),s.polished.rem(30),2/14,26/14,26/14,e.colors.grays.gray700)},n.toggleDataUse=function(e){var t=n.props.widgets[n.props.widgetId];u.getAppConfigAction().editWidget(t.set("useDataSourcesEnabled",e)).exec()},n.onSelect=function(e,t){var r,o,i,a=!1;n.props.layouts&&Object.keys(n.props.layouts).forEach(function(e){d.getWidgetsOrSectionsInLayout(n.props.layouts[e],s.LayoutItemType.Widget).some(function(e){return e===n.props.widgetId})&&(r=e)}),r&&n.props.widgets&&(o=d.getParentWidgetIdOfWidgetOrSection(u.getAppConfigAction().appConfig,n.props.widgetId,s.LayoutItemType.Widget,n.props.browserSizeMode)),o&&(i=n.props.widgets[o].useDataSources),i&&(a=i.some(function(e){return e.dataSourceId===t.dataSourceJson.id}));var l,c,f=n.props.widgets[n.props.widgetId],h=u.getAppConfigAction();p.getWhetherDsInUseDataSources(t,f.useDataSources)?l=f.useDataSources:(c=p.getSingleUsedDs(t,a,o),l=f.useDataSources&&n.props.isMultiple?s.Immutable(f.useDataSources.concat(c)):s.Immutable([c])),h.editSubWidgetsInheritProperty(f.id,"useDataSources",l,"dataSourceId",f.useDataSources),h.editSubWidgetsProperty(f.id,"useDataSourcesEnabled",!0),h.editWidget(f.set("useDataSources",l)).exec(),n.props.onSelect&&n.props.onSelect(e,t)},n.onRemove=function(e,t){var r=n.props.widgets[n.props.widgetId],o=u.getAppConfigAction(),i=s.Immutable(r.useDataSources.filter(function(e){return e.dataSourceId!==t.dataSourceJson.id}));o.editSubWidgetsInheritProperty(r.id,"useDataSources",i,"dataSourceId",r.useDataSources),o.editSubWidgetsProperty(r.id,"useDataSourcesEnabled",!1),o.editWidget(r.set("useDataSources",i)).exec(),n.props.onRemove&&n.props.onRemove(e,t)},n}return r(t,e),t.prototype.componentDidMount=function(){this.props.mustUseDataSource&&this.toggleDataUse(!!this.props.mustUseDataSource)},t.prototype.render=function(){var e=this;if(!this.props.widgetId||!this.props.widgets||!this.props.layouts)return null;if(!this.props.widgets[this.props.widgetId])return console.error("can not find widget ",this.props.widgetId),null;var t=this.props,n=(t.onSelect,t.onRemove,a(t,["onSelect","onRemove"]));return s.jsx("div",{css:this.getStyle(this.props.theme),className:"w-100"},s.jsx("div",{className:"component-data-source-chooser"},!this.props.mustUseDataSource&&s.jsx("div",{className:"d-flex justify-content-between w-100 mb-3"},s.jsx("label",null,this.props.intl.formatMessage({id:"connectToData",defaultMessage:f.default.connectToData})),s.jsx(l.Switch,{checked:this.props.widgets[this.props.widgetId].useDataSourcesEnabled,onChange:function(){return e.toggleDataUse(!e.props.widgets[e.props.widgetId].useDataSourcesEnabled)}})),this.props.widgets[this.props.widgetId].useDataSourcesEnabled&&s.jsx(c.default,i({types:this.props.types},n,{onSelect:this.onSelect,onRemove:this.onRemove,intl:this.props.intl}))))},t}(s.React.PureComponent);t._DataSourceChooser=h;var g,m=s.injectIntl(s.themeUtils.withTheme(h));t.default=s.ReactRedux.connect(function(e){var t=window&&window.jimuConfig&&window.jimuConfig.isBuilder?e.appStateInBuilder&&e.appStateInBuilder.appConfig:e.appConfig;return{dataSources:t&&t.dataSources,layouts:t&&t.layouts,widgets:t&&t.widgets,browserSizeMode:e.browserSizeMode}})(m)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(2),s=n(382),l=n(421),u=n(14),c=n(4),p=function(e){function t(t){var n=e.call(this,t)||this;return n.panelWidth=""+i.polished.rem(260),n.defaultModalStyle={position:"absolute",top:"0",bottom:"0",right:"260px",left:"auto",width:n.panelWidth,height:"auto",zIndex:"3",borderRight:"1px solid "+n.props.theme.colors.white},n.__unmount=!1,n.dsManager=window&&window.jimuConfig&&window.jimuConfig.isBuilder?u.default.getInstance():i.DataSourceManager.getInstance(),n.initDss=function(){n.dsManager.createAllDataSources().then(function(e){n.__unmount||n.changeInitStatus(!0)},function(e){n.__unmount||(n.changeInitStatus(!0),n.setState({isErrorToastShown:!0},function(){setTimeout(function(){n.setState({isErrorToastShown:!1})},3e3)}),console.warn(e))})},n.changeInitStatus=function(e){n.setState({isDataSourceInited:e})},n.disableSelection=function(){if(n.props.disableSelection){var e=n.getDssWithRootId(n.props.selectedDataSourceIds);return n.props.disableSelection(e)}return!1},n.disableRemove=function(){if(n.props.disableRemove){var e=n.getDssWithRootId(n.props.selectedDataSourceIds);return n.props.disableRemove(e)}return!1},n.getDssWithRootId=function(e){var t=[];return e&&e.filter(function(e){return!!e}).forEach(function(e){var r=n.dsManager.getDataSource(e);r?t.push(r):t.push({dataSourceJson:i.Immutable({id:e})})}),t.filter(function(e){return!!e&&!!e.dataSourceJson}).map(function(e){return{dataSourceJson:e.dataSourceJson}})},n.getModalStyle=function(){return n.props.modalStyle?o({},n.defaultModalStyle,n.props.modalStyle):n.defaultModalStyle},n.getDsLabel=function(e){var t=n.getDssWithRootId([e])[0];return t&&t.dataSourceJson&&(t.dataSourceJson.label||t.dataSourceJson.id)||"None"},n.onDsListClose=function(){n.setState({isDsListShown:!1})},n.onDsSelected=function(e){var t;e&&e.dataSourceJson&&(t=n.props.selectedDataSourceIds&&n.props.isMultiple?n.getDssWithRootId(n.props.selectedDataSourceIds).concat(e):[e],n.props.onSelect&&n.props.onSelect(t,e))},n.onDsRemoved=function(e){if(e&&e.dataSourceJson&&n.props.selectedDataSourceIds){var t=n.getDssWithRootId(n.props.selectedDataSourceIds.filter(function(t){return t!==e.dataSourceJson.id}));n.props.onRemove&&n.props.onRemove(t,e)}},n.toggleDsList=function(){n.setState({isDsListShown:!n.state.isDsListShown})},n.modalStyle=n.getModalStyle(),n.state={isDsListShown:!1,isDataSourceInited:!1,isErrorToastShown:!1},n}return r(t,e),t.prototype.componentDidMount=function(){this.__unmount=!1,this.state.isDataSourceInited||this.initDss()},t.prototype.componentDidUpdate=function(e){this.props.dataSources!==e.dataSources&&(this.__unmount||this.changeInitStatus(!1)),this.state.isDataSourceInited||this.initDss()},t.prototype.componentWillUnmount=function(){this.__unmount=!0},t.prototype.render=function(){var e=this;return i.React.createElement("div",{className:"w-100"},i.React.createElement(a.Button,{className:"btn btn-primary text-truncate ds-chooser-button w-100 mt-0",color:"primary",onClick:this.toggleDsList},this.props.intl.formatMessage({id:"setDataSource",defaultMessage:c.default.setDataSource})),this.props.isMultiple?this.getDssWithRootId(this.props.selectedDataSourceIds).map(function(t,n){return t&&t.dataSourceJson&&t.dataSourceJson.id?i.React.createElement(l.default,{key:n,dsJsonWithRootId:t,onRemove:e.onDsRemoved,disableRemove:e.disableRemove(),theme:e.props.theme}):null}):i.React.createElement("div",{className:"mt-2 text-truncate ds-chooser-selected-item ds-chooser-label",title:this.getDsLabel(this.props.selectedDataSourceIds&&this.props.selectedDataSourceIds[0])},this.getDsLabel(this.props.selectedDataSourceIds&&this.props.selectedDataSourceIds[0])),this.state.isDsListShown&&!i.urlUtils.getAppIdPageIdFromUrl().pageId&&document&&document.getElementById("default")?i.ReactDOM.createPortal(i.React.createElement("div",{className:"bg-gray-100 component-data-source-chooser-data-source-list-popup",style:this.modalStyle},i.React.createElement(s.default,{types:this.props.types,onSelect:this.onDsSelected,changeInitStatus:this.changeInitStatus,onClose:this.onDsListClose,isMultiple:this.props.isMultiple,onRemove:this.onDsRemoved,selectedDsIds:this.props.selectedDataSourceIds,isDataSourceInited:this.state.isDataSourceInited,disableSelection:this.disableSelection(),disableRemove:this.disableRemove()})),document.getElementById("default")):null,this.state.isErrorToastShown?i.React.createElement(a.Toast,{type:a.ToastType.Error,text:this.props.intl.formatMessage({id:"creatingDataSourceFailed",defaultMessage:c.default.creatingDataSourceFailed})}):null)},t}(i.React.PureComponent);t.default=p},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(415),a=n(418),s=n(14),l=n(60),u=n(4),c=function(e){function t(t){var n=e.call(this,t)||this;return n.__unmount=!1,n.initData=function(){n.setSelectedType(null),n.setToUseDataSources(n.props.types),n.setDataSources()},n.setHasErrorDss=function(e){return n.setState({hasErrorSelectedDss:e})},n.setToUseDataSources=function(e){var t=n.getToUseRootDss(e);n.getToUseChildDss(e).then(function(e){n.__unmount||n.setState({toUseRootDss:t,toUseChildDss:e})})},n.setDataSources=function(){var e=n.getToUseRootDss(n.props.types);n.getToUseChildDss(n.props.types).then(function(t){n.__unmount||n.setState({rootDss:e,childDss:t})})},n.setSelectedType=function(e){n.setState({selectedTypes:e})},n.getRootDss=function(){return s.default.getInstance().getConfiguredDataSources().filter(function(e){return e&&e.id&&e.dataSourceJson&&!e.parentDataSource})},n.getToUseRootDss=function(e){return s.default.getInstance().getConfiguredDataSources().filter(function(t){return!t.parentDataSource&&t.dataSourceJson&&l.getWhetherUseDataSource(t.dataSourceJson,e)})},n.getToUseChildDss=function(e){return l.getToUseChildDss(n.getRootDss(),e)},n.getConfiguredTypes=function(){var e=[];return n.state.childDss||n.state.rootDss?(n.state.rootDss&&n.state.rootDss.forEach(function(t){t&&t.type&&e.push(t.type)}),n.state.childDss&&Object.keys(n.state.childDss).forEach(function(t){n.state.childDss[t].forEach(function(t){t&&t.type&&e.push(t.type)})}),Array.from(new Set(e))):e},n.getWhetherShowList=function(){return n.getWhetherShowRootDss()||n.getWhetherShowChildDss()||!(!n.state.hasErrorSelectedDss||!n.props.selectedDsIds)},n.getWhetherShowRootDss=function(){return n.state.toUseRootDss&&n.state.toUseRootDss.length>0},n.getWhetherShowChildDss=function(){return n.state.toUseChildDss&&Object.keys(n.state.toUseChildDss).length>0},n.state={selectedTypes:null,toUseRootDss:null,toUseChildDss:null,rootDss:null,childDss:null,hasErrorSelectedDss:!0},n}return r(t,e),t.prototype.componentDidMount=function(){this.__unmount=!1,this.props.isDataSourceInited&&this.initData()},t.prototype.componentDidUpdate=function(e,t){this.props.isDataSourceInited&&(t.selectedTypes!==this.state.selectedTypes&&(this.state.selectedTypes?this.setToUseDataSources(this.state.selectedTypes):this.setToUseDataSources(this.props.types)),e.types===this.props.types&&!1!==e.isDataSourceInited||this.initData())},t.prototype.componentWillUnmount=function(){this.__unmount=!0},t.prototype.render=function(){return this.state.toUseChildDss&&this.state.toUseRootDss?o.React.createElement("div",{className:"ds-added-data"},this.props.types&&this.props.types.length>0?o.React.createElement("div",{className:"mt-2"},o.React.createElement("div",{className:"ds-types"},o.React.createElement(a.default,{toUseTypes:this.props.types.asMutable(),onTypeSelected:this.setSelectedType,selectedTypes:this.state.selectedTypes,intl:this.props.intl})),this.getWhetherShowList()?o.React.createElement(i.default,{toUseRootDss:this.state.toUseRootDss,toUseChildDss:this.state.toUseChildDss,rootDss:this.getRootDss(),onSelect:this.props.onSelect,onRemove:this.props.onRemove,selectedDsIds:this.props.selectedDsIds,showErrorDss:!0,disableRemove:this.props.disableRemove,disableSelection:this.props.disableSelection,changeHasErrorSelectedDss:this.setHasErrorDss,intl:this.props.intl}):this.props.intl.formatMessage({id:"noAddedDataSourceCanBeUsed",defaultMessage:u.default.noAddedDataSourceCanBeUsed})):this.props.intl.formatMessage({id:"noSelectedType",defaultMessage:u.default.noSelectedType})):null},t}(o.React.PureComponent);t.default=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(383),a=n(416),s=n(417),l=n(60),u=function(e){function t(t){var n=e.call(this,t)||this;return n.getWhetherShowRootDss=function(){return n.props.toUseRootDss&&n.props.toUseRootDss.length>0},n.getWhetherShowChildDss=function(){return n.props.toUseChildDss&&Object.keys(n.props.toUseChildDss).length>0},n.getRootDsById=function(e){return n.props.rootDss.find(function(t){return t.id===e})},n.getSelectedErrorDss=function(){return n.props.selectedDsIds?n.props.selectedDsIds.filter(function(e){var t=n.props.toUseRootDss&&n.props.toUseRootDss.some(function(t){return t.id===e}),r=n.props.toUseChildDss&&Object.keys(n.props.toUseChildDss).some(function(t){return n.props.toUseChildDss[t].some(function(t){return t.id===e})});return!t&&!r}):null},n.state={isTypeDropdownOpen:!1,selectedErrorDss:null},n}return r(t,e),t.prototype.componentDidMount=function(){if(this.props.showErrorDss){var e=this.getSelectedErrorDss();this.setState({selectedErrorDss:e}),e&&e.length>0?this.props.changeHasErrorSelectedDss&&this.props.changeHasErrorSelectedDss(!0):this.props.changeHasErrorSelectedDss&&this.props.changeHasErrorSelectedDss(!1)}},t.prototype.componentDidUpdate=function(e){if(this.props.showErrorDss&&(!this.state.selectedErrorDss||0===this.state.selectedErrorDss.length)&&(!e.selectedDsIds||0===e.selectedDsIds.length)&&this.props.selectedDsIds&&0!==this.props.selectedDsIds.length){var t=this.getSelectedErrorDss();this.setState({selectedErrorDss:t}),t&&t.length>0?this.props.changeHasErrorSelectedDss&&this.props.changeHasErrorSelectedDss(!0):this.props.changeHasErrorSelectedDss&&this.props.changeHasErrorSelectedDss(!1)}},t.prototype.render=function(){var e=this;return o.React.createElement("div",null,this.props.showErrorDss&&this.state.selectedErrorDss&&this.state.selectedErrorDss.map(function(t){return o.React.createElement(a.default,{selectedDsIds:e.props.selectedDsIds,dsId:t,onRemove:e.props.onRemove,key:t,onSelect:e.props.onSelect,disableSelection:e.props.disableSelection,disableRemove:e.props.disableRemove,intl:e.props.intl})}),this.getWhetherShowRootDss()?o.React.createElement("div",{className:"mb-2"},l.getSortedArrayByLabel(this.props.toUseRootDss).map(function(t){return t&&t.id?o.React.createElement(i.default,{selectedDsIds:e.props.selectedDsIds,ds:t,onRemove:e.props.onRemove,key:t.id,dispatch:o.getAppStore().dispatch,onSelect:e.props.onSelect,disableSelection:e.props.disableSelection,disableRemove:e.props.disableRemove,intl:e.props.intl}):null})):null,this.getWhetherShowChildDss()?o.React.createElement("div",{className:"mb-2"},o.React.createElement("div",{className:"mt-2"}),l.getSortedKeys(this.props.toUseChildDss).map(function(t){return o.React.createElement("div",{key:t,className:"mb-3"},o.React.createElement(s.default,{rootDs:e.getRootDsById(t),childDss:e.props.toUseChildDss[t],selectedDsIds:e.props.selectedDsIds,onSelect:e.props.onSelect,onRemove:e.props.onRemove,intl:e.props.intl,disableSelection:e.props.disableSelection,disableRemove:e.props.disableRemove}))})):null)},t}(o.React.PureComponent);t.default=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(60),s=function(e){function t(t){var n=e.call(this,t)||this;return n.getWhetherSelected=function(){return n.props.selectedDsIds&&n.props.selectedDsIds.some(function(e){return e===n.props.dsId})},n.getDsJsonWithRootId=function(){var e=o.getAppStore()&&o.getAppStore().getState(),t=e&&e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.dataSources;return{dataSourceJson:t&&t[n.props.dsId]||o.Immutable({id:n.props.dsId})}},n.onItemClick=function(e){if(n.getWhetherSelected()){if(n.props.disableRemove)return;n.props.onRemove&&n.props.onRemove(n.getDsJsonWithRootId())}else{if(n.props.disableSelection)return;n.props.onSelect&&n.props.onSelect(n.getDsJsonWithRootId())}},n.state={subDataSources:null},n}return r(t,e),t.prototype.render=function(){if(!this.props.dsId)return null;var e=this.getDsJsonWithRootId(),t=e&&e.dataSourceJson;return o.React.createElement("div",{onClick:this.onItemClick,className:o.classNames("ds-items ds-error-items",{"selected-item":this.getWhetherSelected()})},o.React.createElement("div",{className:o.classNames("ds-items-border",{"border-transparent":this.getWhetherSelected()})},t&&o.React.createElement("div",{className:"mb-2 d-flex justify-content-between ds-items-type"},o.React.createElement("div",{className:"flex-grow-1 text-truncate ds-items-type-name"},a.getDsTypeString(t.type,this.props.intl))),o.React.createElement("div",{className:"d-flex align-items-center pr-2"},o.React.createElement("div",{className:"d-flex align-items-center justify-content-center mr-1 flex-shrink-0 ds-items-label-icon"},o.React.createElement(i.Icon,{icon:a.getDsIcon(t),size:"20"})),o.React.createElement("div",{className:"d-flex"},o.React.createElement("div",{className:"flex-shrink-0 ml-1 mr-1 two-line-truncate ds-items-label-name",title:t&&t.label||this.props.dsId},t&&t.label||this.props.dsId)))))},t}(o.React.PureComponent);t.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(383),s=n(60),l=n(118),u=n(119),c=function(e){function t(t){var n=e.call(this,t)||this;return n.toggleChildDss=function(){n.setState({isChildDssOpen:!n.state.isChildDssOpen})},n.state={isChildDssOpen:!0},n}return r(t,e),t.prototype.render=function(){var e=this;return this.props.rootDs&&this.props.childDss&&0!==this.props.childDss.length?o.React.createElement("div",null,o.React.createElement("div",{className:"d-flex pl-2 pr-2 pb-1 justify-content-between"},o.React.createElement("h5",{className:"text-truncate w-75",title:this.props.rootDs.label},this.props.rootDs.label),o.React.createElement("div",{onClick:this.toggleChildDss,className:"mb-1 ds-collapse-btn w-25 d-flex justify-content-end"},o.React.createElement(i.Icon,{icon:this.state.isChildDssOpen?u:l,size:"14"}))),o.React.createElement(i.Collapse,{isOpen:this.state.isChildDssOpen},s.getSortedArrayByLabel(this.props.childDss).map(function(t){return t&&t.id?o.React.createElement(a.default,{selectedDsIds:e.props.selectedDsIds,ds:t,onRemove:e.props.onRemove,key:t.id,dispatch:o.getAppStore().dispatch,onSelect:e.props.onSelect,intl:e.props.intl,disableSelection:e.props.disableSelection,disableRemove:e.props.disableRemove}):null}))):null},t}(o.React.PureComponent);t.default=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(60),s=n(59),l=n(4),u=function(e){function t(t){var n=e.call(this,t)||this;return n.__unmount=!1,n.getWhetherdisableSelectionType=function(e){return e.length<=1},n.onTypeSelected=function(e){var t,r=e.target.value;"All"===r?t=null:r===s.AllDataSourceTypes.FeatureLayer||r===s.AllDataSourceTypes.FeatureQuery?(t=[r],n.props.toUseTypes.some(function(e){return e===s.AllDataSourceTypes.FeatureLayer})&&n.props.toUseTypes.some(function(e){return e===s.AllDataSourceTypes.FeatureQuery})&&(t=[s.AllDataSourceTypes.FeatureLayer,s.AllDataSourceTypes.FeatureQuery])):t=[r],n.props.onTypeSelected(t)},n}return r(t,e),t.prototype.render=function(){var e=this,t=this.props.toUseTypes||[];return t.some(function(e){return e===s.AllDataSourceTypes.FeatureLayer})&&t.some(function(e){return e===s.AllDataSourceTypes.FeatureQuery})&&(t=t.filter(function(e){return e!==s.AllDataSourceTypes.FeatureLayer})),o.React.createElement("div",{className:"d-flex justify-content-between mb-3 to-use-types"},o.React.createElement("div",{className:"mr-2"},this.props.intl.formatMessage({id:"type",defaultMessage:l.default.type})),this.getWhetherdisableSelectionType(t)?o.React.createElement("div",{className:"types-selected text-truncate mr-1",title:a.getDsTypeString(t[0],this.props.intl)},a.getDsTypeString(t[0],this.props.intl)):o.React.createElement(i.Input,{type:"select",value:this.props.selectedTypes&&this.props.selectedTypes[0]||"All",onChange:this.onTypeSelected,className:"flex-shrink-0 text-truncate to-use-dp"},a.getSortedLabels(t).map(function(t){return o.React.createElement("option",{value:t,key:t},a.getDsTypeString(t,e.props.intl))}),t&&t.length>1&&o.React.createElement("option",{value:"All"},this.props.intl.formatMessage({id:"all",defaultMessage:l.default.all}))))},t}(o.React.PureComponent);t.default=u},function(e,t,n){"use strict";var r=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1);t.getStyle=function(e){return i.css(o||(o=r(["\n    .component-data-source-list{\n      width: 100%;\n      height: 100%;\n      font-size: ",";\n      overflow: hidden;\n\n      .tab-pane{\n        width: 100%;\n      }\n\n      .ds-list-header{\n        width: 100%;\n        height: ",";\n        line-height: ",";\n        padding: 0 "," 0 ",";\n        border-bottom: "," solid ",";\n      }\n\n      .ds-list-tabs{\n        height: calc(100% - ",");\n        overflow-y: auto;\n        overflow-x: hidden;\n      }\n\n      .ds-add-data{\n        position: absolute;\n        bottom: ",";\n        .add-data{\n          height: ",";\n          line-height: ",";\n          width: 228px;\n          padding: 0;\n        }\n      }\n\n      .ds-list-close{\n        width: ",";\n        height: 100%;\n        cursor: pointer;\n      }\n\n      .ds-widget-back{\n        width: ",";\n        height: ",";\n        cursor: pointer;\n      }\n\n      .ds-types{\n        color: ",";\n        font-size: ",";\n        margin: "," 0;\n      }\n\n      .ds-widget-outputs{\n        padding: 0 ",";\n        .ds-widget-item{\n          border: "," solid ",";\n          background-color: ",";\n          padding: ",";\n          width: ",";\n          height: ",";\n          cursor: pointer;\n          .ds-widget-item-icon{\n            width: ",";\n            height: ",";\n            border: "," solid ",";\n            margin-right: ",";\n          }\n          .ds-widget-item-label{\n            max-width: ",";\n          }\n        }\n      }\n\n      .ds-added-data{\n        padding: 0 ",";\n      }\n\n      .ds-items.ds-error-items{\n        user-select: none;\n        .ds-items-border{\n          background-color: ",";\n          color: ",";\n          .ds-items-label-icon{\n            background-color: ",";\n          }\n          .jimu-icon{\n            color: ",";\n          }\n        }\n      }\n\n      .ds-items{\n        border: "," solid transparent;\n        width: ",";\n        height: ",";\n        padding: 0;\n        margin-bottom: ",";\n        cursor: pointer;\n        .two-line-truncate{\n          overflow: hidden;\n          text-overflow: ellipsis;\n          display: -webkit-box;\n          -webkit-line-clamp: 2;\n          -webkit-box-orient: vertical;\n          word-break: break-all;\n          word-wrap: break-word;\n        }\n        .ds-items-border{\n          border: "," solid ",";\n          background-color: ",";\n          width: ",";\n          height: ",";\n          padding: ",";\n          font-size: ",";\n        }\n        .border-transparent{\n          border: "," solid transparent;\n        }\n        .ds-items-label-name{\n          max-width: ",";\n          font-size: ",";\n        }\n        .ds-items-type{\n          .ds-items-type-name{\n            max-width: ",";\n            color: ",";\n          }\n        }\n        .ds-items-label-icon{\n          width: ",";\n          height: ",";\n          background-color: ",";\n          border-radius: ",";\n        }\n      }\n\n      .to-use-types{\n        color: ",";\n        .types-selected{\n          max-width: ",";\n        }\n        .to-use-dp{\n          width: ",";\n          height: ",";\n        }\n      }\n\n      .selected-item{\n        border: "," solid ",";\n      }\n\n      .ds-collapse-btn{\n        cursor: pointer;\n        .jimu-icon{\n          vertical-align: top;\n        }\n      }\n    }\n\n  "],["\n    .component-data-source-list{\n      width: 100%;\n      height: 100%;\n      font-size: ",";\n      overflow: hidden;\n\n      .tab-pane{\n        width: 100%;\n      }\n\n      .ds-list-header{\n        width: 100%;\n        height: ",";\n        line-height: ",";\n        padding: 0 "," 0 ",";\n        border-bottom: "," solid ",";\n      }\n\n      .ds-list-tabs{\n        height: calc(100% - ",");\n        overflow-y: auto;\n        overflow-x: hidden;\n      }\n\n      .ds-add-data{\n        position: absolute;\n        bottom: ",";\n        .add-data{\n          height: ",";\n          line-height: ",";\n          width: 228px;\n          padding: 0;\n        }\n      }\n\n      .ds-list-close{\n        width: ",";\n        height: 100%;\n        cursor: pointer;\n      }\n\n      .ds-widget-back{\n        width: ",";\n        height: ",";\n        cursor: pointer;\n      }\n\n      .ds-types{\n        color: ",";\n        font-size: ",";\n        margin: "," 0;\n      }\n\n      .ds-widget-outputs{\n        padding: 0 ",";\n        .ds-widget-item{\n          border: "," solid ",";\n          background-color: ",";\n          padding: ",";\n          width: ",";\n          height: ",";\n          cursor: pointer;\n          .ds-widget-item-icon{\n            width: ",";\n            height: ",";\n            border: "," solid ",";\n            margin-right: ",";\n          }\n          .ds-widget-item-label{\n            max-width: ",";\n          }\n        }\n      }\n\n      .ds-added-data{\n        padding: 0 ",";\n      }\n\n      .ds-items.ds-error-items{\n        user-select: none;\n        .ds-items-border{\n          background-color: ",";\n          color: ",";\n          .ds-items-label-icon{\n            background-color: ",";\n          }\n          .jimu-icon{\n            color: ",";\n          }\n        }\n      }\n\n      .ds-items{\n        border: "," solid transparent;\n        width: ",";\n        height: ",";\n        padding: 0;\n        margin-bottom: ",";\n        cursor: pointer;\n        .two-line-truncate{\n          overflow: hidden;\n          text-overflow: ellipsis;\n          display: -webkit-box;\n          -webkit-line-clamp: 2;\n          -webkit-box-orient: vertical;\n          word-break: break-all;\n          word-wrap: break-word;\n        }\n        .ds-items-border{\n          border: "," solid ",";\n          background-color: ",";\n          width: ",";\n          height: ",";\n          padding: ",";\n          font-size: ",";\n        }\n        .border-transparent{\n          border: "," solid transparent;\n        }\n        .ds-items-label-name{\n          max-width: ",";\n          font-size: ",";\n        }\n        .ds-items-type{\n          .ds-items-type-name{\n            max-width: ",";\n            color: ",";\n          }\n        }\n        .ds-items-label-icon{\n          width: ",";\n          height: ",";\n          background-color: ",";\n          border-radius: ",";\n        }\n      }\n\n      .to-use-types{\n        color: ",";\n        .types-selected{\n          max-width: ",";\n        }\n        .to-use-dp{\n          width: ",";\n          height: ",";\n        }\n      }\n\n      .selected-item{\n        border: "," solid ",";\n      }\n\n      .ds-collapse-btn{\n        cursor: pointer;\n        .jimu-icon{\n          vertical-align: top;\n        }\n      }\n    }\n\n  "])),e.typography.fontSizeBase,i.polished.rem(51),i.polished.rem(41),i.polished.rem(5),i.polished.rem(10),i.polished.rem(1),e.colors.grays.gray300,i.polished.rem(100),i.polished.rem(16),i.polished.rem(30),i.polished.rem(30),i.polished.rem(30),i.polished.rem(80),i.polished.rem(30),e.colors.black,e.typography.fontSizeBase,i.polished.rem(6),i.polished.rem(16),i.polished.rem(1),e.colors.grays.gray300,e.colors.secondary,i.polished.rem(10),i.polished.rem(228),i.polished.rem(50),i.polished.rem(30),i.polished.rem(30),i.polished.rem(1),e.colors.grays.gray300,i.polished.rem(6),i.polished.rem(130),i.polished.rem(16),i.polished.rgba(e.colors.secondary,.4),e.colors.grays.gray600,e.colors.grays.gray300,e.colors.grays.gray600,i.polished.rem(2),i.polished.rem(228),i.polished.rem(82),i.polished.rem(12),i.polished.rem(1),e.colors.grays.gray300,e.colors.secondary,i.polished.rem(224),i.polished.rem(78),i.polished.rem(6),i.polished.rem(12),i.polished.rem(1),i.polished.rem(160),i.polished.rem(13),i.polished.rem(180),e.colors.grays.gray700,i.polished.rem(36),i.polished.rem(36),e.colors.blues.blue200,i.polished.rem(2),e.colors.black,i.polished.rem(150),i.polished.rem(120),i.polished.rem(26),i.polished.rem(2),e.colors.cyan)}},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M5.5 5.5v-5a.5.5 0 0 1 1 0v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5z",fill:"currentColor",fillRule:"nonzero"});function a(e){return o.createElement("svg",r({width:12,height:12,viewBox:"0 0 12 12"},e),i)}e.exports=a,a.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(2),l=n(26),u=function(e){function t(t){var n=e.call(this,t)||this;return n.getStyle=function(e){return a.css(i||(i=o(["\n      .ds-item{\n        height: ","rem;\n        line-height: ","rem;\n        padding: 0 ","rem;\n        margin-top: ","rem;\n        border-radius: ","rem;\n        border: ","rem solid ",";\n\n        .ds-item-close{\n          height: 100%;\n          cursor: pointer;\n        }\n      }\n    "],["\n      .ds-item{\n        height: ","rem;\n        line-height: ","rem;\n        padding: 0 ","rem;\n        margin-top: ","rem;\n        border-radius: ","rem;\n        border: ","rem solid ",";\n\n        .ds-item-close{\n          height: 100%;\n          cursor: pointer;\n        }\n      }\n    "])),2.5,2.5,5/14,8/14,2/14,1/14,e.colors.grays.gray300)},n.onRemove=function(){n.props.disableRemove||n.props.onRemove(n.props.dsJsonWithRootId)},n}return r(t,e),t.prototype.render=function(){return this.props.dsJsonWithRootId&&this.props.dsJsonWithRootId.dataSourceJson?a.jsx("div",{css:this.getStyle(this.props.theme),className:"w-100"},a.jsx("div",{className:"d-flex justify-content-between ds-item ds-chooser-selected-item"},a.jsx("div",{className:"text-truncate mr-1",title:this.props.dsJsonWithRootId.dataSourceJson.label||this.props.dsJsonWithRootId.dataSourceJson.id},this.props.dsJsonWithRootId.dataSourceJson.label||this.props.dsJsonWithRootId.dataSourceJson.id),a.jsx("div",{onClick:this.onRemove,className:"ds-item-close d-flex align-items-center"},a.jsx(s.Icon,{icon:l})))):null},t}(a.React.PureComponent);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);function o(e,t,n){if(!e||!e.dataSourceJson)return null;var o=r.Immutable({dataSourceId:e.dataSourceJson.id,isInherited:t});return t&&(o=o.set("inheritFromWidgetId",n)),e.rootDataSourceId&&(o=o.set("rootDataSourceId",e.rootDataSourceId)),o}t.getWhetherDsInUseDataSources=function(e,t){return!!(e&&e.dataSourceJson&&t)&&t.some(function(t){return t.dataSourceId===e.dataSourceJson.id})},t.getMergedSingleUsedDs=function(e,t,n,r){return e&&e.dataSourceJson&&t?t.merge(o(e,n,r)):null},t.getSingleUsedDs=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(65),s=n(2),l=n(4),u=n(26),c=function(e){function t(t){var n=e.call(this,t)||this;return n.style={overflow:"hidden",height:"51px"},n.fontSizeStyle={fontSize:"16px"},n.cursorStyle={cursor:"pointer"},n.closeDialog=function(){n.props.onSettingCancel()},n}return r(t,e),t.prototype.render=function(){var e=this.props.pisition||"left",t={position:"absolute",top:"0",bottom:"0",right:"260px",left:"auto",width:""+i.polished.rem(260),height:"auto",zIndex:"3",padding:"0",border:"0",borderRadius:"0",borderRight:"1px solid "+this.props.theme.colors.white};"right"===e&&(t.right="auto",t.left="260px",t.borderRight="0",t.borderLeft="1px solid "+this.props.theme.colors.white);var n=this.props.title;return document&&document.getElementById("default")&&i.ReactDOM.createPortal(i.React.createElement("div",{className:"h-100",style:t},i.React.createElement("div",{className:"bg-gray-100 w-100 h-100"},i.React.createElement("div",{className:"w-100 pt-2 pb-2",style:this.style},i.React.createElement("div",{className:"float-left pt-2 pl-4",style:o({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"calc(100% - 40px)"},this.fontSizeStyle)},this.props.intl.formatMessage({id:n?"setLinkForTitle":"setLink",defaultMessage:n?l.default.setLinkForTitle:l.default.setLink},{title:n})),i.React.createElement("div",{className:"float-right mr-2 px-2 pt-1",onClick:this.closeDialog,style:this.cursorStyle},i.React.createElement(s.Icon,{icon:u}))),i.React.createElement("div",{className:"w-100 h-100 pl-4 pr-4 pt-2",style:{overflowY:"auto"}},i.React.createElement("div",null,i.React.createElement(a.default,{isLinkPageSetting:this.props.isLinkPageSetting,linkParam:this.props.linkParam,onSettingConfirm:this.props.onSettingConfirm,okButtonBottom:"-2rem",dataSourceIds:this.props.dataSourceIds,selectAreaMaxHeight:"500px"}),i.React.createElement("div",{style:{height:"100px"}}))))),document.getElementById("default"))},t}(i.React.PureComponent);t.default=i.themeUtils.withTheme(i.injectIntl(c))},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(132),a=n(57),s=n(116),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isSupportKeyboard=function(){var e=!1;return window.jimuConfig.isBuilder&&"home"!==t.props.currentPageId&&"template"!==t.props.currentPageId?e=!0:e},t.switchAppMode=function(){o.lodash.getValue(o.getAppStore().getState().appStateInBuilder,"appRuntimeInfo.appMode")===o.AppMode.Run?i.publishAppModeChangeToApp(o.AppMode.Design):i.publishAppModeChangeToApp(o.AppMode.Run)},t.undo=function(){t.props.stateHistory.past.length<=1||o.getAppStore().dispatch(s.appStateHistoryActions.InBuilderAppConfigUndo())},t.redo=function(){t.props.stateHistory.future.length<=0||o.getAppStore().dispatch(s.appStateHistoryActions.InBuilderAppConfigRedo())},t.deleteSelectedItem=function(){if(o.lodash.getValue(o.getAppStore().getState().appStateInBuilder,"appRuntimeInfo.appMode")===o.AppMode.Design){var e=o.lodash.getValue(o.getAppStore().getState().appStateInBuilder,"appRuntimeInfo.selection");if(e){var t=a.getAppConfigAction(),n=o.lodash.getValue(t.appConfig,"layouts."+e.layoutId+".content."+e.layoutItemId);n&&n.type===o.LayoutItemType.Widget?t.removeWidget(n.widgetId,!0).exec():n&&n.type===o.LayoutItemType.Section&&t.removeSection(n.sectionId,!0).exec(),i.publishChangeSelectionToApp(null)}}},t.onKeyboardTrigger=function(e){-1===e.key.indexOf("-manual")&&i.publishKeyboardToApp(e)},t.isMac=function(){return/macintosh|mac os x/i.test(navigator.userAgent)},t}return r(t,e),t.prototype.render=function(){var e=this;return this.isMac()?this.isSupportKeyboard()?o.React.createElement(o.Keyboard,{onKeyboardTrigger:this.onKeyboardTrigger,bindings:{"shift+alt+keyx":function(){return e.switchAppMode()},"command+keyz":function(){return e.undo()},"command+shift+keyz":function(){return e.redo()},delete:function(){return e.deleteSelectedItem()}}}):null:this.isSupportKeyboard()?o.React.createElement(o.Keyboard,{onKeyboardTrigger:this.onKeyboardTrigger,bindings:{"shift+alt+keyx":function(){return e.switchAppMode()},"ctrl+keyz":function(){return e.undo()},"ctrl+shift+keyz":function(){return e.redo()},delete:function(){return e.deleteSelectedItem()}}}):null},t}(o.React.PureComponent);t.default=o.ReactRedux.connect(function(e){return{currentPageId:e.appRuntimeInfo.currentPageId,stateHistory:e.appStateHistory}})(l)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(2),a=n(62),s=function(e){function t(n){var r=e.call(this,n)||this;return r.state={showPicker:!1},t.count++,r.id="color-picker-"+t.count,r}return r(t,e),t.prototype.render=function(){var e=this,t=o.themeUtils.withStyles(i.Popover);return o.React.createElement("div",{className:"color-picker",style:{height:this.props.height,width:this.props.width}},o.React.createElement("div",{id:this.id,style:{height:"100%",width:"100%",background:this.props.color,cursor:"pointer"},onClick:function(){return e.setState({showPicker:!0})}}),o.React.createElement(t,{placement:"bottom",isOpen:this.state.showPicker,target:this.id,toggle:function(){return e.setState({showPicker:!e.state.showPicker})}},o.React.createElement(i.PopoverHeader,null,"Choose Color"),o.React.createElement(i.PopoverBody,null,o.React.createElement(a.SketchPicker,{color:this.props.color,onChange:this.props.onChange,onChangeComplete:this.props.onChangeComplete}))))},t.displayName="ColorPicker",t.count=0,t}(o.React.PureComponent);t.default=s},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(427)),r(n(384)),r(n(429))},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}l((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var s,l=n(1),u=n(384),c=n(4),p=n(2),d=function(e){function t(t){var n=e.call(this,t)||this;return n.handleThemeChange=function(e){n.props.isCustomizationInprogress&&console.log("TODO: ask user to confirm to change"),n.props.onThemeChange&&(n.props.auto?n._changeThemeInfo(e).then(function(t){n.props.onThemeChange(""+n.themeManager.themesPath+e,t)}):n.props.onThemeChange(""+n.themeManager.themesPath+e))},n.handleCustomize=function(){n.props.onThemeCustomize&&n._changeThemeInfo(n.state.selectedTheme).then(function(e){n.props.onThemeCustomize(e)})},n.changeThemeInfo=function(e){var t=l.themeUtils.getThemeNameFromPath(e);t&&(n.setState({selectedTheme:t}),t&&n._changeThemeInfo(t).then(function(e){n.props.onThemeChange(""+n.themeManager.themesPath+t,e)}))},n.getStyle=function(){return l.css(s||(s=o(["\n      .jimu-builder-theme-editor--inner {\n        opacity: 0;\n        transition: opacity .3s ease-in;\n      }\n      .fade-out {\n        opacity: 0;\n      }\n      .fade-in {\n        opacity: 1;\n      }\n    "],["\n      .jimu-builder-theme-editor--inner {\n        opacity: 0;\n        transition: opacity .3s ease-in;\n      }\n      .fade-out {\n        opacity: 0;\n      }\n      .fade-in {\n        opacity: 1;\n      }\n    "])))},n.themeManager=n.props.themeManager||l.ThemeManager.getInstance(),n.state={selectedTheme:l.themeUtils.getThemeNameFromPath(n.props.themeName),status:"ready",themeInfos:l.Immutable([])},n.themeManager.init(n.props.themeName).then(function(){n.themeManager.getThemeListInfo().then(function(e){n.setState({status:"loaded",themeInfos:e})})}),n}return r(t,e),t.prototype._changeThemeInfo=function(e){return i(this,void 0,void 0,function(){var t;return a(this,function(n){switch(n.label){case 0:return(e=l.themeUtils.getThemeNameFromPath(e))?[4,this.themeManager.getThemeInfo(e)]:[3,2];case 1:return t=n.sent(),[2,Promise.resolve(l.Immutable(t))];case 2:return[2,Promise.reject(new Error("No theme information was found."))]}})})},t.prototype.render=function(){var e=this.props,t=e.className,n=e.auto,r=e.theme,o=e.intl,i="loaded"!==this.state.status,a=l.classNames("jimu-builder-theme-editor",t,i&&"is-loading");return l.jsx("div",{className:a,css:this.getStyle()},l.jsx("div",{className:l.classNames("jimu-builder-theme-editor--inner",!i&&"fade-in")},l.jsx(u.ThemeChooser,{theme:r,themeListInfo:this.state.themeInfos,selectedTheme:this.state.selectedTheme,onChange:this.handleThemeChange,intl:o}),!n&&l.jsx(p.Button,{type:"button",className:"mt-3 w-100",onClick:this.handleCustomize},o?o.formatMessage({id:"customTheme",defaultMessage:c.default.customTheme}):"Custom Theme")))},t.prototype.componentDidUpdate=function(e){var t,n=this;(this.props.themeName!==e.themeName&&this.changeThemeInfo(this.props.themeName),this.props.isBuilder!==e.isBuilder)&&(this.props.isBuilder?(this.themeManager.setThemeFolderPath("builder/themes/"),t="dark"):(this.themeManager.setThemeFolderPath("themes/"),t="default"),this.themeManager.getThemeListInfo(!0).then(function(e){n.setState({status:"loaded",themeInfos:e,selectedTheme:t}),n.handleThemeChange(t)}))},t.prototype.componentDidMount=function(){this.props.auto&&this.changeThemeInfo(this.props.themeName)},t}(l.React.PureComponent);t._ThemeEditor=d,t.ThemeEditor=l.themeUtils.withTheme(d)},function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M16 32C7.163 32 0 24.837 0 16S7.163 0 16 0s16 7.163 16 16-7.163 16-16 16zm0-4c6.627 0 12-5.373 12-12S22.627 4 16 4 4 9.373 4 16s5.373 12 12 12zm0-17.333a2 2 0 1 1-.001-3.999A2 2 0 0 1 16 10.667zm0 2.666a2 2 0 0 1 2 2v8a2 2 0 1 1-4 0v-8a2 2 0 0 1 2-2z"});function a(e){return o.createElement("svg",r({width:32,height:32,viewBox:"0 0 32 32"},e),i)}e.exports=a,a.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=n(2),l=n(38),u=n(430),c=n(4),p=n(431),d=function(e){function t(t){var n=e.call(this,t)||this;return n.assignVarsToGroups=function(){var e={},t=a.themeUtils.getThemableVariables();return Object.keys(t).forEach(function(r){e.hasOwnProperty(r)||(e[r]={label:n.variableLabelMapping[r]||r,variables:[]}),Object.keys(t[r]).forEach(function(o){var i=t[r][o];i=Object.assign({name:o,label:n.variableLabelMapping[o]||o},i),e[r].variables.push(i)})}),e},n.createInputs=function(e){var t=e.variables,r=e.variables&&n.assignVarsToGroups();return r?Object.keys(r).map(function(o){return a.jsx(l.SettingSection,{key:o,title:r[o].label},r[o].variables.map(function(r){var o=a.lodash.getValue(t,r.variable);return a.jsx(u.CSSVarInput,{key:e.name+"-"+r.name+o,name:r.name,label:r.label,variable:r.variable,inputType:r.input,value:o,onInputChange:n.onInputChange})}))}):"No theme variables available."},n.onInputChange=function(e,t,r){if(n.props.onThemeUpdate){var o=a.Immutable({}).setIn(t.split("."),r),i=n.themeManager.addChangedThemeVariables(n.props.themeInfo.name,o);n.props.onThemeUpdate(i),n.setState({isDirty:!0})}},n.toggleUseSharedTheme=function(e){var t=e.target&&e.target.checked;n.setState({useSharedTheme:t})},n.convertSharedTheme=function(){if(n.props.sharedTheme){var e=n.props.sharedTheme,t="rgba(255,255,255, 0)",r={body:{bg:a.lodash.getValue(e,"body.background")||t,color:a.lodash.getValue(e,"body.text")||t},header:{bg:a.lodash.getValue(e,"header.background")||t,color:a.lodash.getValue(e,"header.text")||t},link:{color:a.lodash.getValue(e,"body.link")||t,hover:{color:a.lodash.getValue(e,"body.link")?a.polished.darken(.1,a.lodash.getValue(e,"body.link")):t}},components:{button:{color:a.lodash.getValue(e,"button.text")||t}},colors:{primary:a.lodash.getValue(e,"button.background")||t}};return a.Immutable(r)}return null},n.getLocaleString=function(e){return n.props.intl?n.props.intl.formatMessage({id:e,defaultMessage:c.default[e]}):null},n.isDirty=function(){return n.state.isDirty},n.state={themeInfo:null,isDirty:!1,useSharedTheme:!1},n.themeManager=n.props.themeManager||a.ThemeManager.getInstance(),n.variableLabelMapping={typography:n.getLocaleString("variableTypography"),bg:n.getLocaleString("variableBg"),color:n.getLocaleString("variableColor"),fontFamilyBase:n.getLocaleString("variableFontFamilyBase"),fontSizeBase:n.getLocaleString("variableFontSizeBase"),header:n.getLocaleString("variableHeader"),body:n.getLocaleString("variableBody"),link:n.getLocaleString("variableLink"),button:n.getLocaleString("variableButton")},n}return r(t,e),t.prototype.componentDidUpdate=function(e,t){var n,r=this;if(this.props.themeInfo&&(n=""+this.themeManager.themesPath+this.props.themeInfo.name),this.props.themeInfo!==e.themeInfo&&this.themeManager.loadThemeVariables(n).then(function(e){r.setState({themeInfo:a.Immutable({}).merge(r.props.themeInfo).merge({variables:e})})}),this.state.useSharedTheme!==t.useSharedTheme){var o=void 0;if(this.state.useSharedTheme?(this._customVariablesNoSharedTheme=this.state.themeInfo.variables,o=this.convertSharedTheme()):(o=this._customVariablesNoSharedTheme,this._customVariablesNoSharedTheme=null),this.props.onThemeUpdate){var i=this.themeManager.addChangedThemeVariables(this.props.themeInfo.name,o);this.props.onThemeUpdate(i)}this.themeManager.updateCustomTheme(n,o),this.themeManager.loadThemeVariables(n).then(function(e){r.setState({themeInfo:r.state.themeInfo.set("variables",e),isDirty:!0})})}},t.prototype.render=function(){var e=this.props,t=e.className,n=e.sharedTheme,r=e.theme,i=e.showLoading,u=a.classNames("jimu-builder-theme-configurator","input-sections","d-flex flex-column",t);return a.jsx("div",{className:u,css:function(e){return b(e)}},n&&a.jsx(l.SettingSection,{css:a.css(f||(f=o([".split-line{ display: block !important; }"],[".split-line{ display: block !important; }"])))},a.jsx(l.SettingRow,{label:this.getLocaleString("useSharedTheme")||"Use Shared Theme"},a.jsx(s.Switch,{onChange:this.toggleUseSharedTheme}))),a.jsx("div",{className:"flex-grow-1"},this.state.themeInfo?this.createInputs(this.state.themeInfo):i?x({title:this.getLocaleString("loading")||"Loading",theme:r}):""))},t}(a.React.PureComponent);t.ThemeConfigurator=a.themeUtils.withTheme(d);var f,h,g,m,y,v,b=function(e){return a.css(h||(h=o(["\n    &.input-sections {\n      select {\n        max-width: 120px;\n      }\n      .color-picker {\n        min-width: 40px;\n        height: 20px;\n        border: 1px solid ",";\n        box-sizing: border-box;\n      }\n    }\n    .jimu-loading {\n      opacity: 0.1;\n    }\n  "],["\n    &.input-sections {\n      select {\n        max-width: 120px;\n      }\n      .color-picker {\n        min-width: 40px;\n        height: 20px;\n        border: 1px solid ",";\n        box-sizing: border-box;\n      }\n    }\n    .jimu-loading {\n      opacity: 0.1;\n    }\n  "])),a.polished.rgba(e.colors.black,.25))},x=function(e){var t=p.keyframes(y||(y=o(["\n    0% {\n        background-position: -1200px 0\n    }\n\n    100% {\n        background-position: 1200px 0\n    }\n  "],["\n    0% {\n        background-position: -1200px 0\n    }\n\n    100% {\n        background-position: 1200px 0\n    }\n  "])));return a.jsx("div",i({},e,{role:"presentaion",className:a.classNames(e.className,"jimu-builder-theme-configurator--loading"),css:a.css(v||(v=o(["\n      margin-top: 1rem;\n      > div {\n        padding: 1rem;\n        > div {\n          display: block;\n          height: 20px;\n          margin-bottom: 0.75rem;\n          border-radius: 2px;\n\n          animation: "," 3s linear;\n          animation-iteration-count: infinite;\n          background-color: rgba(255,255,255, 0.1);\n          background-image: linear-gradient(to right,rgba(0,0,0,.08) 0,rgba(0,0,0,.2) 15%,rgba(0,0,0,.08) 30%);\n          background-size: 1200px 100%;\n        }\n      }\n    "],["\n      margin-top: 1rem;\n      > div {\n        padding: 1rem;\n        > div {\n          display: block;\n          height: 20px;\n          margin-bottom: 0.75rem;\n          border-radius: 2px;\n\n          animation: "," 3s linear;\n          animation-iteration-count: infinite;\n          background-color: rgba(255,255,255, 0.1);\n          background-image: linear-gradient(to right,rgba(0,0,0,.08) 0,rgba(0,0,0,.2) 15%,rgba(0,0,0,.08) 30%);\n          background-size: 1200px 100%;\n        }\n      }\n    "])),t)}),function(e){for(var t=[],n=a.lodash.getValue(e,"theme.colors.grays.gray100"),r=a.styled.div(g||(g=o(["\n      width: 30%;\n      min-width: 3rem;\n      margin-bottom: 1.25rem;\n    "],["\n      width: 30%;\n      min-width: 3rem;\n      margin-bottom: 1.25rem;\n    "]))),i=a.styled.div(m||(m=o(['\n      width: 100%;\n      position: relative;\n      &::before {\n        content: "";\n        display: block;\n        width: 20px;\n        background: ',";\n        height: 100%;\n        position: absolute;\n        right: 50px;\n      }\n    "],['\n      width: 100%;\n      position: relative;\n      &::before {\n        content: "";\n        display: block;\n        width: 20px;\n        background: ',";\n        height: 100%;\n        position: absolute;\n        right: 50px;\n      }\n    "])),n||"#232323"),s=0;s<5;s++)t.push(a.jsx("div",null,a.jsx(r,null),a.jsx(i,null),a.jsx(i,null)));return t}(e))}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(1),a=n(2),s=n(24),l=n(39),u=n(38);!function(e){e.avenir="Avenir Next W01",e.arial="Arial",e.helvetica="Helvetica Neue"}(o||(o={}));var c=function(e){function t(t){var n,r=e.call(this,t)||this;switch(r._handleItemChange=function(e,t){var n,o=!0;switch(e){case"font-size":var i=t,s=r.state.value;i.distance===s.distance?(o=!1,i.unit!==s.unit&&(i.unit===a.UnitTypes.REM?i.distance/=16:i.distance*=16),t=i):n=(i.unit===a.UnitTypes.REM?i.distance:i.distance/16)+"rem";break;case"color":n=t;break;default:n=t}o&&r.props.onInputChange(r.props.name,r.props.variable,n),r.setState({value:t})},t.inputType){case"font-size":var o=i.polished.stripUnit(r.props.value,!0);o[1]===a.UnitTypes.REM&&(o[0]=void 0!==o[0]&&16*o[0],o[1]=a.UnitTypes.PIXEL),n={distance:o[0],unit:o[1]};break;case"color":n=r.props.value||"";break;default:r.state={value:r.props.value}}return r.state={value:n},r}return r(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.name,r=t.label,c=t.inputType;return i.React.createElement(u.SettingRow,{label:r||n},function(t){var n;switch(t){case"font-family":n=i.React.createElement(a.Input,{type:"select",value:e.state.value,onChange:function(t){e._handleItemChange("font-family",t.target.value)}},Object.keys(o).map(function(e){return i.React.createElement("option",{key:e},o[e])}));break;case"font-size":n=i.React.createElement(l.InputUnit,{units:[a.UnitTypes.PIXEL,a.UnitTypes.REM],value:e.state.value,onChange:function(t){e._handleItemChange("font-size",t)}});break;case"color":n=i.React.createElement(s.ColorChooser,{style:{width:40,height:20},color:e.state.value,onChange:function(t){e._handleItemChange("color",t)}})}return n}(c))},t}(i.React.PureComponent);t.CSSVarInput=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(432),i=n(435),a=n(386),s=n(385),l=n(387),u=n(387);function c(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}t.css=u.default;var p="undefined"!=typeof document,d=r.createContext(p?o.default():null),f=r.createContext({});t.ThemeContext=f;var h=d.Provider;t.CacheProvider=h;var g=function(e){return r.forwardRef(function(t,n){return r.createElement(d.Consumer,null,function(r){return e(t,r,n)})})};if(t.withEmotionCache=g,!p){var m=function(e){function t(t,n,r){var i;return(i=e.call(this,t,n,r)||this).state={value:o.default()},i}return c(t,e),t.prototype.render=function(){return r.createElement(d.Provider,this.state,this.props.children(this.state.value))},t}(r.Component);t.withEmotionCache=g=function(e){return function(t){return r.createElement(d.Consumer,null,function(n){return null===n?r.createElement(m,null,function(n){return e(t,n)}):e(t,n)})}}}var y="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",v=Object.prototype.hasOwnProperty,b=function(e,t,n,o){var s=t[y],l=[],u="",c=null===n?t.css:t.css(n);"string"==typeof c&&void 0!==e.registered[c]&&(c=e.registered[c]),l.push(c),void 0!==t.className&&(u=i.getRegisteredStyles(e.registered,l,t.className));var d=a.serializeStyles(l),f=i.insertStyles(e,d,"string"==typeof s);u+=e.key+"-"+d.name;var h={};for(var g in t)v.call(t,g)&&"css"!==g&&g!==y&&(h[g]=t[g]);h.ref=o,h.className=u;var m=r.createElement(s,h);if(!p&&void 0!==f){for(var b,x=d.name,w=d.next;void 0!==w;)x+=" "+w.name,w=w.next;return r.createElement(r.Fragment,null,r.createElement("style",((b={})["data-emotion-"+e.key]=x,b.dangerouslySetInnerHTML={__html:f},b.nonce=e.sheet.nonce,b)),m)}return m},x=g(function(e,t,n){return"function"==typeof e.css?r.createElement(f.Consumer,null,function(r){return b(t,e,r,n)}):b(t,e,null,n)});t.jsx=function(e,t){var n=arguments;if(null==t||null==t.css)return r.createElement.apply(void 0,n);var o=n.length,i=new Array(o);i[0]=x;var a={};for(var s in t)v.call(t,s)&&(a[s]=t[s]);a[y]=e,i[1]=a;for(var l=2;l<o;l++)i[l]=n[l];return r.createElement.apply(null,i)};var w=g(function(e,t){var n=e.styles;if("function"==typeof n)return r.createElement(f.Consumer,null,function(e){var o=a.serializeStyles([n(e)]);return r.createElement(S,{serialized:o,cache:t})});var o=a.serializeStyles([n]);return r.createElement(S,{serialized:o,cache:t})});t.Global=w;var S=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}c(t,e);var n=t.prototype;return n.componentDidMount=function(){this.sheet=new s.StyleSheet({key:this.props.cache.key+"-global",nonce:this.props.cache.sheet.nonce,container:this.props.cache.sheet.container});var e=document.querySelector("style[data-emotion-"+this.props.cache.key+'="'+this.props.serialized.name+'"]');null!==e&&this.sheet.tags.push(e),this.props.cache.sheet.tags.length&&(this.sheet.before=this.props.cache.sheet.tags[0]),this.insertStyles()},n.componentDidUpdate=function(e){e.serialized.name!==this.props.serialized.name&&this.insertStyles()},n.insertStyles=function(){if(void 0!==this.props.serialized.next&&i.insertStyles(this.props.cache,this.props.serialized.next,!0),this.sheet.tags.length){var e=this.sheet.tags[this.sheet.tags.length-1].nextElementSibling;this.sheet.before=e,this.sheet.flush()}this.props.cache.insert("",this.props.serialized,this.sheet,!1)},n.componentWillUnmount=function(){this.sheet.flush()},n.render=function(){if(!p){for(var e,t=this.props.serialized,n=t.name,o=t.styles,i=t.next;void 0!==i;)n+=" "+i.name,o+=i.styles,i=i.next;var a=this.props.cache.insert("",{name:n,styles:o},this.sheet,!1);return r.createElement("style",((e={})["data-emotion-"+this.props.cache.key]=n,e.dangerouslySetInnerHTML={__html:a},e.nonce=this.props.cache.sheet.nonce,e))}return null},t}(r.Component);t.keyframes=function(){var e=l.default.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var C=g(function(e,t){return r.createElement(f.Consumer,null,function(n){var o,s="",l="",u=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=a.serializeStyles(n,t.registered);if(p)i.insertStyles(t,o,!1);else{var u=i.insertStyles(t,o,!1);void 0!==u&&(s+=u)}return p||(l+=" "+o.name),t.key+"-"+o.name},c={css:u,cx:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(e,t,n){var r=[],o=i.getRegisteredStyles(e,r,n);return r.length<2?n:o+t(r)}(t.registered,u,function e(t){for(var n=t.length,r=0,o="";r<n;r++){var i=t[r];if(null!=i){var a=void 0;switch(typeof i){case"boolean":break;case"object":if(Array.isArray(i))a=e(i);else for(var s in a="",i)i[s]&&s&&(a&&(a+=" "),a+=s);break;default:a=i}a&&(o&&(o+=" "),o+=a)}}return o}(n))},theme:n},d=e.children(c);return!0,p||0===s.length?d:r.createElement(r.Fragment,null,r.createElement("style",((o={})["data-emotion-"+t.key]=l.substring(1),o.dangerouslySetInnerHTML={__html:s},o.nonce=t.sheet.nonce,o)),d)})});t.ClassNames=C},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(385),o=n(433),i=n(434);function a(e){e&&s.current.insert(e+"}")}var s={current:null},l=function(e,t,n,r,o,i,l,u,c,p){switch(e){case 1:switch(t.charCodeAt(0)){case 64:return s.current.insert(t+";"),"";case 108:if(98===t.charCodeAt(2))return""}break;case 2:if(0===u)return t+"/*|*/";break;case 3:switch(u){case 102:case 112:return s.current.insert(n[0]+t),"";default:return t+(0===p?"/*|*/":"")}case-2:t.split("/*|*/}").forEach(a)}},u=function(e,t){if(1===e&&108===t.charCodeAt(0)&&98===t.charCodeAt(2))return""},c="undefined"!=typeof document,p={},d=c?void 0:i.default(function(){var e=i.default(function(){return{}}),t={},n={};return function(r){return void 0===r||!0===r?t:!1===r?n:e(r)}});t.default=function(e){void 0===e&&(e={});var t,n=e.key||"css";void 0!==e.prefix&&(t={prefix:e.prefix});var i=new o.default(t);var a,f,h={};if(c){a=e.container||document.head;var g=document.querySelectorAll("style[data-emotion-"+n+"]");Array.prototype.forEach.call(g,function(e){e.getAttribute("data-emotion-"+n).split(" ").forEach(function(e){h[e]=!0}),e.parentNode!==a&&a.appendChild(e)})}if(c)i.use(e.stylisPlugins)(l),f=function(e,t,n,r){var o=t.name;s.current=n,i(e,t.styles),r&&(y.inserted[o]=!0)};else{i.use(u);var m=p;(e.stylisPlugins||void 0!==e.prefix)&&(i.use(e.stylisPlugins),m=d(e.stylisPlugins||p)(e.prefix)),f=function(e,t,n,r){var o=t.name,a=function(e,t){var n=t.name;return void 0===m[n]&&(m[n]=i(e,t.styles)),m[n]}(e,t);return void 0===y.compat?(r&&(y.inserted[o]=!0),a):r?void(y.inserted[o]=a):a}}var y={key:n,sheet:new r.StyleSheet({key:n,container:a,nonce:e.nonce,speedy:e.speedy}),nonce:e.nonce,inserted:h,registered:{},insert:f};return y}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(e,t,r){var o=t.trim().split(h);t=o;var i=o.length,a=e.length;switch(a){case 0:case 1:var s=0;for(e=0===a?"":e[0]+" ";s<i;++s)t[s]=n(e,t[s],r).trim();break;default:var l=s=0;for(t=[];s<i;++s)for(var u=0;u<a;++u)t[l++]=n(e[u]+" ",o[s],r).trim()}return t}function n(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(g,"$1"+e.trim());case 58:return e.trim()+t.replace(g,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function r(e,t,n,i){var a=e+";",s=2*t+3*n+4*i;if(944===s){e=a.indexOf(":",9)+1;var l=a.substring(e,a.length-1).trim();return l=a.substring(0,e).trim()+l+";",1===j||2===j&&o(l,1)?"-webkit-"+l+l:l}if(0===j||2===j&&!o(a,1))return a;switch(s){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(_,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(l=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+l+a;case 1005:return d.test(a)?a.replace(p,":-webkit-")+a.replace(p,":-moz-")+a:a;case 1e3:switch(t=(l=a.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=a.replace(b,"tb");break;case 232:l=a.replace(b,"tb-rl");break;case 220:l=a.replace(b,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+l+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(t=(a=e).length-10,s=(l=(33===a.charCodeAt(t)?a.substring(0,t):a).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:a=a.replace(l,"-webkit-"+l)+";"+a;break;case 207:case 102:a=a.replace(l,"-webkit-"+(102<s?"inline-":"")+"box")+";"+a.replace(l,"-webkit-"+l)+";"+a.replace(l,"-ms-"+l+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return"-webkit-"+a+"-webkit-box-"+(l=a.replace("-items",""))+"-ms-flex-"+l+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(S,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(S,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===I.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?r(e.replace("stretch","fill-available"),t,n,i).replace(":fill-available",":stretch"):a.replace(l,"-webkit-"+l)+a.replace(l,"-moz-"+l.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,211===n+i&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(f,"$1-webkit-$2")+a}return a}function o(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),M(2!==t?r:r.replace(C,"$1"),n,t)}function i(e,t){var n=r(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(w," or ($1)").substring(4):"("+t+")"}function a(e,t,n,r,o,i,a,s,u,c){for(var p,d=0,f=t;d<R;++d)switch(p=T[d].call(l,e,f,n,r,o,i,a,s,u,c)){case void 0:case!1:case!0:case null:break;default:f=p}if(f!==t)return f}function s(e){return void 0!==(e=e.prefix)&&(M=null,e?"function"!=typeof e?j=1:(j=2,M=e):j=0),s}function l(e,n){var s=e;if(33>s.charCodeAt(0)&&(s=s.trim()),s=[s],0<R){var l=a(-1,n,s,s,O,P,0,0,0,0);void 0!==l&&"string"==typeof l&&(n=l)}var p=function e(n,s,l,p,d){for(var f,h,g,b,w,S=0,C=0,I=0,_=0,T=0,M=0,D=g=f=0,N=0,F=0,L=0,B=0,z=l.length,U=z-1,W="",H="",V="",G="";N<z;){if(h=l.charCodeAt(N),N===U&&0!==C+_+I+S&&(0!==C&&(h=47===C?10:47),_=I=S=0,z++,U++),0===C+_+I+S){if(N===U&&(0<F&&(W=W.replace(c,"")),0<W.trim().length)){switch(h){case 32:case 9:case 59:case 13:case 10:break;default:W+=l.charAt(N)}h=59}switch(h){case 123:for(f=(W=W.trim()).charCodeAt(0),g=1,B=++N;N<z;){switch(h=l.charCodeAt(N)){case 123:g++;break;case 125:g--;break;case 47:switch(h=l.charCodeAt(N+1)){case 42:case 47:e:{for(D=N+1;D<U;++D)switch(l.charCodeAt(D)){case 47:if(42===h&&42===l.charCodeAt(D-1)&&N+2!==D){N=D+1;break e}break;case 10:if(47===h){N=D+1;break e}}N=D}}break;case 91:h++;case 40:h++;case 34:case 39:for(;N++<U&&l.charCodeAt(N)!==h;);}if(0===g)break;N++}switch(g=l.substring(B,N),0===f&&(f=(W=W.replace(u,"").trim()).charCodeAt(0)),f){case 64:switch(0<F&&(W=W.replace(c,"")),h=W.charCodeAt(1)){case 100:case 109:case 115:case 45:F=s;break;default:F=k}if(B=(g=e(s,F,g,h,d+1)).length,0<R&&(w=a(3,g,F=t(k,W,L),s,O,P,B,h,d,p),W=F.join(""),void 0!==w&&0===(B=(g=w.trim()).length)&&(h=0,g="")),0<B)switch(h){case 115:W=W.replace(x,i);case 100:case 109:case 45:g=W+"{"+g+"}";break;case 107:g=(W=W.replace(m,"$1 $2"))+"{"+g+"}",g=1===j||2===j&&o("@"+g,3)?"@-webkit-"+g+"@"+g:"@"+g;break;default:g=W+g,112===p&&(H+=g,g="")}else g="";break;default:g=e(s,t(s,W,L),g,p,d+1)}V+=g,g=L=F=D=f=0,W="",h=l.charCodeAt(++N);break;case 125:case 59:if(1<(B=(W=(0<F?W.replace(c,""):W).trim()).length))switch(0===D&&(f=W.charCodeAt(0),45===f||96<f&&123>f)&&(B=(W=W.replace(" ",":")).length),0<R&&void 0!==(w=a(1,W,s,n,O,P,H.length,p,d,p))&&0===(B=(W=w.trim()).length)&&(W="\0\0"),f=W.charCodeAt(0),h=W.charCodeAt(1),f){case 0:break;case 64:if(105===h||99===h){G+=W+l.charAt(N);break}default:58!==W.charCodeAt(B-1)&&(H+=r(W,f,h,W.charCodeAt(2)))}L=F=D=f=0,W="",h=l.charCodeAt(++N)}}switch(h){case 13:case 10:47===C?C=0:0===1+f&&107!==p&&0<W.length&&(F=1,W+="\0"),0<R*A&&a(0,W,s,n,O,P,H.length,p,d,p),P=1,O++;break;case 59:case 125:if(0===C+_+I+S){P++;break}default:switch(P++,b=l.charAt(N),h){case 9:case 32:if(0===_+S+C)switch(T){case 44:case 58:case 9:case 32:b="";break;default:32!==h&&(b=" ")}break;case 0:b="\\0";break;case 12:b="\\f";break;case 11:b="\\v";break;case 38:0===_+C+S&&(F=L=1,b="\f"+b);break;case 108:if(0===_+C+S+E&&0<D)switch(N-D){case 2:112===T&&58===l.charCodeAt(N-3)&&(E=T);case 8:111===M&&(E=M)}break;case 58:0===_+C+S&&(D=N);break;case 44:0===C+I+_+S&&(F=1,b+="\r");break;case 34:case 39:0===C&&(_=_===h?0:0===_?h:_);break;case 91:0===_+C+I&&S++;break;case 93:0===_+C+I&&S--;break;case 41:0===_+C+S&&I--;break;case 40:if(0===_+C+S){if(0===f)switch(2*T+3*M){case 533:break;default:f=1}I++}break;case 64:0===C+I+_+S+D+g&&(g=1);break;case 42:case 47:if(!(0<_+S+I))switch(C){case 0:switch(2*h+3*l.charCodeAt(N+1)){case 235:C=47;break;case 220:B=N,C=42}break;case 42:47===h&&42===T&&B+2!==N&&(33===l.charCodeAt(B+2)&&(H+=l.substring(B,N+1)),b="",C=0)}}0===C&&(W+=b)}M=T,T=h,N++}if(0<(B=H.length)){if(F=s,0<R&&void 0!==(w=a(2,H,F,n,O,P,B,p,d,p))&&0===(H=w).length)return G+H+V;if(H=F.join(",")+"{"+H+"}",0!=j*E){switch(2!==j||o(H,2)||(E=0),E){case 111:H=H.replace(v,":-moz-$1")+H;break;case 112:H=H.replace(y,"::-webkit-input-$1")+H.replace(y,"::-moz-$1")+H.replace(y,":-ms-input-$1")+H}E=0}}return G+H+V}(k,s,n,0,0);return 0<R&&void 0!==(l=a(-2,p,s,s,O,P,p.length,0,0,0))&&(p=l),E=0,P=O=1,p}var u=/^\0+/g,c=/[\0\r\f]/g,p=/: */g,d=/zoo|gra/,f=/([,: ])(transform)/g,h=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,m=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,v=/:(read-only)/g,b=/[svh]\w+-[tblr]{2}/,x=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,S=/-self|flex-/g,C=/[^]*?(:[rp][el]a[\w-]+)[^]*/,I=/stretch|:\s*\w+\-(?:conte|avail)/,_=/([^-])(image-set\()/,P=1,O=1,E=0,j=1,k=[],T=[],R=0,M=null,A=0;return l.use=function e(t){switch(t){case void 0:case null:R=T.length=0;break;default:if("function"==typeof t)T[R++]=t;else if("object"==typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else A=0|!!t}return e},l.set=s,void 0!==e&&s(e),l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=new WeakMap;return function(n){if(t.has(n))return t.get(n);var r=e(n);return t.set(n,r),r}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="undefined"!=typeof document;t.getRegisteredStyles=function(e,t,n){var r="";return n.split(" ").forEach(function(n){void 0!==e[n]?t.push(e[n]):r+=n+" "}),r};t.insertStyles=function(e,t,n){var o=e.key+"-"+t.name;if((!1===n||!1===r&&void 0!==e.compat)&&void 0===e.registered[o]&&(e.registered[o]=t.styles),void 0===e.inserted[t.name]){var i="",a=t;do{var s=e.insert("."+o,a,e.sheet,!0);r||void 0===s||(i+=s),a=a.next}while(void 0!==a);if(!r&&0!==i.length)return i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t,n=e.length,r=n^n,o=0;n>=4;)t=1540483477*(65535&(t=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(t>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(t=1540483477*(65535&(t^=t>>>24))+((1540483477*(t>>>16)&65535)<<16)),n-=4,++o;switch(n){case 3:r^=(255&e.charCodeAt(o+2))<<16;case 2:r^=(255&e.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),((r^=r>>>15)>>>0).toString(36)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(360),o=n(367),i=n(440),a=n(441);t.init=function(){return o.default.getInstance().registerActionRawSettingClassInfo("filter-data-record-action",{clazz:i.default,i18nMessages:{}}),o.default.getInstance().registerActionRawSettingClassInfo("select-data-record-action",{clazz:a.default,i18nMessages:{}}),r.loadI18nMessage()}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(2),l=n(59),u=n(14),c=n(4),p=[l.AllDataSourceTypes.FeatureQuery,l.AllDataSourceTypes.FeatureLayer],d=function(e){function t(t){var n=e.call(this,t)||this;return n.datasourceChange=function(e){var t=e.target.value;n.props.onSettingChange({actionId:n.props.actionId,config:n.props.config.set("dataSourceId",t).set("dataSourceField",void 0)})},n.onSelectDataSourceField=function(e){var t=n.getDataSourceSchema(n.props.config.dataSourceId);n.props.onSettingChange({actionId:n.props.actionId,config:n.props.config.set("dataSourceField",t.fields[e])})},n.onSelectMessageField=function(e){var t=n.getMessageDataSourceId(),r=n.getDataSourceSchema(t);n.props.onSettingChange({actionId:n.props.actionId,config:n.props.config.set("messageField",r.fields[e])})},n.getDataSourceSchema=function(e){for(var t=null,r=0;r<n.state.datasources.length;r++)if(n.state.datasources[r].dataSourceJson.id===e){t=n.state.datasources[r].getSchema();break}return t},n.getMessageDataSourceId=function(){var e=null,t=a.getAppStore().getState().appStateInBuilder.appConfig.widgets[n.props.messageWidgetId];return t&&t.useDataSources&&t.useDataSources[0]&&(e=t.useDataSources[0].dataSourceId),e},n.checkIsConfigDisabled=function(e){return!(e.dataSourceId&&e.messageField&&e.dataSourceField)},n.formatMessage=function(e){return n.props.intl.formatMessage({id:e,defaultMessage:c.default[e]})},n.state={datasources:[]},n}return r(t,e),t.prototype.getStyle=function(){return a.css(i||(i=o(["\n      \n      .filter-data-setting {\n\n        .filter-field {\n          width: 45%;\n        }\n      }\n    "],["\n      \n      .filter-data-setting {\n\n        .filter-field {\n          width: 45%;\n        }\n      }\n    "])))},t.prototype.componentDidMount=function(){var e=this;this.props.onSettingChange({actionId:this.props.actionId,config:this.props.config}),u.default.getInstance().createAllDataSources().then(function(t){var n=[];if(t)for(var r=0;r<t.length;r++)p.indexOf(t[r].type)>-1&&n.push(t[r]);e.setState({datasources:n})})},t.prototype.componentDidUpdate=function(){this.props.onDisableDoneBtn(this.checkIsConfigDisabled(this.props.config))},t.prototype.render=function(){var e=this,t=this.getDataSourceSchema(this.props.config.dataSourceId),n=this.getMessageDataSourceId(),r=this.getDataSourceSchema(n);return a.jsx("div",{css:this.getStyle()},a.jsx("div",{className:"filter-data-setting"},a.jsx("div",{className:"mt-3"},this.formatMessage("chooseDsForFilter")),a.jsx("div",{className:"mt-2 mb-2",style:{overflow:"hidden"}},0===this.state.datasources.length&&a.jsx(s.Input,{type:"select",value:this.formatMessage("filterNone"),className:"float-right"},a.jsx("option",null,this.formatMessage("filterNone"))),this.state.datasources.length>0&&a.jsx(s.Input,{type:"select",value:this.props.config.dataSourceId,className:"float-right",onChange:this.datasourceChange},a.jsx("option",{style:{display:"none"},value:void 0},this.formatMessage("filterNone")),this.state.datasources.map(function(e,t){var r=e.dataSourceJson;return r.id===n?null:a.jsx("option",{key:t,value:r.id},r.label)}))),a.jsx("div",null,a.jsx("div",null,this.formatMessage("filterDataRelationShip")),a.jsx("div",{className:"d-flex justify-content-between mt-2 mb-2"},a.jsx("div",{className:"filter-field",style:{overflow:"hidden"}},(!t||!t.fields)&&a.jsx(s.Input,{type:"select",value:this.formatMessage("filterNone"),className:"float-right"},a.jsx("option",null,this.formatMessage("filterNone"))),t&&t.fields&&!this.props.config.dataSourceField&&a.jsx(s.Input,{type:"select",title:this.props.config.dataSourceField&&this.props.config.dataSourceField.name,value:this.props.config.dataSourceField&&this.props.config.dataSourceField.name,onChange:function(t){return e.onSelectDataSourceField(t.target.value)},className:"float-right"},a.jsx("option",{style:{display:"none"},value:void 0},this.formatMessage("filterNone")),Object.keys(t.fields).map(function(e,n){return a.jsx("option",{key:n,value:t.fields[e].name,title:t.fields[e].name},t.fields[e].name)})),t&&t.fields&&this.props.config.dataSourceField&&a.jsx(s.Input,{type:"select",title:this.props.config.dataSourceField&&this.props.config.dataSourceField.name,value:this.props.config.dataSourceField&&this.props.config.dataSourceField.name,onChange:function(t){return e.onSelectDataSourceField(t.target.value)},className:"float-right"},a.jsx("option",{style:{display:"none"},value:void 0},this.formatMessage("filterNone")),Object.keys(t.fields).map(function(e,n){return a.jsx("option",{key:n,value:t.fields[e].name,title:t.fields[e].name},t.fields[e].name)}))),a.jsx("div",{className:"filter-field d-flex justify-content-center align-items-center border"},"equals")),a.jsx("div",{className:"d-flex justify-content-between"},a.jsx("div",{className:"filter-field d-flex justify-content-center align-items-center bg-gray-200 text-gray-700"},this.formatMessage("filterMessageField")+":"),a.jsx("div",{className:"filter-field",style:{overflow:"hidden"}},(!r||!r.fields)&&a.jsx(s.Input,{type:"select",value:this.formatMessage("filterNone"),className:"float-right"},a.jsx("option",null,this.formatMessage("filterNone"))),r&&r.fields&&a.jsx(s.Input,{type:"select",title:this.props.config.messageField&&this.props.config.messageField.name,value:this.props.config.messageField&&this.props.config.messageField.name,onChange:function(t){return e.onSelectMessageField(t.target.value)},className:"float-right"},a.jsx("option",{style:{display:"none"},value:void 0},this.formatMessage("filterNone")),Object.keys(r.fields).map(function(e,t){return a.jsx("option",{key:t,value:e,title:e},e)})))))))},t.defaultProps={config:{dataSourceId:void 0,messageField:void 0,dataSourceField:void 0}},t}(a.React.PureComponent);t.default=d},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(1),s=n(2),l=n(59),u=n(14),c=n(4),p=[l.AllDataSourceTypes.FeatureQuery,l.AllDataSourceTypes.FeatureLayer],d=function(e){function t(t){var n=e.call(this,t)||this;return n.datasourceChange=function(e){var t=e.target.value;n.props.onSettingChange({actionId:n.props.actionId,config:n.props.config.set("dataSourceId",t).set("dataSourceField",void 0)})},n.onSelectDataSourceField=function(e){var t=n.getDataSourceSchema(n.props.config.dataSourceId);n.props.onSettingChange({actionId:n.props.actionId,config:n.props.config.set("dataSourceField",t.fields[e])})},n.onSelectMessageField=function(e){var t=n.getMessageDataSourceId(),r=n.getDataSourceSchema(t);n.props.onSettingChange({actionId:n.props.actionId,config:n.props.config.set("messageField",r.fields[e])})},n.getDataSourceSchema=function(e){for(var t=null,r=0;r<n.state.datasources.length;r++)if(n.state.datasources[r].dataSourceJson.id===e){t=n.state.datasources[r].getSchema();break}return t},n.getMessageDataSourceId=function(){var e=null,t=a.getAppStore().getState().appStateInBuilder.appConfig.widgets[n.props.messageWidgetId];return t&&t.useDataSources&&t.useDataSources[0]&&(e=t.useDataSources[0].dataSourceId),e},n.checkIsConfigDisabled=function(e){return!(e.dataSourceId&&e.messageField&&e.dataSourceField)},n.formatMessage=function(e){return n.props.intl.formatMessage({id:e,defaultMessage:c.default[e]})},n.state={datasources:[]},n}return r(t,e),t.prototype.getStyle=function(){return a.css(i||(i=o(["\n      \n      .filter-data-setting {\n\n        .filter-field {\n          width: 45%;\n        }\n      }\n    "],["\n      \n      .filter-data-setting {\n\n        .filter-field {\n          width: 45%;\n        }\n      }\n    "])))},t.prototype.componentDidMount=function(){var e=this;this.props.onSettingChange({actionId:this.props.actionId,config:this.props.config}),u.default.getInstance().createAllDataSources().then(function(t){var n=[];if(t)for(var r=0;r<t.length;r++)p.indexOf(t[r].type)>-1&&n.push(t[r]);e.setState({datasources:n})})},t.prototype.componentDidUpdate=function(){this.props.onDisableDoneBtn(this.checkIsConfigDisabled(this.props.config))},t.prototype.render=function(){var e=this,t=this.getDataSourceSchema(this.props.config.dataSourceId),n=this.getMessageDataSourceId(),r=this.getDataSourceSchema(n);return a.jsx("div",{css:this.getStyle()},a.jsx("div",{className:"filter-data-setting"},a.jsx("div",{className:"mt-3"},this.formatMessage("chooseDsForSelect")),a.jsx("div",{className:"mt-2 mb-2",style:{overflow:"hidden"}},0===this.state.datasources.length&&a.jsx(s.Input,{type:"select",value:this.formatMessage("selectNone"),className:"float-right"},a.jsx("option",null,this.formatMessage("selectNone"))),this.state.datasources.length>0&&a.jsx(s.Input,{type:"select",value:this.props.config.dataSourceId,className:"float-right",onChange:this.datasourceChange},a.jsx("option",{style:{display:"none"},value:void 0},this.formatMessage("selectNone")),this.state.datasources.map(function(e,t){var r=e.dataSourceJson;return r.id===n?null:a.jsx("option",{key:t,value:r.id},r.label)}))),a.jsx("div",null,a.jsx("div",null,this.formatMessage("selectDataRelationShip")),a.jsx("div",{className:"d-flex justify-content-between mt-2 mb-2"},a.jsx("div",{className:"filter-field",style:{overflow:"hidden"}},(!t||!t.fields)&&a.jsx(s.Input,{type:"select",value:this.formatMessage("selectNone"),className:"float-right"},a.jsx("option",null,this.formatMessage("selectNone"))),t&&t.fields&&!this.props.config.dataSourceField&&a.jsx(s.Input,{type:"select",title:this.props.config.dataSourceField&&this.props.config.dataSourceField.name,value:this.props.config.dataSourceField&&this.props.config.dataSourceField.name,onChange:function(t){return e.onSelectDataSourceField(t.target.value)},className:"float-right"},a.jsx("option",{style:{display:"none"},value:void 0},this.formatMessage("selectNone")),Object.keys(t.fields).map(function(e,n){return a.jsx("option",{key:n,value:t.fields[e].name,title:t.fields[e].name},t.fields[e].name)})),t&&t.fields&&this.props.config.dataSourceField&&a.jsx(s.Input,{type:"select",title:this.props.config.dataSourceField&&this.props.config.dataSourceField.name,value:this.props.config.dataSourceField&&this.props.config.dataSourceField.name,onChange:function(t){return e.onSelectDataSourceField(t.target.value)},className:"float-right"},a.jsx("option",{style:{display:"none"},value:void 0},this.formatMessage("selectNone")),Object.keys(t.fields).map(function(e,n){return a.jsx("option",{key:n,value:t.fields[e].name,title:t.fields[e].name},t.fields[e].name)}))),a.jsx("div",{className:"filter-field d-flex justify-content-center align-items-center border"},"equals")),a.jsx("div",{className:"d-flex justify-content-between"},a.jsx("div",{className:"filter-field d-flex justify-content-center align-items-center bg-gray-200 text-gray-700"},this.formatMessage("selectMessageField")+":"),a.jsx("div",{className:"filter-field",style:{overflow:"hidden"}},(!r||!r.fields)&&a.jsx(s.Input,{type:"select",value:this.formatMessage("selectNone"),className:"float-right"},a.jsx("option",null,this.formatMessage("selectNone"))),r&&r.fields&&a.jsx(s.Input,{type:"select",title:this.props.config.messageField&&this.props.config.messageField.name,value:this.props.config.messageField&&this.props.config.messageField.name,onChange:function(t){return e.onSelectMessageField(t.target.value)},className:"float-right"},a.jsx("option",{style:{display:"none"},value:void 0},this.formatMessage("selectNone")),Object.keys(r.fields).map(function(e,t){return a.jsx("option",{key:t,value:e,title:e},e)})))))))},t.defaultProps={config:{dataSourceId:void 0,messageField:void 0,dataSourceField:void 0}},t}(a.React.PureComponent);t.default=d}])});
//# sourceMappingURL=index.js.map