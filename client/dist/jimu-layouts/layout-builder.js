define(["jimu-core/react","jimu-core","jimu-layouts/common","jimu-ui","jimu-for-builder","jimu-core/dnd"],function(t,e,n,i,r,o){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=337)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports=n},function(t,e){t.exports=i},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){t.exports=r},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.Small="SMALL",t.Medium="MEDIUM",t.Large="LARGE"}(e.IconTextSize||(e.IconTextSize={})),function(t){t.Normal="NORMAL",t.Icon="ICON",t.IconText="ICON_TEXT",t.Custom="CUSTOM"}(e.WidgetDisplayMode||(e.WidgetDisplayMode={})),function(t){t[t.BringForward=0]="BringForward",t[t.SendBackward=1]="SendBackward",t[t.BringToFront=2]="BringToFront",t[t.SendToBack=3]="SendToBack"}(e.OrderAdjustType||(e.OrderAdjustType={}))},,function(t,e){function n(){return t.exports=n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},n.apply(this,arguments)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(17);e.removeItemFromParent=function(t,e,n){var r=t.layoutId,o=t.layoutItemId;if(!n[r])return n;if(!n[r].content[o])return n;var a=n[r],s=i.Immutable(n);if(a.order&&a.order.indexOf(o)>=0){var u=[];a.order.forEach(function(t){t!==o&&u.push(t)}),s=s.setIn([r,"order"],u)}return e&&(s=s.setIn([r,"content"],s[r].content.without(o))),s},e.selectLayoutItem=function(t,e){var n=t&&t.layoutId&&t.layoutItemId?t:null;return i.lodash.defer(function(){i.getAppStore().dispatch(i.appActions.selectionChanged(n))}),e},e.disableSelectMode=function(t){i.lodash.defer(function(){i.getAppStore().dispatch(i.appActions.setSelectMode(!1))})},e.createEmptyLayoutItem=function(t,e){var n=r.getMaximumId(e[t])+1,o=i.Immutable(e),a={id:""+n};return o=o.setIn([t,"content",a.id],a),{layoutInfo:{layoutId:t,layoutItemId:a.id},layouts:o}},e.findLayoutItem=function(t,e){if(!e)return null;var n=e.layoutId,r=e.layoutItemId;return i.lodash.getValue(t,"layouts."+n+".content."+r,null)},e.getMaximumLayoutItemId=function(t){return r.getMaximumId(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(48);e.DEFAULT_FIX_LAYOUT_SETTING=i.lodash.assign({},{gridSize:1}),e.DEFAULT_FIX_LAYOUT_ITEM_SETTING=i.lodash.assign({},r.DEFAULT_LAYOUT_ITEM_SETTING,{lockParent:!1,autoProps:{}})},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.Select="GLOBAL_SELECT_ELEMENT",t.DisableSelectMode="GLOBAL_DISABLE_SELECT_MODE"}(i=e.GlobalLayoutActions||(e.GlobalLayoutActions={})),e.selectItem=function(t){return{selection:t,type:i.Select}},e.disableSelectMode=function(){return{type:i.DisableSelectMode}}},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(5),a=n(3),s=[a.BorderSides.TL,a.BorderSides.TR,a.BorderSides.BR,a.BorderSides.BL],u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.updateBg=function(t){e.updateStyle("background",t)},e.updateBorder=function(t){e.updateStyle("border",t)},e.updateRadius=function(t){e.updateStyle("borderRadius",t)},e.updateShadow=function(t){e.updateStyle("boxShadow",t)},e.formatMessage=function(t){return e.props.formatMessage(t)},e}return i(e,t),e.prototype.updateStyle=function(t,e){var n=this.props.itemSetting,i=r.Immutable(r.lodash.getValue(n,"style",{}));this.props.onSettingChange({layoutId:this.props.layoutId,layoutItemId:this.props.layoutItem.id},{style:i.set(t,e)})},e.prototype.render=function(){var t=this.props,e=t.layoutItem,n=t.itemSetting;if(!e)return null;var i=r.lodash.getValue(n,"style",{});return r.jsx("div",{className:"common-layout-item-setting"},r.jsx(o.SettingSection,{title:this.formatMessage("background")},r.jsx(o.SettingRow,null,r.jsx(o.BackgroundSetting,{background:i.background,onChange:this.updateBg}))),r.jsx(o.SettingSection,{title:this.formatMessage("border")},r.jsx(o.SettingRow,{flow:"wrap"},r.jsx(o.BorderSetting,{value:i.border,onChange:this.updateBorder})),r.jsx(o.SettingRow,{label:this.formatMessage("borderRadius"),flow:"wrap"},r.jsx(o.FourSides,{sides:s,value:i.borderRadius,onChange:this.updateRadius}))),r.jsx(o.SettingSection,{title:this.formatMessage("boxShadow")},r.jsx(o.SettingRow,{flow:"wrap"},r.jsx(o.BoxShadowSetting,{value:i.boxShadow,onChange:this.updateShadow}))))},e}(r.React.PureComponent);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3);e.DEFAULT_FLOW_SETTING={gutter:0,style:{padding:{number:[0],unit:"px"},justifyContent:"flex-start",alignItems:"stretch",borderRadius:{number:[0],unit:i.UnitTypes.PIXEL}}},e.DEFAULT_FLOW_ITEM_SETTING={lockParent:!0,autoHeight:!0,offsetX:0,offsetY:0}},,function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=n(1);function o(t){return"string"==typeof t&&t.length>1&&"%"===t[t.length-1]&&a(+t.slice(0,t.length-1))}function a(t){return!isNaN(parseFloat(t))&&isFinite(t)}function s(t,e){var n=e.layoutId,i=t.appConfig.layouts;if(!i[n])return{selected:!1,layoutItem:null,appMode:t.appRuntimeInfo.appMode,inSelectMode:t.appRuntimeInfo.inSelectMode,browserSizeMode:t.browserSizeMode};var o,a=i[n],s=e.layoutItemId,u=t.appRuntimeInfo.selection||{},l=a.content[s],c=!1,h=!1,p=!1;if(l&&(h=n===u.layoutId&&l.id===u.layoutItemId,p=Boolean(l.isPending),l.type===r.LayoutItemType.Widget)){var d=t.appConfig.widgets[l.widgetId];o=r.lodash.getValue(d,"manifest.name"),d&&d.manifest&&d.manifest.properties&&(c=d.manifest.properties.type===r.WidgetType.Layout||d.manifest.properties.type===r.WidgetType.Controller||d.manifest.properties.hasEmbeddedLayout)}return{selected:h,isLayoutWidget:c,widgetName:o,layoutItem:p?null:l,appMode:t.appRuntimeInfo.appMode,inSelectMode:t.appRuntimeInfo.inSelectMode,theme:t.theme,browserSizeMode:t.browserSizeMode}}function u(t,e,n,i){if(null==e[t]||"auto"===e[t])return e;return o(e[t])?"left"===t||"right"===t||"width"===t?o(n)?e.set(t,n):e.set(t,(100*+n/i.width).toFixed(4)+"%"):o(n)?e.set(t,n):e.set(t,(100*+n/i.height).toFixed(4)+"%"):o(n)?"left"===t||"right"===t||"width"===t?e.set(t,Math.round(parseFloat(""+n)*i.width/100)):e.set(t,Math.round(parseFloat(""+n)*i.height/100)):e.set(t,Math.round(+n)+"px")}e.emptyFunc=function(){},e.autoBindHandlers=function(t,e){e.forEach(function(e){t[e]&&(t[e]=t[e].bind(t))})},e.toPixelUnit=function(t){if(a(t))return t;if("string"==typeof t){var e=parseFloat(t)/100;if(/\d+vh$/.test(t))return e*(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight);if(/\d+vw$/.test(t))return e*(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)}return 0},e.getSectionInfo=function(t,e){var n=t.appConfig.sections[e];if(!n||!n.views)return null;var i=t.appRuntimeInfo.currentViewIds&&t.appRuntimeInfo.currentViewIds.find(function(t){return n.views.indexOf(t)>-1})||n.views[0];return{views:n.views,activeView:i}},e.getMaximumId=function(t){var e=-1;return t.content&&Object.keys(t.content).forEach(function(t){var n=parseInt(t,10);n>e&&(e=n)}),e},e.isPercentage=o,e.isNumber=a,e.toRatio=function(t,e){return(100*t/e).toFixed(4)+"%"},e.fromRatio=function(t,e){return parseFloat(""+t)*e/100},e.mapStateToLayoutProps=function(t,e){var n=r.utils.findLayoutId(e.layouts,t.browserSizeMode,t.appConfig.mainSizeMode),i=t.appConfig.layouts,o=!0;if(!i[n])return{layout:null,theme:t.theme,appMode:t.appRuntimeInfo.appMode,inSelectMode:t.appRuntimeInfo.inSelectMode,mainSizeMode:t.appConfig.mainSizeMode,browserSizeMode:t.browserSizeMode};if(!t.appRuntimeInfo.draggingWidget&&t.appRuntimeInfo.selection||t.appRuntimeInfo.draggingWidget&&t.appRuntimeInfo.draggingWidget.layoutInfo){var a=t.appRuntimeInfo.draggingWidget&&t.appRuntimeInfo.draggingWidget.layoutInfo||t.appRuntimeInfo.selection,s=i[a.layoutId];if(s){var u=r.lodash.getValue(s,"content."+a.layoutItemId),l=r.lodash.getValue(u,"setting.lockParent",!1);(s.type===r.LayoutType.FlowLayout||l)&&(o=a.layoutId===n);var c=r.appConfigUtils.getWidgetIdThatUseTheLayoutId(t.appConfig,n);c&&t.appConfig.widgets[c].manifest.properties.type!==r.WidgetType.Layout&&(o=Object.keys(e.layouts).some(function(t){return e.layouts[t]===s.id}))}}return{canDrop:o,appMode:t.appRuntimeInfo.appMode,inSelectMode:t.appRuntimeInfo.inSelectMode,layout:i[n],theme:t.theme,draggingWidgetInfo:t.appRuntimeInfo.draggingWidget,mainSizeMode:t.appConfig.mainSizeMode,browserSizeMode:t.browserSizeMode}},e.mapStateToLayoutItemProps=s,e.getActiveLayout=function(t){var e,n;t||(t=r.getAppStore().getState().appStateInBuilder),e=t.appRuntimeInfo,n=t.appConfig;var i=e.activeLayout,o=e.currentDialogId,a=e.currentPageId;if(i)return i;var s=void 0;if(a)if(n.pages[a])s=n.pages[a].layout;else{var u=Object.keys(n.pages);s=n.pages[u[0]].layout}else s=o?n.dialogs[o].layout:n.pages.default.layout;return s},e.mapStateToWidgetProps=function(t,e){var n,o,a=s(t,e),u=!1,l=!1;if(a.layoutItem&&a.layoutItem.widgetId){var c=t.appConfig.widgets[a.layoutItem.widgetId];u=!0===r.lodash.getValue(c,"manifest.properties.supportInlineEditing"),l=!0===r.lodash.getValue(c,"manifest.properties.supportRepeat"),n=t.widgetsRuntimeInfo[a.layoutItem.widgetId],o=t.widgetsState[a.layoutItem.widgetId]}return i({},a,{supportInlineEditing:u,supportRepeat:l,runtimeInfo:n,widgetState:o})},e.snapToGridSize=function(t,e){return Math.round(t/e)*e},e.removePositionRelatedStyle=function(t){return["height","width","order","flexGrow","flexShrink","alignSelf"].forEach(function(e){t[e]&&delete t[e]}),t},e.replaceBoundingBox=function(t,e,n){if(!t)return r.Immutable({left:o(e.left)?e.left:Math.round(e.left)+"px",top:o(e.top)?e.top:Math.round(e.top)+"px",width:o(e.width)?e.width:Math.round(e.width)+"px",height:o(e.height)?e.height:Math.round(e.height)+"px"});var i=t;return["left","right","top","bottom","width","height"].forEach(function(t){null!=i[t]&&(i=u(t,i,e[t],n))}),i},e.updateBoundingBoxProp=u,e.generateBBoxStyle=function(t,e){var n={},i=e&&e.autoProps||{};return["left","right","top","bottom","width","height"].forEach(function(e){void 0!==t[e]&&!0!==i[e]&&(n[e]=t[e])}),n},e.generateResizingBBoxStyle=function(t,e,n){var i={};i.left=t.left+n.dx,i.width=t.width+n.dw;var r=e.right-t.right;0===n.dw?i.right=r-n.dx:0===n.dx?i.right=r-n.dw:i.right=r,i.top=t.top+n.dy,i.height=t.height+n.dh;var o=e.bottom-t.bottom;return 0===n.dh?i.bottom=o-n.dy:0===n.dy?i.bottom=o-n.dh:i.bottom=o,i},e.relativeClientRect=function(t,e){return{left:t.left-e.left,top:t.top-e.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height,id:null}},e.findContainerWidgetId=function(t,e){var n,i=t.widgets||{};return Object.keys(i).some(function(i){var r=t.widgets[i];return Object.keys(r.layouts||[]).some(function(t){var o=r.layouts[t];return Object.keys(o).some(function(t){if(o[t]===e)return n=i,!0})})}),n},e.getBuilderThemeVariables=function(){var t=window.parent;if(t&&t.jimuConfig&&t.jimuConfig.isBuilder)return t._appState.theme},e.parseTranslateCoords=function(t){var e=0,n=0;if(t&&0===t.indexOf("translate(")){var i=t.substring("translate(".length).split(",");i.length>1&&(e=parseFloat(i[0]),n=parseFloat(i[1]))}return{x:e,y:n}};var l={SMALL:54,MEDIUM:69,LARGE:84};e.getIconSize=function(t){return l[t]}},function(t,e,n){function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var r=n(0),o=r.createElement("path",{d:"M12 0v2h-2V0h2zm5 0v2h-2V0h2zM7 0v2H5V0h2zM2 0v2H0V0h2zm15 6v2h-2V6h2zM7 6v2H5V6h2zm5 0v2h-2V6h2zM2 6v2H0V6h2z",fill:"currentColor",fillRule:"nonzero"});function a(t){return r.createElement("svg",i({width:17,height:8,viewBox:"0 0 17 8"},t),o)}t.exports=a,a.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(5),o=n(2);e.pendLayoutItem=function(t){r.getAppConfigAction().setLayoutItemToPending(t,!0).exec(),i.getAppStore().dispatch(i.appActions.selectionChanged(null))},e.deleteWidget=function(t){r.getAppConfigAction().removeWidget(t,!0).exec(),i.getAppStore().dispatch(i.appActions.selectionChanged(null))},e.deleteSection=function(t){r.getAppConfigAction().removeSection(t,!0).exec(),i.getAppStore().dispatch(i.appActions.selectionChanged(null))},e.findCorespondingLayoutItem=function(t,e,n){var r,o=t.layouts[n];return Object.keys(o.content||{}).some(function(t){var n=o.content[t];if(e.type===i.LayoutItemType.Widget&&n.type===e.type&&n.widgetId===e.widgetId||e.type===i.LayoutItemType.Section&&n.type===e.type&&n.sectionId===e.sectionId)return r=t,!0}),{layoutItemId:r,layoutId:n}},e.addItemToLayout=function(t,e,n,a,s,u){var l=e,c=l.layoutInfo||e,h=r.getAppConfigAction(t);if(c.layoutId&&c.layoutItemId){if(c.layoutId===n.layoutId){var p=i.lodash.getValue(h.appConfig,"layouts."+c.layoutId+".content."+c.layoutItemId+".bbox"),d=o.replaceBoundingBox(p,s,a);return h.editLayoutItemBBox(c,d),u>=0&&h.editLayoutItemIndex(c,n,u),h.setLayoutItemToPending(c,!1),Promise.resolve({layoutInfo:c,updatedAppConfig:h.appConfig})}if(!l.layoutInfo||l.isFromCurrentSizeMode){h.setLayoutItemToPending(c,!1);var f=h.moveLayoutItemToAnotherLayout(c,n,a,s,u);return h.clearEmptyRowInFlowLayout(c),Promise.resolve({layoutInfo:f,updatedAppConfig:h.appConfig})}}if(l.itemType===i.LayoutItemType.Section){var g=l.id?l.id:h.createSection(),m=i.Immutable({id:o.getMaximumId(t.layouts[n.layoutId])+1+"",type:i.LayoutItemType.Section,bbox:o.replaceBoundingBox(null,s,a),sectionId:g});return f=h.addItemIntoLayout(n.layoutId,m,u),Promise.resolve({layoutInfo:f,updatedAppConfig:h.appConfig})}if(l.id)return m=i.Immutable({id:o.getMaximumId(t.layouts[n.layoutId])+1+"",type:i.LayoutItemType.Widget,bbox:o.replaceBoundingBox(null,s,a),widgetId:l.id}),f=h.addItemIntoLayout(n.layoutId,m,u),Promise.resolve({layoutInfo:f,updatedAppConfig:h.appConfig});var y={id:i.appConfigUtils.getUniqueId(h.appConfig,"widget"),uri:l.path};return i.WidgetManager.getInstance().handleNewWidgetJson(y).then(function(e){h.createWidget(i.Immutable(e));var l=i.Immutable({id:o.getMaximumId(t.layouts[n.layoutId])+1+"",type:i.LayoutItemType.Widget,bbox:o.replaceBoundingBox(null,s,a),widgetId:e.id}),c=r.appConfigUtils.getWidgetIdThatUseTheLayoutId(t,n.layoutId);return c&&t.widgets[c].manifest.properties.type!==i.WidgetType.Layout&&(l=l.setIn(["setting","lockParent"],!0)),{layoutInfo:h.addItemIntoLayout(n.layoutId,l,u),updatedAppConfig:h.appConfig}})}},,function(t,e){t.exports=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(19);e.deleteMenuItem={icon:n(23),title:function(t){return t.formatMessage("delete")},onClick:function(t){var e=t.layoutItem;e.type===i.LayoutItemType.Widget?r.deleteWidget(e.widgetId):e.type===i.LayoutItemType.Section&&r.deleteSection(e.sectionId)}},e.pedingMenuItem={icon:n(24),title:function(t){return t.formatMessage("pendingTip")},onClick:function(t){var e=t.layoutId,n=t.layoutItem;r.pendLayoutItem({layoutId:e,layoutItemId:n.id})}}},function(t,e,n){function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var r=n(0),o=r.createElement("path",{d:"M9 6V2.333C9 .939 10.408 0 12 0h8c1.592 0 3 .939 3 2.333V6h8a1 1 0 0 1 0 2h-3l-1.858 22.153A2 2 0 0 1 24.148 32H7.852a2 2 0 0 1-1.994-1.847L4 8H1a1 1 0 0 1 0-2h8zm2 0h10V2c0-.078-10-.078-10 0v4zM6.006 8l1.846 22h16.296l1.846-22H6.006zM13 12a1 1 0 0 1 1 1v12a1 1 0 0 1-2 0V13a1 1 0 0 1 1-1zm6 0a1 1 0 0 1 1 1v12a1 1 0 0 1-2 0V13a1 1 0 0 1 1-1z"});function a(t){return r.createElement("svg",i({width:32,height:32,viewBox:"0 0 32 32"},t),o)}t.exports=a,a.default=a},function(t,e,n){function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var r=n(0),o=r.createElement("path",{d:"M3 3.5h6a.5.5 0 0 1 0 1H3a.5.5 0 0 1 0-1zm0 3h6a.5.5 0 0 1 0 1H3a.5.5 0 0 1 0-1zm0 3h2a.5.5 0 0 1 0 1H3a.5.5 0 0 1 0-1zm8.5-1A.5.5 0 0 1 11 8V1H1v12h3.5a.5.5 0 0 1 0 1H1a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7a.5.5 0 0 1-.5.5zm2.696 2.43A6.01 6.01 0 0 1 16 12.925c-1.333 2.333-3.5 3-5 3a5.622 5.622 0 0 1-1.57-.23l.824-.824a5.2 5.2 0 0 0 .746.054c1 0 2.731-.297 3.83-2a4.233 4.233 0 0 0-1.318-1.313l.684-.684zm-1.966-.863l-.871.871a5.177 5.177 0 0 0-.359-.012c-1 0-2.731.297-3.83 2 .313.485.677.856 1.062 1.139l-.676.676A6.082 6.082 0 0 1 6 12.926c1.333-2.334 3.5-3 5-3 .376 0 .794.042 1.23.141zm1.988-.58a.5.5 0 0 1 0 .707L8.56 15.85a.5.5 0 0 1-.707-.707l5.656-5.657a.5.5 0 0 1 .708 0z",fill:"currentColor",fillRule:"nonzero"});function a(t){return r.createElement("svg",i({width:16,height:16,viewBox:"0 0 16 16"},t),o)}t.exports=a,a.default=a},function(t,e,n){"use strict";var i=n(50),r=(n(0),{childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0}),o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={};a[i.ForwardRef]={$$typeof:!0,render:!0};var s=Object.defineProperty,u=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;t.exports=function t(e,n,i){if("string"!=typeof n){if(p){var d=h(n);d&&d!==p&&t(e,d,i)}var f=u(n);l&&(f=f.concat(l(n)));for(var g=a[e.$$typeof]||r,m=a[n.$$typeof]||r,y=0;y<f.length;++y){var v=f[y];if(!(o[v]||i&&i[v]||m&&m[v]||g&&g[v])){var x=c(n,v);try{s(e,v,x)}catch(t){}}}return e}return e}},function(t,e,n){function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var r=n(0),o=r.createElement("path",{d:"M1.521 2.307L4 4.677l2.479-2.37a.517.517 0 0 1 .708 0 .464.464 0 0 1 0 .677l-2.833 2.71a.517.517 0 0 1-.708 0L.813 2.983a.464.464 0 0 1 0-.677.517.517 0 0 1 .708 0z"}),a=r.createElement("path",{d:"M0 0h8v8H0z",fill:"none"});function s(t){return r.createElement("svg",i({width:8,height:8,viewBox:"0 0 8 8"},t),o,a)}t.exports=s,s.default=s},function(t,e,n){function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var r=n(0),o=r.createElement("path",{d:"M18.568 27.566c.873.913.873 2.392 0 3.305s-2.288.913-3.16 0L2.766 17.652a2.413 2.413 0 0 1 0-3.305L15.408 1.128c.873-.913 2.288-.913 3.16 0s.873 2.392 0 3.305L7.507 15.999l11.061 11.566z"});function a(t){return r.createElement("svg",i({width:21,height:32,viewBox:"0 0 21 32"},t),o)}t.exports=a,a.default=a},function(t,e,n){function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var r=n(0),o=r.createElement("path",{d:"M1.473 27.897c-.898.939-.898 2.46 0 3.399s2.353.939 3.251 0L17.727 17.7a2.481 2.481 0 0 0 0-3.399L4.724.705c-.898-.939-2.353-.939-3.251 0s-.898 2.46 0 3.399L12.85 16.001 1.473 27.898z"});function a(t){return r.createElement("svg",i({width:19,height:32,viewBox:"0 0 19 32"},t),o)}t.exports=a,a.default=a},function(t,e,n){function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var r=n(0),o=r.createElement("path",{d:"M18 14h10.667a2 2 0 1 1 0 4H18v10.667a2 2 0 1 1-4 0V18H3.333a2 2 0 1 1 0-4H14V3.333a2 2 0 1 1 4 0V14z"});function a(t){return r.createElement("svg",i({width:32,height:32,viewBox:"0 0 32 32"},t),o)}t.exports=a,a.default=a},function(t,e,n){function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var r=n(0),o=r.createElement("path",{d:"M4 3h11a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm0 1v11h11V4H4zm-4 7.5V1a1 1 0 0 1 1-1h9.5a.5.5 0 0 1 0 1H1v10.5a.5.5 0 0 1-1 0z",fillRule:"nonzero"});function a(t){return r.createElement("svg",i({width:16,height:16,viewBox:"0 0 16 16"},t),o)}t.exports=a,a.default=a},function(t,e,n){function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var r=n(0),o=r.createElement("path",{d:"M13.462 12l10.235 10.235a1.034 1.034 0 1 1-1.462 1.462L12 13.462 1.765 23.697a1.034 1.034 0 1 1-1.462-1.462L10.538 12 .303 1.765A1.034 1.034 0 1 1 1.765.303L12 10.538 22.235.303a1.034 1.034 0 1 1 1.462 1.462L13.462 12z",fill:"currentColor",fillRule:"nonzero"});function a(t){return r.createElement("svg",i({width:24,height:24,viewBox:"0 0 24 24"},t),o)}t.exports=a,a.default=a},function(t,e,n){function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var r=n(0),o=r.createElement("path",{d:"M14.167 28.786H1.607a1.607 1.607 0 0 0 0 3.214h26.12a1.607 1.607 0 0 0 0-3.214H15.646c.225-.086.431-.211.604-.37l12.077-11.107c.348-.319.522-.731.522-1.143 0-.435-.191-.866-.573-1.188-.742-.63-1.926-.611-2.639.045l-8.823 8.112c-.003.003-.006-7.16-.009-21.486 0-.877-.776-1.593-1.752-1.646-1.086-.056-1.985.727-1.985 1.683v21.505c0 .003-2.944-2.7-8.832-8.108-.713-.656-1.896-.678-2.639-.045-.742.63-.768 1.676-.051 2.332l12.013 11.047c.174.159.38.284.606.37z"});function a(t){return r.createElement("svg",i({width:29,height:32,viewBox:"0 0 29 32"},t),o)}t.exports=a,a.default=a},function(t,e,n){function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var r=n(0),o=r.createElement("path",{d:"M1 0a1 1 0 0 1 1 1v30a1 1 0 0 1-2 0V1a1 1 0 0 1 1-1zm5 20v4h20v-4H6zm0-2h20a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2zM6 8v4h12V8H6zm0-2h12a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z"});function a(t){return r.createElement("svg",i({width:28,height:32,viewBox:"0 0 28 32"},t),o)}t.exports=a,a.default=a},function(t,e,n){function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var r=n(0),o=r.createElement("path",{d:"M13.086 8.5H10v-1h3.086L12.06 6.475a.5.5 0 1 1 .707-.707L15 8l-2.157 2.157a.5.5 0 1 1-.707-.707l.95-.95zm-10.172 0l.95.95a.5.5 0 1 1-.707.707L1 8l2.232-2.232a.5.5 0 1 1 .707.707L2.914 7.5H6v1H2.914zM15 1H1v14h14V1zm1 0v14a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1z",fill:"currentColor",fillRule:"nonzero"});function a(t){return r.createElement("svg",i({width:16,height:16,viewBox:"0 0 16 16"},t),o)}t.exports=a,a.default=a},function(t,e,n){function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var r=n(0),o=r.createElement("path",{d:"M8.5 2.914V6h-1V2.914L6.475 3.94a.5.5 0 0 1-.707-.707L8 1l2.157 2.157a.5.5 0 0 1-.707.707l-.95-.95zm0 10.172l.95-.95a.5.5 0 0 1 .707.707L8 15l-2.232-2.232a.5.5 0 0 1 .707-.707L7.5 13.086V10h1v3.086zM1 1v14h14V1H1zm0-1h14a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1z",fill:"currentColor",fillRule:"nonzero"});function a(t){return r.createElement("svg",i({width:16,height:16,viewBox:"0 0 16 16"},t),o)}t.exports=a,a.default=a},function(t,e,n){function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var r=n(0),o=r.createElement("path",{d:"M14.293 1H12.95a.5.5 0 0 1 0-1H16v3.157a.5.5 0 1 1-1 0v-1.45L8.707 8l6.29 6.29v-1.55a.5.5 0 0 1 1 0v3.263H12.84a.5.5 0 0 1 0-1h1.456L8 8.707l-6.296 6.296h1.453a.5.5 0 1 1 0 1H0V12.74a.5.5 0 0 1 1 0v1.553L7.293 8 1 1.707v1.45a.5.5 0 1 1-1 0V0h3.05a.5.5 0 0 1 0 1H1.707L8 7.293 14.293 1z",fill:"currentColor",fillRule:"nonzero"});function a(t){return r.createElement("svg",i({width:16,height:16,viewBox:"0 0 16 16"},t),o)}t.exports=a,a.default=a},function(t,e,n){function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var r=n(0),o=r.createElement("path",{d:"M7.433.2a.903.903 0 0 1 1.134 0l7 5.024c.1.079.188.178.257.292.313.517.198 1.223-.257 1.578l-7 4.706a.903.903 0 0 1-1.134 0l-7-4.706a1.078 1.078 0 0 1-.257-.292c-.313-.516-.198-1.223.257-1.578l7-5.024zM15 6.16L8 1.134 1 6.159l7 4.706 7-4.706zM.777 10.083L8 14.899l7.223-4.815a.5.5 0 1 1 .554.832l-7.5 5a.5.5 0 0 1-.554 0l-7.5-5a.5.5 0 1 1 .554-.832z",fill:"currentColor",fillRule:"nonzero"});function a(t){return r.createElement("svg",i({width:16,height:16,viewBox:"0 0 16 16"},t),o)}t.exports=a,a.default=a},function(t,e,n){function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var r=n(0),o=r.createElement("path",{d:"M8.5 14.084l.948-.948a.5.5 0 0 1 .708.707L7.999 16l-2.233-2.232a.5.5 0 0 1 .708-.707L7.5 14.087V1h-7a.5.5 0 0 1 0-1h15a.5.5 0 0 1 0 1h-7v13.084zM1.5 7a.5.5 0 0 1 0-1H6v1H1.5zm13 0H10V6h4.5a.5.5 0 0 1 0 1z",fill:"currentColor",fillRule:"nonzero"});function a(t){return r.createElement("svg",i({width:16,height:16,viewBox:"0 0 16 16"},t),o)}t.exports=a,a.default=a},function(t,e,n){function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var r=n(0),o=r.createElement("path",{d:"M8.5 1.916V15h7a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1h7V1.913L6.474 2.939a.5.5 0 0 1-.708-.707L8 0l2.157 2.157a.5.5 0 0 1-.708.707L8.5 1.916zM1.5 9H6v1H1.5a.5.5 0 0 1 0-1zm13 0a.5.5 0 0 1 0 1H10V9h4.5z",fill:"currentColor",fillRule:"nonzero"});function a(t){return r.createElement("svg",i({width:16,height:16,viewBox:"0 0 16 16"},t),o)}t.exports=a,a.default=a},function(t,e,n){function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var r=n(0),o=r.createElement("path",{d:"M8.5 13.084l.948-.948a.5.5 0 0 1 .708.707L7.999 15l-2.233-2.232a.5.5 0 0 1 .708-.707L7.5 13.087V1h-7a.5.5 0 0 1 0-1h15a.5.5 0 0 1 0 1h-7v12.084zM.5 16a.5.5 0 0 1 0-1h15a.5.5 0 0 1 0 1H.5zm1-9a.5.5 0 0 1 0-1H6v1H1.5zm13 0H10V6h4.5a.5.5 0 0 1 0 1z",fill:"currentColor",fillRule:"nonzero"});function a(t){return r.createElement("svg",i({width:16,height:16,viewBox:"0 0 16 16"},t),o)}t.exports=a,a.default=a},function(t,e,n){function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var r=n(0),o=r.createElement("path",{d:"M8.5 2.916V15h7a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1h7V2.913L6.474 3.939a.5.5 0 0 1-.708-.707L8 1l2.157 2.157a.5.5 0 0 1-.708.707L8.5 2.916zM.5 0h15a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1zm1 9H6v1H1.5a.5.5 0 0 1 0-1zm13 0a.5.5 0 0 1 0 1H10V9h4.5z",fill:"currentColor",fillRule:"nonzero"});function a(t){return r.createElement("svg",i({width:16,height:16,viewBox:"0 0 16 16"},t),o)}t.exports=a,a.default=a},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},o=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&(n[i[r]]=t[i[r]])}return n};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(1),u=n(7),l=n(25),c=n(2),h={};function p(t){var e=t.relatedTarget;if(e&&"function"==typeof e.getAttribute){var n=e.getAttribute("data-layoutid"),i=e.getAttribute("data-layoutitemid"),r="true"===e.getAttribute("data-repeatable");if(n&&i)return{layoutId:n,layoutItemId:i,manifest:{properties:{supportRepeat:r}}}}return null}function d(t,e){Object.keys(h).forEach(function(n){var i=h[n];i&&(n!==t&&"function"==typeof i.onDragLeave?i.onDragLeave():n===t&&"function"==typeof i.onDragEnter&&i.onDragEnter(e))})}e.withDrop=function(){return function(t){var e=function(e){function n(t){var n=e.call(this,t)||this;return n._onDragEnter=function(t){t.stopPropagation(),t.preventDefault(),n.boundingBox=n.ref.getBoundingClientRect();var e=n.props.draggingWidgetInfo,i=n.refWrapped.current;e&&i&&"function"==typeof i.onDragEnter&&i.onDragEnter(e)},n._onDragLeave=function(t){t.stopPropagation(),t.preventDefault(),a&&cancelAnimationFrame(a);var e=n.props.draggingWidgetInfo,i=n.refWrapped.current;e&&i&&"function"==typeof i.onDragLeave&&i.onDragLeave(e)},n.onH5DragOver=function(t,e){var i=n.props.draggingWidgetInfo;if(n._canDrop(i)&&i&&t&&e){var r=200,o=100;i.manifest.defaultSize&&(r=isNaN(i.manifest.defaultSize.width)?r:i.manifest.defaultSize.width,o=isNaN(i.manifest.defaultSize.height)?o:i.manifest.defaultSize.height),a=null,n._updateDraggingOverEffect(t-n.boundingBox.left,e-n.boundingBox.top,t-r/2-n.boundingBox.left,e-o/2-n.boundingBox.top,r,o,n.boundingBox,i)}},n._onDraggingOver=function(t){t.stopPropagation(),t.preventDefault();var e=t.clientX,i=t.clientY,r=n.props,o=r.layout,a=r.draggingWidgetInfo;d(o.id,a),n.h5DragOverHandler(e,i)},n._updateDraggingOverEffect=function(t,e,i,r,o,a,s,u,l){var c=n.refWrapped.current;c&&"function"==typeof c.onDragOver&&c.onDragOver(u,l,s,{left:i,top:r,width:o,height:a,right:i+o,bottom:r+a},t,e)},n._onDrop=function(t){if(t.stopPropagation(),n.h5DragOverHandler.cancel(),a&&cancelAnimationFrame(a),n._canDrop(n.props.draggingWidgetInfo)){var e=n.props.draggingWidgetInfo;if(e){var i=t.clientX,r=t.clientY,o=n.refWrapped.current,s=200,u=100;e.manifest.defaultSize&&(s=isNaN(e.manifest.defaultSize.width)?s:e.manifest.defaultSize.width,u=isNaN(e.manifest.defaultSize.height)?u:e.manifest.defaultSize.height);var l=i-s/2-n.boundingBox.left,c=r-u/2-n.boundingBox.top,h=s,p=u;e&&o&&"function"==typeof o.onDrop&&o.onDrop(e,n.boundingBox,{left:i-s/2-n.boundingBox.left,top:r-u/2-n.boundingBox.top,width:s,height:u,right:l+h,bottom:c+p},i-n.boundingBox.left,r-n.boundingBox.top)}}},n.refWrapped=s.React.createRef(),c.autoBindHandlers(n,["_onDraggingOver","_onDragEnter","_onDragLeave","_onDrop"]),n.h5DragOverHandler=s.lodash.throttle(n.onH5DragOver,50),n}return i(n,e),n.prototype.componentDidMount=function(){this._initInteractive();var t=this.props.layout,e=this.refWrapped.current;e&&(h[t.id]=e)},n.prototype.componentWillUnmount=function(){this.interactable&&(this.interactable.unset(),this.interactable=null);var t=this.props.layout;h[t.id]&&(h[t.id]=null,delete h[t.id])},n.prototype._initInteractive=function(){var t,e=this,n=this.props.layout.id;if(this.ref){var i=this.ref;this.interactable=u.interact(i).dropzone({accept:".exb-rnd",checker:function(t,e,n,i,r,o,a){return n&&!1!==a._canDrag&&!a.contains(r)},ondragenter:function(t){var n=p(t);if(e._canDrop(n)){t.stopPropagation();var i=e.refWrapped.current;i&&"function"==typeof i.onDragEnter&&i.onDragEnter(n)}},ondragleave:function(t){var n=p(t);if(e._canDrop(n)){t.stopPropagation();var i=e.refWrapped.current;i&&"function"==typeof i.onDragLeave&&i.onDragLeave(n)}},ondropmove:function(r){var o=p(r);if(d(n,o),e._canDrop(o)){r.stopPropagation(),t&&cancelAnimationFrame(t);var a=r.relatedTarget;t=requestAnimationFrame(function(){var n=r.dragEvent._interaction.rect,s=i.getBoundingClientRect(),u=r.dragEvent._interaction.coords.cur.client,l=u.x-s.left,c=u.y-s.top;e._updateDraggingOverEffect(l,c,n.left-s.left,n.top-s.top,n.width,n.height,s,o,a),t=null})}},ondrop:function(n){var r=p(n);if(e._canDrop(r)){n.stopPropagation(),t&&cancelAnimationFrame(t);var o=e.refWrapped.current;if(o&&"function"==typeof o.onDrop){var a=i.getBoundingClientRect(),s=n.dragEvent._interaction.rect,u={left:s.left-a.left,top:s.top-a.top,width:s.width,height:s.height};u.right=u.left+u.width,u.bottom=u.top+u.height;var l=n.dragEvent._interaction.coords.cur.client,c=l.x-a.left,h=l.y-a.top;o.onDrop(r,a,u,c,h)}}}})}},n.prototype._canDrop=function(t){return!(this.props.isRepeat&&!t.manifest.properties.supportRepeat)},n.prototype.render=function(){var e=this;return s.jsx(c.PageContext.Consumer,null,function(n){var i=e.props,a=i.className,u=i.style,l=i.canDrop,c=o(i,["className","style","canDrop"]),h=!n.viewOnly&&!1!==e.props.droppable&&l;e.interactable&&e.interactable.dropzone(h);var p=s.classNames("exb-droppable w-100 d-flex",a),d=r({},u,{position:"relative"});return s.jsx("div",{className:p,style:d,ref:function(t){return e.ref=t},onDragEnter:h?e._onDragEnter:void 0,onDragLeave:h?e._onDragLeave:void 0,onDragOver:h?e._onDraggingOver:void 0,onDrop:h?e._onDrop:void 0},s.jsx(t,r({ref:e.refWrapped},c)))})},n}(s.React.PureComponent),n=l(e,t);return s.ReactRedux.connect(c.mapStateToLayoutProps)(n)}}},function(t,e,n){function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var r=n(0),o=r.createElement("path",{d:"M2.212 9.936L2 12.27l2.333-.212L13.27 3.12 11.149 1 2.212 9.936zm-.707-.707L10.441.293a1 1 0 0 1 1.415 0l2.12 2.121a1 1 0 0 1 0 1.414l-8.935 8.937a1 1 0 0 1-.617.289l-2.333.212a1 1 0 0 1-1.087-1.087l.212-2.333a1 1 0 0 1 .289-.617zm7.434-6.497l2.829 2.829-.707.707-2.829-2.829.707-.707zM.5 15h15a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1z",fill:"currentColor",fillRule:"nonzero"});function a(t){return r.createElement("svg",i({width:16,height:16,viewBox:"0 0 16 16"},t),o)}t.exports=a,a.default=a},,function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},a=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&(n[i[r]]=t[i[r]])}return n};Object.defineProperty(e,"__esModule",{value:!0});var s,u=n(1),l=n(7),c=n(25),h=n(2),p=function(){};e.withRnd=function(){return function(t){var e=function(e){function n(t){var n=e.call(this,t)||this;return n.selectCurrentLayoutItem=function(){n.props.selected||u.getAppStore().dispatch(u.appActions.selectionChanged({layoutId:n.props.layoutId,layoutItemId:n.props.layoutItem.id}))},n.ref=u.React.createRef(),n.state={isDragging:!1,isResizing:!1},n}return i(n,e),n.prototype.componentDidMount=function(){var t,e,n,i,r,o,a,s,c,h,p,d,f,g,m=this,y=this.props,v=y.forwardRef,x=y.onResizeStart,b=y.onResizing,w=y.onResizeEnd,I=y.onDragStart,S=y.onDragging,_=y.onDragEnd,M=y.useDragHandler,P=v||this.ref,C=!1,O=null;P&&P.current&&(this.interactable=l.interact(P.current).origin("parent").draggable({inertia:!1,autoScroll:!1,allowFrom:M?".widget-drag-handler":void 0,ignoreFrom:".no-drag-action",onstart:function(n){if(m._canDrag()){n.target._canDrag=!0,n.stopPropagation(),t=0,e=0;var i=n.target,a=n.target.parentNode;s=i.style.zIndex,g=i.style.transform,i.style.zIndex="20",r=i.getBoundingClientRect(),o=a.getBoundingClientRect(),i.setAttribute("data-containerx",o.left),i.setAttribute("data-containery",o.top),i.setAttribute("data-layoutid",m.props.layoutId),m.selectCurrentLayoutItem(),u.getAppStore().dispatch(u.appActions.dragWidgetFromList({itemType:m.props.layoutItem.type,layoutInfo:{layoutId:m.props.layoutId,layoutItemId:m.props.layoutItem.id},manifest:null,label:null,path:null,icon:null})),I(m.props.layoutItemId),m.setState({isDragging:!0})}else n.target._canDrag=!1},onmove:function(n){if(m._canDrag()){n.stopPropagation(),t+=n.dx,e+=n.dy;var i=n.target,s=n.client.x,u=n.client.y,l=!(s>=0&&s<=o.width&&u>=0&&u<=o.height);if(!m.props.restrict&&!C&&l)return C=!0,a=i.style.position,c=i.style.left,h=i.style.top,p=i.style.width,d=i.style.height,f=i.style.marginLeft,i.style.position="fixed",i.style.marginLeft="0",i.style.transform="none",i.style.left=r.left+t+"px",i.style.top=r.top+e+"px",i.style.width=r.width+"px",i.style.height=r.height+"px",t=0,e=0,void S(m.props.layoutItemId,t,e,l);i.style.transform="translate("+t+"px, "+e+"px)",S(m.props.layoutItemId,t,e,l)}},onend:function(n){if(m._canDrag()){n.stopPropagation();var i=n.target,r=n.client.x,l=n.client.y,y=!(r>=0&&r<=o.width&&l>=0&&l<=o.height);C&&(i.style.position=a,i.style.zIndex=s,i.style.left=c,i.style.top=h,i.style.marginLeft=f,"auto"!==p&&(i.style.width=p),"auto"!==d&&(i.style.height=d)),i.style.zIndex=s,i.style.transform=g,C=!1,_(m.props.layoutItemId,t,e,y),u.getAppStore().dispatch(u.appActions.dropWidgetFromList()),m.setState({isDragging:!1})}}}).resizable({inertia:!1,edges:{top:".rnd-resize-top",left:".rnd-resize-left",bottom:".rnd-resize-bottom",right:".rnd-resize-right"},onstart:function(r){r.stopPropagation(),m._canResize()&&(t=0,e=0,n=0,i=0,x(m.props.layoutItemId),m.setState({isResizing:!0}))},onmove:function(r){if(r.stopPropagation(),m._canResize()){var o=r.deltaRect;t+=o.left,e+=o.top,n+=o.width,i+=o.height,O&&(cancelAnimationFrame(O),O=null),O=requestAnimationFrame(function(){b(m.props.layoutItemId,t,e,n,i),O=null})}},onend:function(r){r.stopPropagation(),m._canResize()&&(O&&(cancelAnimationFrame(O),O=null),w(m.props.layoutItemId,t,e,n,i),m.setState({isResizing:!1}))}}))},n.prototype.componentWillUnMount=function(){this.interactable&&(this.interactable.unset(),this.interactable=null)},n.prototype._isInlineEditing=function(){var t=this.props.runtimeInfo;return t&&!0===t.isInlineEditing},n.prototype._canDrag=function(){var t=this.props,e=t.draggable,n=t.appMode,i=t.selected,r=u.utils.isTouchDevice(),o=this.props.runtimeInfo&&this.props.runtimeInfo.isInlineEditing;return!1!==e&&n===u.AppMode.Design&&!o&&(!r||i)},n.prototype._canResize=function(){var t=this.props,e=t.resizable,n=t.appMode,i=this.props.runtimeInfo&&this.props.runtimeInfo.isInlineEditing;return!1!==e&&n===u.AppMode.Design&&!i},n.prototype.render=function(){var e=this;return u.jsx(h.PageContext.Consumer,null,function(n){var i=e.props,l=(i.gridSize,i.size,i.selected,i.draggable,i.onResizeStart,i.onResizing,i.onResizeEnd,i.style),c=i.className,h=i.forwardRef,p=(i.appMode,i.dispatch,i.theme,i.isLayoutWidget,i.runtimeInfo,i.useDragHandler),d=a(i,["gridSize","size","selected","draggable","onResizeStart","onResizing","onResizeEnd","style","className","forwardRef","appMode","dispatch","theme","isLayoutWidget","runtimeInfo","useDragHandler"]),f=e.state,g=f.isDragging,m=f.isResizing,y=!n.viewOnly&&e._canDrag();e.interactable&&e.interactable.draggable(y);var v=e.props.runtimeInfo&&!0===e.props.runtimeInfo.isInlineEditing,x=u.classNames("exb-rnd",c,{"no-drag-action":!y}),b=h||e.ref,w=o({},l);return u.jsx("div",{className:x,ref:b,css:u.css(s||(s=r(["\n                    display: flex;\n                    cursor: ",";\n                    touch-action: ",";\n                    user-select: ",";\n                  "],["\n                    display: flex;\n                    cursor: ",";\n                    touch-action: ",";\n                    user-select: ",";\n                  "])),!y||p||v?"default":"move",v?"auto":"none",v?"auto":"none"),"data-layoutid":e.props.layoutId,"data-layoutitemid":e.props.layoutItemId,"data-repeatable":e.props.supportRepeat,style:w},u.jsx(t,o({layoutId:e.props.layoutId,className:"w-100",isDragging:g,isResizing:m,layoutItemId:e.props.layoutItemId},d)))})},n.defaultProps={left:!0,top:!0,right:!0,bottom:!0,selected:!1,restrict:!1,onResizeStart:p,onResizing:p,onResizeEnd:p,onDragStart:p,onDragging:p,onDragEnd:p},n}(u.React.PureComponent),n=c(e,t);return u.ReactRedux.connect(h.mapStateToWidgetProps)(n)}}},function(t,e,n){"use strict";var i=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},a=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&(n[i[r]]=t[i[r]])}return n};Object.defineProperty(e,"__esModule",{value:!0});var s,u,l,c,h,p,d,f,g,m,y,v,x,b,w=n(25),I=n(7),S=n(1),_=n(5),M=n(13),P=n(2),C=n(323),O=n(319),R=12,j=20,E=S.css(s||(s=i(["\n  position: absolute;\n"],["\n  position: absolute;\n"]))),A=S.css(u||(u=i(["\n  top: ","px;\n  left: ","px;\n"],["\n  top: ","px;\n  left: ","px;\n"])),-5,-5),T=S.css(l||(l=i(["\n  top: ","px;\n  right: ","px;\n"],["\n  top: ","px;\n  right: ","px;\n"])),-5,-5),z=S.css(c||(c=i(["\n  bottom: ","px;\n  left: ","px;\n"],["\n  bottom: ","px;\n  left: ","px;\n"])),-5,-5),L=S.css(h||(h=i(["\n  bottom: ","px;\n  right: ","px;\n"],["\n  bottom: ","px;\n  right: ","px;\n"])),-5,-5),k=S.css(p||(p=i(["\n  height: ","px;\n  left: ","px;\n  right: ","px;\n  top: ","px;\n\n  &:after {\n    left: 50%;\n    top: 50%;\n    margin-left: ","px;\n    margin-top: ","px;\n  }\n"],["\n  height: ","px;\n  left: ","px;\n  right: ","px;\n  top: ","px;\n\n  &:after {\n    left: 50%;\n    top: 50%;\n    margin-left: ","px;\n    margin-top: ","px;\n  }\n"])),16,10,10,-8,-5,-5),B=S.css(d||(d=i(["\n  width: ","px;\n  top: ","px;\n  bottom: ","px;\n  right: ","px;\n\n  &:after {\n    top: 50%;\n    right: 50%;\n    margin-top: ","px;\n    margin-right: ","px;\n  }\n"],["\n  width: ","px;\n  top: ","px;\n  bottom: ","px;\n  right: ","px;\n\n  &:after {\n    top: 50%;\n    right: 50%;\n    margin-top: ","px;\n    margin-right: ","px;\n  }\n"])),16,10,10,-8,-5,-5),N=S.css(f||(f=i(["\n  height: ","px;\n  left: ","px;\n  right: ","px;\n  bottom: ","px;\n\n  &:after {\n    left: 50%;\n    bottom: 50%;\n    margin-left: ","px;\n    margin-bottom: ","px;\n  }\n"],["\n  height: ","px;\n  left: ","px;\n  right: ","px;\n  bottom: ","px;\n\n  &:after {\n    left: 50%;\n    bottom: 50%;\n    margin-left: ","px;\n    margin-bottom: ","px;\n  }\n"])),16,10,10,-8,-5,-5),D=S.css(g||(g=i(["\n  width: ","px;\n  top: ","px;\n  bottom: ","px;\n  left: ","px;\n\n  &:after {\n    top: 50%;\n    left: 50%;\n    margin-top: ","px;\n    margin-left: ","px;\n  }\n"],["\n  width: ","px;\n  top: ","px;\n  bottom: ","px;\n  left: ","px;\n\n  &:after {\n    top: 50%;\n    left: 50%;\n    margin-top: ","px;\n    margin-left: ","px;\n  }\n"])),16,10,10,-8,-5,-5);function F(t,e){var n,i=P.mapStateToWidgetProps(t,e);return i.layoutItem.sectionId&&(n=P.getSectionInfo(t,i.layoutItem.sectionId)),o({},n,i)}e.withSelect=function(t){var e,n;return function(s){var u=function(u){function l(t){var e=u.call(this,t)||this;return e._activate=function(t){t.stopPropagation();var n=e.props,i=n.layoutId,r=n.layoutItemId,o=n.dispatch;e.canSelect()&&o(M.selectItem({layoutId:i,layoutItemId:r}))},e.refWrapped=S.React.createRef(),e}return r(l,u),l.prototype.componentDidMount=function(){var t=this;this.ref&&(this.interactable=I.interact(this.ref).on("tap",function(e){t._activate(e)}))},l.prototype.componentWillUnmount=function(){this.interactable&&(this.interactable.unset(),this.interactable=null)},l.prototype.canSelect=function(){var t=this.props,e=t.appMode,n=t.inSelectMode,i=t.selectable;return(e===S.AppMode.Design||e===S.AppMode.Run&&n)&&!1!==i},l.prototype._createToolbar=function(){if(!this.ref||!this.refWrapped.current)return null;var e=this.props,n=e.layoutId,i=e.layoutItem,r=e.theme,o=this._getExtensionTools()||[];return _.appBuilderSync.letBuilderShowLayoutToolbar(t),S.jsx(C.Toolbar,{layoutId:n,layoutItem:i,theme:r,parentRef:this.ref,tools:o,formatMessage:this.formatMessage})},l.prototype.formatMessage=function(t){return t},l.prototype._getExtensionTools=function(){var t=this,e=this.props.layoutItem.widgetId;return e?S.ExtensionManager.getInstance().getExtensions(S.extensionSpec.ExtensionPoints.ContextTool).filter(function(t){return t.widgetId===e}).map(function(n){return{icon:n.getIcon(),title:n.getTitle(),onClick:n.onClick.bind(n),checked:n.checked&&n.checked.bind(n),disabled:n.disabled?"function"==typeof n.disabled?n.disabled.bind(n):n.disabled:null,visible:n.visible?"function"==typeof n.visible?n.visible.bind(n):n.visible:null,settingPanel:n.getSettingPanel({layoutItem:t.props.layoutItem,clientRect:t.ref.getBoundingClientRect()}),index:n.index,widgetId:e}}).sort(function(t,e){return t.index-e.index}):[]},l.prototype.getStyle=function(){return S.css(m||(m=i(["\n          .hover-tip {\n            display: none;\n          }\n          &:hover > div.hover-tip {\n            display: block;\n          }\n        "],["\n          .hover-tip {\n            display: none;\n          }\n          &:hover > div.hover-tip {\n            display: block;\n          }\n        "])))},l.prototype.render=function(){var t=this;return S.jsx(P.PageContext.Consumer,null,function(e){var n=t.props,r=(n.top,n.left,n.right,n.bottom,n.theme,n.appMode),u=n.selected,l=(n.dispatch,n.disableResizing),c=n.isDragging,h=n.isResizing,p=a(n,["top","left","right","bottom","theme","appMode","selected","dispatch","disableResizing","isDragging","isResizing"]),d=t.props.layoutItem,f=c||h,g=P.getBuilderThemeVariables(),m=t.props.runtimeInfo&&!0===t.props.runtimeInfo.isInlineEditing,x=t._enableResizing(!e.viewOnly&&!l&&!c&&u&&r===S.AppMode.Design&&!m),b=t._actionHandlers(x,g),w=S.css(y||(y=i(["\n              position: absolute;\n              left: 0;\n              bottom: 0;\n              top: 0;\n              right: 0;\n              z-index: 10;\n              pointer-events: none;\n              &::after {\n                content: '';\n                position: absolute;\n                left: 1px;\n                bottom: 1px;\n                top: 1px;\n                right: 1px;\n                box-shadow: 0 0 0 1px ",";\n              }\n            "],["\n              position: absolute;\n              left: 0;\n              bottom: 0;\n              top: 0;\n              right: 0;\n              z-index: 10;\n              pointer-events: none;\n              &::after {\n                content: '';\n                position: absolute;\n                left: 1px;\n                bottom: 1px;\n                top: 1px;\n                right: 1px;\n                box-shadow: 0 0 0 1px ",";\n              }\n            "])),g.colors.cyans.cyan500),I=d.type===S.LayoutItemType.Section&&!0===t.props.isEditing;return S.jsx("div",{ref:function(e){return t.ref=e},css:t.getStyle(),className:"d-flex w-100 selectable",style:{position:"relative"},onClick:e.viewOnly?void 0:t._activate},!e.viewOnly&&t.canSelect()&&S.jsx("div",{className:"hover-tip",css:w}),!e.viewOnly&&(u||I)&&!f&&r===S.AppMode.Design&&S.jsx(O.Manager,null,S.jsx(O.Reference,null,function(t){var e=t.ref;return S.jsx("div",{css:[w,S.css(v||(v=i(["\n                              visibility: ",";\n                            "],["\n                              visibility: ",";\n                            "])),I?"hidden":"visible")],ref:e})}),S.ReactDOM.createPortal(S.jsx(O.Popper,{placement:"top-end"},function(e){var n=e.ref,i=e.style,r=e.placement;return e.arrowProps,S.jsx("div",{ref:n,style:o({},i,{zIndex:31,margin:"4px 0"}),"data-placement":r},t._createToolbar())}),document.body)),S.jsx(s,o({ref:t.refWrapped,layoutId:t.props.layoutId,layoutItemId:t.props.layoutItemId},p)),u&&b)})},l.prototype._enableResizing=function(t){var e=this.props,n=e.left,i=e.right,r=e.top,o=e.bottom;return{top:Boolean(t&&!1!==r),right:Boolean(t&&!1!==i),bottom:Boolean(t&&!1!==o),left:Boolean(t&&!1!==n),topRight:Boolean(t&&!1!==r&&!1!==i),bottomRight:Boolean(t&&!1!==o&&!1!==i),bottomLeft:Boolean(t&&!1!==o&&!1!==n),topLeft:Boolean(t&&!1!==r&&!1!==n)}},l.prototype._actionHandlers=function(t,r){var o=[];return e=S.css(x||(x=i(["\n          width: ","px;\n          height: ","px;\n          background-color: ",";\n          border: 2px solid ",";\n          border-radius: 50%;\n          z-index: ",";\n        "],["\n          width: ","px;\n          height: ","px;\n          background-color: ",";\n          border: 2px solid ",";\n          border-radius: 50%;\n          z-index: ",";\n        "])),R,R,r.colors.cyans.cyan500,r.colors.black,j),n=S.css(b||(b=i(["\n          box-shadow: none;\n\n          &:after {\n            position: absolute;\n            content: '';\n            width: ","px;\n            height: ","px;\n            background-color: ",";\n            border: 2px solid ",";\n            border-radius: 50%;\n            z-index: ",";\n          }\n        "],["\n          box-shadow: none;\n\n          &:after {\n            position: absolute;\n            content: '';\n            width: ","px;\n            height: ","px;\n            background-color: ",";\n            border: 2px solid ",";\n            border-radius: 50%;\n            z-index: ",";\n          }\n        "])),R,R,r.colors.cyans.cyan500,r.colors.black,j),t.top&&o.push(S.jsx("span",{key:"2",className:"rnd-resize-top",css:[E,n,k]})),t.right&&o.push(S.jsx("span",{key:"4",className:"rnd-resize-right",css:[E,n,B]})),t.bottom&&o.push(S.jsx("span",{key:"6",className:"rnd-resize-bottom",css:[E,n,N]})),t.left&&o.push(S.jsx("span",{key:"8",className:"rnd-resize-left",css:[E,n,D]})),t.topLeft&&o.push(S.jsx("span",{key:"1",className:"rnd-resize-top rnd-resize-left",css:[E,e,A]})),t.topRight&&o.push(S.jsx("span",{key:"3",className:"rnd-resize-top rnd-resize-right",css:[E,e,T]})),t.bottomRight&&o.push(S.jsx("span",{key:"5",className:"rnd-resize-bottom rnd-resize-right",css:[E,e,L]})),t.bottomLeft&&o.push(S.jsx("span",{key:"7",className:"rnd-resize-bottom rnd-resize-left",css:[E,e,z]})),o},l}(S.React.PureComponent),l=w(u,s);return S.ReactRedux.connect(F)(l)}}},function(t,e,n){var i;
/*!
* svg.js - A lightweight library for manipulating and animating SVG.
* @version 2.7.1
* https://svgdotjs.github.io/
*
* @copyright Wout Fierens <wout@mick-wout.com>
* @license MIT
*
* BUILT: Fri Nov 30 2018 10:01:55 GMT+0100 (GMT+01:00)
*/!function(r,o){void 0===(i=function(){return function(t,e){var n=(void 0!==this?this:t).SVG=function(t){if(n.supported)return t=new n.Doc(t),n.parser.draw||n.prepare(),t};if(n.ns="http://www.w3.org/2000/svg",n.xmlns="http://www.w3.org/2000/xmlns/",n.xlink="http://www.w3.org/1999/xlink",n.svgjs="http://svgjs.com/svgjs",n.supported=!!e.createElementNS&&!!e.createElementNS(n.ns,"svg").createSVGRect,!n.supported)return!1;n.did=1e3,n.eid=function(t){return"Svgjs"+c(t)+n.did++},n.create=function(t){var n=e.createElementNS(this.ns,t);return n.setAttribute("id",this.eid(t)),n},n.extend=function(){var t,e,i,r;for(t=[].slice.call(arguments),e=t.pop(),r=t.length-1;r>=0;r--)if(t[r])for(i in e)t[r].prototype[i]=e[i];n.Set&&n.Set.inherit&&n.Set.inherit()},n.invent=function(t){var e="function"==typeof t.create?t.create:function(){this.constructor.call(this,n.create(t.create))};return t.inherit&&(e.prototype=new t.inherit),t.extend&&n.extend(e,t.extend),t.construct&&n.extend(t.parent||n.Container,t.construct),e},n.adopt=function(e){return e?e.instance?e.instance:((i="svg"==e.nodeName?e.parentNode instanceof t.SVGElement?new n.Nested:new n.Doc:"linearGradient"==e.nodeName?new n.Gradient("linear"):"radialGradient"==e.nodeName?new n.Gradient("radial"):n[c(e.nodeName)]?new(n[c(e.nodeName)]):new n.Element(e)).type=e.nodeName,i.node=e,e.instance=i,i instanceof n.Doc&&i.namespace().defs(),i.setData(JSON.parse(e.getAttribute("svgjs:data"))||{}),i):null;var i},n.prepare=function(){var t=e.getElementsByTagName("body")[0],i=(t?new n.Doc(t):n.adopt(e.documentElement).nested()).size(2,0);n.parser={body:t||e.documentElement,draw:i.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").attr("focusable","false").node,poly:i.polyline().node,path:i.path().node,native:n.create("svg")}},n.parser={native:n.create("svg")},e.addEventListener("DOMContentLoaded",function(){n.parser.draw||n.prepare()},!1),n.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},n.utils={map:function(t,e){var n,i=t.length,r=[];for(n=0;n<i;n++)r.push(e(t[n]));return r},filter:function(t,e){var n,i=t.length,r=[];for(n=0;n<i;n++)e(t[n])&&r.push(t[n]);return r},radians:function(t){return t%360*Math.PI/180},degrees:function(t){return 180*t/Math.PI%360},filterSVGElements:function(e){return this.filter(e,function(e){return e instanceof t.SVGElement})}},n.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},n.Color=function(t){var e;this.r=0,this.g=0,this.b=0,t&&("string"==typeof t?n.regex.isRgb.test(t)?(e=n.regex.rgb.exec(t.replace(n.regex.whitespace,"")),this.r=parseInt(e[1]),this.g=parseInt(e[2]),this.b=parseInt(e[3])):n.regex.isHex.test(t)&&(e=n.regex.hex.exec(function(t){return 4==t.length?["#",t.substring(1,2),t.substring(1,2),t.substring(2,3),t.substring(2,3),t.substring(3,4),t.substring(3,4)].join(""):t}(t)),this.r=parseInt(e[1],16),this.g=parseInt(e[2],16),this.b=parseInt(e[3],16)):"object"==typeof t&&(this.r=t.r,this.g=t.g,this.b=t.b))},n.extend(n.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+h(this.r)+h(this.g)+h(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new n.Color(t),this},at:function(t){return this.destination?(t=t<0?0:t>1?1:t,new n.Color({r:~~(this.r+(this.destination.r-this.r)*t),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)})):this}}),n.Color.test=function(t){return t+="",n.regex.isHex.test(t)||n.regex.isRgb.test(t)},n.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},n.Color.isColor=function(t){return n.Color.isRgb(t)||n.Color.test(t)},n.Array=function(t,e){0==(t=(t||[]).valueOf()).length&&e&&(t=e.valueOf()),this.value=this.parse(t)},n.extend(n.Array,{morph:function(t){if(this.destination=this.parse(t),this.value.length!=this.destination.length){for(var e=this.value[this.value.length-1],n=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(n);for(;this.value.length<this.destination.length;)this.value.push(e)}return this},settle:function(){for(var t=0,e=this.value.length,n=[];t<e;t++)-1==n.indexOf(this.value[t])&&n.push(this.value[t]);return this.value=n},at:function(t){if(!this.destination)return this;for(var e=0,i=this.value.length,r=[];e<i;e++)r.push(this.value[e]+(this.destination[e]-this.value[e])*t);return new n.Array(r)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)},split:function(t){return t.trim().split(n.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var t=new this.constructor;return t.value=function t(e){var n=e.slice(0);for(var i=n.length;i--;)Array.isArray(n[i])&&(n[i]=t(n[i]));return n}(this.value),t}}),n.PointArray=function(t,e){n.Array.call(this,t,e||[[0,0]])},n.PointArray.prototype=new n.Array,n.PointArray.prototype.constructor=n.PointArray,n.extend(n.PointArray,{toString:function(){for(var t=0,e=this.value.length,n=[];t<e;t++)n.push(this.value[t].join(","));return n.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(t){if(!this.destination)return this;for(var e=0,i=this.value.length,r=[];e<i;e++)r.push([this.value[e][0]+(this.destination[e][0]-this.value[e][0])*t,this.value[e][1]+(this.destination[e][1]-this.value[e][1])*t]);return new n.PointArray(r)},parse:function(t){var e=[];if(t=t.valueOf(),Array.isArray(t)){if(Array.isArray(t[0]))return t.map(function(t){return t.slice()});if(null!=t[0].x)return t.map(function(t){return[t.x,t.y]})}else t=t.trim().split(n.regex.delimiter).map(parseFloat);t.length%2!=0&&t.pop();for(var i=0,r=t.length;i<r;i+=2)e.push([t[i],t[i+1]]);return e},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var i=this.value.length-1;i>=0;i--)this.value[i]=[this.value[i][0]+t,this.value[i][1]+e];return this},size:function(t,e){var n,i=this.bbox();for(n=this.value.length-1;n>=0;n--)i.width&&(this.value[n][0]=(this.value[n][0]-i.x)*t/i.width+i.x),i.height&&(this.value[n][1]=(this.value[n][1]-i.y)*e/i.height+i.y);return this},bbox:function(){return n.parser.poly.setAttribute("points",this.toString()),n.parser.poly.getBBox()}});for(var i={M:function(t,e,n){return e.x=n.x=t[0],e.y=n.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,e){return e.x=t[0],e.y=t[1],["T",t[0],t[1]]},Z:function(t,e,n){return e.x=n.x,e.y=n.y,["Z"]},A:function(t,e){return e.x=t[5],e.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}},r="mlhvqtcsaz".split(""),o=0,a=r.length;o<a;++o)i[r[o]]=function(t){return function(e,n,r){if("H"==t)e[0]=e[0]+n.x;else if("V"==t)e[0]=e[0]+n.y;else if("A"==t)e[5]=e[5]+n.x,e[6]=e[6]+n.y;else for(var o=0,a=e.length;o<a;++o)e[o]=e[o]+(o%2?n.y:n.x);return i[t](e,n,r)}}(r[o].toUpperCase());n.PathArray=function(t,e){n.Array.call(this,t,e||[["M",0,0]])},n.PathArray.prototype=new n.Array,n.PathArray.prototype.constructor=n.PathArray,n.extend(n.PathArray,{toString:function(){return function(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e][0],null!=t[e][1]&&(i+=t[e][1],null!=t[e][2]&&(i+=" ",i+=t[e][2],null!=t[e][3]&&(i+=" ",i+=t[e][3],i+=" ",i+=t[e][4],null!=t[e][5]&&(i+=" ",i+=t[e][5],i+=" ",i+=t[e][6],null!=t[e][7]&&(i+=" ",i+=t[e][7])))));return i+" "}(this.value)},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var i,r=this.value.length-1;r>=0;r--)"M"==(i=this.value[r][0])||"L"==i||"T"==i?(this.value[r][1]+=t,this.value[r][2]+=e):"H"==i?this.value[r][1]+=t:"V"==i?this.value[r][1]+=e:"C"==i||"S"==i||"Q"==i?(this.value[r][1]+=t,this.value[r][2]+=e,this.value[r][3]+=t,this.value[r][4]+=e,"C"==i&&(this.value[r][5]+=t,this.value[r][6]+=e)):"A"==i&&(this.value[r][6]+=t,this.value[r][7]+=e);return this},size:function(t,e){var n,i,r=this.bbox();for(n=this.value.length-1;n>=0;n--)"M"==(i=this.value[n][0])||"L"==i||"T"==i?(this.value[n][1]=(this.value[n][1]-r.x)*t/r.width+r.x,this.value[n][2]=(this.value[n][2]-r.y)*e/r.height+r.y):"H"==i?this.value[n][1]=(this.value[n][1]-r.x)*t/r.width+r.x:"V"==i?this.value[n][1]=(this.value[n][1]-r.y)*e/r.height+r.y:"C"==i||"S"==i||"Q"==i?(this.value[n][1]=(this.value[n][1]-r.x)*t/r.width+r.x,this.value[n][2]=(this.value[n][2]-r.y)*e/r.height+r.y,this.value[n][3]=(this.value[n][3]-r.x)*t/r.width+r.x,this.value[n][4]=(this.value[n][4]-r.y)*e/r.height+r.y,"C"==i&&(this.value[n][5]=(this.value[n][5]-r.x)*t/r.width+r.x,this.value[n][6]=(this.value[n][6]-r.y)*e/r.height+r.y)):"A"==i&&(this.value[n][1]=this.value[n][1]*t/r.width,this.value[n][2]=this.value[n][2]*e/r.height,this.value[n][6]=(this.value[n][6]-r.x)*t/r.width+r.x,this.value[n][7]=(this.value[n][7]-r.y)*e/r.height+r.y);return this},equalCommands:function(t){var e,i,r;for(t=new n.PathArray(t),r=this.value.length===t.value.length,e=0,i=this.value.length;r&&e<i;e++)r=this.value[e][0]===t.value[e][0];return r},morph:function(t){return t=new n.PathArray(t),this.equalCommands(t)?this.destination=t:this.destination=null,this},at:function(t){if(!this.destination)return this;var e,i,r,o,a=this.value,s=this.destination.value,u=[],l=new n.PathArray;for(e=0,i=a.length;e<i;e++){for(u[e]=[a[e][0]],r=1,o=a[e].length;r<o;r++)u[e][r]=a[e][r]+(s[e][r]-a[e][r])*t;"A"===u[e][0]&&(u[e][4]=+(0!=u[e][4]),u[e][5]=+(0!=u[e][5]))}return l.value=u,l},parse:function(t){if(t instanceof n.PathArray)return t.valueOf();var e,r={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};t="string"==typeof t?t.replace(n.regex.numbersWithDots,u).replace(n.regex.pathLetters," $& ").replace(n.regex.hyphen,"$1 -").trim().split(n.regex.delimiter):t.reduce(function(t,e){return[].concat.call(t,e)},[]);var o=[],a=new n.Point,s=new n.Point,l=0,c=t.length;do{n.regex.isPathLetter.test(t[l])?(e=t[l],++l):"M"==e?e="L":"m"==e&&(e="l"),o.push(i[e].call(null,t.slice(l,l+=r[e.toUpperCase()]).map(parseFloat),a,s))}while(c>l);return o},bbox:function(){return n.parser.path.setAttribute("d",this.toString()),n.parser.path.getBBox()}}),n.Number=n.invent({create:function(t,e){this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-3.4e38:3.4e38:"string"==typeof t?(e=t.match(n.regex.numberAndUnit))&&(this.value=parseFloat(e[1]),"%"==e[5]?this.value/=100:"s"==e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof n.Number&&(this.value=t.valueOf(),this.unit=t.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(t){return t=new n.Number(t),new n.Number(this+t,this.unit||t.unit)},minus:function(t){return t=new n.Number(t),new n.Number(this-t,this.unit||t.unit)},times:function(t){return t=new n.Number(t),new n.Number(this*t,this.unit||t.unit)},divide:function(t){return t=new n.Number(t),new n.Number(this/t,this.unit||t.unit)},to:function(t){var e=new n.Number(this);return"string"==typeof t&&(e.unit=t),e},morph:function(t){return this.destination=new n.Number(t),t.relative&&(this.destination.value+=this.value),this},at:function(t){return this.destination?new n.Number(this.destination).minus(this).times(t).plus(this):this}}}),n.Element=n.invent({create:function(t){this._stroke=n.defaults.attrs.stroke,this._event=null,this._events={},this.dom={},(this.node=t)&&(this.type=t.nodeName,this.node.instance=this,this._events=t._events||{},this._stroke=t.getAttribute("stroke")||this._stroke)},extend:{x:function(t){return this.attr("x",t)},y:function(t){return this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,e){var i=p(this,t,e);return this.width(new n.Number(i.width)).height(new n.Number(i.height))},clone:function(t){this.writeDataToDom();var e=m(this.node.cloneNode(!0));return t?t.add(e):this.after(e),e},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},id:function(t){return this.attr("id",t)},inside:function(t,e){var n=this.bbox();return t>n.x&&e>n.y&&t<n.x+n.width&&e<n.y+n.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(n.regex.delimiter)},hasClass:function(t){return-1!=this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter(function(e){return e!=t}).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},reference:function(t){return n.get(this.attr(t))},parent:function(e){var i=this;if(!i.node.parentNode)return null;if(i=n.adopt(i.node.parentNode),!e)return i;for(;i&&i.node instanceof t.SVGElement;){if("string"==typeof e?i.matches(e):i instanceof e)return i;if(!i.node.parentNode||"#document"==i.node.parentNode.nodeName||"#document-fragment"==i.node.parentNode.nodeName)return null;i=n.adopt(i.node.parentNode)}},doc:function(){return this instanceof n.Doc?this:this.parent(n.Doc)},parents:function(t){var e=[],n=this;do{if(!(n=n.parent(t))||!n.node)break;e.push(n)}while(n.parent);return e},matches:function(t){return function(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)}(this.node,t)},native:function(){return this.node},svg:function(t){var i=e.createElement("svg");if(!(t&&this instanceof n.Parent))return i.appendChild(t=e.createElement("svg")),this.writeDataToDom(),t.appendChild(this.node.cloneNode(!0)),i.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");i.innerHTML="<svg>"+t.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var r=0,o=i.firstChild.childNodes.length;r<o;r++)this.node.appendChild(i.firstChild.firstChild);return this},writeDataToDom:function(){if(this.each||this.lines){var t=this.each?this:this.lines();t.each(function(){this.writeDataToDom()})}return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(t){return this.dom=t,this},is:function(t){return function(t,e){return t instanceof e}(this,t)}}}),n.easing={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)}},n.morph=function(t){return function(e,i){return new n.MorphObj(e,i).at(t)}},n.Situation=n.invent({create:function(t){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new n.Number(t.duration).valueOf(),this.delay=new n.Number(t.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=t.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),n.FX=n.invent({create:function(t){this._target=t,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(t,e,i){"object"==typeof t&&(e=t.ease,i=t.delay,t=t.duration);var r=new n.Situation({duration:t||1e3,delay:i||0,ease:n.easing[e||"-"]||e});return this.queue(r),this},delay:function(t){var e=new n.Situation({duration:t,delay:0,ease:n.easing["-"]});return this.queue(e)},target:function(t){return t&&t instanceof n.Element?(this._target=t,this):this._target},timeToAbsPos:function(t){return(t-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(t){return this.situation.duration/this._speed*t+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=t.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){t.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(t){return("function"==typeof t||t instanceof n.Situation)&&this.situations.push(t),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof n.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var t,e,i,r=this.situation;if(r.init)return this;for(t in r.animations)for(i=this.target()[t](),Array.isArray(i)||(i=[i]),Array.isArray(r.animations[t])||(r.animations[t]=[r.animations[t]]),e=i.length;e--;)r.animations[t][e]instanceof n.Number&&(i[e]=new n.Number(i[e])),r.animations[t][e]=i[e].morph(r.animations[t][e]);for(t in r.attrs)r.attrs[t]=new n.MorphObj(this.target().attr(t),r.attrs[t]);for(t in r.styles)r.styles[t]=new n.MorphObj(this.target().style(t),r.styles[t]);return r.initialTransformation=this.target().matrixify(),r.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(t,e){var n=this.active;return this.active=!1,e&&this.clearQueue(),t&&this.situation&&(!n&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var t=this.situation;this.stop(),this.situation=t,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return!0===this.situation.loops&&(this.situation.loops=this.situation.loop+1),"number"==typeof this.situation.loops?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(t,e){var n=this.situation.duration/this._speed;return this.absPos=t,e||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*n,this.situation.finish=this.situation.start+n,this.step(!0)},speed:function(t){return 0===t?this.pause():t?(this._speed=t,this.at(this.absPos,!0)):this._speed},loop:function(t,e){var n=this.last();return n.loops=null==t||t,n.loop=0,e&&(n.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(t){var e=this.last();return e.reversed=void 0===t?!e.reversed:t,this},progress:function(t){return t?this.situation.ease(this.pos):this.pos},after:function(t){var e=this.last();return this.target().on("finished.fx",function n(i){i.detail.situation==e&&(t.call(this,e),this.off("finished.fx",n))}),this._callStart()},during:function(t){var e=this.last(),i=function(i){i.detail.situation==e&&t.call(this,i.detail.pos,n.morph(i.detail.pos),i.detail.eased,e)};return this.target().off("during.fx",i).on("during.fx",i),this.after(function(){this.off("during.fx",i)}),this._callStart()},afterAll:function(t){var e=function e(n){t.call(this),this.off("allfinished.fx",e)};return this.target().off("allfinished.fx",e).on("allfinished.fx",e),this._callStart()},duringAll:function(t){var e=function(e){t.call(this,e.detail.pos,n.morph(e.detail.pos),e.detail.eased,e.detail.situation)};return this.target().off("during.fx",e).on("during.fx",e),this.afterAll(function(){this.off("during.fx",e)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(t,e,n){return this.last()[n||"animations"][t]=e,this._callStart()},step:function(t){var e,n,i;(t||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops)?(e=Math.max(this.absPos,0),n=Math.floor(e),!0===this.situation.loops||n<this.situation.loops?(this.pos=e-n,i=this.situation.loop,this.situation.loop=n):(this.absPos=this.situation.loops,this.pos=1,i=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-i)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos);this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var r=this.situation.ease(this.pos);for(var o in this.situation.once)o>this.lastPos&&o<=r&&(this.situation.once[o].call(this.target(),this.pos,r),delete this.situation.once[o]);return this.active&&this.target().fire("during",{pos:this.pos,eased:r,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=r,this):this},eachAt:function(){var t,e,i,r=this,o=this.target(),a=this.situation;for(t in a.animations)i=[].concat(a.animations[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(a.ease(r.pos),r.pos):t}),o[t].apply(o,i);for(t in a.attrs)i=[t].concat(a.attrs[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(a.ease(r.pos),r.pos):t}),o.attr.apply(o,i);for(t in a.styles)i=[t].concat(a.styles[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(a.ease(r.pos),r.pos):t}),o.style.apply(o,i);if(a.transforms.length){for(i=a.initialTransformation,t=0,e=a.transforms.length;t<e;t++){var s=a.transforms[t];s instanceof n.Matrix?i=s.relative?i.multiply((new n.Matrix).morph(s).at(a.ease(this.pos))):i.morph(s).at(a.ease(this.pos)):(s.relative||s.undo(i.extract()),i=i.multiply(s.at(a.ease(this.pos))))}o.matrix(i)}return this},once:function(t,e,n){var i=this.last();return n||(t=i.ease(t)),i.once[t]=e,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:n.Element,construct:{animate:function(t,e,i){return(this.fx||(this.fx=new n.FX(this))).animate(t,e,i)},delay:function(t){return(this.fx||(this.fx=new n.FX(this))).delay(t)},stop:function(t,e){return this.fx&&this.fx.stop(t,e),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(t){if(this.fx){if(null==t)return this.fx.speed();this.fx.speed(t)}return this}}}),n.MorphObj=n.invent({create:function(t,e){return n.Color.isColor(e)?new n.Color(t).morph(e):n.regex.delimiter.test(t)?n.regex.pathLetters.test(t)?new n.PathArray(t).morph(e):new n.Array(t).morph(e):n.regex.numberAndUnit.test(e)?new n.Number(t).morph(e):(this.value=t,void(this.destination=e))},extend:{at:function(t,e){return e<1?this.value:this.destination},valueOf:function(){return this.value}}}),n.extend(n.FX,{attr:function(t,e,n){if("object"==typeof t)for(var i in t)this.attr(i,t[i]);else this.add(t,e,"attrs");return this},style:function(t,e){if("object"==typeof t)for(var n in t)this.style(n,t[n]);else this.add(t,e,"styles");return this},x:function(t,e){if(this.target()instanceof n.G)return this.transform({x:t},e),this;var i=new n.Number(t);return i.relative=e,this.add("x",i)},y:function(t,e){if(this.target()instanceof n.G)return this.transform({y:t},e),this;var i=new n.Number(t);return i.relative=e,this.add("y",i)},cx:function(t){return this.add("cx",new n.Number(t))},cy:function(t){return this.add("cy",new n.Number(t))},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},size:function(t,e){var i;this.target()instanceof n.Text?this.attr("font-size",t):(t&&e||(i=this.target().bbox()),t||(t=i.width/i.height*e),e||(e=i.height/i.width*t),this.add("width",new n.Number(t)).add("height",new n.Number(e)));return this},width:function(t){return this.add("width",new n.Number(t))},height:function(t){return this.add("height",new n.Number(t))},plot:function(t,e,n,i){return 4==arguments.length?this.plot([t,e,n,i]):this.add("plot",new(this.target().morphArray)(t))},leading:function(t){return this.target().leading?this.add("leading",new n.Number(t)):this},viewbox:function(t,e,i,r){return this.target()instanceof n.Container&&this.add("viewbox",new n.ViewBox(t,e,i,r)),this},update:function(t){if(this.target()instanceof n.Stop){if("number"==typeof t||t instanceof n.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset)}return this}}),n.Box=n.invent({create:function(t,e,i,r){if(!("object"!=typeof t||t instanceof n.Element))return n.Box.call(this,null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height);4==arguments.length&&(this.x=t,this.y=e,this.width=i,this.height=r),y(this)},extend:{merge:function(t){var e=new this.constructor;return e.x=Math.min(this.x,t.x),e.y=Math.min(this.y,t.y),e.width=Math.max(this.x+this.width,t.x+t.width)-e.x,e.height=Math.max(this.y+this.height,t.y+t.height)-e.y,y(e)},transform:function(t){var e,i=1/0,r=-1/0,o=1/0,a=-1/0,s=[new n.Point(this.x,this.y),new n.Point(this.x2,this.y),new n.Point(this.x,this.y2),new n.Point(this.x2,this.y2)];return s.forEach(function(e){e=e.transform(t),i=Math.min(i,e.x),r=Math.max(r,e.x),o=Math.min(o,e.y),a=Math.max(a,e.y)}),(e=new this.constructor).x=i,e.width=r-i,e.y=o,e.height=a-o,y(e),e}}}),n.BBox=n.invent({create:function(t){if(n.Box.apply(this,[].slice.call(arguments)),t instanceof n.Element){var i;try{if(e.documentElement.contains){if(!e.documentElement.contains(t.node))throw new Exception("Element not in the dom")}else{for(var r=t.node;r.parentNode;)r=r.parentNode;if(r!=e)throw new Exception("Element not in the dom")}i=t.node.getBBox()}catch(e){if(t instanceof n.Shape){var o=t.clone(n.parser.draw.instance).show();i=o.node.getBBox(),o.remove()}else i={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}n.Box.call(this,i)}},inherit:n.Box,parent:n.Element,construct:{bbox:function(){return new n.BBox(this)}}}),n.BBox.prototype.constructor=n.BBox,n.extend(n.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),n.RBox=n.invent({create:function(t){n.Box.apply(this,[].slice.call(arguments)),t instanceof n.Element&&n.Box.call(this,t.node.getBoundingClientRect())},inherit:n.Box,parent:n.Element,extend:{addOffset:function(){return this.x+=t.pageXOffset,this.y+=t.pageYOffset,this}},construct:{rbox:function(t){return t?new n.RBox(this).transform(t.screenCTM().inverse()):new n.RBox(this).addOffset()}}}),n.RBox.prototype.constructor=n.RBox,n.Matrix=n.invent({create:function(t){var e,i=f([1,0,0,1,0,0]);for(t=t instanceof n.Element?t.matrixify():"string"==typeof t?f(t.split(n.regex.delimiter).map(parseFloat)):6==arguments.length?f([].slice.call(arguments)):Array.isArray(t)?f(t):"object"==typeof t?t:i,e=x.length-1;e>=0;--e)this[x[e]]=null!=t[x[e]]?t[x[e]]:i[x[e]]},extend:{extract:function(){var t=d(this,0,1),e=d(this,1,0),i=180/Math.PI*Math.atan2(t.y,t.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(i*Math.PI/180)+this.f*Math.sin(i*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(i*Math.PI/180)+this.e*Math.sin(-i*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-i,skewY:180/Math.PI*Math.atan2(e.y,e.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:i,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new n.Matrix(this)}},clone:function(){return new n.Matrix(this)},morph:function(t){return this.destination=new n.Matrix(t),this},at:function(t){if(!this.destination)return this;var e=new n.Matrix({a:this.a+(this.destination.a-this.a)*t,b:this.b+(this.destination.b-this.b)*t,c:this.c+(this.destination.c-this.c)*t,d:this.d+(this.destination.d-this.d)*t,e:this.e+(this.destination.e-this.e)*t,f:this.f+(this.destination.f-this.f)*t});return e},multiply:function(t){return new n.Matrix(this.native().multiply(function(t){t instanceof n.Matrix||(t=new n.Matrix(t));return t}(t).native()))},inverse:function(){return new n.Matrix(this.native().inverse())},translate:function(t,e){return new n.Matrix(this.native().translate(t||0,e||0))},scale:function(t,e,i,r){return 1==arguments.length?e=t:3==arguments.length&&(r=i,i=e,e=t),this.around(i,r,new n.Matrix(t,0,0,e,0,0))},rotate:function(t,e,i){return t=n.utils.radians(t),this.around(e,i,new n.Matrix(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0))},flip:function(t,e){return"x"==t?this.scale(-1,1,e,0):"y"==t?this.scale(1,-1,0,e):this.scale(-1,-1,t,null!=e?e:t)},skew:function(t,e,i,r){return 1==arguments.length?e=t:3==arguments.length&&(r=i,i=e,e=t),t=n.utils.radians(t),e=n.utils.radians(e),this.around(i,r,new n.Matrix(1,Math.tan(e),Math.tan(t),1,0,0))},skewX:function(t,e,n){return this.skew(t,0,e,n)},skewY:function(t,e,n){return this.skew(0,t,e,n)},around:function(t,e,i){return this.multiply(new n.Matrix(1,0,0,1,t||0,e||0)).multiply(i).multiply(new n.Matrix(1,0,0,1,-t||0,-e||0))},native:function(){for(var t=n.parser.native.createSVGMatrix(),e=x.length-1;e>=0;e--)t[x[e]]=this[x[e]];return t},toString:function(){return"matrix("+v(this.a)+","+v(this.b)+","+v(this.c)+","+v(this.d)+","+v(this.e)+","+v(this.f)+")"}},parent:n.Element,construct:{ctm:function(){return new n.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof n.Nested){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new n.Matrix(e)}return new n.Matrix(this.node.getScreenCTM())}}}),n.Point=n.invent({create:function(t,e){var n;n=Array.isArray(t)?{x:t[0],y:t[1]}:"object"==typeof t?{x:t.x,y:t.y}:null!=t?{x:t,y:null!=e?e:t}:{x:0,y:0},this.x=n.x,this.y=n.y},extend:{clone:function(){return new n.Point(this)},morph:function(t,e){return this.destination=new n.Point(t,e),this},at:function(t){if(!this.destination)return this;var e=new n.Point({x:this.x+(this.destination.x-this.x)*t,y:this.y+(this.destination.y-this.y)*t});return e},native:function(){var t=n.parser.native.createSVGPoint();return t.x=this.x,t.y=this.y,t},transform:function(t){return new n.Point(this.native().matrixTransform(t.native()))}}}),n.extend(n.Element,{point:function(t,e){return new n.Point(t,e).transform(this.screenCTM().inverse())}}),n.extend(n.Element,{attr:function(t,e,i){if(null==t){for(t={},e=this.node.attributes,i=e.length-1;i>=0;i--)t[e[i].nodeName]=n.regex.isNumber.test(e[i].nodeValue)?parseFloat(e[i].nodeValue):e[i].nodeValue;return t}if("object"==typeof t)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?n.defaults.attrs[t]:n.regex.isNumber.test(e)?parseFloat(e):e;"stroke-width"==t?this.attr("stroke",parseFloat(e)>0?this._stroke:null):"stroke"==t&&(this._stroke=e),"fill"!=t&&"stroke"!=t||(n.regex.isImage.test(e)&&(e=this.doc().defs().image(e,0,0)),e instanceof n.Image&&(e=this.doc().defs().pattern(0,0,function(){this.add(e)}))),"number"==typeof e?e=new n.Number(e):n.Color.isColor(e)?e=new n.Color(e):Array.isArray(e)&&(e=new n.Array(e)),"leading"==t?this.leading&&this.leading(e):"string"==typeof i?this.node.setAttributeNS(i,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!=t&&"x"!=t||this.rebuild(t,e)}return this}}),n.extend(n.Element,{transform:function(t,e){var i,r;if("object"!=typeof t)return i=new n.Matrix(this).extract(),"string"==typeof t?i[t]:i;if(i=new n.Matrix(this),e=!!e||!!t.relative,null!=t.a)i=e?i.multiply(new n.Matrix(t)):new n.Matrix(t);else if(null!=t.rotation)g(t,this),i=e?i.rotate(t.rotation,t.cx,t.cy):i.rotate(t.rotation-i.extract().rotation,t.cx,t.cy);else if(null!=t.scale||null!=t.scaleX||null!=t.scaleY){if(g(t,this),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,!e){var o=i.extract();t.scaleX=1*t.scaleX/o.scaleX,t.scaleY=1*t.scaleY/o.scaleY}i=i.scale(t.scaleX,t.scaleY,t.cx,t.cy)}else if(null!=t.skew||null!=t.skewX||null!=t.skewY){if(g(t,this),t.skewX=null!=t.skew?t.skew:null!=t.skewX?t.skewX:0,t.skewY=null!=t.skew?t.skew:null!=t.skewY?t.skewY:0,!e){var o=i.extract();i=i.multiply((new n.Matrix).skew(o.skewX,o.skewY,t.cx,t.cy).inverse())}i=i.skew(t.skewX,t.skewY,t.cx,t.cy)}else t.flip?("x"==t.flip||"y"==t.flip?t.offset=null==t.offset?this.bbox()["c"+t.flip]:t.offset:null==t.offset?(r=this.bbox(),t.flip=r.cx,t.offset=r.cy):t.flip=t.offset,i=(new n.Matrix).flip(t.flip,t.offset)):null==t.x&&null==t.y||(e?i=i.translate(t.x,t.y):(null!=t.x&&(i.e=t.x),null!=t.y&&(i.f=t.y)));return this.attr("transform",i)}}),n.extend(n.FX,{transform:function(t,e){var i,r,o=this.target();return"object"!=typeof t?(i=new n.Matrix(o).extract(),"string"==typeof t?i[t]:i):(e=!!e||!!t.relative,null!=t.a?i=new n.Matrix(t):null!=t.rotation?(g(t,o),i=new n.Rotate(t.rotation,t.cx,t.cy)):null!=t.scale||null!=t.scaleX||null!=t.scaleY?(g(t,o),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,i=new n.Scale(t.scaleX,t.scaleY,t.cx,t.cy)):null!=t.skewX||null!=t.skewY?(g(t,o),t.skewX=null!=t.skewX?t.skewX:0,t.skewY=null!=t.skewY?t.skewY:0,i=new n.Skew(t.skewX,t.skewY,t.cx,t.cy)):t.flip?("x"==t.flip||"y"==t.flip?t.offset=null==t.offset?o.bbox()["c"+t.flip]:t.offset:null==t.offset?(r=o.bbox(),t.flip=r.cx,t.offset=r.cy):t.flip=t.offset,i=(new n.Matrix).flip(t.flip,t.offset)):null==t.x&&null==t.y||(i=new n.Translate(t.x,t.y)),i?(i.relative=e,this.last().transforms.push(i),this._callStart()):this)}}),n.extend(n.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){var t=(this.attr("transform")||"").split(n.regex.transforms).slice(0,-1).map(function(t){var e=t.trim().split("(");return[e[0],e[1].split(n.regex.delimiter).map(function(t){return parseFloat(t)})]}).reduce(function(t,e){return"matrix"==e[0]?t.multiply(f(e[1])):t[e[0]].apply(t,e[1])},new n.Matrix);return t},toParent:function(t){if(this==t)return this;var e=this.screenCTM(),n=t.screenCTM().inverse();return this.addTo(t).untransform().transform(n.multiply(e)),this},toDoc:function(){return this.toParent(this.doc())}}),n.Transformation=n.invent({create:function(t,e){if(arguments.length>1&&"boolean"!=typeof e)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(t))for(var n=0,i=this.arguments.length;n<i;++n)this[this.arguments[n]]=t[n];else if("object"==typeof t)for(var n=0,i=this.arguments.length;n<i;++n)this[this.arguments[n]]=t[this.arguments[n]];this.inversed=!1,!0===e&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(t){for(var e=[],i=0,r=this.arguments.length;i<r;++i)e.push(this[this.arguments[i]]);var o=this._undo||new n.Matrix;return o=(new n.Matrix).morph(n.Matrix.prototype[this.method].apply(o,e)).at(t),this.inversed?o.inverse():o},undo:function(t){for(var e=0,i=this.arguments.length;e<i;++e)t[this.arguments[e]]=void 0===this[this.arguments[e]]?0:t[this.arguments[e]];return t.cx=this.cx,t.cy=this.cy,this._undo=new(n[c(this.method)])(t,!0).at(1),this}}}),n.Translate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),n.Rotate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(t){var e=(new n.Matrix).rotate((new n.Number).morph(this.rotation-(this._undo?this._undo.rotation:0)).at(t),this.cx,this.cy);return this.inversed?e.inverse():e},undo:function(t){return this._undo=t,this}}}),n.Scale=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),n.Skew=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),n.extend(n.Element,{style:function(t,e){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==typeof t)for(e in t)this.style(e,t[e]);else{if(!n.regex.isCss.test(t))return this.node.style[l(t)];for(t=t.split(/\s*;\s*/).filter(function(t){return!!t}).map(function(t){return t.split(/\s*:\s*/)});e=t.pop();)this.style(e[0],e[1])}else this.node.style[l(t)]=null===e||n.regex.isBlank.test(e)?"":e;return this}}),n.Parent=n.invent({create:function(t){this.constructor.call(this,t)},inherit:n.Element,extend:{children:function(){return n.utils.map(n.utils.filterSVGElements(this.node.childNodes),function(t){return n.adopt(t)})},add:function(t,e){return null==e?this.node.appendChild(t.node):t.node!=this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this},put:function(t,e){return this.add(t,e),t},has:function(t){return this.index(t)>=0},index:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)},get:function(t){return n.adopt(this.node.childNodes[t])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(t,e){var i,r,o=this.children();for(i=0,r=o.length;i<r;i++)o[i]instanceof n.Element&&t.apply(o[i],[i,o]),e&&o[i]instanceof n.Container&&o[i].each(t,e);return this},removeElement:function(t){return this.node.removeChild(t.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),n.extend(n.Parent,{ungroup:function(t,e){return 0===e||this instanceof n.Defs||this.node==n.parser.draw?this:(t=t||(this instanceof n.Doc?this:this.parent(n.Parent)),e=e||1/0,this.each(function(){return this instanceof n.Defs?this:this instanceof n.Parent?this.ungroup(t,e-1):this.toParent(t)}),this.node.firstChild||this.remove(),this)},flatten:function(t,e){return this.ungroup(t,e)}}),n.Container=n.invent({create:function(t){this.constructor.call(this,t)},inherit:n.Parent}),n.ViewBox=n.invent({create:function(t){var e,i,r,o,a,s,u,l=1,c=1,h=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(t instanceof n.Element){for(s=t,u=t,a=(t.attr("viewBox")||"").match(h),t.bbox,r=new n.Number(t.width()),o=new n.Number(t.height());"%"==r.unit;)l*=r.value,r=new n.Number(s instanceof n.Doc?s.parent().offsetWidth:s.parent().width()),s=s.parent();for(;"%"==o.unit;)c*=o.value,o=new n.Number(u instanceof n.Doc?u.parent().offsetHeight:u.parent().height()),u=u.parent();this.x=0,this.y=0,this.width=r*l,this.height=o*c,this.zoom=1,a&&(e=parseFloat(a[0]),i=parseFloat(a[1]),r=parseFloat(a[2]),o=parseFloat(a[3]),this.zoom=this.width/this.height>r/o?this.height/o:this.width/r,this.x=e,this.y=i,this.width=r,this.height=o)}else t="string"==typeof t?t.match(h).map(function(t){return parseFloat(t)}):Array.isArray(t)?t:"object"==typeof t?[t.x,t.y,t.width,t.height]:4==arguments.length?[].slice.call(arguments):[0,0,0,0],this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(t,e,i,r){return this.destination=new n.ViewBox(t,e,i,r),this},at:function(t){return this.destination?new n.ViewBox([this.x+(this.destination.x-this.x)*t,this.y+(this.destination.y-this.y)*t,this.width+(this.destination.width-this.width)*t,this.height+(this.destination.height-this.height)*t]):this}},parent:n.Container,construct:{viewbox:function(t,e,i,r){return 0==arguments.length?new n.ViewBox(this):this.attr("viewBox",new n.ViewBox(t,e,i,r))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(t){n.Element.prototype[t]=function(e){return null==e?n.off(this,t):n.on(this,t,e),this}}),n.listenerId=0,n.on=function(t,e,i,r,o){var a=i.bind(r||t),s=t instanceof n.Element?t.node:t;s.instance=s.instance||{_events:{}};var u=s.instance._events;i._svgjsListenerId||(i._svgjsListenerId=++n.listenerId),e.split(n.regex.delimiter).forEach(function(t){var e=t.split(".")[0],n=t.split(".")[1]||"*";u[e]=u[e]||{},u[e][n]=u[e][n]||{},u[e][n][i._svgjsListenerId]=a,s.addEventListener(e,a,o||!1)})},n.off=function(t,e,i,r){var o=t instanceof n.Element?t.node:t;if(o.instance&&("function"!=typeof i||(i=i._svgjsListenerId))){var a=o.instance._events;(e||"").split(n.regex.delimiter).forEach(function(t){var e,s,u=t&&t.split(".")[0],l=t&&t.split(".")[1];if(i)a[u]&&a[u][l||"*"]&&(o.removeEventListener(u,a[u][l||"*"][i],r||!1),delete a[u][l||"*"][i]);else if(u&&l){if(a[u]&&a[u][l]){for(s in a[u][l])n.off(o,[u,l].join("."),s);delete a[u][l]}}else if(l)for(t in a)for(e in a[t])l===e&&n.off(o,[t,l].join("."));else if(u){if(a[u]){for(e in a[u])n.off(o,[u,e].join("."));delete a[u]}}else{for(t in a)n.off(o,t);o.instance._events={}}})}},n.extend(n.Element,{on:function(t,e,i,r){return n.on(this,t,e,i,r),this},off:function(t,e){return n.off(this.node,t,e),this},fire:function(e,i){return e instanceof t.Event?this.node.dispatchEvent(e):this.node.dispatchEvent(e=new n.CustomEvent(e,{detail:i,cancelable:!0})),this._event=e,this},event:function(){return this._event}}),n.Defs=n.invent({create:"defs",inherit:n.Container}),n.G=n.invent({create:"g",inherit:n.Container,extend:{x:function(t){return null==t?this.transform("x"):this.transform({x:t-this.x()},!0)},y:function(t){return null==t?this.transform("y"):this.transform({y:t-this.y()},!0)},cx:function(t){return null==t?this.gbox().cx:this.x(t-this.gbox().width/2)},cy:function(t){return null==t?this.gbox().cy:this.y(t-this.gbox().height/2)},gbox:function(){var t=this.bbox(),e=this.transform();return t.x+=e.x,t.x2+=e.x,t.cx+=e.x,t.y+=e.y,t.y2+=e.y,t.cy+=e.y,t}},construct:{group:function(){return this.put(new n.G)}}}),n.Doc=n.invent({create:function(t){t&&("svg"==(t="string"==typeof t?e.getElementById(t):t).nodeName?this.constructor.call(this,t):(this.constructor.call(this,n.create("svg")),t.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:n.Container,extend:{namespace:function(){return this.attr({xmlns:n.ns,version:"1.1"}).attr("xmlns:xlink",n.xlink,n.xmlns).attr("xmlns:svgjs",n.svgjs,n.xmlns)},defs:function(){var t;this._defs||((t=this.node.getElementsByTagName("defs")[0])?this._defs=n.adopt(t):this._defs=new n.Defs,this.node.appendChild(this._defs.node));return this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName&&"#document-fragment"!=this.node.parentNode.nodeName?this.node.parentNode:null},spof:function(){var t=this.node.getScreenCTM();return t&&this.style("left",-t.e%1+"px").style("top",-t.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,n.parser.draw.parentNode||this.node.appendChild(n.parser.draw),this},clone:function(t){this.writeDataToDom();var e=this.node,n=m(e.cloneNode(!0));return t?(t.node||t).appendChild(n.node):e.parentNode.insertBefore(n.node,e.nextSibling),n}}}),n.extend(n.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var t=this.position()+1,e=this.parent();return e.removeElement(this).add(this,t),e instanceof n.Doc&&e.node.appendChild(e.defs().node),this},backward:function(){var t=this.position();return t>0&&this.parent().removeElement(this).add(this,t-1),this},front:function(){var t=this.parent();return t.node.appendChild(this.node),t instanceof n.Doc&&t.node.appendChild(t.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(t){t.remove();var e=this.position();return this.parent().add(t,e),this},after:function(t){t.remove();var e=this.position();return this.parent().add(t,e+1),this}}),n.Mask=n.invent({create:function(){this.constructor.call(this,n.create("mask")),this.targets=[]},inherit:n.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unmask();return this.targets=[],n.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new n.Mask)}}}),n.extend(n.Element,{maskWith:function(t){return this.masker=t instanceof n.Mask?t:this.parent().mask().add(t),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),n.ClipPath=n.invent({create:function(){this.constructor.call(this,n.create("clipPath")),this.targets=[]},inherit:n.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new n.ClipPath)}}}),n.extend(n.Element,{clipWith:function(t){return this.clipper=t instanceof n.ClipPath?t:this.parent().clip().add(t),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),n.Gradient=n.invent({create:function(t){this.constructor.call(this,n.create(t+"Gradient")),this.type=t},inherit:n.Container,extend:{at:function(t,e,i){return this.put(new n.Stop).update(t,e,i)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(t,e,i){return"transform"==t&&(t="gradientTransform"),n.Container.prototype.attr.call(this,t,e,i)}},construct:{gradient:function(t,e){return this.defs().gradient(t,e)}}}),n.extend(n.Gradient,n.FX,{from:function(t,e){return"radial"==(this._target||this).type?this.attr({fx:new n.Number(t),fy:new n.Number(e)}):this.attr({x1:new n.Number(t),y1:new n.Number(e)})},to:function(t,e){return"radial"==(this._target||this).type?this.attr({cx:new n.Number(t),cy:new n.Number(e)}):this.attr({x2:new n.Number(t),y2:new n.Number(e)})}}),n.extend(n.Defs,{gradient:function(t,e){return this.put(new n.Gradient(t)).update(e)}}),n.Stop=n.invent({create:"stop",inherit:n.Element,extend:{update:function(t){return("number"==typeof t||t instanceof n.Number)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new n.Number(t.offset)),this}}}),n.Pattern=n.invent({create:"pattern",inherit:n.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()},attr:function(t,e,i){return"transform"==t&&(t="patternTransform"),n.Container.prototype.attr.call(this,t,e,i)}},construct:{pattern:function(t,e,n){return this.defs().pattern(t,e,n)}}}),n.extend(n.Defs,{pattern:function(t,e,i){return this.put(new n.Pattern).update(i).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}}),n.Shape=n.invent({create:function(t){this.constructor.call(this,t)},inherit:n.Element}),n.Bare=n.invent({create:function(t,e){if(this.constructor.call(this,n.create(t)),e)for(var i in e.prototype)"function"==typeof e.prototype[i]&&(this[i]=e.prototype[i])},inherit:n.Element,extend:{words:function(t){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(e.createTextNode(t)),this}}}),n.extend(n.Parent,{element:function(t,e){return this.put(new n.Bare(t,e))}}),n.Symbol=n.invent({create:"symbol",inherit:n.Container,construct:{symbol:function(){return this.put(new n.Symbol)}}}),n.Use=n.invent({create:"use",inherit:n.Shape,extend:{element:function(t,e){return this.attr("href",(e||"")+"#"+t,n.xlink)}},construct:{use:function(t,e){return this.put(new n.Use).element(t,e)}}}),n.Rect=n.invent({create:"rect",inherit:n.Shape,construct:{rect:function(t,e){return this.put(new n.Rect).size(t,e)}}}),n.Circle=n.invent({create:"circle",inherit:n.Shape,construct:{circle:function(t){return this.put(new n.Circle).rx(new n.Number(t).divide(2)).move(0,0)}}}),n.extend(n.Circle,n.FX,{rx:function(t){return this.attr("r",t)},ry:function(t){return this.rx(t)}}),n.Ellipse=n.invent({create:"ellipse",inherit:n.Shape,construct:{ellipse:function(t,e){return this.put(new n.Ellipse).size(t,e).move(0,0)}}}),n.extend(n.Ellipse,n.Rect,n.FX,{rx:function(t){return this.attr("rx",t)},ry:function(t){return this.attr("ry",t)}}),n.extend(n.Circle,n.Ellipse,{x:function(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())},y:function(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t)},width:function(t){return null==t?2*this.rx():this.rx(new n.Number(t).divide(2))},height:function(t){return null==t?2*this.ry():this.ry(new n.Number(t).divide(2))},size:function(t,e){var i=p(this,t,e);return this.rx(new n.Number(i.width).divide(2)).ry(new n.Number(i.height).divide(2))}}),n.Line=n.invent({create:"line",inherit:n.Shape,extend:{array:function(){return new n.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(t,e,i,r){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:i,y2:r}:new n.PointArray(t).toLine(),this.attr(t))},move:function(t,e){return this.attr(this.array().move(t,e).toLine())},size:function(t,e){var n=p(this,t,e);return this.attr(this.array().size(n.width,n.height).toLine())}},construct:{line:function(t,e,i,r){return n.Line.prototype.plot.apply(this.put(new n.Line),null!=t?[t,e,i,r]:[0,0,0,0])}}}),n.Polyline=n.invent({create:"polyline",inherit:n.Shape,construct:{polyline:function(t){return this.put(new n.Polyline).plot(t||new n.PointArray)}}}),n.Polygon=n.invent({create:"polygon",inherit:n.Shape,construct:{polygon:function(t){return this.put(new n.Polygon).plot(t||new n.PointArray)}}}),n.extend(n.Polyline,n.Polygon,{array:function(){return this._array||(this._array=new n.PointArray(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new n.PointArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var n=p(this,t,e);return this.attr("points",this.array().size(n.width,n.height))}}),n.extend(n.Line,n.Polyline,n.Polygon,{morphArray:n.PointArray,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}}),n.Path=n.invent({create:"path",inherit:n.Shape,extend:{morphArray:n.PathArray,array:function(){return this._array||(this._array=new n.PathArray(this.attr("d")))},plot:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new n.PathArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("d",this.array().move(t,e))},x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},size:function(t,e){var n=p(this,t,e);return this.attr("d",this.array().size(n.width,n.height))},width:function(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)},height:function(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}},construct:{path:function(t){return this.put(new n.Path).plot(t||new n.PathArray)}}}),n.Image=n.invent({create:"image",inherit:n.Shape,extend:{load:function(e){if(!e)return this;var i=this,r=new t.Image;return n.on(r,"load",function(){n.off(r);var t=i.parent(n.Pattern);null!==t&&(0==i.width()&&0==i.height()&&i.size(r.width,r.height),t&&0==t.width()&&0==t.height()&&t.size(i.width(),i.height()),"function"==typeof i._loaded&&i._loaded.call(i,{width:r.width,height:r.height,ratio:r.width/r.height,url:e}))}),n.on(r,"error",function(t){n.off(r),"function"==typeof i._error&&i._error.call(i,t)}),this.attr("href",r.src=this.src=e,n.xlink)},loaded:function(t){return this._loaded=t,this},error:function(t){return this._error=t,this}},construct:{image:function(t,e,i){return this.put(new n.Image).load(t).size(e||0,i||e||0)}}}),n.Text=n.invent({create:function(){this.constructor.call(this,n.create("text")),this.dom.leading=new n.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",n.defaults.attrs["font-family"])},inherit:n.Shape,extend:{x:function(t){return null==t?this.attr("x"):this.attr("x",t)},y:function(t){var e=this.attr("y"),n="number"==typeof e?e-this.bbox().y:0;return null==t?"number"==typeof e?e-n:e:this.attr("y","number"==typeof t.valueOf()?t+n:t)},cx:function(t){return null==t?this.bbox().cx:this.x(t-this.bbox().width/2)},cy:function(t){return null==t?this.bbox().cy:this.y(t-this.bbox().height/2)},text:function(t){if(void 0===t){for(var t="",e=this.node.childNodes,i=0,r=e.length;i<r;++i)0!=i&&3!=e[i].nodeType&&1==n.adopt(e[i]).dom.newLined&&(t+="\n"),t+=e[i].textContent;return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else for(var i=0,o=(t=t.split("\n")).length;i<o;i++)this.tspan(t[i]).newLine();return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this.dom.leading:(this.dom.leading=new n.Number(t),this.rebuild())},lines:function(){var t=(this.textPath&&this.textPath()||this).node,e=n.utils.map(n.utils.filterSVGElements(t.childNodes),function(t){return n.adopt(t)});return new n.Set(e)},rebuild:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,i=0,r=this.dom.leading*new n.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(e.textPath()||this.attr("x",e.attr("x")),"\n"==this.text()?i+=r:(this.attr("dy",r+i),i=0))}),this.fire("rebuild")}return this},build:function(t){return this._build=!!t,this},setData:function(t){return this.dom=t,this.dom.leading=new n.Number(t.leading||1.3),this}},construct:{text:function(t){return this.put(new n.Text).text(t)},plain:function(t){return this.put(new n.Text).plain(t)}}}),n.Tspan=n.invent({create:"tspan",inherit:n.Shape,extend:{text:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.parent(n.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),n.extend(n.Text,n.Tspan,{plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(e.createTextNode(t)),this},tspan:function(t){var e=(this.textPath&&this.textPath()||this).node,i=new n.Tspan;return!1===this._build&&this.clear(),e.appendChild(i.node),i.text(t)},clear:function(){for(var t=(this.textPath&&this.textPath()||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),n.TextPath=n.invent({create:"textPath",inherit:n.Parent,parent:n.Text,construct:{morphArray:n.PathArray,path:function(t){for(var e=new n.TextPath,i=this.doc().defs().path(t);this.node.hasChildNodes();)e.node.appendChild(this.node.firstChild);return this.node.appendChild(e.node),e.attr("href","#"+i,n.xlink),this},array:function(){var t=this.track();return t?t.array():null},plot:function(t){var e=this.track(),n=null;return e&&(n=e.plot(t)),null==t?n:this},track:function(){var t=this.textPath();if(t)return t.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return n.adopt(this.node.firstChild)}}}),n.Nested=n.invent({create:function(){this.constructor.call(this,n.create("svg")),this.style("overflow","visible")},inherit:n.Container,construct:{nested:function(){return this.put(new n.Nested)}}}),n.A=n.invent({create:"a",inherit:n.Container,extend:{to:function(t){return this.attr("href",t,n.xlink)},show:function(t){return this.attr("show",t,n.xlink)},target:function(t){return this.attr("target",t)}},construct:{link:function(t){return this.put(new n.A).to(t)}}}),n.extend(n.Element,{linkTo:function(t){var e=new n.A;return"function"==typeof t?t.call(e,e):e.to(t),this.parent().put(e).put(this)}}),n.Marker=n.invent({create:"marker",inherit:n.Container,extend:{width:function(t){return this.attr("markerWidth",t)},height:function(t){return this.attr("markerHeight",t)},ref:function(t,e){return this.attr("refX",t).attr("refY",e)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(t,e,n){return this.defs().marker(t,e,n)}}}),n.extend(n.Defs,{marker:function(t,e,i){return this.put(new n.Marker).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(i)}}),n.extend(n.Line,n.Polyline,n.Polygon,n.Path,{marker:function(t,e,i,r){var o=["marker"];return"all"!=t&&o.push(t),o=o.join("-"),t=arguments[1]instanceof n.Marker?arguments[1]:this.doc().marker(e,i,r),this.attr(o,t)}});var s={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"==e?t:t+"-"+e}};function u(t,e,i,r){return i+r.replace(n.regex.dots," .")}function l(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function c(t){return t.charAt(0).toUpperCase()+t.slice(1)}function h(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function p(t,e,n){if(null==e||null==n){var i=t.bbox();null==e?e=i.width/i.height*n:null==n&&(n=i.height/i.width*e)}return{width:e,height:n}}function d(t,e,n){return{x:e*t.a+n*t.c+0,y:e*t.b+n*t.d+0}}function f(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}function g(t,e){t.cx=null==t.cx?e.bbox().cx:t.cx,t.cy=null==t.cy?e.bbox().cy:t.cy}function m(e){for(var i=e.childNodes.length-1;i>=0;i--)e.childNodes[i]instanceof t.SVGElement&&m(e.childNodes[i]);return n.adopt(e).id(n.eid(e.nodeName))}function y(t){return null==t.x&&(t.x=0,t.y=0,t.width=0,t.height=0),t.w=t.width,t.h=t.height,t.x2=t.x+t.width,t.y2=t.y+t.height,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}function v(t){return Math.abs(t)>1e-37?t:0}["fill","stroke"].forEach(function(t){var e,i={};i[t]=function(i){if(void 0===i)return this;if("string"==typeof i||n.Color.isRgb(i)||i&&"function"==typeof i.fill)this.attr(t,i);else for(e=s[t].length-1;e>=0;e--)null!=i[s[t][e]]&&this.attr(s.prefix(t,s[t][e]),i[s[t][e]]);return this},n.extend(n.Element,n.FX,i)}),n.extend(n.Element,n.FX,{rotate:function(t,e,n){return this.transform({rotation:t,cx:e,cy:n})},skew:function(t,e,n,i){return 1==arguments.length||3==arguments.length?this.transform({skew:t,cx:e,cy:n}):this.transform({skewX:t,skewY:e,cx:n,cy:i})},scale:function(t,e,n,i){return 1==arguments.length||3==arguments.length?this.transform({scale:t,cx:e,cy:n}):this.transform({scaleX:t,scaleY:e,cx:n,cy:i})},translate:function(t,e){return this.transform({x:t,y:e})},flip:function(t,e){return e="number"==typeof t?t:e,this.transform({flip:t||"both",offset:e})},matrix:function(t){return this.attr("transform",new n.Matrix(6==arguments.length?[].slice.call(arguments):t))},opacity:function(t){return this.attr("opacity",t)},dx:function(t){return this.x(new n.Number(t).plus(this instanceof n.FX?0:this.x()),!0)},dy:function(t){return this.y(new n.Number(t).plus(this instanceof n.FX?0:this.y()),!0)},dmove:function(t,e){return this.dx(t).dy(e)}}),n.extend(n.Rect,n.Ellipse,n.Circle,n.Gradient,n.FX,{radius:function(t,e){var i=(this._target||this).type;return"radial"==i||"circle"==i?this.attr("r",new n.Number(t)):this.rx(t).ry(null==e?t:e)}}),n.extend(n.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),n.extend(n.Parent,n.Text,n.Tspan,n.FX,{font:function(t,e){if("object"==typeof t)for(e in t)this.font(e,t[e]);return"leading"==t?this.leading(e):"anchor"==t?this.attr("text-anchor",e):"size"==t||"family"==t||"weight"==t||"stretch"==t||"variant"==t||"style"==t?this.attr("font-"+t,e):this.attr(t,e)}}),n.Set=n.invent({create:function(t){t instanceof n.Set?this.members=t.members.slice():Array.isArray(t)?this.members=t:this.clear()},extend:{add:function(){var t,e,n=[].slice.call(arguments);for(t=0,e=n.length;t<e;t++)this.members.push(n[t]);return this},remove:function(t){var e=this.index(t);return e>-1&&this.members.splice(e,1),this},each:function(t){for(var e=0,n=this.members.length;e<n;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(t){return this.index(t)>=0},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(0==this.members.length)return new n.RBox;var t=this.members[0].rbox(this.members[0].doc());return this.each(function(){t=t.merge(this.rbox(this.doc()))}),t}},construct:{set:function(t){return new n.Set(t)}}}),n.FX.Set=n.invent({create:function(t){this.set=t}}),n.Set.inherit=function(){var t=[];for(var e in n.Shape.prototype)"function"==typeof n.Shape.prototype[e]&&"function"!=typeof n.Set.prototype[e]&&t.push(e);for(var e in t.forEach(function(t){n.Set.prototype[t]=function(){for(var e=0,i=this.members.length;e<i;e++)this.members[e]&&"function"==typeof this.members[e][t]&&this.members[e][t].apply(this.members[e],arguments);return"animate"==t?this.fx||(this.fx=new n.FX.Set(this)):this}}),t=[],n.FX.prototype)"function"==typeof n.FX.prototype[e]&&"function"!=typeof n.FX.Set.prototype[e]&&t.push(e);t.forEach(function(t){n.FX.Set.prototype[t]=function(){for(var e=0,n=this.set.members.length;e<n;e++)this.set.members[e].fx[t].apply(this.set.members[e].fx,arguments);return this}})},n.extend(n.Element,{data:function(t,e,n){if("object"==typeof t)for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(e){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:!0===n||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this}}),n.extend(n.Element,{remember:function(t,e){if("object"==typeof arguments[0])for(var e in t)this.remember(e,t[e]);else{if(1==arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),n.get=function(t){var i=e.getElementById(function(t){var e=(t||"").toString().match(n.regex.reference);if(e)return e[1]}(t)||t);return n.adopt(i)},n.select=function(t,i){return new n.Set(n.utils.map((i||e).querySelectorAll(t),function(t){return n.adopt(t)}))},n.extend(n.Parent,{select:function(t){return n.select(t,this.node)}});var x="abcdef".split("");if("function"!=typeof t.CustomEvent){var b=function(t,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var i=e.createEvent("CustomEvent");return i.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),i};b.prototype=t.Event.prototype,n.CustomEvent=b}else n.CustomEvent=t.CustomEvent;return function(e){for(var n=0,i=["moz","webkit"],r=0;r<i.length&&!t.requestAnimationFrame;++r)e.requestAnimationFrame=e[i[r]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[i[r]+"CancelAnimationFrame"]||e[i[r]+"CancelRequestAnimationFrame"];e.requestAnimationFrame=e.requestAnimationFrame||function(t){var i=(new Date).getTime(),r=Math.max(0,16-(i-n)),o=e.setTimeout(function(){t(i+r)},r);return n=i+r,o},e.cancelAnimationFrame=e.cancelAnimationFrame||e.clearTimeout}(t),n}(r,r.document)}.call(e,n,e,t))||(t.exports=i)}("undefined"!=typeof window?window:this)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_LAYOUT_ITEM_SETTING={order:0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(339),r=n(22),o=n(322),a=n(45),s=n(46),u=s.withSelect(o.widgetMenuItems.concat([r.pedingMenuItem,r.deleteMenuItem]))(i.default);e.default=a.withRnd()(u),e.widgetRndWithToolItems=function(t){var e=s.withSelect(o.widgetMenuItems.concat(t))(i.default);return a.withRnd()(e)}},function(t,e,n){"use strict";t.exports=n(51)},function(t,e,n){"use strict";
/** @license React v16.6.0
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&Symbol.for,r=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,c=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.concurrent_mode"):60111,p=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,f=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116;function m(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case h:case a:case u:case s:return t;default:switch(t=t&&t.$$typeof){case c:case p:case l:return t;default:return e}}case o:return e}}}function y(t){return m(t)===h}e.typeOf=m,e.AsyncMode=h,e.ConcurrentMode=h,e.ContextConsumer=c,e.ContextProvider=l,e.Element=r,e.ForwardRef=p,e.Fragment=a,e.Profiler=u,e.Portal=o,e.StrictMode=s,e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===a||t===h||t===u||t===s||t===d||"object"==typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===f||t.$$typeof===l||t.$$typeof===c||t.$$typeof===p)},e.isAsyncMode=function(t){return y(t)},e.isConcurrentMode=y,e.isContextConsumer=function(t){return m(t)===c},e.isContextProvider=function(t){return m(t)===l},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return m(t)===p},e.isFragment=function(t){return m(t)===a},e.isProfiler=function(t){return m(t)===u},e.isPortal=function(t){return m(t)===o},e.isStrictMode=function(t){return m(t)===s}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.ToolbarContext=i.React.createContext({})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(326),r=n(22),o=n(348),a=n(45),s=n(46),u=s.withSelect(i.sectionMenuItems.concat([r.pedingMenuItem,r.deleteMenuItem]))(o.default);e.default=a.withRnd()(u),e.sectionRndWithToolItems=function(t){var e=s.withSelect(i.sectionMenuItems.concat(t))(o.default);return a.withRnd()(e)}},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(1),s=n(2);!function(t){t[t.ChooseLayoutType=0]="ChooseLayoutType",t[t.RenderLayout=1]="RenderLayout"}(o||(o={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={mode:o.RenderLayout},e.onLayoutTypeSelected=function(){e.setState({mode:o.RenderLayout})},e.switchToChoosingMobe=function(){e.setState({mode:o.ChooseLayoutType})},e}return i(e,t),e.prototype.render=function(){var t=this,e=this.props.layout;if(!e)return null;var n=s.findLayoutBuilder(e.type||a.LayoutType.FlowLayout);return n?a.jsx(s.PageContext.Consumer,null,function(e){return a.jsx(n,r({},t.props))}):null},e}(a.React.PureComponent);e.default=a.ReactRedux.connect(s.mapStateToLayoutProps)(u)},function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),o=n(1),a=n(12),s=n(11);function u(t,e){var n=e,a=t.order;if(!a||0===a.length)return t;var s=o.Immutable(t),u=[];a.forEach(function(e){u.push(i({id:e},p(t.content[e].bbox,n,800)))}),u.sort(c);for(var d=[u[0]],f=function(t){var e=u[t];d.some(function(t){if(h(t,e))return t.content||(t.content=[]),t.content.push(i({},e)),!0})||d.push(e)},g=1;g<u.length;g++)f(g);var m=0,y=[];return d.forEach(function(t){var e=0;l(t,n),t.y<m&&(e=m-t.y,t.y=m),m=t.y+t.h,s=s.setIn(["content",t.id,"bbox"],{left:r.toRatio(t.x,n),top:t.y+"px",width:r.toRatio(t.w,n),height:t.h+"px"}).setIn(["content",t.id,"setting","autoProps","width"],!1),y.push(t.id),t.content&&t.content.forEach(function(i){l(i,n),e>0&&(i.y+=e),s=s.setIn(["content",t.id,"bbox"],{left:r.toRatio(t.x,n),top:t.y+"px",width:r.toRatio(t.w,n),height:t.h+"px"}).setIn(["content",t.id,"setting","autoProps","width"],!1),y.push(i.id)})}),s=s.set("order",y)}function l(t,e,n){t.x>e&&(n?t.x=e-t.w:(t.x=0,t.y+=t.h)),t.x<0&&(t.x=0),t.x+t.w>e&&(t.w<e?t.x=e-t.w:(t.w=e,t.x=0))}function c(t,e){return t.y!==e.y?t.y>e.y?1:-1:t.x!==e.x?t.x>e.x?1:-1:0}function h(t,e){return t.x<=e.x&&t.x+t.w>e.x+e.w&&t.y<=e.y&&t.y+t.h>e.y+e.h}function p(t,e,n){var i={},o=0,a=0,s=e,u=.2*n;return t&&(["left","right","top","bottom","width","height"].forEach(function(o){if(void 0!==t[o]&&"auto"!==t[o]){var a=["left","right","width"].indexOf(o)>=0?e:n;i[o]=r.isPercentage(t[o])?r.fromRatio(t[o],a):parseFloat(t[o])}}),void 0!==i.left&&(o=i.left),void 0!==i.width?(s=i.width,void 0===i.left&&void 0!==i.right&&(o=e-i.right-s)):s=e-(i.left||0)-(i.right||0),void 0!==i.top&&(a=i.top),void 0!==i.height?(u=i.height,void 0===i.top&&void 0!==i.bottom&&(a=n-i.bottom-u)):void 0!==i.top&&void 0!==i.bottom&&(u=n-i.top-i.bottom)),{x:o,y:a,w:s,h:u}}e.mapStateToFixedLayoutProps=function(t,e){var n=r.mapStateToLayoutProps(t,e),u=n.layout,l=0;return u.order&&u.order.length>0&&u.order.forEach(function(e){var n=s.findLayoutItem(t.appConfig,{layoutId:u.id,layoutItemId:e}),i=n.bbox,c=o.lodash.assign({},a.DEFAULT_FIX_LAYOUT_ITEM_SETTING,n.setting).autoProps;if(!r.isPercentage(i.top)&&!0!==c.top&&!r.isPercentage(i.height)&&!0!==c.height){var h=parseFloat(i.top),p=parseFloat(i.height);if(!isNaN(h)&&!isNaN(p)){var d=h+p;l=l<d?d:l}}}),i({minHeight:l},n)},e.fixedLayoutTransform=function(t,e,n){var i=o.utils.getSizeModeWidth(e),r=o.utils.getSizeModeWidth(n);return i<r?t:u(t,r)},e.autoResponseToDevice=u,e.intersects=function(t,e){var n=Math.max(t.x,e.x),i=Math.min(t.x+t.w,e.x+e.w),r=Math.max(t.y,e.y),o=Math.min(t.y+t.h,e.y+e.h);return n<i&&r<o},e.contains=h,e.mergePos=function(t,e){var n=Math.min(t.x,e.x),i=Math.min(t.y,e.y);return{x:n,y:i,w:Math.max(t.x+t.w,e.x+e.w)-n,h:Math.max(t.y+t.h,e.y+e.h)-i}},e.getAbsolutePos=p},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=n(8),s=n(57),u=n(3),l={displayMode:a.WidgetDisplayMode.Icon,icon:{size:a.IconTextSize.Medium,shape:"rectangle",showText:!1}},c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._onClick=function(t){t.stopPropagation(),e.props.onClick&&e.props.onClick(t,e.props.layoutItem.widgetId)},e.genarateIconTextProps=function(){var t=e.props,n=t.widgetJson,i=t.style,r=t.className,a=t.itemDisplaySetting,s=t.active,u=t.appMode,c=window.jimuConfig.isInBuilder&&u===o.AppMode.Design&&s,h=(a||l).icon||l.icon,p=h.size,d=h.shape,f=h.showText;return{style:i,className:o.classNames("layout-widget d-flex flex-column align-items-center",r),active:!c&&s,selected:c,size:p,iconText:{text:{show:f,text:n.label},image:{src:n.icon,shape:d}}}},e}return i(e,t),e.prototype.render=function(){return this.props.widgetJson?o.React.createElement(s.IconText,r({},this.genarateIconTextProps(),{onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onClick:this._onClick})):o.React.createElement(u.Loading,null)},e.defaultProps={onMouseEnter:function(){},onMouseLeave:function(){},onClick:function(){}},e}(o.React.PureComponent);e.default=o.ReactRedux.connect(function(t,e){var n=e.layoutItem;return{widgetJson:t.appConfig.widgets[n.widgetId],appMode:t.appRuntimeInfo.appMode}})(c)},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=n(8),s=n(2),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.getStyle=function(){var t=e.props,n=t.size,i=t.theme,u=t.iconText.text.show,c=i?i.colors.cyans.cyan100:"",h=s.getIconSize(n),p=23;n===a.IconTextSize.Medium?p=28:n===a.IconTextSize.Large&&(p=29);var d=u?h:h-p,f=14;return n===a.IconTextSize.Medium?f=16:n===a.IconTextSize.Large&&(f=18),o.css(l||(l=r(["\n      margin: 2px;\n      display: flex;\n      align-items:center;\n      flex-direction: column;\n      justify-content: center;\n      min-width: ","!important;\n      height:  ",";\n      cursor: pointer;\n      &.select {\n        outline: 2px "," dashed;\n      }\n      .text-truncate {\n        width: ",";\n        > span {\n          font-size: ",";\n        }\n      }\n    "],["\n      margin: 2px;\n      display: flex;\n      align-items:center;\n      flex-direction: column;\n      justify-content: center;\n      min-width: ","!important;\n      height:  ",";\n      cursor: pointer;\n      &.select {\n        outline: 2px "," dashed;\n      }\n      .text-truncate {\n        width: ",";\n        > span {\n          font-size: ",";\n        }\n      }\n    "])),o.polished.rem(h),o.polished.rem(d),c,o.polished.rem(h),o.polished.rem(f))},e}return i(e,t),e.prototype.render=function(){var t=this.props,e=t.size,n=t.iconText,i=n.text,r=i.show,a=i.text,u=n.image,l=u.src,c=u.shape,p=t.onClick,d=t.style,f=t.className,g=t.active,m=t.selected,y=t.onMouseEnter,v=t.onMouseLeave,x=t.theme,b=s.getIconSize(e),w=.55*b,I=.55*b,S=x?x.colors.primary:"",_=x?x.colors.indigos.indigo500:"";return o.jsx("div",{style:d,css:this.getStyle(),onClick:p,className:o.classNames({select:m},f),onMouseEnter:y,onMouseLeave:v},o.jsx(h,{width:I,height:w,src:l,shape:c,color:S,active:g,activeColor:_}),r&&o.jsx("div",{className:"mt-1 text-center text-truncate widget-card-name",title:a},o.jsx("span",{className:"text-capitalize",title:a},a)))},e.defaultProps={size:a.IconTextSize.Medium,iconText:{text:{text:""},image:{}},onClick:function(){},onMouseEnter:function(){},onMouseLeave:function(){}},e}(o.React.PureComponent);e._IconText=u,e.IconText=o.themeUtils.withTheme(u);var l,c,h=function(t){var e=t.src,n=t.shape,i=t.color,a=t.activeColor,s=t.width,u=t.height,l=t.className,h=t.active;return o.jsx("div",{css:function(t,e){return o.css(c||(c=r(["\n  width: 100%;\n  height: 100%;\n  background-color: ",";\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-shadow: 0 1px 0.5px rgba(0,0,0,0.3), 0 2px 2px rgba(0,0,0,0.2);\n  transition: margin ease-in 0.1s;\n  user-select: none;\n  position: relative;\n  text-align: center;\n  cursor: pointer;\n  &.rectangle {\n    border-radius: 3px;\n  }\n  &.circle {\n    border-radius: 50%;\n  }\n  &.active {\n    background-color: ",";\n  }\n  &:hover {\n    background-color: ",";\n  }\n  img {\n    width: 60%;\n    height: 60%;\n  }\n"],["\n  width: 100%;\n  height: 100%;\n  background-color: ",";\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-shadow: 0 1px 0.5px rgba(0,0,0,0.3), 0 2px 2px rgba(0,0,0,0.2);\n  transition: margin ease-in 0.1s;\n  user-select: none;\n  position: relative;\n  text-align: center;\n  cursor: pointer;\n  &.rectangle {\n    border-radius: 3px;\n  }\n  &.circle {\n    border-radius: 50%;\n  }\n  &.active {\n    background-color: ",";\n  }\n  &:hover {\n    background-color: ",";\n  }\n  img {\n    width: 60%;\n    height: 60%;\n  }\n"])),t,e,e)}(i,a),className:o.classNames({rectangle:"rectangle"===n},{circle:"circle"===n},{active:h},"shape-image",l),style:{width:s,height:u}},o.jsx("img",{src:e}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(59),r=n(13),o=function(){function t(){this.id="global-layout-redux-store-extension"}return t.prototype.getActions=function(){return[r.GlobalLayoutActions.Select,r.GlobalLayoutActions.DisableSelectMode]},t.prototype.getInitLocalState=function(){return{default:{0:{id:"0",pos:{x:0,y:0,w:100,h:100},type:0}}}},t.prototype.getReducer=function(){return i.globalLayoutReducer},t.prototype.getStoreKey=function(){return"appConfig.layouts"},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(60),o=n(13),a=i.Immutable({default:{}});e.globalLayoutReducer=function(t,e){switch(void 0===t&&(t=a),e.type){case o.GlobalLayoutActions.Select:return r.selectElement(e.selection,t);case o.GlobalLayoutActions.DisableSelectMode:return r.disableSelectMode(t);default:return t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11);e.selectElement=function(t,e){return i.selectLayoutItem(t,e)},e.disableSelectMode=function(t){return i.disableSelectMode(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(5),o=n(2),a=function(){function t(){this.id="fixed-layout-transformer",this.layoutType=i.LayoutType.FixedLayout}return t.prototype.transformLayout=function(t,e,n){return t},t.prototype.transformLayoutItem=function(t,e,n,a,s,u){var l=r.getAppConfigAction().appConfig.layouts[a],c=t;if(u===i.BrowserSizeMode.Small&&l.order&&l.order.length>0){var h=l.content[l.order[l.order.length-1]],p=i.Immutable(h.bbox),d=50;o.isPercentage(p.width)?o.isPercentage(p.height)||(d=parseFloat(p.height)/2):d=parseFloat(p.width)/2,p=o.isPercentage(p.left)?p.set("left",parseFloat(p.left)+5+"%"):p.set("left",parseFloat(p.left)+d+"px"),c=c.set("bbox",p).setIn(["setting","autoProps"],i.lodash.getValue(h,"setting.autoProps",{}))}return{index:e,item:c}},t}();e.FixedLayoutTransformer=a},function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(2);e.mapStateToFlowItemProps=function(t,e){var n=o.mapStateToLayoutItemProps(t,e),a=!0,s=n.layoutItem,u=n.browserSizeMode,l=s.widgetId,c=t.appConfig.widgets[l],h=r.utils.findLayoutId(c.layouts[r.DEFAULT_EMBED_LAYOUT_NAME],u,t.appConfig.mainSizeMode),p=t.appConfig.layouts[h];return p&&Object.keys(p.content||[]).length>0&&Object.keys(p.content||[]).some(function(t){if(!p.content[t].isPending)return a=!1,!0}),i({isEmpty:a},n)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);var i=n(329),r=n.n(i),o=n(10),a=n.n(o),s=n(21),u=n.n(s),l=n(4),c=n.n(l),h=n(6),p=n.n(h),d=n(0),f=n(320),g=n(330),m=n.n(g)()({getReferenceRef:void 0,referenceNode:void 0}),y=function(t){function e(){var e;return e=t.call(this)||this,p()(c()(c()(e)),"getReferenceRef",function(t){return e.setState(function(e){var n=e.context;return{context:a()({},n,{referenceNode:t})}})}),e.state={context:{getReferenceRef:e.getReferenceRef,referenceNode:void 0}},e}return u()(e,t),e.prototype.render=function(){return d.createElement(m.Provider,{value:this.state.context},this.props.children)},e}(d.Component),v=function(t){return Array.isArray(t)?t[0]:t},x=function(t){if("function"==typeof t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.apply(void 0,n)}},b={position:"absolute",top:0,left:0,opacity:0,pointerEvents:"none"},w={},I=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p()(c()(c()(e)),"state",{data:void 0,placement:void 0}),p()(c()(c()(e)),"popperInstance",void 0),p()(c()(c()(e)),"popperNode",null),p()(c()(c()(e)),"arrowNode",null),p()(c()(c()(e)),"setPopperNode",function(t){t&&e.popperNode!==t&&(x(e.props.innerRef,t),e.popperNode=t,e.updatePopperInstance())}),p()(c()(c()(e)),"setArrowNode",function(t){e.arrowNode=t}),p()(c()(c()(e)),"updateStateModifier",{enabled:!0,order:900,fn:function(t){var n=t.placement;return e.setState({data:t,placement:n}),t}}),p()(c()(c()(e)),"getOptions",function(){return{placement:e.props.placement,eventsEnabled:e.props.eventsEnabled,positionFixed:e.props.positionFixed,modifiers:a()({},e.props.modifiers,{arrow:a()({},e.props.modifiers&&e.props.modifiers.arrow,{enabled:!!e.arrowNode,element:e.arrowNode}),applyStyle:{enabled:!1},updateStateModifier:e.updateStateModifier})}}),p()(c()(c()(e)),"getPopperStyle",function(){return e.popperNode&&e.state.data?a()({position:e.state.data.offsets.popper.position},e.state.data.styles):b}),p()(c()(c()(e)),"getPopperPlacement",function(){return e.state.data?e.state.placement:void 0}),p()(c()(c()(e)),"getArrowStyle",function(){return e.arrowNode&&e.state.data?e.state.data.arrowStyles:w}),p()(c()(c()(e)),"getOutOfBoundariesState",function(){return e.state.data?e.state.data.hide:void 0}),p()(c()(c()(e)),"destroyPopperInstance",function(){e.popperInstance&&(e.popperInstance.destroy(),e.popperInstance=null)}),p()(c()(c()(e)),"updatePopperInstance",function(){e.destroyPopperInstance();var t=c()(c()(e)).popperNode,n=e.props.referenceElement;n&&t&&(e.popperInstance=new f.a(n,t,e.getOptions()))}),p()(c()(c()(e)),"scheduleUpdate",function(){e.popperInstance&&e.popperInstance.scheduleUpdate()}),e}u()(e,t);var n=e.prototype;return n.componentDidUpdate=function(t,e){this.props.placement!==t.placement||this.props.referenceElement!==t.referenceElement||this.props.positionFixed!==t.positionFixed?this.updatePopperInstance():this.props.eventsEnabled!==t.eventsEnabled&&this.popperInstance&&(this.props.eventsEnabled?this.popperInstance.enableEventListeners():this.popperInstance.disableEventListeners()),e.placement!==this.state.placement&&this.scheduleUpdate()},n.componentWillUnmount=function(){x(this.props.innerRef,null),this.destroyPopperInstance()},n.render=function(){return v(this.props.children)({ref:this.setPopperNode,style:this.getPopperStyle(),placement:this.getPopperPlacement(),outOfBoundaries:this.getOutOfBoundariesState(),scheduleUpdate:this.scheduleUpdate,arrowProps:{ref:this.setArrowNode,style:this.getArrowStyle()}})},e}(d.Component);p()(I,"defaultProps",{placement:"bottom",eventsEnabled:!0,referenceElement:void 0,positionFixed:!1});var S=f.a.placements;function _(t){var e=t.referenceElement,n=r()(t,["referenceElement"]);return d.createElement(m.Consumer,null,function(t){var i=t.referenceNode;return d.createElement(I,a()({referenceElement:void 0!==e?e:i},n))})}var M=n(331),P=n.n(M),C=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,p()(c()(c()(e)),"refHandler",function(t){x(e.props.innerRef,t),x(e.props.getReferenceRef,t)}),e}return u()(e,t),e.prototype.render=function(){return P()(this.props.getReferenceRef,"`Reference` should not be used outside of a `Manager` component."),v(this.props.children)({ref:this.refHandler})},e}(d.Component);function O(t){return d.createElement(m.Consumer,null,function(e){var n=e.getReferenceRef;return d.createElement(C,a()({getReferenceRef:n},t))})}n.d(e,"Popper",function(){return _}),n.d(e,"placements",function(){return S}),n.d(e,"Manager",function(){return y}),n.d(e,"Reference",function(){return O})},function(t,e,n){"use strict";(function(t){for(
/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.14.6
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
var n="undefined"!=typeof window&&"undefined"!=typeof document,i=["Edge","Trident","Firefox"],r=0,o=0;o<i.length;o+=1)if(n&&navigator.userAgent.indexOf(i[o])>=0){r=1;break}var a=n&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},r))}};function s(t){return t&&"[object Function]"==={}.toString.call(t)}function u(t,e){if(1!==t.nodeType)return[];var n=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?n[e]:n}function l(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function c(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=u(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/(auto|scroll|overlay)/.test(n+r+i)?t:c(l(t))}var h=n&&!(!window.MSInputMethodContext||!document.documentMode),p=n&&/MSIE 10/.test(navigator.userAgent);function d(t){return 11===t?h:10===t?p:h||p}function f(t){if(!t)return document.documentElement;for(var e=d(10)?document.body:null,n=t.offsetParent||null;n===e&&t.nextElementSibling;)n=(t=t.nextElementSibling).offsetParent;var i=n&&n.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===u(n,"position")?f(n):n:t?t.ownerDocument.documentElement:document.documentElement}function g(t){return null!==t.parentNode?g(t.parentNode):t}function m(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,i=n?t:e,r=n?e:t,o=document.createRange();o.setStart(i,0),o.setEnd(r,0);var a=o.commonAncestorContainer;if(t!==a&&e!==a||i.contains(r))return function(t){var e=t.nodeName;return"BODY"!==e&&("HTML"===e||f(t.firstElementChild)===t)}(a)?a:f(a);var s=g(t);return s.host?m(s.host,e):m(t,g(e).host)}function y(t){var e="top"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=t.nodeName;if("BODY"===n||"HTML"===n){var i=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||i)[e]}return t[e]}function v(t,e){var n="x"===e?"Left":"Top",i="Left"===n?"Right":"Bottom";return parseFloat(t["border"+n+"Width"],10)+parseFloat(t["border"+i+"Width"],10)}function x(t,e,n,i){return Math.max(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],d(10)?parseInt(n["offset"+t])+parseInt(i["margin"+("Height"===t?"Top":"Left")])+parseInt(i["margin"+("Height"===t?"Bottom":"Right")]):0)}function b(t){var e=t.body,n=t.documentElement,i=d(10)&&getComputedStyle(n);return{height:x("Height",e,n,i),width:x("Width",e,n,i)}}var w=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},I=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),S=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function M(t){return _({},t,{right:t.left+t.width,bottom:t.top+t.height})}function P(t){var e={};try{if(d(10)){e=t.getBoundingClientRect();var n=y(t,"top"),i=y(t,"left");e.top+=n,e.left+=i,e.bottom+=n,e.right+=i}else e=t.getBoundingClientRect()}catch(t){}var r={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},o="HTML"===t.nodeName?b(t.ownerDocument):{},a=o.width||t.clientWidth||r.right-r.left,s=o.height||t.clientHeight||r.bottom-r.top,l=t.offsetWidth-a,c=t.offsetHeight-s;if(l||c){var h=u(t);l-=v(h,"x"),c-=v(h,"y"),r.width-=l,r.height-=c}return M(r)}function C(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=d(10),r="HTML"===e.nodeName,o=P(t),a=P(e),s=c(t),l=u(e),h=parseFloat(l.borderTopWidth,10),p=parseFloat(l.borderLeftWidth,10);n&&r&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));var f=M({top:o.top-a.top-h,left:o.left-a.left-p,width:o.width,height:o.height});if(f.marginTop=0,f.marginLeft=0,!i&&r){var g=parseFloat(l.marginTop,10),m=parseFloat(l.marginLeft,10);f.top-=h-g,f.bottom-=h-g,f.left-=p-m,f.right-=p-m,f.marginTop=g,f.marginLeft=m}return(i&&!n?e.contains(s):e===s&&"BODY"!==s.nodeName)&&(f=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=y(e,"top"),r=y(e,"left"),o=n?-1:1;return t.top+=i*o,t.bottom+=i*o,t.left+=r*o,t.right+=r*o,t}(f,e)),f}function O(t){if(!t||!t.parentElement||d())return document.documentElement;for(var e=t.parentElement;e&&"none"===u(e,"transform");)e=e.parentElement;return e||document.documentElement}function R(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={top:0,left:0},a=r?O(t):m(t,e);if("viewport"===i)o=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.ownerDocument.documentElement,i=C(t,n),r=Math.max(n.clientWidth,window.innerWidth||0),o=Math.max(n.clientHeight,window.innerHeight||0),a=e?0:y(n),s=e?0:y(n,"left");return M({top:a-i.top+i.marginTop,left:s-i.left+i.marginLeft,width:r,height:o})}(a,r);else{var s=void 0;"scrollParent"===i?"BODY"===(s=c(l(e))).nodeName&&(s=t.ownerDocument.documentElement):s="window"===i?t.ownerDocument.documentElement:i;var h=C(s,a,r);if("HTML"!==s.nodeName||function t(e){var n=e.nodeName;return"BODY"!==n&&"HTML"!==n&&("fixed"===u(e,"position")||t(l(e)))}(a))o=h;else{var p=b(t.ownerDocument),d=p.height,f=p.width;o.top+=h.top-h.marginTop,o.bottom=d+h.top,o.left+=h.left-h.marginLeft,o.right=f+h.left}}var g="number"==typeof(n=n||0);return o.left+=g?n:n.left||0,o.top+=g?n:n.top||0,o.right-=g?n:n.right||0,o.bottom-=g?n:n.bottom||0,o}function j(t,e,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var a=R(n,i,o,r),s={top:{width:a.width,height:e.top-a.top},right:{width:a.right-e.right,height:a.height},bottom:{width:a.width,height:a.bottom-e.bottom},left:{width:e.left-a.left,height:a.height}},u=Object.keys(s).map(function(t){return _({key:t},s[t],{area:function(t){return t.width*t.height}(s[t])})}).sort(function(t,e){return e.area-t.area}),l=u.filter(function(t){var e=t.width,i=t.height;return e>=n.clientWidth&&i>=n.clientHeight}),c=l.length>0?l[0].key:u[0].key,h=t.split("-")[1];return c+(h?"-"+h:"")}function E(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return C(n,i?O(e):m(e,n),i)}function A(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),n=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),i=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+i,height:t.offsetHeight+n}}function T(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function z(t,e,n){n=n.split("-")[0];var i=A(t),r={width:i.width,height:i.height},o=-1!==["right","left"].indexOf(n),a=o?"top":"left",s=o?"left":"top",u=o?"height":"width",l=o?"width":"height";return r[a]=e[a]+e[u]/2-i[u]/2,r[s]=n===s?e[s]-i[l]:e[T(s)],r}function L(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function k(t,e,n){return(void 0===n?t:t.slice(0,function(t,e,n){if(Array.prototype.findIndex)return t.findIndex(function(t){return t[e]===n});var i=L(t,function(t){return t[e]===n});return t.indexOf(i)}(t,"name",n))).forEach(function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=t.function||t.fn;t.enabled&&s(n)&&(e.offsets.popper=M(e.offsets.popper),e.offsets.reference=M(e.offsets.reference),e=n(e,t))}),e}function B(t,e){return t.some(function(t){var n=t.name;return t.enabled&&n===e})}function N(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<e.length;i++){var r=e[i],o=r?""+r+n:t;if(void 0!==document.body.style[o])return o}return null}function D(t){var e=t.ownerDocument;return e?e.defaultView:window}function F(t,e,n,i){n.updateBound=i,D(t).addEventListener("resize",n.updateBound,{passive:!0});var r=c(t);return function t(e,n,i,r){var o="BODY"===e.nodeName,a=o?e.ownerDocument.defaultView:e;a.addEventListener(n,i,{passive:!0}),o||t(c(a.parentNode),n,i,r),r.push(a)}(r,"scroll",n.updateBound,n.scrollParents),n.scrollElement=r,n.eventsEnabled=!0,n}function H(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=function(t,e){return D(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e}(this.reference,this.state))}function W(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function V(t,e){Object.keys(e).forEach(function(n){var i="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&W(e[n])&&(i="px"),t.style[n]=e[n]+i})}var U=n&&/Firefox/i.test(navigator.userAgent);function X(t,e,n){var i=L(t,function(t){return t.name===e}),r=!!i&&t.some(function(t){return t.name===n&&t.enabled&&t.order<i.order});if(!r){var o="`"+e+"`",a="`"+n+"`";console.warn(a+" modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return r}var Y=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],G=Y.slice(3);function q(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=G.indexOf(t),i=G.slice(n+1).concat(G.slice(0,n));return e?i.reverse():i}var $={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function Q(t,e,n,i){var r=[0,0],o=-1!==["right","left"].indexOf(i),a=t.split(/(\+|\-)/).map(function(t){return t.trim()}),s=a.indexOf(L(a,function(t){return-1!==t.search(/,|\s/)}));a[s]&&-1===a[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var u=/\s*,\s*|\s+/,l=-1!==s?[a.slice(0,s).concat([a[s].split(u)[0]]),[a[s].split(u)[1]].concat(a.slice(s+1))]:[a];return(l=l.map(function(t,i){var r=(1===i?!o:o)?"height":"width",a=!1;return t.reduce(function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,a=!0,t):a?(t[t.length-1]+=e,a=!1,t):t.concat(e)},[]).map(function(t){return function(t,e,n,i){var r=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+r[1],a=r[2];if(!o)return t;if(0===a.indexOf("%")){var s=void 0;switch(a){case"%p":s=n;break;case"%":case"%r":default:s=i}return M(s)[e]/100*o}if("vh"===a||"vw"===a)return("vh"===a?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*o;return o}(t,r,e,n)})})).forEach(function(t,e){t.forEach(function(n,i){W(n)&&(r[e]+=n*("-"===t[i-1]?-1:1))})}),r}var J={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,n=e.split("-")[0],i=e.split("-")[1];if(i){var r=t.offsets,o=r.reference,a=r.popper,s=-1!==["bottom","top"].indexOf(n),u=s?"left":"top",l=s?"width":"height",c={start:S({},u,o[u]),end:S({},u,o[u]+o[l]-a[l])};t.offsets.popper=_({},a,c[i])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var n=e.offset,i=t.placement,r=t.offsets,o=r.popper,a=r.reference,s=i.split("-")[0],u=void 0;return u=W(+n)?[+n,0]:Q(n,o,a,s),"left"===s?(o.top+=u[0],o.left-=u[1]):"right"===s?(o.top+=u[0],o.left+=u[1]):"top"===s?(o.left+=u[0],o.top-=u[1]):"bottom"===s&&(o.left+=u[0],o.top+=u[1]),t.popper=o,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,e){var n=e.boundariesElement||f(t.instance.popper);t.instance.reference===n&&(n=f(n));var i=N("transform"),r=t.instance.popper.style,o=r.top,a=r.left,s=r[i];r.top="",r.left="",r[i]="";var u=R(t.instance.popper,t.instance.reference,e.padding,n,t.positionFixed);r.top=o,r.left=a,r[i]=s,e.boundaries=u;var l=e.priority,c=t.offsets.popper,h={primary:function(t){var n=c[t];return c[t]<u[t]&&!e.escapeWithReference&&(n=Math.max(c[t],u[t])),S({},t,n)},secondary:function(t){var n="right"===t?"left":"top",i=c[n];return c[t]>u[t]&&!e.escapeWithReference&&(i=Math.min(c[n],u[t]-("right"===t?c.width:c.height))),S({},n,i)}};return l.forEach(function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";c=_({},c,h[e](t))}),t.offsets.popper=c,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,n=e.popper,i=e.reference,r=t.placement.split("-")[0],o=Math.floor,a=-1!==["top","bottom"].indexOf(r),s=a?"right":"bottom",u=a?"left":"top",l=a?"width":"height";return n[s]<o(i[u])&&(t.offsets.popper[u]=o(i[u])-n[l]),n[u]>o(i[s])&&(t.offsets.popper[u]=o(i[s])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){var n;if(!X(t.instance.modifiers,"arrow","keepTogether"))return t;var i=e.element;if("string"==typeof i){if(!(i=t.instance.popper.querySelector(i)))return t}else if(!t.instance.popper.contains(i))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var r=t.placement.split("-")[0],o=t.offsets,a=o.popper,s=o.reference,l=-1!==["left","right"].indexOf(r),c=l?"height":"width",h=l?"Top":"Left",p=h.toLowerCase(),d=l?"left":"top",f=l?"bottom":"right",g=A(i)[c];s[f]-g<a[p]&&(t.offsets.popper[p]-=a[p]-(s[f]-g)),s[p]+g>a[f]&&(t.offsets.popper[p]+=s[p]+g-a[f]),t.offsets.popper=M(t.offsets.popper);var m=s[p]+s[c]/2-g/2,y=u(t.instance.popper),v=parseFloat(y["margin"+h],10),x=parseFloat(y["border"+h+"Width"],10),b=m-t.offsets.popper[p]-v-x;return b=Math.max(Math.min(a[c]-g,b),0),t.arrowElement=i,t.offsets.arrow=(S(n={},p,Math.round(b)),S(n,d,""),n),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(t,e){if(B(t.instance.modifiers,"inner"))return t;if(t.flipped&&t.placement===t.originalPlacement)return t;var n=R(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),i=t.placement.split("-")[0],r=T(i),o=t.placement.split("-")[1]||"",a=[];switch(e.behavior){case $.FLIP:a=[i,r];break;case $.CLOCKWISE:a=q(i);break;case $.COUNTERCLOCKWISE:a=q(i,!0);break;default:a=e.behavior}return a.forEach(function(s,u){if(i!==s||a.length===u+1)return t;i=t.placement.split("-")[0],r=T(i);var l=t.offsets.popper,c=t.offsets.reference,h=Math.floor,p="left"===i&&h(l.right)>h(c.left)||"right"===i&&h(l.left)<h(c.right)||"top"===i&&h(l.bottom)>h(c.top)||"bottom"===i&&h(l.top)<h(c.bottom),d=h(l.left)<h(n.left),f=h(l.right)>h(n.right),g=h(l.top)<h(n.top),m=h(l.bottom)>h(n.bottom),y="left"===i&&d||"right"===i&&f||"top"===i&&g||"bottom"===i&&m,v=-1!==["top","bottom"].indexOf(i),x=!!e.flipVariations&&(v&&"start"===o&&d||v&&"end"===o&&f||!v&&"start"===o&&g||!v&&"end"===o&&m);(p||y||x)&&(t.flipped=!0,(p||y)&&(i=a[u+1]),x&&(o=function(t){return"end"===t?"start":"start"===t?"end":t}(o)),t.placement=i+(o?"-"+o:""),t.offsets.popper=_({},t.offsets.popper,z(t.instance.popper,t.offsets.reference,t.placement)),t=k(t.instance.modifiers,t,"flip"))}),t},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,n=e.split("-")[0],i=t.offsets,r=i.popper,o=i.reference,a=-1!==["left","right"].indexOf(n),s=-1===["top","left"].indexOf(n);return r[a?"left":"top"]=o[n]-(s?r[a?"width":"height"]:0),t.placement=T(e),t.offsets.popper=M(r),t}},hide:{order:800,enabled:!0,fn:function(t){if(!X(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=L(t.instance.modifiers,function(t){return"preventOverflow"===t.name}).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var n=e.x,i=e.y,r=t.offsets.popper,o=L(t.instance.modifiers,function(t){return"applyStyle"===t.name}).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a=void 0!==o?o:e.gpuAcceleration,s=f(t.instance.popper),u=P(s),l={position:r.position},c=function(t,e){var n=t.offsets,i=n.popper,r=n.reference,o=-1!==["left","right"].indexOf(t.placement),a=-1!==t.placement.indexOf("-"),s=r.width%2==i.width%2,u=r.width%2==1&&i.width%2==1,l=function(t){return t},c=e?o||a||s?Math.round:Math.floor:l,h=e?Math.round:l;return{left:c(u&&!a&&e?i.left-1:i.left),top:h(i.top),bottom:h(i.bottom),right:c(i.right)}}(t,window.devicePixelRatio<2||!U),h="bottom"===n?"top":"bottom",p="right"===i?"left":"right",d=N("transform"),g=void 0,m=void 0;if(m="bottom"===h?"HTML"===s.nodeName?-s.clientHeight+c.bottom:-u.height+c.bottom:c.top,g="right"===p?"HTML"===s.nodeName?-s.clientWidth+c.right:-u.width+c.right:c.left,a&&d)l[d]="translate3d("+g+"px, "+m+"px, 0)",l[h]=0,l[p]=0,l.willChange="transform";else{var y="bottom"===h?-1:1,v="right"===p?-1:1;l[h]=m*y,l[p]=g*v,l.willChange=h+", "+p}var x={"x-placement":t.placement};return t.attributes=_({},x,t.attributes),t.styles=_({},l,t.styles),t.arrowStyles=_({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){return V(t.instance.popper,t.styles),function(t,e){Object.keys(e).forEach(function(n){!1!==e[n]?t.setAttribute(n,e[n]):t.removeAttribute(n)})}(t.instance.popper,t.attributes),t.arrowElement&&Object.keys(t.arrowStyles).length&&V(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,n,i,r){var o=E(r,e,t,n.positionFixed),a=j(n.placement,o,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",a),V(e,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},Z=function(){function t(e,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};w(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(i.update)},this.update=a(this.update.bind(this)),this.options=_({},t.Defaults,r),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(_({},t.Defaults.modifiers,r.modifiers)).forEach(function(e){i.options.modifiers[e]=_({},t.Defaults.modifiers[e]||{},r.modifiers?r.modifiers[e]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(t){return _({name:t},i.options.modifiers[t])}).sort(function(t,e){return t.order-e.order}),this.modifiers.forEach(function(t){t.enabled&&s(t.onLoad)&&t.onLoad(i.reference,i.popper,i.options,t,i.state)}),this.update();var o=this.options.eventsEnabled;o&&this.enableEventListeners(),this.state.eventsEnabled=o}return I(t,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=E(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=j(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=z(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=k(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,B(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[N("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=F(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return H.call(this)}}]),t}();Z.Utils=("undefined"!=typeof window?window:t).PopperUtils,Z.placements=Y,Z.Defaults=J,e.a=Z}).call(this,n(325))},function(t,e,n){"use strict";var i=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a,s,u=n(1),l=n(5),c=n(3),h=n(12),p=n(2),d=n(338),f=n(13),g=n(42),m=n(19),y=n(55),v=n(47),x=n(352),b=u.css(a||(a=i(["\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  top: 0;\n  right: 0;\n  background: transparent;\n  pointer-events: none;\n"],["\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  top: 0;\n  right: 0;\n  background: transparent;\n  pointer-events: none;\n"]))),w=function(t){function e(e){var n=t.call(this,e)||this;n.state={offsetX:0,offsetY:0,dw:0,dh:0,dragEnterred:!1},n._activate=function(t){var e=n.props,i=e.appMode,r=e.dispatch,o=e.isInSection,a=e.isInWidget,s=e.layout;e.layouts[e.browserSizeMode]!==s.id||o||a||(t.stopPropagation(),i===u.AppMode.Design&&r(f.selectItem({layoutId:null,layoutItemId:null})))},n.childrenRef={},p.autoBindHandlers(n,["onResizeStart","onResizing","onResizeEnd","onDragOver","onDragEnter","onDragLeave","onDrop"]),n.builderTheme=p.getBuilderThemeVariables();var i=u.ExtensionManager.getInstance().getExtensions(""+u.extensionSpec.ExtensionPoints.LayoutTransformer);if(i&&i.length>0){var r=i.find(function(t){return t.layoutType===n.props.layout.type});n.layoutTransform=u.lodash.getValue(r,"transformLayout")}return n}return r(e,t),e.prototype.componentDidMount=function(){this.guideXDraw=v(this.guideXRef),this.guideYDraw=v(this.guideYRef),this.guideDragOverDraw=v(this.guideDragOverRef)},e.prototype.onResizeStart=function(t){this.rndingLayoutId=t,this.collectBounds({layoutId:this.props.layout.id,layoutItemId:t}),this.domRect=this.ref.getBoundingClientRect();var e=this.childrenRef[t].current.getBoundingClientRect();this.resizingRect=p.relativeClientRect(e,this.domRect)},e.prototype.onResizing=function(t,e,n,i,r){this.guideXDraw.clear(),this.guideYDraw.clear();var o=x.moveGuide(this.resizingRect,{x:e,y:n,w:i,h:r},this.childRects,this.guideXDraw,this.guideYDraw,this.builderTheme);this.setState({offsetX:o.x,offsetY:o.y,dw:o.w,dh:o.h})},e.prototype.onResizeEnd=function(t,e,n,i,r,o,a){this.rndingLayoutId=null;var s=this.props.layout;this.guideXDraw.clear(),this.guideYDraw.clear();var u=x.moveGuide(this.resizingRect,{x:e,y:n,w:i,h:r},this.childRects),c=p.generateResizingBBoxStyle(this.resizingRect,this.domRect,{dx:u.x,dy:u.y,dw:u.w,dh:u.h});this.childRects=[];var h=l.getAppConfigAction(),d=p.replaceBoundingBox(o.bbox,c,this.domRect);h.editLayoutItemBBox({layoutId:s.id,layoutItemId:t},d).exec(),this.setState({offsetX:0,offsetY:0,dw:0,dh:0})},e.prototype.onDragOver=function(t,e,n,i){var r=this.props.layout;if((!this.childRects||0===this.childRects.length)&&r.order&&r.order.length>0&&this.collectBounds(t),this.clearMoveGuide(),void 0!==t.path)if(this.dropArea)this.dropArea.move(i.left,i.top).size(i.width,i.height),this.dropArea.visible()||this.dropArea.show();else{var o=p.getBuilderThemeVariables();this.dropArea=this.guideDragOverDraw.rect(i.width,i.height).fill(u.polished.rgba(o.colors.cyans.cyan500,.2)).stroke("none").attr({x:i.left,y:i.top})}var a=x.moveGuide(i,{x:0,y:0,w:0,h:0},this.childRects,this.guideXDraw,this.guideYDraw,this.builderTheme);if(e&&t.layoutItemId&&(a.x||a.y)){var s=p.parseTranslateCoords(e.style.transform);e.style.transform="translate("+(s.x+a.x)+"px, "+(s.y+a.y)+"px)"}},e.prototype.onDragEnter=function(t){this.state.dragEnterred||(this.collectBounds(t),this.clearMoveGuide(),this.setState({dragEnterred:!0}),this.props.isPageItem||(this.dragEnterArea?this.dragEnterArea.show():this.dragEnterArea=this.guideDragOverDraw.rect(this.domRect.width,this.domRect.height).fill(u.polished.rgba(this.builderTheme.colors.cyans.cyan500,.1)).stroke("none").attr({x:0,y:0})))},e.prototype.onDragLeave=function(){this.state.dragEnterred&&(this.clearMoveGuide(),this.setState({dragEnterred:!1}),this.dragEnterArea&&this.dragEnterArea.hide())},e.prototype.clearMoveGuide=function(){this.dropArea&&this.dropArea.hide(),this.guideXDraw.clear(),this.guideYDraw.clear()},e.prototype.onDrop=function(t,e,n){this.clearMoveGuide();var i=x.moveGuide(n,{x:0,y:0,w:0,h:0},this.childRects),r={left:n.left+i.x,top:n.top+i.y,width:Math.round(n.width),height:Math.round(n.height),right:e.width-(n.right+i.x),bottom:e.height-(n.bottom+i.y)};n.width>e.width&&(r.width=Math.round(e.width),r.left=0),n.height>e.height&&(r.height=Math.round(e.height),r.top=0),this.childRects=[];var o=this.props,a=o.layout;o.isPageItem&&(r.left=p.toRatio(r.left,e.width),r.top=p.toRatio(r.top,e.height),r.width=p.toRatio(r.width,e.width),r.height=p.toRatio(r.height,e.height),r.right=p.toRatio(r.right,e.width),r.bottom=p.toRatio(r.bottom,e.height));var s=l.getAppConfigAction();m.addItemToLayout(s.appConfig,t,{layoutId:a.id},e,r).then(function(t){var e=t.layoutInfo,n=t.updatedAppConfig;(s=l.getAppConfigAction(n)).exec(),u.getAppStore().dispatch(u.appActions.selectionChanged(e))}),this.setState({dragEnterred:!1})},e.prototype.collectBounds=function(t){var e=this,n=this.props.layout;return this.childRects=[],this.domRect=this.ref.getBoundingClientRect(),Object.keys(this.childrenRef).forEach(function(i){if((t.layoutId!==n.id||t.layoutItemId!==i)&&e.childrenRef[i]&&e.childrenRef[i].current){var r=p.relativeClientRect(e.childrenRef[i].current.getBoundingClientRect(),e.domRect);e.childRects.push(r)}}),this.childRects},e.prototype.processLayoutItem=function(t,e,n){this.childrenRef[t]=u.React.createRef();var i=this.props,r=i.layout,o=i.itemResizable,a=i.itemDraggable,s=i.itemSelectable,l=this.state,c=l.offsetX,h=l.offsetY,p=l.dw,f=l.dh,g=t===this.rndingLayoutId?c:0,m=t===this.rndingLayoutId?h:0,y=t===this.rndingLayoutId?p:0,v=t===this.rndingLayoutId?f:0,x=t===this.rndingLayoutId?this.resizingRect:void 0,b=t===this.rndingLayoutId?this.domRect:void 0;return u.jsx(d.default,{key:t,index:e,offsetX:g,offsetY:m,dw:y,dh:v,initRect:x,containerRect:b,ref:this.childrenRef[t],layoutId:r.id,layoutItemId:t,draggable:a,resizable:o,selectable:s,onResizeStart:this.onResizeStart,onResizing:this.onResizing,onResizeEnd:this.onResizeEnd,onClick:this.props.onItemClick})},e.prototype.dropAreaStyle=function(){return u.css(s||(s=i(["\n      .drag-enter {\n        background: ",";\n      }\n    "],["\n      .drag-enter {\n        background: ",";\n      }\n    "])),u.polished.rgba(this.builderTheme.colors.cyans.cyan500,.1))},e.prototype.render=function(){var t=this,e=this.props,n=e.layout,i=e.className,r=e.style,a=e.ignoreMinHeight,s=e.minHeight,l=e.layouts,d=e.mainSizeMode,f=e.browserSizeMode,g=e.appMode,m=n,y=l[f]!==n.id;y&&this.layoutTransform&&(m=this.layoutTransform(n,d,f)),this.layoutSetting=u.lodash.assign({},h.DEFAULT_FIX_LAYOUT_SETTING,y?{}:n.setting);var v=m.order||[],x=u.classNames("fixed-layout",i,{"drag-enter":this.state.dragEnterred}),w=0!==this.state.dh||0!==this.state.dw,I={display:this.props.draggingWidgetInfo&&this.state.dragEnterred||w?"block":"none"},S=p.getBuilderThemeVariables(),_=o({height:"auto",position:"relative",minHeight:a?"none":s},r,c.styleUtils.toCSSStyle(this.layoutSetting.style),{width:"100%",overflow:"hidden"});return _.border||g!==u.AppMode.Design||this.props.isPageItem||(_.border="1px dashed "+u.polished.rgba(S.colors.grays.gray600,.3)),u.jsx("div",{css:this.dropAreaStyle(),className:x,ref:function(e){return t.ref=e},onClick:this._activate,style:_,"data-layoutid":m.id},v.length>0&&v.map(function(e,n){return t.processLayoutItem(e,n,t.layoutSetting)}),u.jsx("div",{css:b,style:I,ref:function(e){return t.guideXRef=e}}),u.jsx("div",{css:b,style:I,ref:function(e){return t.guideYRef=e}}),u.jsx("div",{css:b,style:I,ref:function(e){return t.guideDragOverRef=e}}),0===v.length&&this.props.children)},e.displayName="FixedLayout",e}(u.React.PureComponent),I=g.withDrop()(w);e.default=u.ReactRedux.connect(y.mapStateToFixedLayoutProps)(I)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.widgetMenuItems=[]},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(1),u=n(52),l=n(340),c=n(324),h=n(2),p=function(t){function e(e){var n=t.call(this,e)||this;return n.state={activeItem:null},h.autoBindHandlers(n,["onItemClick"]),n}return i(e,t),e.prototype.onItemClick=function(t){var e=this.state.toggleOn;e=t!==this.state.activeItem||!e,this.setState({activeItem:t,toggleOn:e})},e.prototype.render=function(){var t=this.props.tools;if(!t||0===t.length)return null;var e=this.state,n=e.activeItem,i=e.toggleOn;return s.jsx(u.ToolbarContext.Provider,{value:o({},this.props,{activeItem:n,toggleOn:i,onItemClick:this.onItemClick})},s.jsx("div",{css:s.css(a||(a=r(["\n            display: flex;\n            pointer-events: all;\n            border-radius: 2px;\n            box-shadow: 0 2px 8px 1px rgba(0,0,0,0.20);\n            height: 100%;\n          "],["\n            display: flex;\n            pointer-events: all;\n            border-radius: 2px;\n            box-shadow: 0 2px 8px 1px rgba(0,0,0,0.20);\n            height: 100%;\n          "])))},t.map(function(t,e){return Array.isArray(t)?s.jsx(l.ToolbarGroup,{uid:""+e,key:e,tools:t}):s.jsx(c.ToolbarItem,o({uid:""+e,key:e},t))})))},e}(s.React.PureComponent);e.Toolbar=p},function(t,e,n){"use strict";var i=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(3),u=n(319),l=n(2),c=n(52);e.DEFAULT_ICON_SIZE=16;var h,p,d,f=a.css(h||(h=i(["\n  width: 50px;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"],["\n  width: 50px;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),g=function(t){function n(e){var n=t.call(this,e)||this;return l.autoBindHandlers(n,["select"]),n}return r(n,t),n.prototype.select=function(t){if(t.stopPropagation(),this.props.onClick){var e=this.contextProps.parentRef;this.props.onClick({layoutId:this.contextProps.layoutId,layoutItem:this.contextProps.layoutItem,clientRect:e.getBoundingClientRect()},t),this.contextProps.onItemClick(this.props.uid)}},n.prototype.getValue=function(t,e){return"function"==typeof t?t(e):t},n.prototype.getStyle=function(){var t=this.contextProps.theme,e=this.props.isInGroup;return a.css(p||(p=i(["\n      cursor: pointer;\n      width: 50px;\n      min-height: 30px;\n      display: flex;\n      justify-content: center;\n      user-select: none;\n      background: ",";\n\n      &:hover,\n      &.selected {\n        background: ",";\n        opacity: 60%;\n      }\n\n      &.disabled,\n      &.no-action {\n        cursor: default;\n        background: transparent !important;\n        &:hover {\n          background: transparent !important;\n        }\n      }\n\n      &.msg {\n        width: auto;\n        font-size: 12px;\n        color: ",";\n        letter-spacing: 0.33px;\n        text-align: center;\n        &:hover {\n          background: ",";\n        }\n      }\n\n      .toolbar-group & {\n        justify-content: flex-start;\n      }\n\n      .tool-item-icon {\n        color: ",";\n\n        :hover, &.checked {\n          color: ",";\n        }\n      }\n    "],["\n      cursor: pointer;\n      width: 50px;\n      min-height: 30px;\n      display: flex;\n      justify-content: center;\n      user-select: none;\n      background: ",";\n\n      &:hover,\n      &.selected {\n        background: ",";\n        opacity: 60%;\n      }\n\n      &.disabled,\n      &.no-action {\n        cursor: default;\n        background: transparent !important;\n        &:hover {\n          background: transparent !important;\n        }\n      }\n\n      &.msg {\n        width: auto;\n        font-size: 12px;\n        color: ",";\n        letter-spacing: 0.33px;\n        text-align: center;\n        &:hover {\n          background: ",";\n        }\n      }\n\n      .toolbar-group & {\n        justify-content: flex-start;\n      }\n\n      .tool-item-icon {\n        color: ",";\n\n        :hover, &.checked {\n          color: ",";\n        }\n      }\n    "])),window.jimuConfig.isInBuilder?"#FAFBFC":"transparent",e?"#00C3CC":window.jimuConfig.isInBuilder?"#EDF0F4":t.colors.white,t.colors.black,window.jimuConfig.isInBuilder?"#FAFBFC":"transparent",window.jimuConfig.isInBuilder?"#000000":t.colors.black,window.jimuConfig.isInBuilder?"#000000":t.colors.black)},n.prototype.render=function(){var t=this,n=this.props,r=n.icon,l=n.label,h=n.size,p=n.checked,g=n.disabled,m=n.visible,y=n.rotate,v=n.settingPanel,x=n.title,b=n.uid,w=n.widgetId,I=null==this.props.onClick,S=h||e.DEFAULT_ICON_SIZE,_=v;return a.jsx(c.ToolbarContext.Consumer,null,function(e){if(t.contextProps=e,w&&e.layoutItem.widgetId!==w)return null;var n="";"function"==typeof x?n=x(e):"string"==typeof x&&(n=x);var c=v&&e.activeItem===b&&e.toggleOn,h=c||t.getValue(p,e),M=t.getValue(g,e),P=t.getValue(m,e),C=t.getValue(l,e);return null==m||P?a.jsx("div",{title:n,className:a.classNames({selected:h,disabled:M,msg:C,"no-action":I}),css:t.getStyle()},a.jsx("div",{className:"d-flex justify-content-center align-items-center",onClick:t.select},!_&&r&&a.jsx("div",{css:f},a.jsx(s.Icon,{className:a.classNames("tool-item-icon",{checked:h}),icon:r,rotate:y,size:S})),!_&&C&&a.jsx("span",{className:"pr-2 text-nowrap"},C)),_&&a.jsx(u.Manager,null,a.jsx(u.Reference,null,function(e){var n=e.ref;return a.jsx("div",{ref:n,css:f,onClick:t.select},r&&a.jsx(s.Icon,{className:a.classNames("tool-item-icon",{checked:h}),icon:r,rotate:y,size:S}),C&&a.jsx("span",null,C))}),a.jsx(u.Popper,{placement:"bottom-start"},function(t){var n=t.ref,r=t.style,s=t.placement;t.arrowProps;return a.jsx("div",{css:a.css(d||(d=i(["\n                          display: flex;\n                          pointer-events: all;\n                          background-color: ",";\n                          border-radius: 2px;\n                          box-shadow: 0 2px 8px 1px rgba(0, 0, 0, 0.2);\n                          z-index: 11;\n                          margin: 4px 0;\n                        "],["\n                          display: flex;\n                          pointer-events: all;\n                          background-color: ",";\n                          border-radius: 2px;\n                          box-shadow: 0 2px 8px 1px rgba(0, 0, 0, 0.2);\n                          z-index: 11;\n                          margin: 4px 0;\n                        "])),e.theme.colors.white),className:"d-flex",ref:n,style:r,"data-placement":s},c&&a.jsx(_,o({},e)))}))):null})},n}(a.React.PureComponent);e.ToolbarItem=g},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(5),o=n(2);function a(t){var e=i.getAppStore().getState();return o.getSectionInfo(e,t.sectionId)}e.sectionMenuItems=[{label:function(t){var e=a(t.layoutItem);if(!e)return"";var n=e.views,i=e.activeView,r=n?n.indexOf(i):-1;return t.formatMessage("view")+": "+(r+1)+" / "+n.length}},{icon:n(27),size:10,title:function(t){return t.formatMessage("previousView")},onClick:function(t){var e=t.layoutItem,n=a(e),r=n.views,o=n.activeView,s=r?r.indexOf(o):-1;s>0&&(i.jimuHistory.changeView(e.sectionId,r[s-1]),i.getAppStore().dispatch(i.appActions.currentViewChanged(r[s-1])))},disabled:function(t){var e=a(t.layoutItem);if(!e)return!0;var n=e.views,i=e.activeView;return(n?n.indexOf(i):-1)<=0}},{icon:n(28),size:10,title:function(t){return t.formatMessage("nextView")},onClick:function(t){var e=t.layoutItem,n=a(e),r=n.views,o=n.activeView,s=r?r.indexOf(o):-1;s>=0&&s<r.length-1&&(i.jimuHistory.changeView(e.sectionId,r[s+1]),i.getAppStore().dispatch(i.appActions.currentViewChanged(r[s+1])))},disabled:function(t){var e=a(t.layoutItem);if(!e)return!0;var n=e.views,i=e.activeView,r=n?n.indexOf(i):-1;return r<0||r>=n.length-1}},{icon:n(29),title:function(t){return t.formatMessage("addView")},onClick:function(t){var e,n=i.getAppStore().getState().appConfig,o=t.layoutItem,a=i.appConfigUtils.getUniqueId(n,"layout"),s=i.Immutable({}).merge({id:a}),u=i.Immutable({}).merge({id:i.appConfigUtils.getUniqueId(n,"view"),label:i.appConfigUtils.getUniqueLabel(n,"view","view"),layout:(e={},e[i.getAppStore().getState().browserSizeMode]=a,e)});r.getAppConfigAction().addView(u,o.sectionId,[s]).exec(),i.jimuHistory.changeView(o.sectionId,u.id),i.getAppStore().dispatch(i.appActions.currentViewChanged(u.id))}},{icon:n(30),title:function(t){return t.formatMessage("duplicateView")},onClick:function(t){var e=t.layoutItem,n=a(e).activeView,o=r.getAppConfigAction().appConfig,s=i.appConfigUtils.getUniqueId(o,"view");r.getAppConfigAction().duplicateView(n,e.sectionId).exec(),i.jimuHistory.changeView(e.sectionId,s),i.getAppStore().dispatch(i.appActions.currentViewChanged(s))}},{icon:n(31),title:function(t){return t.formatMessage("deleteView")},visible:function(t){var e=a(t.layoutItem);if(!e)return!1;var n=e.views;return n&&n.length>1},onClick:function(t){var e=t.layoutItem,n=a(e),o=n.views,s=n.activeView;if(o.length>1){var u=o.indexOf(s),l=void 0;l=u>0?o[u-1]:o[1],r.getAppConfigAction().removeView(s,e.sectionId,!1).exec(),i.getAppStore().dispatch(i.appActions.selectionChanged(null)),i.jimuHistory.changeView(t.layoutItem.sectionId,l),i.getAppStore().dispatch(i.appActions.currentViewChanged(l))}}}]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.FlowLayoutContext=i.React.createContext({})},,function(t,e){t.exports=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}},function(t,e,n){"use strict";e.__esModule=!0;var i=o(n(0)),r=o(n(341));function o(t){return t&&t.__esModule?t:{default:t}}e.default=i.default.createContext||r.default,t.exports=e.default},function(t,e,n){"use strict";var i=function(){};t.exports=i},,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(321);e.LayoutBuilder=i.default;var r=n(353);e.FixedLayoutItemSetting=r.default;var o=n(354);e.FlowLayoutItemSetting=o.default;var a=n(355);e.FlowLayoutSetting=a.default;var s=n(49);e.WidgetRendererForBuilder=s.default,e.widgetRndWithToolItems=s.widgetRndWithToolItems;var u=n(356);e.WidgetIconRendererForBuilder=u.default;var l=n(53);e.SectionRendererForBuilder=l.default,e.sectionRndWithToolItems=l.sectionRndWithToolItems;var c=n(14);e.CommonLayoutItemSetting=c.default;var h=n(357);e.PageRenderer=h.default;var p=n(54);e.LayoutEntry=p.default;var d=n(19);e.addItemToLayout=d.addItemToLayout;var f=n(42);e.withDrop=f.withDrop;var g=n(45);e.withRnd=g.withRnd,e.RndOptions=g.RndOptions;var m=n(46);e.withSelect=m.withSelect;var y=n(322);e.widgetMenuItems=y.widgetMenuItems;var v=n(326);e.sectionMenuItems=v.sectionMenuItems;var x=n(323);e.Toolbar=x.Toolbar;var b=n(327);e.FlowLayoutContext=b.FlowLayoutContext,e.FlowLayoutContextProps=b.FlowLayoutContextProps},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=n(3),s=n(2),u=n(12),l=n(49),c=n(53),h=n(349),p=l.widgetRndWithToolItems(h.fixedItemMenu),d=c.sectionRndWithToolItems(h.fixedItemMenu),f={width:"100%",height:"100%"},g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={},e._onResizeStart=function(t){e.props.selected&&e.props.onResizeStart(t)},e._onResizing=function(t,n,i,r,o){e.props.selected&&e.props.onResizing(t,n,i,r,o)},e._onResizeEnd=function(t,n,i,r,o){var a=e.props,s=a.layoutItem;a.selected&&e.props.onResizeEnd(t,n,i,r,o,s,e.itemSetting)},e}return i(e,t),e.prototype.render=function(){var t=this.props,e=t.layoutId,n=t.layoutItem,i=t.forwardRef,l=t.theme,c=t.offsetX,h=t.offsetY,g=t.dw,m=t.dh,y=t.initRect,v=t.containerRect,x=t.widgetName,b=t.index;if(!n)return null;var w,I="row"===x;if(this.itemSetting=o.lodash.assign({},u.DEFAULT_FIX_LAYOUT_ITEM_SETTING,n.setting),n.type===o.LayoutItemType.Widget)w=p;else{if(n.type!==o.LayoutItemType.Section)return null;w=d}var S=s.generateBBoxStyle(n.bbox,this.itemSetting);return y&&(S=s.generateResizingBBoxStyle(y,v,{dw:g,dh:m,dx:c,dy:h})),o.React.createElement(w,{forwardRef:i,style:r({position:"absolute"},a.styleUtils.toCSSStyle(this.itemSetting.style),S,{height:I?"auto":S.height,zIndex:b}),layoutId:e,layoutItemId:n.id,theme:l,size:f,offsetX:c,offsetY:h,restrict:this.itemSetting.lockParent,relativePosition:!1,draggable:this.props.draggable,resizable:this.props.resizable,top:!I,bottom:!I,onResizeStart:this._onResizeStart,onResizing:this._onResizing,onResizeEnd:this._onResizeEnd,onClick:this.props.onClick})},e}(o.React.PureComponent),m=o.ReactRedux.connect(s.mapStateToLayoutItemProps)(g);e.default=o.React.forwardRef(function(t,e){return o.React.createElement(m,r({},t,{forwardRef:e}))})},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(1),s=n(3),u=n(2),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._doubleClick=function(){var t=e.props,n=t.appMode,i=t.supportInlineEditing,r=t.layoutItem,o=t.dispatch;n===a.AppMode.Design&&i&&o(a.appActions.setWidgetIsInlineEditingState(r.widgetId,!0))},e._onClick=function(t){t.stopPropagation(),e.props.onClick&&e.props.onClick(t,e.props.layoutItem.widgetId)},e}return i(e,t),e.prototype.componentDidMount=function(){this.props.layoutItem.widgetId&&a.WidgetManager.getInstance().loadWidgetClass(this.props.layoutItem.widgetId)},e.prototype.componentDidUpdate=function(){this.props.layoutItem.widgetId&&(!this.props.runtimeInfo||!this.props.runtimeInfo.isClassLoaded)&&a.WidgetManager.getInstance().loadWidgetClass(this.props.layoutItem.widgetId)},e.prototype._createDragHandler=function(){var t=u.getBuilderThemeVariables();return a.jsx("div",{className:"widget-drag-handler",style:{position:"absolute",backgroundColor:""+a.polished.rgba(t.colors.cyans.cyan500,1),right:0,top:0,width:28,height:20,zIndex:2,justifyContent:"center",alignItems:"center",cursor:"move"}},a.jsx(s.Icon,{icon:n(18),color:t.colors.primary,size:16}))},e.prototype._mask=function(){return a.jsx("div",{style:{position:"absolute",background:"transparent",left:0,right:0,top:0,bottom:0,zIndex:1}})},e.prototype._widgetContent=function(t){var e=this.props,n=e.layoutItem,i=e.layoutId;return a.jsx(a.ErrorBoundary,null,a.jsx("div",{className:"d-flex",style:{position:"relative",width:"100%",zIndex:0}},a.jsx(t,{parentLayoutId:i,parentLayoutItemId:n.id})))},e.prototype.getStyle=function(){return a.css(o||(o=r(["\n      .widget-drag-handler {\n        display: none;\n      }\n      &:hover > div.widget-drag-handler {\n        display: flex;\n      }\n    "],["\n      .widget-drag-handler {\n        display: none;\n      }\n      &:hover > div.widget-drag-handler {\n        display: flex;\n      }\n    "])))},e.prototype.render=function(){var t=this;return a.jsx(u.PageContext.Consumer,null,function(e){var n=t.props,i=n.layoutItem,r=n.layoutId,o=n.appMode,u=n.selected,l=n.runtimeInfo,c=n.isLayoutWidget,h=n.inSelectMode,p=o===a.AppMode.Design&&l&&!0!==l.isInlineEditing||o===a.AppMode.Run&&h||o===a.AppMode.Design&&!u;if(i.widgetId){var d=a.WidgetManager.getInstance().getWidgetClass(i.widgetId);return d?a.jsx("div",{className:"layout-widget w-100 d-flex",css:t.getStyle(),ref:function(e){return t.ref=e},style:{zIndex:0,position:"relative"},"data-widgetid":i.widgetId,onDoubleClick:e.viewOnly?void 0:t._doubleClick,onClick:t._onClick},t._widgetContent(d),!e.viewOnly&&o===a.AppMode.Design&&c&&t._createDragHandler(),(e.viewOnly&&o===a.AppMode.Design||p&&!c)&&t._mask()):a.jsx(s.Loading,null)}return o!==a.AppMode.Run?a.jsx("div",{className:"layout-widget w-100 d-flex justify-content-center align-items-center",ref:function(e){return t.ref=e}},a.jsx("div",{className:"handler",style:{cursor:"pointer",fontSize:24},onClick:function(){return a.moduleLoader.getModuleSync("jimu-for-builder/for-app-inbuilder").appBuilderSync.letBuilderPopupChooseWidget(r,i.id)}},"+")):null})},e}(a.React.PureComponent);e.default=a.ReactRedux.connect(u.mapStateToWidgetProps)(l)},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a,s,u=n(1),l=n(3),c=n(324),h=n(52),p=n(319),d=n(2),f=function(){},g=function(t){function e(e){var n=t.call(this,e)||this;return n.handleOutsideClick=function(t){var e=n.contextProps,i=e.activeItem,r=e.toggleOn;i===n.props.uid&&r&&!n.ref.contains(t.target)&&n.contextProps.onItemClick(n.props.uid)},d.autoBindHandlers(n,["togglePopToolItems","onItemClick"]),n}return i(e,t),e.prototype.componentDidMount=function(){document.addEventListener("click",this.handleOutsideClick)},e.prototype.componentWillUnmount=function(){document.removeEventListener("click",this.handleOutsideClick)},e.prototype.getBaseStyle=function(){var t=this.contextProps.theme;return u.css(a||(a=r(["\n      cursor: pointer;\n      min-width: 50px;\n      display: flex;\n      justify-content: space-around;\n      align-items: center;\n\n      &:hover {\n        background-color: "," !important;\n        opacity: 60%;\n      }\n    "],["\n      cursor: pointer;\n      min-width: 50px;\n      display: flex;\n      justify-content: space-around;\n      align-items: center;\n\n      &:hover {\n        background-color: "," !important;\n        opacity: 60%;\n      }\n    "])),t.colors.white)},e.prototype.getPopStyle=function(){return u.css(s||(s=r(["\n      display: flex;\n      pointer-events: all;\n      background-color: ",";\n      border-radius: 2px;\n      box-shadow: 0 2px 8px 1px rgba(0, 0, 0, 0.2);\n      z-index: 11;\n      margin: 4px 0;\n    "],["\n      display: flex;\n      pointer-events: all;\n      background-color: ",";\n      border-radius: 2px;\n      box-shadow: 0 2px 8px 1px rgba(0, 0, 0, 0.2);\n      z-index: 11;\n      margin: 4px 0;\n    "])),this.contextProps.theme.colors.grays.gray100)},e.prototype.getValue=function(t,e){return"function"==typeof t?t(e):t},e.prototype.togglePopToolItems=function(t){t&&t.stopPropagation(),this.contextProps.onItemClick(this.props.uid)},e.prototype.onItemClick=function(t,e){var n=this.contextProps.parentRef;t.onClick(o({},e,{clientRect:n.getBoundingClientRect()}))},e.prototype.createToolItem=function(t,e,n){var i=this;return t.onClick?u.jsx(c.ToolbarItem,o({key:n,uid:this.props.uid+"_"+(n+1),isInGroup:!0},t,{onClick:function(){return i.onItemClick(t,e)}})):null},e.prototype.getGroupMenu=function(t,e){return t?u.jsx(l.Icon,{rotate:t.rotate,icon:t.icon,size:t.size||c.DEFAULT_ICON_SIZE}):e[0].icon?u.jsx(l.Icon,{icon:e[0].icon,size:e[0].size||c.DEFAULT_ICON_SIZE}):u.jsx(c.ToolbarItem,o({uid:this.props.uid+"_0",onClick:f},e[0]))},e.prototype.render=function(){var t=this,e=this.props,i=e.tools,r=e.uid;return i&&0!==i.length?u.jsx(h.ToolbarContext.Consumer,null,function(e){t.contextProps=e;var a,s=i.filter(function(n){var i=n.visible,r=t.getValue(i,e);return void 0===i||r});return 0===s.length?null:1===s.length?u.jsx(c.ToolbarItem,o({uid:r+"_0"},s[0])):(s.some(function(n){var i=n.checked;if(t.getValue(i,e))return a=n,!0}),u.jsx("div",{className:"toolbar-group",css:t.getBaseStyle(),ref:function(e){return t.ref=e},onClick:t.togglePopToolItems},u.jsx(p.Manager,null,u.jsx(p.Reference,null,function(e){var i=e.ref;return u.jsx("div",{ref:i,className:"d-flex w-100 justify-content-around align-items-center"},t.getGroupMenu(a,s),u.jsx(l.Icon,{icon:n(26),size:8}))}),u.jsx(p.Popper,{placement:"bottom-start",modifiers:{offset:{offset:"0, 0"}}},function(n){var i=n.ref,o=n.style,a=n.placement;n.arrowProps;return u.jsx("div",{css:t.getPopStyle(),className:"d-flex flex-column",ref:i,style:o,"data-placement":a},e.activeItem===r&&e.toggleOn&&s.map(function(n,i){return t.createToolItem(n,e,i)}))}))))}):null},e}(u.React.PureComponent);e.ToolbarGroup=g},function(t,e,n){"use strict";e.__esModule=!0;var i=n(0),r=(a(i),a(n(342))),o=a(n(345));a(n(346));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c=1073741823;e.default=function(t,e){var n,a,h="__create-react-context-"+(0,o.default)()+"__",p=function(t){function n(){var e,i;s(this,n);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=i=u(this,t.call.apply(t,[this].concat(o))),i.emitter=function(t){var e=[];return{on:function(t){e.push(t)},off:function(t){e=e.filter(function(e){return e!==t})},get:function(){return t},set:function(n,i){t=n,e.forEach(function(e){return e(t,i)})}}}(i.props.value),u(i,e)}return l(n,t),n.prototype.getChildContext=function(){var t;return(t={})[h]=this.emitter,t},n.prototype.componentWillReceiveProps=function(t){if(this.props.value!==t.value){var n=this.props.value,i=t.value,r=void 0;!function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}(n,i)?(r="function"==typeof e?e(n,i):c,0!=(r|=0)&&this.emitter.set(t.value,r)):r=0}},n.prototype.render=function(){return this.props.children},n}(i.Component);p.childContextTypes=((n={})[h]=r.default.object.isRequired,n);var d=function(e){function n(){var t,i;s(this,n);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=i=u(this,e.call.apply(e,[this].concat(o))),i.state={value:i.getValue()},i.onUpdate=function(t,e){0!=((0|i.observedBits)&e)&&i.setState({value:i.getValue()})},u(i,t)}return l(n,e),n.prototype.componentWillReceiveProps=function(t){var e=t.observedBits;this.observedBits=void 0===e||null===e?c:e},n.prototype.componentDidMount=function(){this.context[h]&&this.context[h].on(this.onUpdate);var t=this.props.observedBits;this.observedBits=void 0===t||null===t?c:t},n.prototype.componentWillUnmount=function(){this.context[h]&&this.context[h].off(this.onUpdate)},n.prototype.getValue=function(){return this.context[h]?this.context[h].get():t},n.prototype.render=function(){return function(t){return Array.isArray(t)?t[0]:t}(this.props.children)(this.state.value)},n}(i.Component);return d.contextTypes=((a={})[h]=r.default.object,a),{Provider:p,Consumer:d}},t.exports=e.default},function(t,e,n){t.exports=n(343)()},function(t,e,n){"use strict";var i=n(344);function r(){}t.exports=function(){function t(t,e,n,r,o,a){if(a!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=r,n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";(function(e){var n="__global_unique_id__";t.exports=function(){return e[n]=(e[n]||0)+1}}).call(this,n(325))},function(t,e,n){"use strict";var i=n(347);t.exports=i},function(t,e,n){"use strict";function i(t){return function(){return t}}var r=function(){};r.thatReturns=i,r.thatReturnsFalse=i(!1),r.thatReturnsTrue=i(!0),r.thatReturnsNull=i(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(t){return t},t.exports=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a,s,u=n(3),l=n(1),c=n(54),h=n(2),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype._createDragHandler=function(t){var e=this.props.theme;return l.jsx("div",{className:"widget-drag-handler",style:{position:"absolute",backgroundColor:""+l.polished.rgba(t.colors.cyans.cyan500,1),right:0,top:0,width:28,height:20,zIndex:2,justifyContent:"center",alignItems:"center",cursor:"move"}},l.jsx(u.Icon,{icon:n(18),color:e.colors.white,size:16}))},e.prototype.getStyle=function(){return l.css(a||(a=r(["\n      .widget-drag-handler {\n        display: none;\n      }\n      &:hover > div.widget-drag-handler {\n        display: flex;\n      }\n    "],["\n      .widget-drag-handler {\n        display: none;\n      }\n      &:hover > div.widget-drag-handler {\n        display: flex;\n      }\n    "])))},e.prototype.render=function(){var t=this;return l.jsx(h.PageContext.Consumer,null,function(e){var n=t.props,i=n.layoutItem,o=n.layoutId,a=n.layoutsOfActiveView,u=n.appMode,p=h.getBuilderThemeVariables();return a?l.jsx("div",{className:"section-layout w-100 d-flex","data-sectionid":i.sectionId,"data-layoutitemid":i.id,"data-layoutid":o,css:l.css(s||(s=r(["\n              ",";\n              position: relative;\n              overflow: auto;\n              border: 1px dashed ",";\n              pointer-events: all;\n            "],["\n              ",";\n              position: relative;\n              overflow: auto;\n              border: 1px dashed ",";\n              pointer-events: all;\n            "])),t.getStyle(),p.colors.grays.gray600),ref:function(e){return t.ref=e}},l.jsx(c.default,{layouts:a,isInSection:!0,className:"d-flex w-100",style:{position:"relative",zIndex:0}}),!e.viewOnly&&u===l.AppMode.Design&&t._createDragHandler(p)):null})},e}(l.React.PureComponent);e.default=l.ReactRedux.connect(function(t,e){var n=h.mapStateToLayoutItemProps(t,e),i=h.getSectionInfo(t,n.layoutItem.sectionId),r=i.activeView,a=t.appConfig.views[r].layout;return o({},n,i,{layoutsOfActiveView:a})})(p)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(5),o=n(350),a=n(22);function s(t,e,n,o){var a=r.getAppConfigAction(),s=e.bbox,u=e.setting||i.Immutable({});0!==parseInt(s[n],10)&&a.editLayoutItemBBox({layoutId:t,layoutItemId:e.id},s.set(n,0)),u=u.setIn(["autoProps",n],!1),o&&(u=u.setIn(["autoProps",o],!0)),a.editLayoutItemSetting({layoutId:t,layoutItemId:e.id},u).exec()}var u=n(32);e.fixedItemMenu=[[{icon:n(33)},{icon:u,rotate:90,label:function(t){return t.formatMessage("snapToLeft")},onClick:function(t){var e=t.layoutItem;s(t.layoutId,e,"left")}},{icon:u,rotate:180,label:function(t){return t.formatMessage("snapToTop")},onClick:function(t){var e=t.layoutItem;s(t.layoutId,e,"top")}},{icon:u,label:function(t){return t.formatMessage("snapToBottom")},onClick:function(t){var e=t.layoutItem;s(t.layoutId,e,"bottom","top")}},{icon:u,rotate:-90,label:function(t){return t.formatMessage("snapToRight")},onClick:function(t){var e=t.layoutItem;s(t.layoutId,e,"right","left")}},{icon:n(34),label:function(t){return t.formatMessage("fullWidth")},onClick:function(t){var e=t.layoutItem;!function(t,e){var n=r.getAppConfigAction(),o=e.bbox,a=e.setting||i.Immutable({});n.editLayoutItemBBox({layoutId:t,layoutItemId:e.id},o.set("left",0).set("right",0)),a=a.setIn(["autoProps","left"],!1).setIn(["autoProps","right"],!1).setIn(["autoProps","width"],!0),n.editLayoutItemSetting({layoutId:t,layoutItemId:e.id},a).exec()}(t.layoutId,e)}},{icon:n(35),label:function(t){return t.formatMessage("fullHeight")},onClick:function(t){var e=t.layoutItem;!function(t,e){var n=r.getAppConfigAction(),o=e.bbox,a=e.setting||i.Immutable({});n.editLayoutItemBBox({layoutId:t,layoutItemId:e.id},o.set("top",0).set("bottom",0)),a=a.setIn(["autoProps","top"],!1).setIn(["autoProps","bottom"],!1).setIn(["autoProps","height"],!0),n.editLayoutItemSetting({layoutId:t,layoutItemId:e.id},a).exec()}(t.layoutId,e)}},{icon:n(36),label:function(t){return t.formatMessage("fullSize")},onClick:function(t){var e=t.layoutItem;!function(t,e){var n=r.getAppConfigAction(),o=e.bbox,a=e.setting||i.Immutable({});n.editLayoutItemBBox({layoutId:t,layoutItemId:e.id},o.set("left",0).set("right",0).set("top",0).set("bottom",0)),a=a.setIn(["autoProps","left"],!1).setIn(["autoProps","right"],!1).setIn(["autoProps","width"],!0).setIn(["autoProps","top"],!1).setIn(["autoProps","bottom"],!1).setIn(["autoProps","height"],!0),n.editLayoutItemSetting({layoutId:t,layoutItemId:e.id},a).exec()}(t.layoutId,e)}}],[{icon:n(37)},{icon:n(38),label:function(t){return t.formatMessage("sendBack")},onClick:function(t){var e=t.layoutItem,n=t.layoutId;o.sendBackward({layoutId:n,layoutItemId:e.id})}},{icon:n(39),label:function(t){return t.formatMessage("bringForward")},onClick:function(t){var e=t.layoutItem,n=t.layoutId;o.bringForward({layoutId:n,layoutItemId:e.id})}},{icon:n(40),label:function(t){return t.formatMessage("sendToBack")},onClick:function(t){var e=t.layoutItem,n=t.layoutId;o.sendToBack({layoutId:n,layoutItemId:e.id})}},{icon:n(41),label:function(t){return t.formatMessage("bringToFront")},onClick:function(t){var e=t.layoutItem,n=t.layoutId;o.bringToFront({layoutId:n,layoutItemId:e.id})}}],a.pedingMenuItem,a.deleteMenuItem]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),r=n(351);e.bringForward=function(t){var e=i.getAppConfigAction(),n=e.appConfig,o=t.layoutId,a=t.layoutItemId,s=n.layouts[o];r(s.order,"parent order must not be empty to alter order");var u=[].concat(s.order),l=u.indexOf(a);l===u.length-1||l<0||(u[l]=u[l+1],u[l+1]=t.layoutItemId,e.editLayoutOrder({layoutId:o},u).exec())},e.bringToFront=function(t){var e=i.getAppConfigAction(),n=e.appConfig,o=t.layoutId,a=t.layoutItemId,s=n.layouts[o];r(s.order,"parent order must not be empty to alter order");var u=[].concat(s.order),l=u.indexOf(a);l===u.length-1||l<0||(u.splice(l,1),u.push(t.layoutItemId),e.editLayoutOrder({layoutId:o},u).exec())},e.sendBackward=function(t){var e=i.getAppConfigAction(),n=e.appConfig,o=t.layoutId,a=t.layoutItemId,s=n.layouts[o];r(s.order,"parent order must not be empty to alter order");var u=[].concat(s.order),l=u.indexOf(a);l<=0||(u[l]=u[l-1],u[l-1]=t.layoutItemId,e.editLayoutOrder({layoutId:o},u).exec())},e.sendToBack=function(t){var e=i.getAppConfigAction(),n=e.appConfig,o=t.layoutId,a=t.layoutItemId,s=n.layouts[o];r(s.order,"parent order must not be empty to alter order");var u=[].concat(s.order),l=u.indexOf(a);l<=0||(u.splice(l,1),u.splice(0,0,t.layoutItemId),e.editLayoutOrder({layoutId:o},u).exec())}},function(t,e,n){"use strict";t.exports=function(t,e,n,i,r,o,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,i,r,o,a,s],c=0;(u=new Error(e.replace(/%s/g,function(){return l[c++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=5;function o(t){return t.left+t.width/2}function a(t){return t.top+t.height/2}function s(t,e,n,s,u,l){var c="v"===s?"top":"left",h="v"===s?"height":"width",p="v"===s?e.y:e.x,d="v"===s?e.h:e.w,m=!1,y=!1,v=null,x=null,b="v"===s?f(e):g(e),w=r,I={left:t.left+e.x,top:t.top+e.y,width:t.width+e.w,height:t.height+e.h};I.right=I.left+I.width,I.bottom=I.top+I.height;var S="v"===s?I.top:I.left,_="v"===s?I.bottom:I.right,M="v"===s?a(I):o(I),P="v"===s?a(t):o(t),C="v"===s?t.top:t.left,O=function(e,n){var r=!1;Math.abs(e-M)<w?("h"===s&&b!==i.Left&&b!==i.Right||"v"===s&&b!==i.Top&&b!==i.Bottom)&&(p=e-P,m=!0,w=Math.abs(e-M),r=!0):Math.abs(e-S)<w?0===d?(p=e-C,m=!0,w=Math.abs(e-S),r=!0):b!==i.Top&&b!==i.Left&&(d=t[c]-e,y=!0,w=Math.abs(e-S),r=!0):Math.abs(e-_)<w&&(0===d?(p=e-t[c]-t[h],m=!0,w=Math.abs(e-_),r=!0):b!==i.Bottom&&b!==i.Right&&(d=e-t[c]-t[h],y=!0,w=Math.abs(e-_),r=!0)),r&&(v=n,x=e)};if(n.forEach(function(t){O("h"===s?o(t):a(t),t),O(t[c],t),O(t[c]+t[h],t)}),u&&(m||y))if("v"===s){var R=null,j=null;if(null!==v&&(R=Math.min(I.left,v.left),j=Math.max(I.left+I.width,v.left+v.width)),null!==R&&null!==j){var E=[[R,x],[j,x]];u.polyline(E).fill("none").stroke({width:1,color:l.colors.reds.red300})}}else{var A=null,T=null;if(null!==v&&(A=Math.min(I.top,v.top),T=Math.max(I.top+I.height,v.top+v.height)),null!==A&&null!==T){E=[[x,A],[x,T]];u.polyline(E).fill("none").stroke({width:1,color:l.colors.reds.red300})}}return{deltaPos:p,deltaSize:d,overridePos:m,overrideSize:y}}function u(t,e,n,r,o,a){var s="v"===r?"top":"left",u="v"===r?"height":"width",m="v"===r?e.y:e.x,y="v"===r?e.h:e.w,v=!1,x=!1,b="v"===r?f(e):g(e),w={left:t.left+e.x,top:t.top+e.y,width:t.width+e.w,height:t.height+e.h};w.right=w.left+w.width,w.bottom=w.top+w.height;var I=l(t,e,n,r,b),S=Math.max(I.previous,I.next);if(S>0){var _=void 0,M=[].concat(I.involvedRects,w);M.sort(function(t,e){return t[s]-e[s]});var P=M.indexOf(w);if(I.previous>0&&I.next>0){var C=M[P-1],O=M[P+1];0===y?(m=S-(t[s]-C[s]-C[u]),v=!0):b===i.Top||b===i.Left?(y=O[s]-t[s]-t[u]-S,x=!0):b!==i.Bottom&&b!==i.Right||(y=t[s]-C[s]-C[u]-S,x=!0),o&&(v||x)&&("v"===r?(c(_=p(C,w),C[s]+C[u],S,o,a),c(_=p(O,w),O[s]-S,S,o,a)):(_=d(C,w),h(C[s]+C[u],_,S,o,a),_=d(O,w),h(O[s]-S,_,S,o,a)))}else if(I.previous>0&&P>0){C=M[P-1];0===y?(m=S-(t[s]-C[s]-C[u]),v=!0):b!==i.Top&&b!==i.Left&&(y=t[s]-C[s]-C[u]-S,x=!0),o&&(v||x)&&("v"===r?c(_=p(w,C),C[s]+C[u],S,o,a):(_=d(w,C),h(C[s]+C[u],_,S,o,a)))}else if(I.next>0&&P<M.length-1){O=M[P+1];0===y?(m=O[s]-t[s]-t[u]-S,v=!0):b!==i.Bottom&&b!==i.Right&&(y=O[s]-t[s]-t[u]-S,x=!0),o&&(v||x)&&("v"===r?c(_=p(w,O),O[s]-S,S,o,a):(_=d(w,O),h(O[s]-S,_,S,o,a)))}for(var R=0;R<M.length-1;R++){var j=M[R],E=M[R+1],A=j===w||E===w,T=E[s]-j[s]-j[u];A||T!==S||o&&("v"===r?c(_=p(j,E),j[s]+j[u],S,o,a):(_=d(j,E),h(j[s]+j[u],_,S,o,a)))}}return{deltaPos:m,deltaSize:y,overridePos:v,overrideSize:x}}function l(t,e,n,o,a){var s,u,l={left:t.left+e.x,top:t.top+e.y,width:t.width+e.w,height:t.height+e.h},c=[];if("h"===o?(s="width",u="left"):(s="height",u="top"),n.forEach(function(t){"h"===o?(l.top>=t.top&&l.top<=t.top+t.height||t.top>=l.top&&t.top<=l.top+l.height)&&(l.left>t.left+t.width+r||l.left+l.width+r<t.left)&&c.push(t):(l.left>=t.left&&l.left<=t.left+t.width||t.left>=l.left&&t.left<=l.left+l.width)&&(l.top>t.top+t.height+r||l.top+l.height+r<t.top)&&c.push(t)}),c.length<=1)return{previous:-1,next:-1,involvedRects:c};var h=c;(c=[].concat(c,l)).sort(function(t,e){return t[u]-e[u]});var p=-1,d=-1,f=l===c[0],g=l===c[c.length-1];if(f)d=(v=c[1])[u]-l[u]-l[s];else if(g){var m=c[c.length-2];p=l[u]-m[u]-m[s]}else{var y=c.indexOf(l),v=(m=c[y-1],c[y+1]);if(p=l[u]-m[u]-m[s],d=v[u]-l[u]-l[s],Math.abs(p-d)<=r){if(a===i.None){var x=(p+d)/2;return{previous:x,next:x,involvedRects:h}}if(a===i.Left||a===i.Top)return{previous:p,next:p,involvedRects:h};if(a===i.Right||a===i.Bottom)return{previous:d,next:d,involvedRects:h}}}for(var b=c[c.length-1][u]-c[0][u],w=b,I=!1,S=!1,_=0;_<c.length-1;_++){var M=c[_],P=c[_+1];if(P!==l&&M!==l){var C=P[u]-M[u]-M[s];p>0&&Math.abs(C-p)<=r&&(b=Math.abs(b-p)>Math.abs(C-p)?C:b,I=!0),d>0&&Math.abs(C-d)<=r&&(w=Math.abs(w-d)>Math.abs(C-d)?C:w,S=!0)}}return I&&S?a===i.None?w<b?{previous:-1,next:w,involvedRects:h}:{previous:b,next:-1,involvedRects:h}:a===i.Left||a===i.Top?{previous:-1,next:w,involvedRects:h}:{previous:b,next:-1,involvedRects:h}:I&&!S&&a!==i.Left&&a!==i.Top?{previous:b,next:-1,involvedRects:h}:!I&&S&&a!==i.Right&&a!==i.Bottom?{previous:-1,next:w,involvedRects:h}:{previous:-1,next:-1,involvedRects:h}}function c(t,e,n,i,o){i.polyline([[t-r,e],[t+r,e]]).fill("none").stroke({width:1,color:o.colors.reds.red300}),i.polyline([[t,e],[t,e+n]]).fill("none").stroke({width:1,color:o.colors.reds.red300}),i.polyline([[t-r,e+n],[t+r,e+n]]).fill("none").stroke({width:1,color:o.colors.reds.red300})}function h(t,e,n,i,o){i.polyline([[t,e-r],[t,e+r]]).fill("none").stroke({width:1,color:o.colors.reds.red300}),i.polyline([[t,e],[t+n,e]]).fill("none").stroke({width:1,color:o.colors.reds.red300}),i.polyline([[t+n,e-r],[t+n,e+r]]).fill("none").stroke({width:1,color:o.colors.reds.red300})}function p(t,e){return t.left>=e.left&&t.left+t.width<=e.left+e.width?t.left+t.width/2:e.left>=t.left&&e.left+e.width<=t.left+t.width?e.left+e.width/2:t.left<=e.left?e.left+(t.left+t.width-e.left)/2:t.left+(e.left+e.width-t.left)/2}function d(t,e){return t.top>=e.top&&t.top+t.height<=e.top+e.height?t.top+t.height/2:e.top>=t.top&&e.top+e.height<=t.top+t.height?e.top+e.height/2:t.top<=e.top?e.top+(t.top+t.height-e.top)/2:t.top+(e.top+e.height-t.top)/2}function f(t){return 0===t.h?i.None:0===t.y?i.Top:i.Bottom}function g(t){return 0===t.w?i.None:0===t.x?i.Left:i.Right}!function(t){t[t.Left=0]="Left",t[t.Top=1]="Top",t[t.Right=2]="Right",t[t.Bottom=3]="Bottom",t[t.None=4]="None"}(i=e.FixedSides||(e.FixedSides={})),e.moveGuide=function(t,e,n,i,r,o){if(!n||0===n.length)return e;var a,l,c=e.x,h=e.y,p=e.w,d=e.h,f=u(t,e,n,"v",r,o);f.overridePos||f.overrideSize||(f=s(t,e,n,"v",i,o)),l=f.overridePos,f.overrideSize?(d=f.deltaSize,h=0===e.y?0:-d):l&&(h=f.deltaPos,d=0===e.h?0:-h);var g=u(t,e,n,"h",i,o);return g.overridePos||g.overrideSize||(g=s(t,e,n,"h",i,o)),a=g.overridePos,g.overrideSize?(p=g.deltaSize,c=0===e.x?0:-p):a&&(c=g.deltaPos,p=0===e.w?0:-c),{x:c,y:h,w:p,h:d}},e.edgeSnapGuide=s,e.distanceSnapGuide=u,e.calSnapDistance=l},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(12),a=n(5),s=n(3),u=n(14),l=n(2),c={width:110};var h=[s.UnitTypes.PIXEL,s.UnitTypes.PERCENTAGE],p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.updateBg=function(t){e.updateStyle("background",t)},e.updateBorder=function(t){e.updateStyle("border",t)},e.updateRadius=function(t){e.updateStyle("borderRadius",t)},e.updateShadow=function(t){e.updateStyle("boxShadow",t)},e.updateBBox=function(t,n){var i=e.props.layoutItem.bbox,o={},a=n.distance,u=n.unit;u===s.UnitTypes.PIXEL&&(a=Math.round(a)),o[t]=""+a+u,e.props.onPosChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},r.lodash.assign({},i,o))},e.updateAutoSetting=function(t,n){var i=e.props.layoutItem.setting||r.Immutable({});i=i.setIn(["autoProps",t],n),e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},i)},e.updateLockParent=function(t){var n=e.props.layoutItem.setting||r.Immutable({});n=n.set("lockParent",t.target.checked),e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n)},e}return i(e,t),e.prototype.updateStyle=function(t,e){var n=r.Immutable(this.itemSetting.style);this.props.onSettingChange({layoutId:this.props.layoutId,layoutItemId:this.props.layoutItem.id},{style:n.set(t,e)})},e.prototype._createBBoxPropSetting=function(t,e,n){var i,o=this,u=this.props.layoutItem.setting||r.Immutable({});return i="width"===e||"height"===e?this.props.formatMessage(e):this.props.formatMessage(e.charAt(0).toUpperCase()),r.jsx(a.SettingRow,{label:i,key:n},r.jsx(a.InputUnit,{style:c,disabled:u.autoProps&&!0===u.autoProps[e],units:h,value:function(t){return l.isPercentage(t)?{distance:parseFloat(t),unit:s.UnitTypes.PERCENTAGE}:{distance:parseInt(t,10),unit:s.UnitTypes.PIXEL}}(t[e]),onChange:function(t){return o.updateBBox(e,t)}}),r.jsx(s.Label,{check:!0,className:"ml-2"},r.jsx(s.Input,{type:"checkbox",checked:u.autoProps&&u.autoProps[e],onChange:function(t){return o.updateAutoSetting(e,t.target.checked)}}),r.jsx("span",{className:"ml-2"},this.props.formatMessage("auto"))))},e.prototype.render=function(){var t=this,e=this.props,n=e.layoutItem,i=e.layoutId,l=e.onSettingChange,c=e.formatMessage;if(!n)return null;this.itemSetting=r.lodash.assign({},o.DEFAULT_FIX_LAYOUT_ITEM_SETTING,n.setting);var h=n.bbox;return r.jsx("div",{className:"fixed-item-setting"},r.jsx(a.SettingSection,{title:c("size")},["width","height"].map(function(e,n){return t._createBBoxPropSetting(h,e,n)})),r.jsx(a.SettingSection,{title:c("position")},["left","top","right","bottom"].map(function(e,n){return t._createBBoxPropSetting(h,e,n)})),r.jsx(a.SettingSection,null,r.jsx(a.SettingRow,{label:c("lockParent")},r.jsx(s.Switch,{checked:this.itemSetting.lockParent,onChange:this.updateLockParent}))),r.jsx(u.default,{layoutId:i,layoutItem:n,onSettingChange:l,formatMessage:this.props.formatMessage,itemSetting:this.itemSetting}))},e}(r.React.PureComponent);e.default=p},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(15),a=n(5),s=n(14),u=n(3),l=[u.Sides.T,u.Sides.R,u.Sides.B,u.Sides.L],c={width:110},h=[u.UnitTypes.PERCENTAGE],p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.updateWidth=function(t){var n=e.props.layoutItem.setting||r.Immutable({});n=n.set("width",t.distance),e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n)},e.updateAutoHeight=function(t){var n=e.props.layoutItem.setting||r.Immutable({});n=n.set("autoHeight",t.target.checked),e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n)},e.updateOffsetX=function(t){var n=e.props.layoutItem.setting||r.Immutable({});e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n.set("offsetX",+t.target.value))},e.updateOffsetY=function(t){var n=e.props.layoutItem.setting||r.Immutable({});e.props.onSettingChange({layoutId:e.props.layoutId,layoutItemId:e.props.layoutItem.id},n.set("offsetY",+t.target.value))},e.updateMargin=function(t){e.updateStyle("margin",t)},e}return i(e,t),e.prototype.updateStyle=function(t,e){var n=r.Immutable(this.itemSetting.style||{});this.props.onSettingChange({layoutId:this.props.layoutId,layoutItemId:this.props.layoutItem.id},{style:n.set(t,e)})},e.prototype.render=function(){var t=this.props,e=t.layoutItem,n=t.layoutId,i=t.onSettingChange,p=t.formatMessage;if(!e)return null;this.itemSetting=r.lodash.assign({},o.DEFAULT_FLOW_ITEM_SETTING,e.setting);var d=this.itemSetting.width||100,f=this.itemSetting.style||{};return r.jsx("div",{className:"flow-item-setting"},r.jsx(a.SettingSection,{title:p("size")},r.jsx(a.SettingRow,{label:p("customWidth")},r.jsx(a.InputUnit,{style:c,units:h,max:100,min:0,value:{distance:d,unit:u.UnitTypes.PERCENTAGE},onChange:this.updateWidth}))),r.jsx(a.SettingSection,{title:p("position")},r.jsx(a.SettingRow,{label:p("offsetX")},r.jsx(u.Input,{type:"number",style:c,value:this.itemSetting.offsetX,onChange:this.updateOffsetX})),r.jsx(a.SettingRow,{label:p("offsetY")},r.jsx(u.Input,{type:"number",style:c,value:this.itemSetting.offsetY,onChange:this.updateOffsetY})),r.jsx(a.SettingRow,{label:p("margin"),flow:"wrap"},r.jsx(a.FourSides,{showTip:!0,sides:l,value:f.margin,onChange:this.updateMargin}))),r.jsx(s.default,{layoutId:n,layoutItem:e,onSettingChange:i,itemSetting:this.itemSetting,formatMessage:this.props.formatMessage}))},e}(r.React.PureComponent);e.default=p},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(5),a=n(3),s=n(15),u=[a.Sides.T,a.Sides.R,a.Sides.B,a.Sides.L],l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.updateSpace=function(t){var n=e.props,i=n.layoutId,a=n.setting,s=r.Immutable(a||{});isNaN(+t.target.value)||o.getAppConfigAction().editLayoutSetting({layoutId:i},s.set("gutter",+t.target.value)).exec()},e.updatePadding=function(t){var n=e.props,i=n.layoutId,a=n.setting,s=r.Immutable(a||{});o.getAppConfigAction().editLayoutSetting({layoutId:i},s.setIn(["style","padding"],t)).exec()},e}return i(e,t),e.prototype.render=function(){var t=this.props.formatMessage,e=this.props.setting||{},n=e.style||{};return r.jsx(o.SettingSection,{title:t("layout"),className:"flow-layout-setting"},r.jsx(o.SettingRow,{label:t("gap")},r.jsx(a.Input,{type:"number",style:{width:"130px"},value:e.gutter>=0?e.gutter:s.DEFAULT_FLOW_SETTING.gutter,min:0,onChange:this.updateSpace}),r.jsx("span",{className:"ml-1"},"px")),r.jsx(o.SettingRow,{label:t("padding")},r.jsx(o.FourSides,{showTip:!0,sides:u,value:n.padding,onChange:this.updatePadding})))},e}(r.React.PureComponent);e.default=r.ReactRedux.connect(function(t,e){return{setting:r.lodash.getValue(t,"appStateInBuilder.appConfig.layouts."+e.layoutId+".setting")}})(l)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(56),r=n(22),o=n(45),a=n(46).withSelect([r.deleteMenuItem])(i.default);e.default=o.withRnd()(a)},function(t,e,n){"use strict";var i=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=n(7),s=n(5),u=n(58),l=n(321),c=n(61),h=n(358),p=n(2),d=n(3),f=n(54);p.registerLayoutBuilder(o.LayoutType.FixedLayout,l.default),p.registerLayoutBuilder(o.LayoutType.FlowLayout,h.default);var g=n(43),m=o.css(w||(w=i(["\n.resize-handler {\n  height: ","px;\n  width: 100%;\n  cursor: ns-resize;\n  position: absolute;\n}\n"],["\n.resize-handler {\n  height: ","px;\n  width: 100%;\n  cursor: ns-resize;\n  position: absolute;\n}\n"])),16),y=o.css(I||(I=i(["\n  position: absolute;\n  right: 0;\n  top: 0;\n  left: 0;\n  bottom: 0;\n"],["\n  position: absolute;\n  right: 0;\n  top: 0;\n  left: 0;\n  bottom: 0;\n"])));function v(){return o.css(S||(S=i(["\n    .edit-btn{\n      background: #007F94;\n      border-color: #007F94;\n      border-radius: 2px;\n      &:hover{\n        background: #00AABB;\n        border-color: #00AABB;\n      }\n    }\n  "],["\n    .edit-btn{\n      background: #007F94;\n      border-color: #007F94;\n      border-radius: 2px;\n      &:hover{\n        background: #00AABB;\n        border-color: #00AABB;\n      }\n    }\n  "])))}var x=function(t){function e(e){var n=t.call(this,e)||this;return n.bindResizeHandler=function(){var t,e;n.headerResizerRef&&!n.headerInteractable&&(n.headerInteractable=a.interact(n.headerResizerRef).origin("parent").resizable({inertia:!1,edges:{bottom:".resize-handler"},onstart:function(i){i.stopPropagation(),e=0,t=n.headerRef.getBoundingClientRect().height},onmove:function(i){i.stopPropagation();var r=i.deltaRect;e+=r.height,n.headerRef.style.height=t+e+"px"},onend:function(i){i.stopPropagation();var r=s.getAppConfigAction().appConfig.header;s.getAppConfigAction().editHeader(r.setIn(["height",n.props.browserSizeMode],Math.round(t+e))).exec()}})),n.footerResizerRef&&!n.footerInteractable&&(n.footerInteractable=a.interact(n.footerResizerRef).origin("parent").resizable({inertia:!1,edges:{top:".resize-handler"},onstart:function(i){i.stopPropagation(),e=0,t=n.footerRef.getBoundingClientRect().height},onmove:function(i){i.stopPropagation();var r=i.deltaRect;e+=r.height,n.footerRef.style.height=t+e+"px"},onend:function(i){i.stopPropagation();var r=s.getAppConfigAction().appConfig.footer;s.getAppConfigAction().editFooter(r.setIn(["height",n.props.browserSizeMode],Math.round(t+e))).exec()}}))},n.removeResizeHandler=function(){n.headerInteractable&&(n.headerInteractable.unset(),n.headerInteractable=null),n.footerInteractable&&(n.footerInteractable.unset(),n.footerInteractable=null)},n.onMouseEnter=function(t){var e=n.props,i=e.appMode,r=e.inSelectMode;i===o.AppMode.Run&&r&&n.selectTipRef&&(n.selectTipRef.style.transform="translate("+(t.clientX+window.scrollX)+"px, "+(t.clientY+window.scrollY)+"px)",n.setState({showSelectTip:!0}))},n.onMouseLeave=function(){n.setState({showSelectTip:!1})},n.onMouseMove=function(t){var e=n.props,i=e.appMode,r=e.inSelectMode;i===o.AppMode.Run&&r&&n.selectTipRef&&(n.selectTipRef.style.transform="translate("+(t.clientX+window.scrollX)+"px, "+(t.clientY+window.scrollY)+"px)")},n.clearSelection=function(t){t.stopPropagation(),n.props.appMode===o.AppMode.Design&&o.getAppStore().dispatch(o.appActions.selectionChanged(null))},n.editHeader=function(){n.setState({editHeader:!0,editFooter:!1,editBody:!1}),o.getAppStore().dispatch(o.appActions.activePagePartChanged(o.PagePart.Header))},n.editFooter=function(){n.setState({editHeader:!1,editFooter:!0,editBody:!1}),o.getAppStore().dispatch(o.appActions.activePagePartChanged(o.PagePart.Footer))},n.editBody=function(){n.setState({editHeader:!1,editFooter:!1,editBody:!0}),o.getAppStore().dispatch(o.appActions.activePagePartChanged(o.PagePart.Body))},o.ExtensionManager.getInstance().registerExtension({epName:o.extensionSpec.ExtensionPoints.ReduxStore,extension:new u.default}),o.ExtensionManager.getInstance().registerExtension({epName:o.extensionSpec.ExtensionPoints.LayoutTransformer,extension:new c.FixedLayoutTransformer}),n.state={showSelectTip:!1,editHeader:!1,editFooter:!1,editBody:!0},n}return r(e,t),e.prototype.componentDidMount=function(){if(window.jimuConfig.isInBuilder){var t=window.document&&window.document.documentElement;t&&t.classList.add("is-in-builder")}this.bindResizeHandler()},e.prototype.componentDidUpdate=function(){this.bindResizeHandler()},e.prototype.componentWillUnmount=function(){this.removeResizeHandler()},e.prototype.render=function(){var t=this,e=this.props,n=e.renderedPages,r=e.appMode,a=e.inSelectMode,s=e.theme;return o.jsx("div",{className:"page-renderer d-flex flex-column align-items-center w-100",style:{margin:"0 auto",minHeight:"100vh"},onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,onClick:this.clearSelection},this.renderHeader(),Object.keys(n).map(function(e){return t.renderPageBody(e)}),this.renderFooter(),r&&a&&o.jsx("div",{ref:function(e){return t.selectTipRef=e},css:o.css(_||(_=i(["\n          position: absolute;\n          background: ",";\n          color: ",";\n          box-shadow: 0 2px 6px 0 rgba(0,0,0,0.20);\n          border: 1px solid ",";\n          border-radius: 2px;\n          width: 150px;\n          height: auto;\n          left: 15px;\n          top: 0;\n          padding: 10px;\n          z-index: 1;\n          display: ",";\n        "],["\n          position: absolute;\n          background: ",";\n          color: ",";\n          box-shadow: 0 2px 6px 0 rgba(0,0,0,0.20);\n          border: 1px solid ",";\n          border-radius: 2px;\n          width: 150px;\n          height: auto;\n          left: 15px;\n          top: 0;\n          padding: 10px;\n          z-index: 1;\n          display: ",";\n        "])),s.colors.white,s.colors.black,s.colors.grays.gray300,this.state.showSelectTip?"block":"none")},"Click a widget on the page to call out its settings"))},e.prototype.renderHeader=function(){var t=this;if(!this.props.header)return null;var e=this.props,n=e.header,r=e.headerVisible,a=e.browserSizeMode,s=e.mainSizeMode,u=e.appMode,l=n.height[a]||n.height[s]||75,c=b(n),h=!Boolean(c[a]),x=p.getBuilderThemeVariables(),w=o.css(M||(M=i(["\n      ",";\n      ",";\n      position: relative;\n      display: ",";\n      width: 100%;\n      height: auto;\n      overflow: hidden;\n      background-color: ",";\n      border-bottom: 1px dashed ",";\n      z-index: 0;\n\n      &:hover {\n        .edit-mask {\n          display: flex;\n        }\n      }\n    "],["\n      ",";\n      ",";\n      position: relative;\n      display: ",";\n      width: 100%;\n      height: auto;\n      overflow: hidden;\n      background-color: ",";\n      border-bottom: 1px dashed ",";\n      z-index: 0;\n\n      &:hover {\n        .edit-mask {\n          display: flex;\n        }\n      }\n    "])),m,v(),r?"flex":"none",n.backgroundColor||"transparent",o.polished.rgba(x.colors.white,.12));return o.jsx(p.PageContext.Provider,{value:{viewOnly:h||!this.state.editHeader}},o.jsx("div",{className:"header flex-column",css:w,ref:function(e){return t.headerResizerRef=e}},o.jsx("div",{css:o.css(P||(P=i(["overflow: auto; display: flex;"],["overflow: auto; display: flex;"]))),ref:function(e){return t.headerRef=e},style:{height:+l}},o.jsx(f.default,{layouts:c})),u===o.AppMode.Design&&!h&&o.jsx("span",{className:"resize-handler",css:o.css(C||(C=i(["bottom: ","px; z-index: 1;"],["bottom: ","px; z-index: 1;"])),-8)}),!this.state.editHeader&&!h&&u===o.AppMode.Design&&o.jsx("div",{css:o.css(O||(O=i(["\n            ",";\n            background: ",";\n            z-index: 1;\n          "],["\n            ",";\n            background: ",";\n            z-index: 1;\n          "])),y,this.state.editBody?"transparent":o.polished.rgba(x.colors.grays.gray200,.6)),onClick:this.editBody}),this.state.editBody&&(!h||a===s)&&u===o.AppMode.Design&&o.jsx("div",{className:"edit-mask justify-content-center align-items-center",css:o.css(R||(R=i(["\n            ",";\n            background: ",";\n            z-index: 1;\n            display: none;\n          "],["\n            ",";\n            background: ",";\n            z-index: 1;\n            display: none;\n          "])),y,o.polished.rgba(x.colors.grays.gray200,.6))},o.jsx(d.Button,{className:"edit-btn",onClick:this.editHeader},o.jsx(d.Icon,{icon:g,width:16,height:16}),"Edit Header"))))},e.prototype.renderFooter=function(){var t=this;if(!this.props.footer)return null;var e=this.props,n=e.footer,r=e.footerVisible,a=e.browserSizeMode,s=e.mainSizeMode,u=e.appMode,l=n.height[a]||n.height[s]||75,c=b(n),h=!Boolean(c[a]),x=p.getBuilderThemeVariables(),w=o.css(j||(j=i(["\n      ",";\n      ",";\n      display: ",";\n      position: relative;\n      width: 100%;\n      height: auto;\n      overflow: hidden;\n      background-color: ",";\n      border-top: 1px dashed ",";\n      z-index: 0;\n\n      &:hover {\n        .edit-mask {\n          display: flex;\n        }\n      }\n    "],["\n      ",";\n      ",";\n      display: ",";\n      position: relative;\n      width: 100%;\n      height: auto;\n      overflow: hidden;\n      background-color: ",";\n      border-top: 1px dashed ",";\n      z-index: 0;\n\n      &:hover {\n        .edit-mask {\n          display: flex;\n        }\n      }\n    "])),m,v(),r?"flex":"none",n.backgroundColor||"transparent",o.polished.rgba(x.colors.white,.12));return o.jsx(p.PageContext.Provider,{value:{viewOnly:h||!this.state.editFooter}},o.jsx("div",{className:"footer flex-column",css:w,ref:function(e){return t.footerResizerRef=e}},u===o.AppMode.Design&&!h&&o.jsx("span",{className:"resize-handler",css:o.css(E||(E=i(["top: ","px; z-index: 1;"],["top: ","px; z-index: 1;"])),-8)}),o.jsx("div",{css:o.css(A||(A=i(["overflow: auto; display: flex;"],["overflow: auto; display: flex;"]))),ref:function(e){return t.footerRef=e},style:{height:+l}},o.jsx(f.default,{layouts:c})),!this.state.editFooter&&!h&&u===o.AppMode.Design&&o.jsx("div",{css:o.css(T||(T=i(["\n            ",";\n            background: ",";\n            z-index: 1;\n          "],["\n            ",";\n            background: ",";\n            z-index: 1;\n          "])),y,this.state.editBody?"transparent":o.polished.rgba(x.colors.grays.gray200,.6)),onClick:this.editBody}),this.state.editBody&&(!h||a===s)&&u===o.AppMode.Design&&o.jsx("div",{className:"edit-mask justify-content-center align-items-center",css:o.css(z||(z=i(["\n            ",";\n            background: ",";\n            z-index: 1;\n            display: none;\n          "],["\n            ",";\n            background: ",";\n            z-index: 1;\n            display: none;\n          "])),y,o.polished.rgba(x.colors.grays.gray200,.6))},o.jsx(d.Button,{className:"edit-btn",onClick:this.editFooter},o.jsx(d.Icon,{icon:g,width:16,height:16}),"Edit Footer"))))},e.prototype.renderPageBody=function(t){var e=this.props,n=e.renderedPages,r=e.pages,a=e.browserSizeMode,s=e.appMode,u=e.theme,l=r[t];if(l){var c=b(l);if(c){var h,d=!Boolean(c[a]);l.mode!==o.PageMode.FitWindow&&l.maxWidth>0&&(h=l.maxWidth);var g=!!n[l.id];return o.jsx(p.PageContext.Provider,{key:l.id,value:{maxWidth:h,viewOnly:d||!this.state.editBody}},o.jsx("div",{id:l.id,"data-pageid":l.id,className:"page flex-grow-1",style:{display:g?"flex":"none",position:"relative",backgroundColor:l.bodyBackgroundColor||"transparent",zIndex:0}},o.jsx(f.default,{layouts:c,isPageItem:!0,className:"w-100 flex-grow-1",style:{margin:"0 auto",backgroundColor:"transparent"}}),!this.state.editBody&&s===o.AppMode.Design&&o.jsx("div",{css:o.css(L||(L=i(["\n            ",";\n            background: ",";\n            z-index: 1;\n          "],["\n            ",";\n            background: ",";\n            z-index: 1;\n          "])),y,o.polished.rgba(u.colors.grays.gray800,.6)),onClick:this.editBody})))}}},e.displayName="BuilderPageRenderer",e}(o.React.PureComponent);function b(t){return t?t.layout:null}e.PageRenderer=x;var w,I,S,_,M,P,C,O,R,j,E,A,T,z,L;e.default=o.ReactRedux.connect(function(t,e){var n=t.appRuntimeInfo.selection||{};return{pages:t.appConfig.pages,header:t.appConfig.header,headerVisible:!!t.appConfig.pages[e.pageId].header,footer:t.appConfig.footer,footerVisible:!!t.appConfig.pages[e.pageId].footer,appMode:t.appRuntimeInfo.appMode,mainSizeMode:t.appConfig.mainSizeMode,browserSizeMode:t.browserSizeMode,locale:t.appContext.locale,layoutIdWithSelection:n.layoutId,inSelectMode:t.appRuntimeInfo.inSelectMode,theme:t.theme}})(x)},function(t,e,n){"use strict";var i=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a,s,u=n(1),l=n(5),c=n(3),h=n(47),p=n(359),d=n(360),f=n(2),g=n(42),m=n(19),y=n(15),v=n(11),x=n(13),b=n(327),w=u.css(a||(a=i(["\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  top: 0;\n  right: 0;\n  z-index: 20;\n  background: transparent;\n  pointer-events: none;\n"],["\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  top: 0;\n  right: 0;\n  z-index: 20;\n  background: transparent;\n  pointer-events: none;\n"]))),I=function(t){function e(e){var n=t.call(this,e)||this;return n.state={dragEnterred:!1},n.activate=function(t){var e=n.props,i=e.appMode,r=e.dispatch,o=e.isInSection,a=e.isInWidget;o||a||(t.stopPropagation(),i===u.AppMode.Design&&r(x.selectItem({layoutId:null,layoutItemId:null})))},n.onItemResizing=function(){},n.childrenRef={},f.autoBindHandlers(n,["onItemDragStart","onItemResizeStart","onItemResizing","onItemResizeEnd","onDrop","onDragOver","onDragEnter","onDragLeave","dragOverBoundary","dragLeaveBoundary","dropAtBoundary"]),n}return r(e,t),e.prototype.componentDidMount=function(){this.guideDragOverDraw=h(this.guideDragOverRef)},e.prototype.onItemDragStart=function(t){this.domRect=this.ref.getBoundingClientRect();var e=this.childrenRef[t].current.getBoundingClientRect();this.draggingRect=f.relativeClientRect(e,this.domRect)},e.prototype.onItemResizeStart=function(t){this.domRect=this.ref.getBoundingClientRect();var e=this.childrenRef[t].current.getBoundingClientRect();this.resizingRect=f.relativeClientRect(e,this.domRect)},e.prototype.onItemResizeEnd=function(t,e,n,i,r,o){var a={width:this.resizingRect.width+i,height:this.resizingRect.height+r};this.childRects=[],this.domRect=null,l.getAppConfigAction().editLayoutItemBBox({layoutId:this.props.layout.id,layoutItemId:t},a).exec()},e.prototype.onDragOver=function(t,e,n,i,r,o){var a=t,s=i;if(this.childRects&&this.childRects.length>0){var l=p.calInsertPositionForColumn(this.domRect,o,this.childRects,p.DropIndicatorSize),c=l.insertY,h=l.refId;if(this.referenceId=h,a.layoutId===this.props.layout.id){var d=this.props.layout.order,g=d.indexOf(a.layoutItemId);if(g===d.indexOf(h)-1||!h&&g===d.length-1)return void(this.dropArea&&this.dropArea.hide())}s={top:c-p.DropIndicatorSize/2+this.ref.scrollTop,width:this.domRect.width-p.DropIndicatorSize,left:p.DropIndicatorSize/2,height:p.DropIndicatorSize}}else this.referenceId=null,s={top:this.domRect.height/2-p.DropIndicatorSize/2,width:this.domRect.width-p.DropIndicatorSize,left:p.DropIndicatorSize/2,height:p.DropIndicatorSize};if(this.dropArea)this.dropArea.move(s.left,s.top).size(s.width,s.height),this.dropArea.visible()||this.dropArea.show();else{var m=f.getBuilderThemeVariables();this.dropArea=this.guideDragOverDraw.rect(s.width,s.height).fill(u.polished.rgba(m.colors.cyans.cyan500,.4)).stroke("none").attr({x:s.left,y:s.top})}},e.prototype.onDragEnter=function(t){if(!this.state.dragEnterred&&(this.dropArea&&this.dropArea.hide(),this.collectBounds(t),this.setState({dragEnterred:!0}),!this.props.isPageItem)){var e=f.getBuilderThemeVariables();this.dragEnterArea?this.dragEnterArea.show():this.dragEnterArea=this.guideDragOverDraw.rect(this.domRect.width,this.domRect.height).fill(u.polished.rgba(e.colors.cyans.cyan500,.1)).stroke("none").attr({x:0,y:0})}},e.prototype.onDragLeave=function(){this.state.dragEnterred&&(this.dropArea&&this.dropArea.hide(),this.setState({dragEnterred:!1}),this.dragEnterArea&&this.dragEnterArea.hide())},e.prototype.onDrop=function(t,e,n){this.dropArea&&this.dropArea.hide();var i=this.props.layout,r=t,o=l.getAppConfigAction(),a=0;if(this.referenceId?a=i.order.indexOf(this.referenceId):i.order&&(a=i.order.length),this.referenceId=null,this.childRects=[],this.setState({dragEnterred:!1}),r.layoutId===i.id)return m.addItemToLayout(o.appConfig,t,{layoutId:i.id},e,n,a).then(function(t){var e=t.layoutInfo,n=t.updatedAppConfig;(o=l.getAppConfigAction(n)).exec(),u.getAppStore().dispatch(u.appActions.selectionChanged(e))});var s=(this.maxPageWidth>0?Math.min(this.maxPageWidth,e.width):e.width)/12,c=Math.min(Math.round(n.width/s),12),h={name:"row",label:"row",path:"widgets/layout/row/",icon:null,itemType:u.LayoutItemType.Widget,manifest:{properties:{type:u.WidgetType.Layout}}};return m.addItemToLayout(o.appConfig,h,{layoutId:i.id},e,n,a).then(function(i){var r=i.layoutInfo,o=i.updatedAppConfig,a=v.findLayoutItem(o,r),s=o.widgets[a.widgetId].layouts[u.DEFAULT_EMBED_LAYOUT_NAME],l=u.utils.findLayoutId(s,u.getAppStore().getState().browserSizeMode,o.mainSizeMode);return m.addItemToLayout(o,t,{layoutId:l},e,{left:0,width:c,height:Math.round(Math.min(n.height,e.height))},0)}).then(function(t){var e=t.layoutInfo,n=t.updatedAppConfig;(o=l.getAppConfigAction(n)).exec(),u.getAppStore().dispatch(u.appActions.selectionChanged(e))})},e.prototype.collectBounds=function(t){var e=this,n=this.props.layout;return this.childRects=[],this.domRect=this.ref.getBoundingClientRect(),Object.keys(this.childrenRef).forEach(function(i){if((t.layoutId!==n.id||t.layoutItemId!==i)&&n.order&&n.order.indexOf(i)>=0&&e.childrenRef[i].current){var r=f.relativeClientRect(e.childrenRef[i].current.getBoundingClientRect(),e.domRect);r.id=i,e.childRects.push(r)}}),this.childRects.sort(function(t,e){return t.top-e.top})},e.prototype.dragOverBoundary=function(t,e,n,i){this.childRects&&0!==this.childRects.length||this.collectBounds({});var r=this.childRects.find(function(t){return t.id===n.layoutItemId}),o=this.childRects.indexOf(r);if("top"===i)this.referenceId=n.layoutItemId;else if(o<this.childRects.length-1){var a=this.childRects[o+1];this.referenceId=a.id}else this.referenceId=null},e.prototype.dragLeaveBoundary=function(){this.dropArea&&this.dropArea.hide()},e.prototype.dropAtBoundary=function(t,e,n,i){this.domRect||(this.domRect=this.ref.getBoundingClientRect()),this.onDrop(t,this.domRect,e)},e.prototype.createItem=function(t,e,n){this.childrenRef[t]||(this.childrenRef[t]=u.React.createRef());var i=this.props,r=i.layout,o=i.itemDisplaySetting,a=i.itemDraggable,s=i.itemResizable,l=i.itemSelectable;return u.jsx(d.default,{key:t,ref:this.childrenRef[t],index:e,layoutId:r.id,layoutItemId:t,gutter:n.gutter,onClick:this.props.onItemClick,draggable:a,resizable:s,selectable:l,itemDisplaySetting:o,onResizeStart:this.onItemResizeStart,onResizing:this.onItemResizing,onResizeEnd:this.onItemResizeEnd,onDragStart:this.onItemDragStart})},e.prototype.dropAreaStyle=function(){var t=f.getBuilderThemeVariables();return u.css(s||(s=i(["\n      .drag-enter {\n        background: ",";\n      }\n    "],["\n      .drag-enter {\n        background: ",";\n      }\n    "])),u.polished.rgba(t.colors.cyans.cyan500,.1))},e.prototype.render=function(){var t=this,e=this.props,n=e.layout,i=e.className,r=n.order||[],a=u.lodash.assign({},y.DEFAULT_FLOW_SETTING,n.setting),s=o({position:"relative"},c.styleUtils.toCSSStyle(a.style),{overflow:"auto"}),l=u.classNames("layout flow-layout d-flex flex-column align-items-center w-100",i,{"drag-enter":!this.props.isPageItem&&this.state.dragEnterred});return u.jsx(f.PageContext.Consumer,null,function(e){t.maxPageWidth=e.maxWidth;var i={display:t.props.draggingWidgetInfo&&t.state.dragEnterred?"block":"none"};return u.jsx(b.FlowLayoutContext.Provider,{value:{flowLayoutId:n.id,dragOverBoundary:t.dragOverBoundary,dragLeaveBoundary:t.dragLeaveBoundary,dropAtBoundary:t.dropAtBoundary}},u.jsx("div",{css:t.dropAreaStyle(),className:l,ref:function(e){return t.ref=e},style:s,"data-layoutid":n.id,onClick:t.activate},r.length>0&&r.map(function(e,n){return t.createItem(e,n,a)}),0===r.length&&t.props.children,u.jsx("div",{css:w,style:i,ref:function(e){return t.guideDragOverRef=e}})))})},e}(u.React.PureComponent),S=g.withDrop()(I);e.default=u.ReactRedux.connect(f.mapStateToLayoutProps)(S)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DropIndicatorSize=10,e.calInsertPositionForColumn=function(t,n,i,r){var o,a,s=!1;if(i.some(function(t,r){if(t.top+t.height/2>n){if(0===r)o=Math.max(t.top/2,t.top-e.DropIndicatorSize/2);else{var u=i[r-1];o=(t.top+u.top+u.height)/2}s=!0,a=t.id}return s}),!s){var u=i[i.length-1];o=Math.min(u.top+u.height+e.DropIndicatorSize/2,(u.top+u.height+t.height)/2)}return{refId:a,insertY:o}}},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),a=n(3),s=n(15),u=n(49),l=n(53),c=n(22),h=n(62),p=u.widgetRndWithToolItems([c.deleteMenuItem]),d=l.sectionRndWithToolItems([c.deleteMenuItem]),f=function(t){function e(e){var n=t.call(this,e)||this;return n.state={isResizing:!1,dh:0},n.onResizeStart=function(t){var e=n.props.forwardRef;e.current&&(n.domRect=e.current.getBoundingClientRect()),n.props.onResizeStart(t),n.setState({isResizing:!0})},n.onResizing=function(t,e,i,r,o){n.props.onResizing(t,e,i,r,o),n.setState({dh:o,isResizing:!0})},n.onResizeEnd=function(t,e,i,r,o,a){var s=n.props.layoutItem;n.props.onResizeEnd(t,e,i,r,o,s),n.setState({isResizing:!1,dh:0})},n.layoutInfo={layoutId:n.props.layoutId,layoutItemId:n.props.layoutItemId},n}return i(e,t),e.prototype.render=function(){var t=this.props,e=t.layoutId,n=t.layoutItem,i=t.itemDisplaySetting,u=t.selected,l=t.forwardRef,c=t.draggable,h=t.resizable,f=t.selectable,g=t.index,m=t.gutter,y=t.isEmpty;if(!n||y)return null;var v,x=this.state,b=x.dh,w=x.isResizing,I=n.bbox||{},S=o.lodash.assign({},s.DEFAULT_FLOW_ITEM_SETTING,n.setting),_=o.classNames("flexbox-layout-item d-flex"),M=S.autoHeight,P=r({},a.styleUtils.toCSSStyle(S.style),{marginTop:g>0?m:"unset",zIndex:u?20:0,minHeight:20,height:M?"auto":I.height,width:(S.width||100)+"%",flexShrink:0});if((S.offsetX||S.offsetY)&&(P.transform="translate("+(S.offsetX||0)+"px, "+(S.offsetY||0)+"px)"),w&&b&&this.domRect&&(P.height=this.domRect.height+b),n.type===o.LayoutItemType.Widget)v=p;else{if(n.type!==o.LayoutItemType.Section)return null;v=d}return o.React.createElement(v,{style:P,forwardRef:l,layoutId:e,layoutItemId:n.id,onResizeStart:this.onResizeStart,onResizing:this.onResizing,onResizeEnd:this.onResizeEnd,onDragStart:this.props.onDragStart,left:!1,right:!1,top:!1,bottom:!1,restrict:!0,useDragHandler:!0,itemDisplaySetting:i,draggable:c,resizable:h,selectable:f,isInSection:n.type===o.LayoutItemType.Section,onClick:this.props.onClick,className:_})},e}(o.React.PureComponent),g=o.ReactRedux.connect(h.mapStateToFlowItemProps)(f);e.default=o.React.forwardRef(function(t,e){return o.React.createElement(g,r({},t,{forwardRef:e}))})}])});
//# sourceMappingURL=layout-builder.js.map