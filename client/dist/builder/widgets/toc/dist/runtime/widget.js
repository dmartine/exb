define(["jimu-core","jimu-core/react","jimu-ui","jimu-for-builder","jimu-core/dnd"],function(e,t,n,o,i){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=155)}({0:function(t,n){t.exports=e},1:function(e,n){e.exports=t},11:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={chooseTemplate:"Choose a page layout template",newPage:"New page",remove:"Remove",duplicate:"Duplicate",rename:"Rename",pages_upper:"Pages",content_upper:"Content",body_upper:"Body",tocLoading:"Loading",addPage:"Add page",addLink:"Add link",addFolder:"Add folder",makeHome:"Make homepage",hideFromMenu:"Hide from menu",showFromMenu:"Show in menu",body:"Body",header:"Header",footer:"Footer",more:"More",outline:"Outline",folder:"Folder",expand:"Expand",setLink:"Set link",unexpand:"Unexpand",certainly:"Ok",tip:"Tip",removePageTip:"There is(are) {subCount} sub-screen(s) in {label}, do you really want to remove it?",fullScreenApp:"Full Screen App",fullScreenAppTip:"Best for creating a web app that takes the full area of the browser window.",scrollingPage:"Scrolling Page",scrollingPageTip:"Best for creating a web page that scrolls in the browser window."}},155:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),s=n(3),l=n(0),c=n(2),p=n(156),d=n(11),g=n(164),u=function(e){function t(t){var n=e.call(this,t)||this;return n.emptyLayout={},n.handleOutlineItemClick=function(e){e.type!==g.OutlineType.Label&&(e.type===g.OutlineType.Section||e.type===g.OutlineType.Widget?n.changeWidgetOrSection(e):e.type===g.OutlineType.View?n.changeView(e):e.type===g.OutlineType.Layout&&n.changeLayout(e))},n.changeCurrentPage=function(e){n.changeSelection(null),s.builderAppSync.publishPageChangeToApp(e)},n.changeEditablePageId=function(e){e!==n.state.editablePageItemId&&n.setState({editablePageItemId:e})},n.movePageIntoPage=function(e,t){e!==t&&(s.getAppConfigAction().movePageIntoPage(e,t).exec(),n.props.appConfig.pages[e].type===r.PageType.Normal&&n.changeCurrentPage(e))},n.removePage=function(e){var t,o=n.props.appConfig.pages[e];n.props.appConfig.pageStructure.some(function(o,i){var a=Object.keys(o)[0];return a!==e&&(s.appConfigUtils.isRealPage(n.props.appConfig,a)?(t=a,!0):void 0)}),t||n.props.appConfig.pageStructure.some(function(o,i){var a=Object.keys(o)[0];return a!==e&&!!o[a].some(function(o){return o!==e&&(s.appConfigUtils.isRealPage(n.props.appConfig,o)?(t=o,!0):void 0)})}),t&&(s.builderAppSync.publishPageChangeToApp(t),s.getAppConfigAction().removePage(e).exec(),o.isDefault&&s.getAppConfigAction().setHomePage(t).exec())},n.setHomePage=function(e){s.getAppConfigAction().replaceHomePage(e).exec()},n.duplicatePage=function(e){var t=r.appConfigUtils.getUniqueId(n.props.appConfig,"page");s.getAppConfigAction().duplicatePage(e,t).exec();var o=n.props.appConfig.pages[e];o.type!==r.PageType.Folder&&o.type!==r.PageType.Link&&n.changeCurrentPage(t)},n.renamePage=function(e,t){return!(!t||""===t)&&(s.getAppConfigAction().editPageProperty(e,"label",t).exec(),n.changeEditablePageId(""),!0)},n.orderPageBelowPage=function(e,t,n){s.getAppConfigAction().orderPageToPage(e,t,n).exec()},n.formatMessage=function(e){return n.props.intl.formatMessage({id:e,defaultMessage:d.default[e]})},n.addPageWithType=function(e,t){var o;switch(e){case"page":return o=n.loadPageTemplate(t),s.builderAppSync.publishChangeBrowserSizeModeToApp(s.getAppConfigAction().appConfig.mainSizeMode),o;case"link":o=r.Immutable({}).merge({id:r.appConfigUtils.getUniqueId(n.props.appConfig,"page"),type:r.PageType.Link,label:r.appConfigUtils.getUniqueLabel(n.props.appConfig,"page",n.formatMessage("link")),linkUrl:"#",isVisible:!0}),s.getAppConfigAction().addPage(o).exec();break;case"folder":o=r.Immutable({}).merge({id:r.appConfigUtils.getUniqueId(n.props.appConfig,"page"),type:r.PageType.Folder,label:r.appConfigUtils.getUniqueLabel(n.props.appConfig,"page",n.formatMessage("folder")),isVisible:!0}),s.getAppConfigAction().addPage(o).exec()}return n.changeEditablePageId(o.id),o},n.loadPageTemplate=function(e){if(e&&e.layout&&e.layouts&&!(Object.keys(e.layouts).length<1))return n.parsePageTemplate(e,n.props.appConfig)},n.parsePageTemplate=function(e,t){var o=Object.keys(e.layouts).length,i=n.getUniqueIds(t,"layout",o);Object.keys(e.layouts).forEach(function(t,n){var o=e.layouts[t];e=e.setIn(["layouts",t],o.set("id",i[n]))}),Object.keys(e.layout).forEach(function(t){var n=e.layout[t];e=e.setIn(["layout",t],e.layouts[n].id)});var a=e.layouts&&Object.keys(e.layouts).map(function(t){return e.layouts[t]}),l={},c=document.querySelector('div[data-widgetid="app-loader"]');if(c){var p=c.getBoundingClientRect();l[n.props.browserSizeMode]=Math.round(p.height-70)}e=e.without("name","thumbnail","id","widgets","views","sections","layouts","description");var d=r.Immutable({}).merge({id:r.appConfigUtils.getUniqueId(n.props.appConfig,"page"),label:r.appConfigUtils.getUniqueLabel(n.props.appConfig,"page",n.formatMessage("page")),type:r.PageType.Normal,isVisible:!0,heightInBuilder:l}).merge(e);return s.getAppConfigAction().addPage(d,a).exec(),n.changeCurrentPage(d.id),n.changeEditablePageId(d.id),d},n.getUniqueIds=function(e,t,n){for(var o=[],i=0;i<n;i++){var a=r.appConfigUtils.getUniqueId(e,t);o.push(a),e=e.setIn([t+"s",a],{id:a})}return o},n.getUniqueLabels=function(e,t,n){for(var o=[],i=0;i<n;i++){var a=r.appConfigUtils.getUniqueId(e,t),s=r.appConfigUtils.getUniqueLabel(e,t,t);o.push(s),e=e.setIn([t+"s",a],{id:a,label:s})}return o},n.changeSelection=function(e){s.builderAppSync.publishChangeSelectionToApp(e)},n.changeWidgetOrSection=function(e){var t=e.id.split(g.TocItemIdSplite);n.changeSelection({layoutId:t[0],layoutItemId:t[1]})},n.changeView=function(e){var t=e.id.split(g.TocItemIdSplite);s.builderAppSync.publishViewChangeToApp(t[0],t[1])},n.changeLayout=function(e){},n.getCurrentPageId=function(){var e;return n.props.appConfig.pageStructure.some(function(t,o){var i=Object.keys(t)[0];if(s.appConfigUtils.isRealPage(n.props.appConfig,i))return e=i,!0}),e||n.props.appConfig.pageStructure.some(function(t,o){return t[Object.keys(t)[0]].some(function(t){if(s.appConfigUtils.isRealPage(n.props.appConfig,t))return e=t,!0})}),s.builderAppSync.publishPageChangeToApp(e),e},n.renderActionBtn=function(e,t,n){return l.jsx(c.Button,{title:e,size:"sm",color:"link",className:" rounded icon page-action-btn",onClick:n},l.jsx(c.Icon,{size:12,icon:t}))},n.PageListWrapper=function(){return l.jsx(p.default,{appConfig:n.props.appConfig,onDefaultClick:n.setHomePage,addPageWithType:n.addPageWithType,editablePageItemId:n.state.editablePageItemId,theme:n.props.theme,changeEditablePageItemId:n.changeEditablePageId,currentPageItemId:n.props.currentPageId,removePage:n.removePage,intl:n.props.intl,duplicatePage:n.duplicatePage,renamePage:n.renamePage,reOrderPage:n.orderPageBelowPage,onClickPage:n.changeCurrentPage,movePageIntoPage:n.movePageIntoPage,browserSizeMode:n.props.browserSizeMode})},n.getStyle=function(e){return l.css(a||(a=i(["\n      overflow: hidden;\n\n      .page-toc {\n        background-color: ",";\n      }\n\n      .outline-toc {\n        background-color: ",";\n        border: 0;\n        border-top: 1px solid ",";\n      }\n\n      .toc-list-header{\n        padding: 10px 16px;\n        &.header{\n          padding-bottom: 0;\n          padding-top: 10px;\n        }\n        &.footer{\n          padding-bottom: 0;\n          padding-top: 10px;\n        }\n        .page-action-btn {\n          margin-left:0.5rem;\n          >.jimu-icon{\n            fill: ",";\n            margin: auto;\n          }\n          &:hover {\n            color: ",";\n            cursor: pointer;\n            svg {\n              fill: ",";\n            }\n          }\n\n          &:active {\n            color: ",";\n            svg {\n              fill: ",";\n            }\n          }\n\n        }\n\n        .btn-primary {\n          background-color: ",";\n          border-color: ",";\n        }\n\n        .btn-primary:hover {\n          background-color: ",";\n          border-color: ",";\n        }\n        .add-page-btn {\n          font-size: 0.7rem;\n          padding-left: 0.5rem;\n          padding-right: 0.5rem;\n          &:hover {\n            svg {\n              fill: ",";\n            }\n          }\n        }\n      }\n\n    "],["\n      overflow: hidden;\n\n      .page-toc {\n        background-color: ",";\n      }\n\n      .outline-toc {\n        background-color: ",";\n        border: 0;\n        border-top: 1px solid ",";\n      }\n\n      .toc-list-header{\n        padding: 10px 16px;\n        &.header{\n          padding-bottom: 0;\n          padding-top: 10px;\n        }\n        &.footer{\n          padding-bottom: 0;\n          padding-top: 10px;\n        }\n        .page-action-btn {\n          margin-left:0.5rem;\n          >.jimu-icon{\n            fill: ",";\n            margin: auto;\n          }\n          &:hover {\n            color: ",";\n            cursor: pointer;\n            svg {\n              fill: ",";\n            }\n          }\n\n          &:active {\n            color: ",";\n            svg {\n              fill: ",";\n            }\n          }\n\n        }\n\n        .btn-primary {\n          background-color: ",";\n          border-color: ",";\n        }\n\n        .btn-primary:hover {\n          background-color: ",";\n          border-color: ",";\n        }\n        .add-page-btn {\n          font-size: 0.7rem;\n          padding-left: 0.5rem;\n          padding-right: 0.5rem;\n          &:hover {\n            svg {\n              fill: ",";\n            }\n          }\n        }\n      }\n\n    "])),r.polished.rgba(e.colors.grays.gray100,.7),e.colors.grays.gray100,e.colors.grays.gray300,e.colors.grays.gray800,e.colors.black,e.colors.black,e.colors.black,e.colors.black,e.colors.cyans.cyan300,e.colors.cyans.cyan300,e.colors.cyans.cyan200,e.colors.cyans.cyan200,e.colors.black)},n.state={editablePageItemId:"",editableOutlineItemId:"",isTemplatePopoverOpen:!1},n.popoverRef=r.React.createRef(),n.chooseTemplateStr=n.props.intl.formatMessage({id:"chooseTemplate",defaultMessage:d.default.chooseTemplate}),n.newPageStr=n.props.intl.formatMessage({id:"newPage",defaultMessage:d.default.newPage}),n.pagesUpperStr=n.props.intl.formatMessage({id:"pages_upper",defaultMessage:d.default.pages_upper}),n.contentUpperStr=n.props.intl.formatMessage({id:"content_upper",defaultMessage:d.default.content_upper}),n.bodyUpperStr=n.props.intl.formatMessage({id:"body_upper",defaultMessage:d.default.body_upper}),n.loadingStr=n.props.intl.formatMessage({id:"tocLoading",defaultMessage:d.default.tocLoading}),n.addPageStr=n.props.intl.formatMessage({id:"addPage",defaultMessage:d.default.addPage}),n.addLinkStr=n.props.intl.formatMessage({id:"addLink",defaultMessage:d.default.addLink}),n.addFolderStr=n.props.intl.formatMessage({id:"addFolder",defaultMessage:d.default.addFolder}),n}return o(t,e),t.prototype.render=function(){var e=this.PageListWrapper,t=this.props,n=t.appConfig,o=t.currentPageId,i=t.browserSizeMode;return l.jsx("div",{css:this.getStyle(this.props.theme),className:"jimu-widget widget-builder-toc bg-white w-100 h-100"},l.jsx("div",{className:"page-toc h-50"},l.jsx(e,null)),l.jsx("div",{className:"outline-toc h-50"},l.jsx(g.default,{appConfig:n,currentPageId:o,browserSizeMode:i,onClickItem:this.handleOutlineItemClick,editableOutlineItemId:this.state.editableOutlineItemId,theme:this.props.theme,intl:this.props.intl})))},t.mapExtraStateProps=function(e){return{currentPageId:e.appStateInBuilder&&e.appStateInBuilder.appRuntimeInfo.currentPageId,currentDialogId:e.appStateInBuilder&&e.appStateInBuilder.appRuntimeInfo.currentDialogId,appConfig:e.appStateInBuilder&&e.appStateInBuilder.appConfig,browserSizeMode:e.appStateInBuilder&&e.appStateInBuilder.browserSizeMode}},t}(r.BaseWidget);t.default=u},156:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a,r,s,l=n(0),c=n(3),p=n(2),d=n(11),g=n(38),u=n(16),m=n(40),f=n(2),h=n(157),I=n(41),b=n(8),v={value:"",openType:void 0,linkType:l.LinkType.WebAddress},y=void 0,x=function(e){function t(t){var o=e.call(this,t)||this;return o.handleOnTocDragStatusChange=function(e){o.setState({isTocDragging:e,itemJson:o.getItemJsonByAppConfig(o.props.appConfig)})},o.handleOnTocDraggingStatusChange=function(e){o.setState({tocDraggingStatus:e,itemJson:o.getItemJsonByAppConfig(o.props.appConfig)})},o.handleChooseTemplate=function(e){o.setState({isTemplatePopoverOpen:!1}),o.props.addPageWithType("page",e)},o.handleToggleTemplatePopover=function(){o.setState({isTemplatePopoverOpen:!o.state.isTemplatePopoverOpen})},o.handleRemovePage=function(e){o.props.appConfig.pageStructure.find(function(t){return t[e.id]&&t[e.id].length>0})?(o.setState({willRemovePage:e}),o.handleToggleRemovePopover()):(y===e.id&&o.setState({isShowLinkSetting:!1}),o.props.removePage(e.id))},o.handleToggleRemovePopover=function(){o.setState({isRemovePopoverOpen:!o.state.isRemovePopoverOpen})},o.singleAndDoubleClickTimeout=void 0,o.handleClickItem=function(e){e.data.type!==l.PageType.Folder&&e.data.type!==l.PageType.Link&&(o.singleAndDoubleClickTimeout&&(clearTimeout(o.singleAndDoubleClickTimeout),o.singleAndDoubleClickTimeout=void 0),o.singleAndDoubleClickTimeout=setTimeout(function(){o.setState({currentSelectedItemId:e.id,itemJson:f.TreeUtils.activeAndExpandNodesByActiveIds(o.state.itemJson,[e.id])},function(){o.props.onClickPage(e.data.id)})},200))},o.handleOnTocDoubleClick=function(e,t){o.singleAndDoubleClickTimeout&&(clearTimeout(o.singleAndDoubleClickTimeout),o.singleAndDoubleClickTimeout=void 0),o.props.changeEditablePageItemId(e.id),t.stopPropagation()},o.handleOnSetLinkClick=function(e,t){y&&e.data.id===y&&o.state.isShowLinkSetting||(y=e.data.id,o.resetLinkParam(y),o.state.isShowLinkSetting?o.setState({isShowLinkSetting:!1},function(){o.setState({isShowLinkSetting:!0})}):o.setState({isShowLinkSetting:!0}),t.stopPropagation())},o.handleExpand=function(e){if(e.children&&!(e.children.length<1)||e.mustShowArrow){var t=o.expandIds;e.isExpand?t.indexOf(e.id)>-1&&t.splice(t.indexOf(e.id),1):t.indexOf(e.id)<0&&t.push(e.id),o.setState({itemJson:f.TreeUtils.expandNodesByExpandIds(o.state.itemJson,t)})}},o.handleArrowClick=function(e){o.handleExpand(e)},o.handleSearchTextChange=function(e){o.setState({filterText:e},function(){o.setState({itemJson:o.getItemJsonByAppConfig(o.props.appConfig)})})},o.handleSearchSubmit=function(e){o.setState({filterText:e},function(){o.setState({itemJson:o.getItemJsonByAppConfig(o.props.appConfig)})})},o.handleSearchBtnClick=function(e){e.stopPropagation(),o.state.showSearch?o.handleSearchTextChange(""):o.searchInput&&(o.searchInput.focus(),o.searchInput.select()),o.setState({showSearch:!o.state.showSearch})},o.handleSettingLinkConfirm=function(e){o.setState({isShowLinkSetting:!1}),o.changeUrl(e.value,e.openType)},o.changeUrl=function(e,t){var n=o.props.appConfig.pages[y],i=l.Immutable(n).merge({linkUrl:e||"#",openTarget:t});c.getAppConfigAction().editPage(i).exec(),v.value=e,v.openType=t},o.renamePage=function(e,t){return o.props.changeEditablePageItemId(""),o.props.renamePage(e.data.id,t)},o.getFirstItemJson=function(){return o.state.itemJson.children[0]},o.getLastItemJson=function(){var e=o.state.itemJson,t=e.children[e.children.length-1];return t.isExpand&&t.children&&t.children.length>0&&(t=t.children[t.children.length-1]),t},o.getLastParentItemJson=function(){var e=o.state.itemJson;return e.children[e.children.length-1]},o.onDidDrop=function(e,t,n){"moveInto"===n?o.props.movePageIntoPage(e.data.id,t.data.id):o.props.reOrderPage(e.data.id,t.data.id,n);var i=o.expandIds;i.indexOf(e.id)<0&&(i.push(e.id),o.setState({itemJson:f.TreeUtils.expandNodesByExpandIds(o.state.itemJson,i)}))},o.canDragFunc=function(e){return!0},o.canDropFunc=function(e,t){return e.id!==t.id},o.canDropIntoFunc=function(e,t){return c.appConfigUtils.isFirstLevelPage(o.props.appConfig,t.id)&&!c.appConfigUtils.isPageHasSubPage(o.props.appConfig,e.id)&&e.type!==l.PageType.Folder},o.canOrderFunc=function(e,t){return!(e.type===l.PageType.Folder&&!c.appConfigUtils.isFirstLevelPage(o.props.appConfig,t.id))},o.formatMessage=function(e,t){return o.props.intl.formatMessage({id:e,defaultMessage:d.default[e]},t)},o.getItemJsonByPageJson=function(e,t,n,i){var a=e.id,r=o.expandIds,s=o.props.currentPageItemId,p=r.indexOf(a)>-1,d={id:a,data:e,label:e.label,index:t,level:n,isActive:s===a,isExpand:p,mustShowArrow:e.type===l.PageType.Folder,showDefault:c.appConfigUtils.isRealPage(i,e.id),allowEditable:!0,renderItem:o.renderPageContent};return d.icon=e.icon,e.icon||(d.isIconSvg=!0,d.icon=c.utils.getDefaultTocPageIcon(e)),d},o.getItemJsonByAppConfig=function(e){var t={id:"ROOT",children:[],label:""};if(!e)return t;var n=e.pageStructure.map(function(t,n){var i=Object.keys(t)[0],a=e.pages[i],r=o.getItemJsonByPageJson(a,n,0,e),s=t[i];return r.children=[],s.forEach(function(t,n){var i=e.pages[t],a=o.getItemJsonByPageJson(i,n,1,e);r.children.push(a)}),r});t.children=n;var i=o.state.filterText;if(i&&""!==i){var a=f.TreeUtils.filterTree(t,i.trim());t=f.TreeUtils.expandFilteredNodes(a,i.trim())}return t},o.getMoreDropDownItems=function(e){var t=e.data,n=[],i=l.Immutable({label:o.formatMessage("setLink"),event:function(t){o.handleOnSetLinkClick(e,t)},visible:t.type===l.PageType.Link});n.push(i);var a=c.appConfigUtils.getRealPageCountExcludeOnePage(o.props.appConfig,t.id)<1,r=l.Immutable({label:o.formatMessage("remove"),event:function(e){o.handleRemovePage(t),e.stopPropagation()},visible:!a});n.push(r);var s=l.Immutable({label:o.formatMessage("duplicate"),event:function(e){e.stopPropagation(),o.props.duplicatePage(t.id)},visible:!0});n.push(s);var p=l.Immutable({label:o.formatMessage("rename"),event:function(t){o.handleOnTocDoubleClick(e,t)},visible:!0});return n.push(p),n},o.getAddPageDropDownItems=function(){var e=o.props.addPageWithType,t=[],n=l.Immutable({label:o.formatMessage("addLink"),event:function(t){y=e("link").id,o.resetLinkParam(y),o.setState({isShowLinkSetting:!0}),t.stopPropagation()},visible:!0});t.push(n);var i=l.Immutable({label:o.formatMessage("addFolder"),event:function(t){e("folder"),t.stopPropagation()},visible:!0});return t.push(i),t},o.renderPageItemRightContent=function(e){var t=o.props,r=t.theme,s=t.onDefaultClick,d=e.data,g=e.id,m=n(160),f=n(161),h=o.getMoreDropDownItems(e),I=l.css(a||(a=i(["\n      margin-right: calc(16px - ",");\n      .page-item-visible-btn {\n        display: ",";\n        color: ",";\n      }\n\n      .page-item-visible-btn:hover {\n        color: ",";\n      }\n\n      .page-item-home-btn {\n        display: ",";\n        color: ",";\n      }\n\n      .page-item-home-btn:hover {\n        color:",";\n      }\n\n      .dropDown {\n        display: inline-flex;\n        .btn {\n          color: ",";\n          display: none;\n        }\n        .btn:hover {\n          color: ",";\n        }\n      }\n\n    "],["\n      margin-right: calc(16px - ",");\n      .page-item-visible-btn {\n        display: ",";\n        color: ",";\n      }\n\n      .page-item-visible-btn:hover {\n        color: ",";\n      }\n\n      .page-item-home-btn {\n        display: ",";\n        color: ",";\n      }\n\n      .page-item-home-btn:hover {\n        color:",";\n      }\n\n      .dropDown {\n        display: inline-flex;\n        .btn {\n          color: ",";\n          display: none;\n        }\n        .btn:hover {\n          color: ",";\n        }\n      }\n\n    "])),r.components.button.sizes.sm.paddingX,d.isVisible?"none":"inline-flex",d.isVisible?r.colors.grays.gray600:r.colors.black,r.colors.black,e.showDefault&&d.isDefault?"inline-flex":"none",e.showDefault&&d.isDefault?r.colors.black:r.colors.grays.gray600,r.colors.black,r.colors.grays.gray600,r.colors.black);return l.jsx("div",{className:"d-flex",css:I},l.jsx(p.Button,{title:o.formatMessage("makeHome"),size:"sm",icon:!0,color:"link",className:" page-item-home-btn page-item-icon",onClick:function(e){e.stopPropagation(),d.isDefault||s(d.id)}},l.jsx(p.Icon,{size:12,icon:n(162)})),l.jsx(p.Button,{title:d.isVisible?o.formatMessage("hideFromMenu"):o.formatMessage("showFromMenu"),size:"sm",color:"link",className:"page-item-visible-btn page-item-icon",icon:!0,onClick:function(t){t.stopPropagation(),c.getAppConfigAction().editPageProperty(d.id,"isVisible",!e.data.isVisible).exec()}},l.jsx(p.Icon,{size:12,icon:d.isVisible?m:f})),l.jsx("div",{title:o.formatMessage("more"),className:"dropDown page-item-icon"},l.jsx(u.MyDropDown,{uId:g,theme:r,items:h})))},o.renderPageContent=function(e){var t=o.props,n=t.intl,a=t.theme,s=t.editablePageItemId,c=o.state,p=c.isTocDragging,d=c.tocDraggingStatus,u=l.css(r||(r=i(["\n      :hover {\n        .dropDown {\n          .btn {\n            display: ",";\n          }\n          z-index: 2;\n        }\n        .page-item-visible-btn {\n          display: ",";\n          z-index: 2;\n        }\n        .page-item-home-btn {\n          display: ",";\n          z-index: 2;\n        }\n      }\n    "],["\n      :hover {\n        .dropDown {\n          .btn {\n            display: ",";\n          }\n          z-index: 2;\n        }\n        .page-item-visible-btn {\n          display: ",";\n          z-index: 2;\n        }\n        .page-item-home-btn {\n          display: ",";\n          z-index: 2;\n        }\n      }\n    "])),p?"none":"inline-flex",p?"none":"inline-flex",e.showDefault?p?"none":"inline-flex":"none");return l.jsx(g.DndTocContent,{intl:n,itemJson:e,theme:a,canDnd:!0,keepWidthInParent:!0,isFirstItem:o.getFirstItemJson().id===e.id,editable:s===e.id,tocCss:u,onArrowClick:o.handleArrowClick,isLastItem:o.getLastItemJson().id===e.id,isTocDragging:p,onTocDragStatusChage:o.handleOnTocDragStatusChange,tocDraggingStatus:d,renderRightContent:o.renderPageItemRightContent,renameItem:o.renamePage,parentBoundRect:o.treeRef?o.treeRef.getBoundingClientRect():void 0,canDropIntoFunc:o.canDropIntoFunc,onDidDrop:o.onDidDrop,canDragFunc:o.canDragFunc,canDropFunc:o.canDropFunc,canOrderFunc:o.canOrderFunc,onDoubleClick:o.handleOnTocDoubleClick})},o.getWillRemovePageSubCount=function(){var e=o.props.appConfig,t=o.state.willRemovePage;if(!e||!t)return 0;var n=e.pageStructure.find(function(e){return Object.keys(e)[0]===t.id});return n?n[t.id].length:0},o.onExportClick=function(e){var t=o.props,n=t.appConfig,i=t.currentPageItemId,a=[{layout:n.pages[i].layout,layouts:n.layouts,widgets:n.widgets,views:n.views,sections:n.sections,name:"Column layout",description:"Align widgets by columns",thumbnail:"./thumbnails/image2.png"}],r=a[0];r.layouts&&Object.keys(r.layouts).forEach(function(e){var t=r.layouts[e].without("id");t.content&&Object.keys(t.content).forEach(function(e){var n=t.content[e].without("id");t=t.setIn(["content",e],n)}),r.layouts=r.layouts.set(e,t)}),r.widgets&&Object.keys(r.widgets).forEach(function(e,t){var n=r.widgets[e];r.widgets=r.widgets.set(e,n.without("context","icon","label","manifest","_originManifest","version","useDataSources","id","useDataSourcesEnabled"))}),r.sections&&Object.keys(r.sections).forEach(function(e,t){var n=r.sections[e];r.sections=r.sections.set(e,n.without("id","label"))}),r.views&&Object.keys(r.views).forEach(function(e,t){var n=r.views[e];r.views=r.views.set(e,n.without("id","label"))}),console.log(JSON.stringify({pages:a}))},o.expandIds=[],o.state={currentSelectedItemId:t.currentPageItemId,filterText:"",itemJson:void 0,showSearch:!1,isTemplatePopoverOpen:!1,isTocDragging:!1,isRemovePopoverOpen:!1,willRemovePage:void 0,tocDraggingStatus:"on",isShowLinkSetting:!1},o}return o(t,e),t.prototype.componentWillMount=function(){this.setState({itemJson:this.getItemJsonByAppConfig(this.props.appConfig)})},t.prototype.componentWillUnmount=function(){this.dropZoneInteractable&&(this.dropZoneInteractable.unset(),this.dropZoneInteractable=null)},t.prototype.componentWillReceiveProps=function(e){var t=!1,n={};if(e.currentPageItemId!==this.props.currentPageItemId||e.appConfig!==this.props.appConfig||e.editablePageItemId!==this.props.editablePageItemId)if(t=!0,e.appConfig===this.props.appConfig&&e.editablePageItemId===this.props.editablePageItemId||e.currentPageItemId===this.props.currentPageItemId)if(e.currentPageItemId!==this.props.currentPageItemId){o=f.TreeUtils.activeAndExpandNodesByActiveIds(this.state.itemJson,[e.currentPageItemId]);n={currentSelectedItemId:e.currentPageItemId,itemJson:f.TreeUtils.activeAndExpandNodesByActiveIds(this.state.itemJson,[e.currentPageItemId])},this.expandIds=f.TreeUtils.fetchAllExpandIds(o)}else n={itemJson:this.getItemJsonByAppConfig(e.appConfig)};else{var o=f.TreeUtils.activeAndExpandNodesByActiveIds(this.getItemJsonByAppConfig(e.appConfig),[e.currentPageItemId]);n={currentSelectedItemId:e.currentPageItemId,itemJson:o},this.expandIds=f.TreeUtils.fetchAllExpandIds(o)}t&&this.setState(n)},t.prototype.componentDidMount=function(){var e=this;this.dropZoneRef&&(this.dropZoneInteractable=b.interact(this.dropZoneRef).dropzone({accept:".toc-item-drag",overlap:"pointer",ondropactivate:function(e){},ondropmove:function(e){},ondragenter:function(t){if(e.state.itemJson&&e.treeRef){var n=t.relatedTarget,o=t.dragEvent,i=e.treeRef.getBoundingClientRect().top,a=JSON.parse(n.getAttribute("itemJson"));if(o.client.y<i)e.getFirstItemJson().data.id!==a.data.id&&e.handleOnTocDraggingStatusChange("top");else e.getLastParentItemJson().data.id!==a.data.id&&e.handleOnTocDraggingStatusChange("bottom")}},ondragleave:function(t){e.setState({tocDraggingStatus:"on",itemJson:e.getItemJsonByAppConfig(e.props.appConfig)})},ondrop:function(t){var n=e.state.tocDraggingStatus;if("on"!==n){var o=void 0;if("bottom"===n)o=e.getLastParentItemJson();else o=e.getFirstItemJson();var i=t.relatedTarget,a=JSON.parse(i.getAttribute("itemJson"));e.onDidDrop(a,o,n),e.handleOnTocDraggingStatusChange("on")}},ondropdeactivate:function(e){}}))},t.prototype.resetLinkParam=function(e){var t=this.props.appConfig;v.value="",v.openType=void 0;var n=t.pages[e];n&&n.linkUrl&&"#"!=n.linkUrl&&(v.value=n.linkUrl),n&&n.openTarget&&(v.openType=n.openTarget)},t.prototype.render=function(){var e=this,t=this.state,o=t.itemJson,a=t.showSearch,r=t.willRemovePage,d=t.isShowLinkSetting,g=this.props,b=g.theme,x=g.appConfig,C=l.css(s||(s=i(["\n      height: 100%;\n      position: relative;\n      .toc-dropzone {\n        position: absolute;\n        pointer-events: none;\n      }\n      .page-list-top {\n        padding: 10px ","px;\n        .page-top-btns {\n          margin-right: -",";\n          .page-title {\n            user-select: none;\n          }\n          .btn-link:hover {\n            svg {\n              color: ",";\n            }\n            .add-page-icon {\n              color: ",";\n            }\n          }\n          .my-dropdown {\n            margin-left: -5px;\n            margin-right: 5px;\n          }\n        }\n        .search-btn:hover {\n          svg {\n            color: ",";\n          }\n        }\n        .toc-search-input {\n          border-color: ",";\n          background: transparent;\n          opacity: ",";\n          width: 150px;\n        }\n        .toc-search-input:focus {\n          border-color: ",";\n        }\n        .top-line {\n          height: 1px;\n          width: 100%;\n          background-color: ",";\n          margin-top: 16px;\n        }\n      }\n      .page-tree {\n        height: calc(100% - 65px);\n        overflow-y: auto;\n        margin-top: 6px;\n        .toc-item-dropzone {\n          .toc-item {\n            padding-left: calc(","px - ",");\n          }\n        }\n      }\n    "],["\n      height: 100%;\n      position: relative;\n      .toc-dropzone {\n        position: absolute;\n        pointer-events: none;\n      }\n      .page-list-top {\n        padding: 10px ","px;\n        .page-top-btns {\n          margin-right: -",";\n          .page-title {\n            user-select: none;\n          }\n          .btn-link:hover {\n            svg {\n              color: ",";\n            }\n            .add-page-icon {\n              color: ",";\n            }\n          }\n          .my-dropdown {\n            margin-left: -5px;\n            margin-right: 5px;\n          }\n        }\n        .search-btn:hover {\n          svg {\n            color: ",";\n          }\n        }\n        .toc-search-input {\n          border-color: ",";\n          background: transparent;\n          opacity: ",";\n          width: 150px;\n        }\n        .toc-search-input:focus {\n          border-color: ",";\n        }\n        .top-line {\n          height: 1px;\n          width: 100%;\n          background-color: ",";\n          margin-top: 16px;\n        }\n      }\n      .page-tree {\n        height: calc(100% - 65px);\n        overflow-y: auto;\n        margin-top: 6px;\n        .toc-item-dropzone {\n          .toc-item {\n            padding-left: calc(","px - ",");\n          }\n        }\n      }\n    "])),16,b.components.button.sizes.sm.paddingX,b.colors.black,b.colors.cyans.cyan500,b.colors.black,a?b.colors.grays.gray300:"transparent",a?1:0,b.colors.primary,b.colors.grays.gray200,16,b.components.button.sizes.sm.paddingX);return l.jsx("div",{css:C},l.jsx("div",{ref:function(t){return e.dropZoneRef=t},className:"toc-dropzone h-100 w-100"}),l.jsx("div",{className:"page-list-top"},l.jsx("div",{className:"d-flex justify-content-between w-100"},l.jsx("div",{className:"d-flex"},l.jsx(p.Button,{title:this.formatMessage("search"),icon:!0,size:"sm",color:"link",className:"search-btn",onClick:this.handleSearchBtnClick},l.jsx(p.Icon,{className:"search-icon",size:16,color:b.colors.grays.gray500,icon:n(42)})),l.jsx(m.default,{theme:b,placeholder:this.formatMessage("search"),searchText:this.state.filterText,onSearchTextChange:this.handleSearchTextChange,onSubmit:this.handleSearchSubmit,hideSearchIcon:!0,inputRef:function(t){return e.searchInput=t},onFocus:function(t){return e.setState({showSearch:!0})}})),l.jsx("div",{className:"d-flex page-top-btns"},l.jsx(p.Button,{icon:!0,disabled:!x,onClick:this.handleToggleTemplatePopover,title:this.formatMessage("addPage"),size:"sm",color:"link",className:"add-page-btn"},l.jsx(p.Icon,{className:"add-page-icon",size:16,color:b.colors.cyans.cyan400,icon:n(163)})),l.jsx(u.MyDropDown,{items:this.getAddPageDropDownItems(),theme:b,disabled:!x,uId:"add-page-type",direction:"bottom-start",icon:l.jsx(p.Icon,{className:"add-page-more-icon",size:8,color:b.colors.grays.gray600,icon:n(9)})}))),l.jsx("div",{className:"top-line"})),l.jsx(f.Tree,{forwardRef:function(t){e.treeRef=t},className:"page-tree",hideRoot:!0,itemJson:l.Immutable(o),onClickItem:this.handleClickItem,handleExpand:this.handleExpand}),x&&l.jsx(h.default,{theme:b,toggle:this.handleToggleTemplatePopover,title:this.formatMessage("newPage"),description:this.formatMessage("chooseTemplate"),isOpen:this.state.isTemplatePopoverOpen,template:x.template,onSelected:this.handleChooseTemplate,intl:this.props.intl}),r&&l.jsx(I.default,{theme:b,toggle:this.handleToggleRemovePopover,onClosed:function(t){y===r.id&&e.setState({isShowLinkSetting:!1}),t&&r&&e.props.removePage(r.id)},title:this.formatMessage("tip"),isOpen:this.state.isRemovePopoverOpen,intl:this.props.intl},l.jsx("div",{style:{fontSize:b.typography.fontSizeSm}},this.formatMessage("removePageTip",{subCount:this.getWillRemovePageSubCount(),label:r.label}))),d&&l.jsx(c.LinkSettingPopup,{showDialog:d,isLinkPageSetting:!0,title:x.pages[y].label,pisition:"right",linkParam:v,onSettingCancel:function(){e.setState({isShowLinkSetting:!1})},onSettingConfirm:this.handleSettingLinkConfirm}))},t}(l.React.PureComponent);t.default=x},157:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),s=n(11),l=n(41),c=[{width:"100%",mode:r.PageMode.FitWindow,layout:{LARGE:"default-layout-desktop"},layouts:{"default-layout-desktop":{type:"FIXED"}}},{width:"100%",mode:r.PageMode.AutoScroll,layout:{LARGE:"default-layout-desktop"},layouts:{"default-layout-desktop":{type:"FLOW"}}}],p=function(e){function t(t){var n=e.call(this,t)||this;return n.handlModelClosed=function(e){n.props.onSelected(e?r.Immutable(c[n.state.selectedIndex]):void 0)},n.onSelected=function(e){n.setState({selectedIndex:e})},n.formatMessage=function(e){return n.props.intl.formatMessage({id:e,defaultMessage:s.default[e]})},n.getStyle=function(){var e=n.props.theme;return r.css(a||(a=i(["\n      margin-left: 20px;\n      margin-right: 30px;\n      .item {\n        width: 198px;\n        height: 280px;\n        user-select: none;\n        margin-left: 25px;\n        &.item-first {\n          margin-left: 0px;\n        }\n        .img-container {\n          width: 100%;\n          height: 148px;\n          cursor: pointer;\n          border: 1px solid ",";\n          &.active {\n            border: 1px solid ",";\n          }\n          .thumbnail {\n            width: 180px;\n          }\n        }\n\n        .name {\n          margin-top: 26px;\n          font-size: 14px;\n        }\n        .description {\n          margin-top: 13px;\n          font-size: 12px;\n          color: ",";\n        }\n      }\n    "],["\n      margin-left: 20px;\n      margin-right: 30px;\n      .item {\n        width: 198px;\n        height: 280px;\n        user-select: none;\n        margin-left: 25px;\n        &.item-first {\n          margin-left: 0px;\n        }\n        .img-container {\n          width: 100%;\n          height: 148px;\n          cursor: pointer;\n          border: 1px solid ",";\n          &.active {\n            border: 1px solid ",";\n          }\n          .thumbnail {\n            width: 180px;\n          }\n        }\n\n        .name {\n          margin-top: 26px;\n          font-size: 14px;\n        }\n        .description {\n          margin-top: 13px;\n          font-size: 12px;\n          color: ",";\n        }\n      }\n    "])),e.colors.grays.gray400,e.colors.cyans.cyan500,e.colors.grays.gray600)},n.state={selectedIndex:0},n}return o(t,e),t.prototype.render=function(){var e=this,t=this.props,o=t.theme,i=t.toggle,a=t.title,s=t.intl,c=t.isOpen,p=this.state.selectedIndex;return r.jsx(l.default,{theme:o,toggle:i,onClosed:this.handlModelClosed,title:a,isOpen:c,intl:s},r.jsx("div",{css:this.getStyle()},r.jsx("div",{className:"d-flex justify-content-between"},r.jsx("div",{className:"item item-first d-flex flex-column"},r.jsx("div",{className:"img-container d-flex align-items-center justify-content-center "+(0===p?"active":""),onClick:function(t){return e.onSelected(0)}},r.jsx("img",{className:"thumbnail",src:n(158)})),r.jsx("div",{className:"name w-100 text-center"},this.formatMessage("fullScreenApp")),r.jsx("div",{className:"description w-100 text-left"},this.formatMessage("fullScreenAppTip"))),r.jsx("div",{className:"item d-flex flex-column"},r.jsx("div",{className:"img-container d-flex align-items-center justify-content-center "+(1===p?"active":""),onClick:function(t){return e.onSelected(1)}},r.jsx("img",{className:"thumbnail",src:n(159)})),r.jsx("div",{className:"name w-100 text-center"},this.formatMessage("scrollingPage")),r.jsx("div",{className:"description w-100 text-left"},this.formatMessage("scrollingPageTip"))))))},t}(r.React.PureComponent);t.default=p},158:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjE0OHB4IiB2aWV3Qm94PSIwIDAgMTk4IDE0OCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4NCiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4NCiAgICA8dGl0bGU+VDI8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxnIGlkPSJTdHlsZSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSIxNC1Qb3AtdXAtJmFtcDstTW9kYWwiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC01MTEuMDAwMDAwLCAtODkyLjAwMDAwMCkiPg0KICAgICAgICAgICAgPGcgaWQ9Ik5ldy1wYWdlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0MC4wMDAwMDAsIDc4NS4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICA8ZyBpZD0iVDMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ3NC4wMDAwMDAsIDExMC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IkxheW91dCIgc3Ryb2tlPSIjMDA2MDcxIiBmaWxsLW9wYWNpdHk9IjAuMiIgZmlsbD0iIzAwNDI0RiIgeD0iNDIuNSIgeT0iNDUuNSIgd2lkdGg9IjU5IiBoZWlnaHQ9IjQ5Ij48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxwYXRoIGlkPSJBcnJvdyIgZD0iTTcyLjUsOC41IEw3Mi41LDMyLjUgTDc2LjUsMzIuNSBMNzIsNDEuNSBMNjcuNSwzMi41IEw3MS41LDMyLjUgTDcxLjUsOC41IEw2Ny41LDguNSBMNzIsLTAuNSBMNzYuNSw4LjUgTDcyLjUsOC41IFoiIGZpbGw9IiM0RDU0NUIiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMiwyIEwyLDIwIEwwLDIwIEwwLDIgTDAsMCBMMjAsMCBMMjAsMiBMMiwyIFogTTE5MCwyIEwxNzIsMiBMMTcyLDAgTDE5MiwwIEwxOTIsMjAgTDE5MCwyMCBMMTkwLDIgWiBNMiwxNDAgTDIwLDE0MCBMMjAsMTQyIEwwLDE0MiBMMCwxMjIgTDIsMTIyIEwyLDE0MCBaIE0xOTAsMTQwIEwxOTAsMTIyIEwxOTIsMTIyIEwxOTIsMTQyIEwxNzIsMTQyIEwxNzIsMTQwIEwxOTAsMTQwIFoiIGlkPSJBcmVhIiBmaWxsPSIjMzUzQjQwIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgIDxwYXRoIGlkPSJBcnJvdyIgZD0iTTcyLjUsMTA3LjUgTDcyLjUsMTMzLjUgTDc2LjUsMTMzLjUgTDcyLDE0Mi41IEw2Ny41LDEzMy41IEw3MS41LDEzMy41IEw3MS41LDEwNy41IEw2Ny41LDEwNy41IEw3Miw5OC41IEw3Ni41LDEwNy41IEw3Mi41LDEwNy41IFoiIGZpbGw9IiM0RDU0NUIiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICA8cGF0aCBpZD0iQXJyb3ciIGQ9Ik0zMS41LDcwLjUgTDEwLjUsNzAuNSBMMTAuNSw3NC41IEwxLjUsNzAgTDEwLjUsNjUuNSBMMTAuNSw2OS41IEwzMS41LDY5LjUgTDMxLjUsNjUuNSBMNDAuNSw3MCBMMzEuNSw3NC41IEwzMS41LDcwLjUgWiIgZmlsbD0iIzRENTQ1QiIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgIDxwYXRoIGlkPSJBcnJvdyIgZD0iTTE4My41LDcwLjUgTDExNC41LDcwLjUgTDExNC41LDc0LjUgTDEwNS41LDcwIEwxMTQuNSw2NS41IEwxMTQuNSw2OS41IEwxODMuNSw2OS41IEwxODMuNSw2NS41IEwxOTIuNSw3MCBMMTgzLjUsNzQuNSBMMTgzLjUsNzAuNSBaIiBmaWxsPSIjNEQ1NDVCIiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},159:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjE0OHB4IiB2aWV3Qm94PSIwIDAgMTk4IDE0OCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4NCiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4NCiAgICA8dGl0bGU+VDE8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxnIGlkPSJTdHlsZSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSIxNC1Qb3AtdXAtJmFtcDstTW9kYWwiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03MS4wMDAwMDAsIC04OTIuMDAwMDAwKSI+DQogICAgICAgICAgICA8ZyBpZD0iTmV3LXBhZ2UiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQwLjAwMDAwMCwgNzg1LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgIDxnIGlkPSJUMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzEuMDAwMDAwLCAxMDcuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUiIGZpbGw9IiMzNTNCNDAiIG9wYWNpdHk9IjAuNCIgeD0iMy41NTI3MTM2OGUtMTUiIHk9IjAiIHdpZHRoPSI0MCIgaGVpZ2h0PSIxNDgiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgZmlsbD0iIzM1M0I0MCIgb3BhY2l0eT0iMC40IiB4PSIxNTgiIHk9IjAiIHdpZHRoPSI0MCIgaGVpZ2h0PSIxNDgiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQwLDAgTDQwLDE0OCIgaWQ9IkRhc2gtbGluZSIgc3Ryb2tlPSIjNEQ1NDVCIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2UtZGFzaGFycmF5PSIzLDMiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE1OCwwIEwxNTgsMTQ4IiBpZD0iRGFzaC1saW5lIiBzdHJva2U9IiM0RDU0NUIiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIHN0cm9rZS1kYXNoYXJyYXk9IjMsMyI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNTYuNSwxNS41IEw1Ni41LDc0LjUgTDE0MS41LDc0LjUgTDE0MS41LDE1LjUgTDU2LjUsMTUuNSBaIE01Ni41LDgxLjUgTDU2LjUsMTIwLjUgTDk1LjUsMTIwLjUgTDk1LjUsODEuNSBMNTYuNSw4MS41IFogTTEwMi41LDgxLjUgTDEwMi41LDEyMC41IEwxNDEuNSwxMjAuNSBMMTQxLjUsODEuNSBMMTAyLjUsODEuNSBaIiBpZD0iTGF5b3V0IiBzdHJva2U9IiMwMDYwNzEiIGZpbGwtb3BhY2l0eT0iMC4yIiBmaWxsPSIjMDA0MjRGIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJTY3JvbGwtYmFyIiBmaWxsPSIjNEQ1NDVCIiB4PSIxOTAiIHk9IjgiIHdpZHRoPSIzIiBoZWlnaHQ9IjgwIiByeD0iMS41Ij48L3JlY3Q+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+"},16:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),s=n(2),l=n(1),c=function(e){function t(t){var n=e.call(this,t)||this;return n.onDropDownToggle=function(e){e.stopPropagation(),n.state.isOpen?document.onclick=void 0:(document.onclick&&document.onclick(e),document.onclick=function(e){return n.setState({isOpen:!1}),document.onclick=void 0,!1}),n.setState({isOpen:!n.state.isOpen})},n.getStyle=function(){var e=n.props.theme;return r.css(a||(a=i(["\n      .popover-body{\n        box-shadow: 0 2px 6px ",";\n        padding: 0;\n        .item-text{\n          width: 100%;\n          color:",";\n          padding: 10px 10px;\n          user-select:none;\n          font-size: ",";\n        }\n\n        .item-text:hover{\n          cursor:pointer;\n          background-color: ",";\n        }\n\n        .item-line{\n          width: 100%;\n          height: 1px;\n          background-color: ",";\n        }\n      }\n    "],["\n      .popover-body{\n        box-shadow: 0 2px 6px ",";\n        padding: 0;\n        .item-text{\n          width: 100%;\n          color:",";\n          padding: 10px 10px;\n          user-select:none;\n          font-size: ",";\n        }\n\n        .item-text:hover{\n          cursor:pointer;\n          background-color: ",";\n        }\n\n        .item-line{\n          width: 100%;\n          height: 1px;\n          background-color: ",";\n        }\n      }\n    "])),r.polished.rgba(e.colors.white,.2),e.colors.black,e.typography.fontSizeBase,n.props.theme.colors.primary,n.props.theme.colors.grays.gray300)},n.onItemClick=function(e,t){document.onclick=void 0,n.setState({isOpen:!1}),t.event(e),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},n.state={isOpen:!1},n}return o(t,e),t.prototype.render=function(){var e=this,t=this.props,o=t.items,i=t.icon,a=t.direction,c=t.disabled;return r.jsx("div",{className:"my-dropdown",id:"toc-item-my-dropdown-"+this.props.uId,css:this.getStyle()},r.jsx(s.Button,{disabled:c,size:"sm",color:"link",icon:!0,className:" my-dropdown-btn h-100",onClick:this.onDropDownToggle},i||r.jsx(s.Icon,{size:12,icon:n(22)})),r.jsx(s.Popover,{css:this.getStyle(),placement:a||"right-start",isOpen:this.state.isOpen,target:"toc-item-my-dropdown-"+this.props.uId,hideArrow:!0,modifiers:{preventOverflow:{escapeWithReference:!0},offset:{offset:"0, 0"}}},r.jsx(s.PopoverBody,{className:"justify-content-between"},o.map(function(t,n){return t.visible&&r.jsx(l.Fragment,{key:n},r.jsx("div",{className:"item-text text-left",onClick:function(n){return e.onItemClick(n,t)}},t.label))}))))},t}(r.React.PureComponent);t.MyDropDown=c},160:function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("path",{d:"M6 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm0 1a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5zM6 1c-2.124 0-3.714.967-4.867 3C2.286 6.033 3.876 7 6 7s3.714-.967 4.867-3C9.714 1.967 8.124 1 6 1zm0 7C3.333 8 1.333 6.667 0 4c1.333-2.667 3.333-4 6-4s4.667 1.333 6 4c-1.333 2.667-3.333 4-6 4z"});function r(e){return i.createElement("svg",o({width:12,height:8,viewBox:"0 0 12 8"},e),a)}e.exports=r,r.default=r},161:function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("path",{d:"M6.62 6.366L4.635 4.379a1.5 1.5 0 0 0 1.987 1.987zm.746-.745a1.5 1.5 0 0 0-1.987-1.987l1.987 1.987zM3.899 3.644l-.825-.825C2.322 3.314 1.678 4.038 1.133 5 2.286 7.033 3.876 8 6 8c.702 0 1.345-.106 1.934-.32L7.356 7.1A2.5 2.5 0 0 1 3.9 3.645zm.745-.745A2.5 2.5 0 0 1 8.1 6.355l.826.826c.752-.495 1.396-1.219 1.941-2.181C9.714 2.967 8.124 2 6 2c-.702 0-1.345.106-1.934.32l.578.579zM2.354 2.1L1.155.9A.527.527 0 0 1 1.9.154l1.4 1.4C4.107 1.184 5.008 1 6 1c2.667 0 4.667 1.333 6 4-.634 1.268-1.419 2.235-2.355 2.9l1.2 1.2a.527.527 0 0 1-.745.746l-1.4-1.4C7.893 8.816 6.992 9 6 9 3.333 9 1.333 7.667 0 5c.634-1.268 1.419-2.235 2.355-2.9z"});function r(e){return i.createElement("svg",o({width:12,height:10,viewBox:"0 0 12 10"},e),a)}e.exports=r,r.default=r},162:function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("path",{d:"M2 5.055V11h2V8a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h2V4.969L6.043 1 2 5.055zM1 6.058l-.149.15a.497.497 0 0 1-.705 0 .501.501 0 0 1 0-.708L5.338.293a.995.995 0 0 1 1.41 0l5.106 5.121a.501.501 0 0 1 0 .707.497.497 0 0 1-.705 0L11 5.971V11a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V6.058zM5 11h2V8H5v3z",fill:"currentColor",fillRule:"nonzero"});function r(e){return i.createElement("svg",o({width:12,height:12,viewBox:"0 0 12 12"},e),a)}e.exports=r,r.default=r},163:function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("path",{d:"M7 7V1a1 1 0 1 1 2 0v6h6a1 1 0 1 1 0 2H9v6a1 1 0 1 1-2 0V9H1a1 1 0 1 1 0-2h6z",fill:"currentColor",fillRule:"nonzero"});function r(e){return i.createElement("svg",o({width:16,height:16,viewBox:"0 0 16 16"},e),a)}e.exports=r,r.default=r},164:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(3),l=n(11),c=n(38),p=n(16),d=n(40),g=n(2);t.TocItemIdSplite="-toc-";var u;!function(e){e.Widget="WIDGET",e.Section="SECTION",e.View="View",e.Layout="LAYOUT",e.Label="Label"}(u=t.OutlineType||(t.OutlineType={}));var m,f,h,I,b=function(e){function a(o){var a=e.call(this,o)||this;return a.getTotalExpandedNumOverItem=function(e,t){var n=0,o=!1;if(t.id===e)return{isFind:!0,total:n};var i=t.children;return t.isExpand&&i&&i.find(function(t){n++;var i=a.getTotalExpandedNumOverItem(e,t),r=i.isFind,s=i.total;if(r)return o=!0,n+=s,!0;n+=s}),{isFind:o,total:n}},a.singleAndDoubleClickTimeout=void 0,a.handleOnTocDoubleClick=function(e,t){a.singleAndDoubleClickTimeout&&(clearTimeout(a.singleAndDoubleClickTimeout),a.singleAndDoubleClickTimeout=void 0),e.allowEditable&&a.setState({editableItemId:e.id})},a.handleClickItem=function(e,t){a.singleAndDoubleClickTimeout&&(clearTimeout(a.singleAndDoubleClickTimeout),a.singleAndDoubleClickTimeout=void 0),a.singleAndDoubleClickTimeout=setTimeout(function(){e.type!==u.Label&&e.type!==u.Layout&&e.type!==u.View?a.state.currentSelectedItemId!==e.id?e.type===u.Label||e.type===u.Layout||e.type===u.View?a.setState({itemJson:Object.assign({},a.state.itemJson)},function(){a.props.onClickItem(e)}):a.setState({currentSelectedItemId:e.id,itemJson:g.TreeUtils.activeAndExpandNodesByActiveIds(a.state.itemJson,[e.id])},function(){a.props.onClickItem(e)}):a.handleExpand(e):a.handleExpand(e)},200)},a.handleExpand=function(e){var t=a.expandIds;e.isExpand?t.indexOf(e.id)>-1&&t.splice(t.indexOf(e.id),1):t.indexOf(e.id)<0&&t.push(e.id),a.setState({itemJson:g.TreeUtils.expandNodesByExpandIds(a.state.itemJson,t)})},a.handleArrowClick=function(e){a.handleExpand(e)},a.handleRemove=function(e){if(e.type===u.Widget)s.getAppConfigAction().removeWidget(e.data.id,!0).exec();else if(e.type===u.Section)s.getAppConfigAction().removeSection(e.data.id,!0).exec();else if(e.type===u.View){var n=e.id.indexOf(t.TocItemIdSplite);if(n<0)return;s.getAppConfigAction().removeView(e.data.id,e.id.substring(0,n),!1).exec()}},a.handleDuplicate=function(e){var n=e.id.split(t.TocItemIdSplite);if(e.type===u.Widget){var o=(i=s.getAppConfigAction()).duplicateWidget(e.data.id,n[0]);i.exec(),o&&r.getAppStore().dispatch(r.appActions.selectionChanged(o))}else if(e.type===u.Section){var i;o=(i=s.getAppConfigAction()).duplicateSection(e.data.id,n[0]);i.exec(),o&&r.getAppStore().dispatch(r.appActions.selectionChanged(o))}else e.type===u.View&&s.getAppConfigAction().duplicateView(n[1],n[0]).exec()},a.handleRename=function(e,t){return a.setState({editableItemId:""}),!(!t||""===t)&&(e.type===u.Widget?s.getAppConfigAction().editWidgetProperty(e.data.id,"label",t).exec():e.type===u.Section?s.getAppConfigAction().editSectionProperty(e.data.id,"label",t).exec():e.type===u.View&&s.getAppConfigAction().editView(e.data.set("label",t)).exec(),!0)},a.handleSearchTextChange=function(e){a.setState({filterText:e},function(){a.setState({itemJson:a.getItemJsonByAppConfig()})})},a.handleSearchSubmit=function(e){a.setState({filterText:e},function(){a.setState({itemJson:a.getItemJsonByAppConfig()})})},a.handleSearchBtnClick=function(e){e.stopPropagation(),a.state.showSearch&&a.handleSearchTextChange(""),a.setState({showSearch:!a.state.showSearch})},a.handleSearchOpened=function(){a.searchInput&&(a.searchInput.select(),a.searchInput.focus())},a.formatMessage=function(e){return a.props.intl.formatMessage({id:e,defaultMessage:l.default[e]})},a.getItemJsonByCommonJson=function(e,t,o,i,r){var s=void 0,l=r.appConfig;i===u.Widget?s=l.widgets[e.id]:i===u.Section?s=l.sections[e.id]:i===u.View&&(s=l.views[e.id]);var c=a.state.currentSelectedItemId,p=v(e,i),d=a.expandIds.indexOf(p)>-1,g={id:p,data:s,label:s.label,index:t,level:o,type:i,allowEditable:!0,isExpand:d,isActive:c===p,renderItem:a.renderOutlineContent};return g.icon=s.icon,s.icon||(g.isIconSvg=!0,i===u.Widget?g.icon=n(165):i===u.Section?g.icon=n(43):i===u.View&&(g.icon=n(43))),g},a.getItemJsonByView=function(e,t,n,o,i){var s=a.getItemJsonByCommonJson({id:e,sectionId:t},n,o,u.View,i);s.allowEditable=!1;var l=a.getWidgetsAndSectionsInContainer(r.ContainerType.View,e,i),c=l.widgets,p=l.sections;return s.children=a.getItemJsonsBySectionsAndWidgets(p,c,s.level+1,i),s},a.getItemJsonBySection=function(e,t,n,o){var i=o.appConfig,r=a.getItemJsonByCommonJson(e,t,n,u.Section,o),s=i.sections[e.id];return s.views&&(r.children=s.views.map(function(e,t){return a.getItemJsonByView(e,s.id,t,n+1,o)})),r},a.getItemJsonBySizeLayouts=function(e,t,o,i,s){var l=s.appConfig,c=s.browserSizeMode,p=r.utils.findLayoutId(e,c,l.mainSizeMode),d=a.expandIds,g=a.state.currentSelectedItemId,m=d.indexOf(p)>-1,f={id:p,label:t,index:o,level:i,icon:n(166),isIconSvg:!0,type:u.Layout,isExpand:m,isActive:g===p,renderItem:a.renderOutlineContent},h=a.getWidgetsInLayout(l.layouts[p])||[],I=a.getSectionsInLayout(l.layouts[p])||[];return f.children=a.getItemJsonsBySectionsAndWidgets(I,h,f.level+1,s),f},a.getItemJsonByWidget=function(e,t,n,o){var i=o.appConfig,r=a.getItemJsonByCommonJson(e,t,n,u.Widget,o),s=i.widgets[e.id];if(s.layouts)if(1===Object.keys(s.layouts).length){var l=s.layouts[Object.keys(s.layouts)[0]];r.children=a.getItemJsonBySizeLayouts(l,"",0,n,o).children}else if("list"===s.manifest.name){l=s.layouts[s.manifest.properties.layouts[0].name];r.children=a.getItemJsonBySizeLayouts(l,"",0,n,o).children}else r.children=Object.keys(s.layouts).map(function(e,t){var i=s.layouts[e],r=e;if(s.manifest.properties.layouts&&s.manifest.properties.layouts.length>0){var l=s.manifest.properties.layouts.find(function(t){return t.name===e});l&&(r=l.label)}return a.getItemJsonBySizeLayouts(i,r,t,n+1,o)});return r},a.getWidgetsAndSectionsInContainer=function(e,t,n){var o,i,s=n.appConfig,l=n.browserSizeMode;if(e===r.ContainerType.Header||e===r.ContainerType.Footer)if(s[e]){var c=r.utils.findLayoutId(s[e].layout,l,s.mainSizeMode);o=a.getWidgetsInLayout(s.layouts[c])||[],i=a.getSectionsInLayout(s.layouts[c])||[]}else o=[],i=[];else if(s[e]&&s[e][t]){c=r.utils.findLayoutId(s[e][t].layout,l,s.mainSizeMode);o=a.getWidgetsInLayout(s.layouts[c])||[],i=a.getSectionsInLayout(s.layouts[c])||[]}else o=[],i=[];return{widgets:o,sections:i}},a.getItemJsonByAppConfig=function(e){e=e||a.props;for(var t=[],n=[a.formatMessage("header"),a.formatMessage("body"),a.formatMessage("footer")],o=a.state.filterText,i=a.expandIds,l=e.appConfig,c=e.currentPageId,p=a.state.currentSelectedItemId,d={id:"ROOT",type:u.Label,children:t,label:""},m=0;m<3;m++){var f=m+"-"+n[m],h=p===f;h&&i.indexOf(f)<0&&i.push(f);var I=i.indexOf(f)>-1,b={label:n[m],id:f,index:m,level:0,mustShowArrow:!0,isActive:h,isExpand:I,type:u.Label,className:"outline-title-item",renderRightContent:a.renderTitleRightContent,arrowIcon:function(e){return r.jsx("div",null)}};t.push(b)}if(!l)return d;if(t.forEach(function(t){var n,o;t.label===a.formatMessage("header")?(n=r.ContainerType.Header,o="header"):t.label===a.formatMessage("body")?(n=r.ContainerType.Page,o=c,s.appConfigUtils.isRealPage(l,c)?a.lastPageId=c:o=a.lastPageId):(n=r.ContainerType.Footer,o="footer");var p=a.getWidgetsAndSectionsInContainer(n,o,e),d=p.widgets,g=p.sections;t.children=a.getItemJsonsBySectionsAndWidgets(g,d,t.level,e),t.children&&t.children.length>0&&(t.isExpand=!0,i.indexOf(t.id)<0&&i.push(t.id))}),o&&""!==o){var v=g.TreeUtils.filterTree(d,o.trim());d=g.TreeUtils.expandFilteredNodes(v,o.trim()),i=g.TreeUtils.fetchAllExpandIds(d),s.builderAppSync.publishChangeSelectionToApp(null)}return d},a.getItemJsonsBySectionsAndWidgets=function(e,t,n,o){var i=[];return i.push.apply(i,e.map(function(e,t){return a.getItemJsonBySection(e,t,n,o)})),i.push.apply(i,t.map(function(e,t){return a.getItemJsonByWidget(e,t,n,o)})),i},a.getDropDownItems=function(e){if(e.type!==u.Section&&e.type!==u.View&&e.type!==u.Widget)return[];var t=[],n=r.Immutable({label:a.formatMessage("remove"),event:function(t){a.handleRemove(e),t.stopPropagation()},visible:!0});t.push(n);var o=r.Immutable({label:a.formatMessage("duplicate"),event:function(t){a.handleDuplicate(e),t.stopPropagation()},visible:!0});t.push(o);var i=r.Immutable({label:a.formatMessage("rename"),event:function(t){a.handleOnTocDoubleClick(e,t)},visible:!0});return t.push(i),t},a.renderTitleRightContent=function(e){var t=a.props.theme,o=r.css(m||(m=i(["\n      margin-right:calc(16px - ",");\n      .btn {\n        color: ",";\n      }\n      .btn:hover {\n        color: ",";\n      }\n      .title-arrow {\n        transform-origin: center;\n        transform: ",";\n        transition: transform .5s;\n      }\n\n    "],["\n      margin-right:calc(16px - ",");\n      .btn {\n        color: ",";\n      }\n      .btn:hover {\n        color: ",";\n      }\n      .title-arrow {\n        transform-origin: center;\n        transform: ",";\n        transition: transform .5s;\n      }\n\n    "])),t.components.button.sizes.sm.paddingX,t.colors.grays.gray600,t.colors.black,"rotate("+(e.isExpand?180:0)+"deg)");return r.jsx("div",{css:o},r.jsx(g.Button,{title:e.isExpand?a.formatMessage("unexpand"):a.formatMessage("expand"),icon:!0,color:"link",size:"sm"},r.jsx(g.Icon,{className:"title-arrow",icon:n(167),size:14})))},a.renderCommonRightContent=function(e){var t=a.props.theme,n=a.getDropDownItems(e);if(n.length<1)return r.jsx("div",null);var o=r.css(f||(f=i(["\n      margin-right:calc(16px - ",");\n      .dropDown {\n        visibility: hidden;\n        .btn {\n          color: ",";\n        }\n        .btn:hover {\n          color: ",";\n        }\n      }\n      \n\n    "],["\n      margin-right:calc(16px - ",");\n      .dropDown {\n        visibility: hidden;\n        .btn {\n          color: ",";\n        }\n        .btn:hover {\n          color: ",";\n        }\n      }\n      \n\n    "])),t.components.button.sizes.sm.paddingX,t.colors.grays.gray600,t.colors.black);return r.jsx("div",{className:"d-flex",css:o},r.jsx("div",{title:a.formatMessage("more"),className:"dropDown page-item-icon"},r.jsx(p.MyDropDown,{uId:e.id,theme:t,items:n})))},a.renderOutlineContent=function(e){var t=a.props,n=t.intl,o=t.theme,s=a.state.editableItemId,l=r.css(h||(h=i(["\n      :hover {\n        .dropDown {\n          visibility: visible;\n          z-index: 2;\n        }\n      }\n    "],["\n      :hover {\n        .dropDown {\n          visibility: visible;\n          z-index: 2;\n        }\n      }\n    "])));return r.jsx(c.DndTocContent,{intl:n,itemJson:e,onArrowClick:a.handleArrowClick,editable:s===e.id,theme:o,renameItem:a.handleRename,tocCss:l})},a.getStyle=function(){var e=a.props.theme,t=a.state.showSearch;return r.css(I||(I=i(["\n      height: 100%;\n      padding-bottom: 10px;\n      .outline-list-top {\n        height: ",";\n        padding: 10px ","px;\n        .outline-top-btns {\n          margin-right: -",";\n          .outline-title {\n            user-select: none;\n          }\n          .btn-link:hover {\n            svg {\n              color: ",";\n            }\n          }\n        }\n        .toc-search-input {\n          margin-top: calc(12px - ",");\n          background: transparent;\n        }\n      }\n      .outline-tree-container {\n        height: calc(100% - ","px);\n        overflow-y: auto;\n        margin-top: 6px;\n        .outline-tree {\n          >div {\n            overflow: hidden;\n            >div {\n              overflow-x: auto;\n              >.collapse {\n                min-width: fit-content;\n              }\n            }\n          }\n          .tree-item-common {\n            padding-left: ","px;\n          }\n          .outline-title-item {\n            .tree-item-common {\n              background-color:",";\n            }\n            .tree-item-common:hover {\n              background-color:",";\n            }\n          }\n          .toc-item-dropzone {\n            .toc-item {\n              padding-left: calc(","px - ",");\n            }\n          }\n        }\n      }\n      \n    "],["\n      height: 100%;\n      padding-bottom: 10px;\n      .outline-list-top {\n        height: ",";\n        padding: 10px ","px;\n        .outline-top-btns {\n          margin-right: -",";\n          .outline-title {\n            user-select: none;\n          }\n          .btn-link:hover {\n            svg {\n              color: ",";\n            }\n          }\n        }\n        .toc-search-input {\n          margin-top: calc(12px - ",");\n          background: transparent;\n        }\n      }\n      .outline-tree-container {\n        height: calc(100% - ","px);\n        overflow-y: auto;\n        margin-top: 6px;\n        .outline-tree {\n          >div {\n            overflow: hidden;\n            >div {\n              overflow-x: auto;\n              >.collapse {\n                min-width: fit-content;\n              }\n            }\n          }\n          .tree-item-common {\n            padding-left: ","px;\n          }\n          .outline-title-item {\n            .tree-item-common {\n              background-color:",";\n            }\n            .tree-item-common:hover {\n              background-color:",";\n            }\n          }\n          .toc-item-dropzone {\n            .toc-item {\n              padding-left: calc(","px - ",");\n            }\n          }\n        }\n      }\n      \n    "])),t?82:44,16,e.components.button.sizes.sm.paddingX,e.colors.black,e.components.button.sizes.sm.paddingY,t?82:44,8,r.polished.rgba(e.colors.grays.gray200,.6),r.polished.rgba(e.colors.grays.gray200,.6),16,e.components.button.sizes.sm.paddingX)},a.state={editableItemId:o.editableItemId,currentSelectedItemId:o.currentSelectedItemId,filterText:"",itemJson:void 0,showSearch:!1},a.expandIds=[],a}return o(a,e),a.prototype.componentWillMount=function(){this.setState({itemJson:this.getItemJsonByAppConfig()})},a.prototype.componentWillReceiveProps=function(e){var t=this.props,n=!1,o=void 0;if(e.currentSelectedItemId!==this.state.currentSelectedItemId||e.appConfig!==t.appConfig||e.currentPageId!==t.currentPageId||e.browserSizeMode!==t.browserSizeMode){if(n=!0,e.appConfig===t.appConfig&&e.currentPageId===t.currentPageId&&e.browserSizeMode===t.browserSizeMode||e.currentSelectedItemId===this.state.currentSelectedItemId)if(e.currentSelectedItemId!==this.state.currentSelectedItemId){i=g.TreeUtils.activeAndExpandNodesByActiveIds(this.state.itemJson,[e.currentSelectedItemId]);o={currentSelectedItemId:e.currentSelectedItemId,itemJson:i},this.expandIds=g.TreeUtils.fetchAllExpandIds(i)}else o={itemJson:this.getItemJsonByAppConfig(e)};else{var i=g.TreeUtils.activeAndExpandNodesByActiveIds(this.getItemJsonByAppConfig(e),[e.currentSelectedItemId]);o={currentSelectedItemId:e.currentSelectedItemId,itemJson:i},this.expandIds=g.TreeUtils.fetchAllExpandIds(i)}n&&this.setState(o)}},a.prototype.getWidgetsInLayout=function(e){return e&&e.content?Object.keys(e.content).filter(function(t){return e.content[t].type===r.LayoutItemType.Widget&&e.content[t].widgetId&&!e.content[t].isPending}).map(function(t){return{id:e.content[t].widgetId,layoutId:e.id,layoutItemId:t}}):[]},a.prototype.getSectionsInLayout=function(e){return e&&e.content?Object.keys(e.content).filter(function(t){return e.content[t].type===r.LayoutItemType.Section&&e.content[t].sectionId&&!e.content[t].isPending}).map(function(t){return{id:e.content[t].sectionId,layoutId:e.id,layoutItemId:t}}):[]},a.prototype.render=function(){var e=this,t=this.state,o=t.itemJson,i=t.showSearch,a=this.props.theme;return r.jsx("div",{css:this.getStyle()},r.jsx("div",{className:"outline-list-top"},r.jsx("div",{className:"d-flex justify-content-between"},r.jsx("div",{className:"outline-title h4"},this.formatMessage("outline")),r.jsx("div",{className:"d-flex outline-top-btns"},r.jsx(g.Button,{title:this.formatMessage("search"),size:"sm",color:"link",icon:!0,className:"search-btn",onClick:this.handleSearchBtnClick},r.jsx(g.Icon,{className:"search-icon",size:16,color:a.colors.grays.gray500,icon:n(42)})))),r.jsx(g.Collapse,{isOpen:i,onEntered:this.handleSearchOpened},r.jsx(d.default,{theme:a,placeholder:this.formatMessage("search"),searchText:this.state.filterText,onSearchTextChange:this.handleSearchTextChange,onSubmit:this.handleSearchSubmit,hideSearchIcon:!0,inputRef:function(t){return e.searchInput=t}}))),r.jsx("div",{className:"w-100 outline-tree-container"},r.jsx(g.Tree,{hideRoot:!0,className:"outline-tree",itemJson:r.Immutable(o),onClickItem:this.handleClickItem,handleExpand:this.handleExpand})))},a}(r.React.PureComponent);function v(e,n){return n===u.Widget?e.layoutId+t.TocItemIdSplite+e.layoutItemId+t.TocItemIdSplite+e.id:n===u.Section?e.layoutId+t.TocItemIdSplite+e.layoutItemId+t.TocItemIdSplite+e.id:n===u.View?e.sectionId+t.TocItemIdSplite+e.id:e.id}t._OutlineList=b,t.default=r.ReactRedux.connect(function(e){var t=e.appStateInBuilder&&e.appStateInBuilder.appRuntimeInfo.selection,n=e.appStateInBuilder&&e.appStateInBuilder.appConfig,o=t&&n.layouts[t.layoutId]&&n.layouts[t.layoutId].content&&n.layouts[t.layoutId].content[t.layoutItemId],i=void 0;return o&&(o.type===r.LayoutItemType.Section?i=v(a({id:o.sectionId},t),u.Section):o.type===r.LayoutItemType.Widget&&(i=v(a({id:o.widgetId},t),u.Widget))),{currentSelectedItemId:i}})(b),t.getOutlineItemId=v},165:function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("path",{d:"M16.572 18.746V32h13.257V18.746H16.572zM0 32h13.257V18.746H0V32zM0 2.179v13.254h13.257V2.179H0zM22.629 0l-9.371 9.377 9.371 9.369L32 9.377 22.629 0z"});function r(e){return i.createElement("svg",o({width:32,height:32,viewBox:"0 0 32 32"},e),a)}e.exports=r,r.default=r},166:function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("path",{d:"M1 0h10a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1zm0 1v2h10V1H1zm0 4h2a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1zm0 1v5h2V6H1zm5-1h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1zm0 1v5h5V6H6z",fill:"currentColor",fillRule:"nonzero"});function r(e){return i.createElement("svg",o({width:12,height:12,viewBox:"0 0 12 12"},e),a)}e.exports=r,r.default=r},167:function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("g",{fillRule:"nonzero",fill:"none"},i.createElement("path",{d:"M7 8.684l5.125-5.052a.814.814 0 0 1 1.14 0 .786.786 0 0 1 0 1.123l-5.696 5.613a.814.814 0 0 1-1.138 0L.736 4.755a.786.786 0 0 1 0-1.123.814.814 0 0 1 1.139 0L7 8.684z",fill:"currentColor"}),i.createElement("path",{d:"M0 0h14v14H0z"}));function r(e){return i.createElement("svg",o({width:14,height:14,viewBox:"0 0 14 14"},e),a)}e.exports=r,r.default=r},2:function(e,t){e.exports=n},22:function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("path",{d:"M0 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0zm0 5a1 1 0 1 1 2 0 1 1 0 0 1-2 0zm0 5a1 1 0 1 1 2 0 1 1 0 0 1-2 0z"});function r(e){return i.createElement("svg",o({width:2,height:12,viewBox:"0 0 2 12"},e),a)}e.exports=r,r.default=r},23:function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("g",{fillRule:"nonzero",fill:"none"},i.createElement("path",{d:"M7.745 7l4.1 4.1a.527.527 0 0 1-.745.746L7 7.746l-4.1 4.1a.527.527 0 0 1-.746-.746l4.1-4.1-4.1-4.1a.527.527 0 0 1 .746-.746l4.1 4.1 4.1-4.1a.527.527 0 0 1 .746.746L7.746 7z",fill:"currentColor"}),i.createElement("path",{d:"M1 1h12v12H1z"}));function r(e){return i.createElement("svg",o({width:14,height:14,viewBox:"0 0 14 14"},e),a)}e.exports=r,r.default=r},3:function(e,t){e.exports=o},38:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),s=n(2),l=n(8),c=n(11),p=function(e){function t(t){var n=e.call(this,t)||this;return n.formatMessage=function(e){return n.props.intl.formatMessage({id:e,defaultMessage:c.default[e]})},n.handleArrowClick=function(e){var t=n.props,o=t.onArrowClick,i=t.itemJson;o&&o(i),e.stopPropagation()},n.handleClick=function(e){},n.handleDoubleClickItem=function(e){var t=n.props,o=t.itemJson,i=t.onDoubleClick;i&&i(o,e),e.stopPropagation()},n.onDropHover=function(e){n.state.dropType!==e&&n.setState({dropType:e})},n.renameItemClick=function(e){e&&e.stopPropagation(),setTimeout(function(){var e,t;n.editor.focus(),window.getSelection&&document.createRange?((t=document.createRange()).selectNodeContents(n.editor),(e=window.getSelection()).removeAllRanges(),e.addRange(t)):((e=document.createRange()).setStart(n.editor.firstChild,n.editor.innerText.length),e.select())},1),n.editor.onkeydown=function(e){"Enter"===e.key&&(e.preventDefault(),n.onRenameBlur())},n.dragInteractable&&n.dragInteractable.draggable(!1)},n.onRenameBlur=function(){var e=n.editor.innerText;n.editor.innerText="",setTimeout(function(){n.editor.innerText=e},10),setTimeout(function(){n.props.renameItem&&n.props.renameItem(n.props.itemJson,e)||(n.editor.innerText=n.props.itemJson.label)},30),n.dragInteractable&&n.dragInteractable.draggable(!0)},n.getStyle=function(){var e=n.props,t=e.theme,o=e.editable,s=e.tocCss,l=e.itemJson,c=e.keepWidthInParent,p=e.isTocDragging,d=l.mustShowArrow,g=l.children,u=l.level,m=l.isActive,f=l.isExpand,h=n.state,I=h.isDragging,b=h.isHovering;return r.css(a||(a=i(["\n      height: ","px;\n      width: auto;\n      min-width: 100%;\n      align-items: center;\n      cursor: pointer;\n      ","\n\n      :hover {\n        ","\n      }\n\n      &.active {\n        ","\n        border: 0;\n      }\n\n      &.drag-move-into {\n        border: 1px solid ",";\n      }\n\n      .toc-item-dropzone {\n        touch-action: none;\n        position: relative;\n\n        .toc-item-drag:hover {\n          cursor: pointer !important;\n        }\n  \n        .toc-item-drag {\n          pointer-events: ",";\n          z-index: 1;\n          position: absolute;\n          left: 0;\n          top: 0;\n          right: 0;\n          bottom: 0;\n          background-color: ",";\n          box-shadow: ",";\n        }\n\n        .toc-item {\n          padding: 0;\n          border: 0;\n          position: relative;\n          .toc-item-content {\n            margin-left: ","px;\n            position: relative;\n            .toc-arrow {\n              z-index: 2;\n              visibility: ",";\n              height: 24px;\n              width: auto;\n              display: flex;\n              align-self: center;\n              align-items: center;\n              justify-content: center;\n              transform-origin: center;\n              transform: ",";\n              transition: transform .5s;\n              .toc-arrow-icon {\n                fill: ",";\n              }\n            }\n      \n            .left-content {\n              align-items: center;\n              .editor {\n                width: ",";\n                overflow: hidden;\n                text-overflow: ",";\n                white-space: nowrap;\n                font-size: ",'rem;\n                user-select: none;\n              }\n              [contenteditable="true"] {\n                background-color: ',";\n                width: ",";\n              }\n              .header-icon {\n                margin-right: 0.3rem;\n                fill: ",";\n              }\n            }\n          }\n\n          &.toc-drag-move-last {\n            background-color: ",";\n            :after{\n              content: '';\n              position: absolute;\n              left: 0;\n              top: auto;\n              bottom: 0;\n              right: auto;\n              height: 2px;\n              width: 100%;\n              background-color: ",";\n            }\n          }\n          \n          &.toc-drag-move-first {\n            background-color: ",";\n            :before {\n              content: '';\n              position: absolute;\n              left: 0;\n              top: 0;\n              bottom: auto;\n              right: auto;\n              height: 2px;\n              width: 100%;\n              background-color: ",";\n            }\n          }\n          .drag-move-out-order-bottom {\n            background-color: ",";\n            :after{\n              content: '';\n              position: absolute;\n              left: 0;\n              top: auto;\n              bottom: 0;\n              right: auto;\n              height: 2px;\n              width: 100%;\n              background-color: ",";\n            }\n          }\n    \n          .drag-move-out-order-top {\n            background-color: ",";\n            :before {\n              \n              content: '';\n              position: absolute;\n              left: 0;\n              top: 0;\n              bottom: auto;\n              right: auto;\n              height: 2px;\n              width: 100%;\n              background-color: ",";\n            }\n          }\n        }\n      }\n      \n      ","\n    "],["\n      height: ","px;\n      width: auto;\n      min-width: 100%;\n      align-items: center;\n      cursor: pointer;\n      ","\n\n      :hover {\n        ","\n      }\n\n      &.active {\n        ","\n        border: 0;\n      }\n\n      &.drag-move-into {\n        border: 1px solid ",";\n      }\n\n      .toc-item-dropzone {\n        touch-action: none;\n        position: relative;\n\n        .toc-item-drag:hover {\n          cursor: pointer !important;\n        }\n  \n        .toc-item-drag {\n          pointer-events: ",";\n          z-index: 1;\n          position: absolute;\n          left: 0;\n          top: 0;\n          right: 0;\n          bottom: 0;\n          background-color: ",";\n          box-shadow: ",";\n        }\n\n        .toc-item {\n          padding: 0;\n          border: 0;\n          position: relative;\n          .toc-item-content {\n            margin-left: ","px;\n            position: relative;\n            .toc-arrow {\n              z-index: 2;\n              visibility: ",";\n              height: 24px;\n              width: auto;\n              display: flex;\n              align-self: center;\n              align-items: center;\n              justify-content: center;\n              transform-origin: center;\n              transform: ",";\n              transition: transform .5s;\n              .toc-arrow-icon {\n                fill: ",";\n              }\n            }\n      \n            .left-content {\n              align-items: center;\n              .editor {\n                width: ",";\n                overflow: hidden;\n                text-overflow: ",";\n                white-space: nowrap;\n                font-size: ",'rem;\n                user-select: none;\n              }\n              [contenteditable="true"] {\n                background-color: ',";\n                width: ",";\n              }\n              .header-icon {\n                margin-right: 0.3rem;\n                fill: ",";\n              }\n            }\n          }\n\n          &.toc-drag-move-last {\n            background-color: ",";\n            :after{\n              content: '';\n              position: absolute;\n              left: 0;\n              top: auto;\n              bottom: 0;\n              right: auto;\n              height: 2px;\n              width: 100%;\n              background-color: ",";\n            }\n          }\n          \n          &.toc-drag-move-first {\n            background-color: ",";\n            :before {\n              content: '';\n              position: absolute;\n              left: 0;\n              top: 0;\n              bottom: auto;\n              right: auto;\n              height: 2px;\n              width: 100%;\n              background-color: ",";\n            }\n          }\n          .drag-move-out-order-bottom {\n            background-color: ",";\n            :after{\n              content: '';\n              position: absolute;\n              left: 0;\n              top: auto;\n              bottom: 0;\n              right: auto;\n              height: 2px;\n              width: 100%;\n              background-color: ",";\n            }\n          }\n    \n          .drag-move-out-order-top {\n            background-color: ",";\n            :before {\n              \n              content: '';\n              position: absolute;\n              left: 0;\n              top: 0;\n              bottom: auto;\n              right: auto;\n              height: 2px;\n              width: 100%;\n              background-color: ",";\n            }\n          }\n        }\n      }\n      \n      ","\n    "])),30,I?"z-index: 100;":"",m?"":"background-color: "+r.polished.rgba(t.colors.grays.gray200,.4)+";",p?"":"background-color: "+t.colors.cyans.cyan100+";",t.colors.cyans.cyan500,b?"all":"none",I?r.polished.rgba(t.colors.grays.gray200,.6):"transparent",I?t.boxShadows.lg:t.boxShadows.default,20*u,d||g&&g.length>0?"visible":"hidden","rotate("+(f?90:0)+"deg)",t.colors.black,c?"calc(130px - "+20*u+"px)":"auto",o?"clip":"ellipsis",.875,t.colors.white,c?"calc(130px - "+20*u+"px)":"190px",t.colors.black,r.polished.rgba(t.colors.grays.gray200,.4),t.colors.cyans.cyan500,r.polished.rgba(t.colors.grays.gray200,.4),t.colors.cyans.cyan500,r.polished.rgba(t.colors.grays.gray200,.4),t.colors.cyans.cyan500,r.polished.rgba(t.colors.grays.gray200,.4),t.colors.cyans.cyan500,s||"")},n.state={dropType:"none",isDragging:!1,isHovering:!1},n}return o(t,e),t.prototype.componentWillUnmount=function(){this.dragInteractable&&(this.dragInteractable.unset(),this.dragInteractable=null),this.dropZoneInteractable&&(this.dropZoneInteractable.unset(),this.dropZoneInteractable=null)},t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.canDnd,o=t.canDragFunc,i=t.canDropFunc,a=t.onDidDrop,r=t.canOrderFunc,s=t.canDropIntoFunc,c=t.itemJson,p=t.editable,d=c.index;if(p&&this.renameItemClick(),n&&this.dropZoneRef&&this.dragRef){var g=null;this.dragRef.setAttribute("itemJson",JSON.stringify(c)),this.dropZoneInteractable=l.interact(this.dropZoneRef).dropzone({accept:".toc-item-drag",overlap:"pointer",ondropactivate:function(e){},ondropmove:function(t){var n=t.relatedTarget,o=t.target,a=JSON.parse(n.getAttribute("itemJson"));if(i&&i(c.data,a.data)){var l=o.getBoundingClientRect(),p=3*(l.bottom-l.top)/4,g=1*(l.bottom-l.top)/4,u=(l.bottom-l.top)/2,m=t.dragEvent.client.y-l.top,f=e.state.dropType;f=r&&r(a.data,c.data)?s&&s(a.data,c.data)?0===d?m>p?"bottom":m<g?"top":"moveInto":m>p?"bottom":"moveInto":0===d?m>u?"bottom":"top":"bottom":s&&s(a.data,c.data)?"moveInto":"none",e.onDropHover(f)}},ondragenter:function(e){},ondragleave:function(t){e.onDropHover("none")},ondrop:function(t){var n=e.state.dropType;if("none"!==n){var o=t.relatedTarget,i=JSON.parse(o.getAttribute("itemJson"));a&&a(i,c,n),e.onDropHover("none")}},ondropdeactivate:function(e){}}),o(c.data)&&(this.dragInteractable=l.interact(this.dragRef).draggable({inertia:!1,modifiers:[],autoScroll:!0,onstart:function(t){e.setState({isDragging:!0});var n=e.props.onTocDragStatusChage;n&&n(!0)},onmove:function(t){var n=t.clientX,o=t.clientY,i=t.clientX0,a=t.clientY0,r=t.target,s=n-i+(parseFloat(r.getAttribute("start-x"))||0),l=o-a+(parseFloat(r.getAttribute("start-y"))||0),c=-(r.clientWidth-0)/2,p=(r.clientWidth-0)/2;if(s<c?s=c:s>p&&(s=p),e.props.parentBoundRect){var d=e.props.parentBoundRect.top-a,u=e.props.parentBoundRect.bottom-a;l<=d?l=d:l>=u&&(l=u)}g&&cancelAnimationFrame(g),g=requestAnimationFrame(function(){r.style.webkitTransform=r.style.transform="translate("+s+"px, "+l+"px)",g=null})},onend:function(t){var n=t.target;g&&cancelAnimationFrame(g),n.style.webkitTransform=n.style.transform="translate(0px, 0px)",e.setState({isDragging:!1});var o=e.props.onTocDragStatusChage;o&&o(!1)}}))}},t.prototype.componentWillReceiveProps=function(e){var t=e.itemJson,n=e.editable;t.allowEditable&&n!==this.props.editable&&n&&this.renameItemClick()},t.prototype.render=function(){var e=this,t=this.props,o=t.itemJson,i=t.renderRightContent,a=t.editable,l=t.canDnd,c=t.isFirstItem,p=t.isLastItem,d=t.tocDraggingStatus,g=t.isTocDragging,u=o.isIconSvg,m=o.icon,f=o.isActive,h=this.state,I=h.dropType,b=h.isDragging,v="moveInto"===I?"drag-move-into":"",y="drag-move-out-order-"+I,x="";return g&&"on"!==d&&("bottom"===d&&p?x="toc-drag-move-last":"top"===d&&c&&(x="toc-drag-move-first")),r.jsx("div",{className:"d-flex "+(f?"active":"")+"   "+v,css:this.getStyle(),onMouseEnter:function(t){return setTimeout(function(){e.setState({isHovering:!0})},100)},onMouseLeave:function(t){return setTimeout(function(){e.setState({isHovering:!1})},100)}},r.jsx("div",{ref:function(t){return e.dropZoneRef=t},className:"toc-item-dropzone h-100 w-100"},r.jsx("div",{className:"d-flex w-100 h-100",onDoubleClick:this.handleDoubleClickItem,onClick:this.handleClick},r.jsx("div",{className:"d-flex justify-content-between w-100 toc-item "+x},r.jsx("div",{className:"d-flex toc-item-content w-100 "+y},r.jsx(s.Button,{title:o.isExpand?this.formatMessage("unexpand"):this.formatMessage("expand"),className:"toc-arrow",icon:!0,color:"link",onClick:this.handleArrowClick},r.jsx(s.Icon,{className:"toc-arrow-icon",icon:n(39),size:8})),r.jsx("div",{className:"d-flex justify-content-between w-100"},r.jsx("div",{className:"d-flex left-content"},m&&(u?r.jsx(s.Icon,{className:"header-icon",size:12,icon:m}):r.jsx("img",{className:"header-icon",src:m,width:"12",height:"12"})),r.jsx("div",{title:o.label,className:"item-label editor",ref:function(t){return e.editor=t},onBlur:function(t){return e.onRenameBlur()},contentEditable:o.allowEditable&&a,suppressContentEditableWarning:!0},o.label)),i&&i(o)))),l&&r.jsx("div",{className:"toc-item-drag",ref:function(t){return e.dragRef=t}},b&&r.jsx("div",{className:"d-flex justify-content-between w-100 toc-item"},r.jsx("div",{className:"d-flex toc-item-content w-100"},r.jsx(s.Button,{title:o.isExpand?this.formatMessage("unexpand"):this.formatMessage("expand"),icon:!0,color:"link",className:"toc-arrow"},r.jsx(s.Icon,{className:"toc-arrow-icon",icon:n(39),size:8})),r.jsx("div",{className:"d-flex justify-content-between w-100"},r.jsx("div",{className:"d-flex left-content"},m&&(u?r.jsx(s.Icon,{className:"header-icon",size:12,icon:m}):r.jsx("img",{className:"header-icon",src:m,width:"12",height:"12"})),r.jsx("div",{title:o.label,className:"item-label editor"},o.label)),i&&i(o))))))))},t}(r.React.PureComponent);t.DndTocContent=p},39:function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("path",{d:"M2.307 6.479L4.677 4l-2.37-2.479a.517.517 0 0 1 0-.708.464.464 0 0 1 .677 0l2.71 2.833a.517.517 0 0 1 0 .708l-2.71 2.833a.464.464 0 0 1-.677 0 .517.517 0 0 1 0-.708z"}),r=i.createElement("path",{d:"M0 0h8v8H0z",fill:"none"});function s(e){return i.createElement("svg",o({width:8,height:8,viewBox:"0 0 8 8"},e),a,r)}e.exports=s,s.default=s},40:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),s=n(2),l=function(e){function t(t){var n=e.call(this,t)||this;return n.handleChange=function(e){n.setState({searchText:e},function(){var t=n.props.onSearchTextChange;t&&t(e)})},n.handleSubmit=function(e){var t=n.props.onSubmit;t&&t(e)},n.onKeyUp=function(e){e&&e.target&&13===e.keyCode&&n.handleSubmit(e.target.value)},n.handleClear=function(e){n.setState({searchText:""}),e.stopPropagation()},n.getStyle=function(){var e=n.props,t=e.hideSearchIcon,o=e.theme;return r.css(a||(a=i(["\n      position: relative;\n      .toc-search-input {\n        cursor: pointer;\n        padding-left: ",";\n        border: 0;\n        border-bottom-width: 1px;\n        border-bottom-style: solid;\n        border-color: ",";\n        background: transparent;\n      }\n\n      .searchbox-icon-btn {\n        position: absolute;\n        &.submit {\n          padding-left: 0;\n          left: 0;\n          top: 0;\n        }\n        &.clear {\n          right: 0;\n          top: 0;\n        }\n        \n      }\n    "],["\n      position: relative;\n      .toc-search-input {\n        cursor: pointer;\n        padding-left: ",";\n        border: 0;\n        border-bottom-width: 1px;\n        border-bottom-style: solid;\n        border-color: ",";\n        background: transparent;\n      }\n\n      .searchbox-icon-btn {\n        position: absolute;\n        &.submit {\n          padding-left: 0;\n          left: 0;\n          top: 0;\n        }\n        &.clear {\n          right: 0;\n          top: 0;\n        }\n        \n      }\n    "])),t?"3px":"24px",o.colors.primary)},n.state={searchText:t.searchText||""},n}return o(t,e),t.prototype.componentWillReceiveProps=function(e){e.searchText!==this.state.searchText&&this.setState({searchText:e.searchText})},t.prototype.render=function(){var e=this,t=this.props,o=t.placeholder,i=t.className,a=t.showClear,l=t.hideSearchIcon,c=t.inputRef,p=t.onFocus,d=t.onBlur,g=this.state.searchText;return r.jsx("div",{css:this.getStyle(),className:i},r.jsx(s.Input,{className:"toc-search-input",ref:c,placeholder:o,onChange:function(t){return e.handleChange(t.target.value)},onBlur:d,onFocus:p,value:g,onKeyDown:function(t){return e.onKeyUp(t)}}),!l&&r.jsx(s.Button,{color:"link",className:"searchbox-icon-btn submit icon",onClick:function(t){return e.handleSubmit(e.state.searchText)}},r.jsx(s.Icon,{size:12,icon:n(7)})),a&&r.jsx(s.Button,{color:"link",className:"searchbox-icon-btn clear icon",onClick:this.handleSubmit},r.jsx(s.Icon,{size:12,icon:n(23)})))},t}(r.React.PureComponent);t.default=l},41:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),s=n(2),l=n(11),c=function(e){function t(t){var n=e.call(this,t)||this;return n.handleCloseBtn=function(){n.isOkClick=!1,n.setState({isOpen:!1});var e=n.props,t=e.toggle;void 0!==e.isOpen&&t&&t()},n.handleOkClick=function(){n.isOkClick=!0,n.setState({isOpen:!1});var e=n.props,t=e.toggle;void 0!==e.isOpen&&t&&t()},n.handleToggle=function(){n.setState({isOpen:!n.state.isOpen});var e=n.props,t=e.toggle;void 0!==e.isOpen&&t&&t()},n.onModalClosed=function(){var e=n.props.onClosed;e&&e(n.isOkClick),n.isOkClick=!1},n.formatMessage=function(e){return n.props.intl.formatMessage({id:e,defaultMessage:l.default[e]})},n.getStyle=function(){var e=n.props.theme;return r.css(a||(a=i(["\n      .modal-header {\n        .close {\n          color: ",";\n          opacity: 1;\n          transition: color .15s ease-in-out;\n          &:not(:disabled):not(.disabled):hover,\n          &:not(:disabled):not(.disabled):focus {\n            opacity: 1;\n          }\n        }\n      }\n      .modal-body{\n        overflow-y: auto;\n        max-height: 360px;\n      }\n      .modal-content{\n        width: auto;\n      }\n      .modal-footer{\n        .btn {\n          min-width: 80px;\n          + .btn {\n            margin-left: 10px;\n          }\n        }\n      }\n      &.modal-dialog{\n        width: auto;\n      }\n      .choose-template-description{\n        width: 100%;\n        font-size: ","rem;\n        user-select:none;\n      }\n    "],["\n      .modal-header {\n        .close {\n          color: ",";\n          opacity: 1;\n          transition: color .15s ease-in-out;\n          &:not(:disabled):not(.disabled):hover,\n          &:not(:disabled):not(.disabled):focus {\n            opacity: 1;\n          }\n        }\n      }\n      .modal-body{\n        overflow-y: auto;\n        max-height: 360px;\n      }\n      .modal-content{\n        width: auto;\n      }\n      .modal-footer{\n        .btn {\n          min-width: 80px;\n          + .btn {\n            margin-left: 10px;\n          }\n        }\n      }\n      &.modal-dialog{\n        width: auto;\n      }\n      .choose-template-description{\n        width: 100%;\n        font-size: ","rem;\n        user-select:none;\n      }\n    "])),e.colors.grays.gray700,14/17)},n.state={isOpen:!!t.isOpen},n}return o(t,e),t.prototype.componentWillReceiveProps=function(e){void 0!==this.props.isOpen&&void 0===e.isOpen&&this.setState({isOpen:e.isOpen})},t.prototype.render=function(){var e=this.props.isOpen;return e=void 0===e?this.state.isOpen:e,r.jsx(s.Modal,{css:this.getStyle(),isOpen:e,onClosed:this.onModalClosed,toggle:this.handleToggle,centered:!0},r.jsx(s.ModalHeader,{tag:"h4",toggle:this.handleCloseBtn},this.props.title),r.jsx(s.ModalBody,null,r.jsx("div",{style:{marginLeft:"10px"}},this.props.children)),r.jsx(s.ModalFooter,null,r.jsx(s.Button,{color:"primary",onClick:this.handleOkClick},this.formatMessage("certainly")),r.jsx(s.Button,{outline:!0,color:"secondary",onClick:this.handleCloseBtn},this.formatMessage("cancel"))))},t}(r.React.PureComponent);t.default=c},42:function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("path",{d:"M12.196 12.196a.517.517 0 0 1 .73 0l2.923 2.922a.517.517 0 0 1-.73.73l-2.923-2.922a.517.517 0 0 1 0-.73zm-.731-.731a6.716 6.716 0 1 1-9.498-9.498 6.716 6.716 0 0 1 9.498 9.498zm-.73-.73a5.683 5.683 0 1 0-8.037-8.037 5.683 5.683 0 0 0 8.036 8.036z",fill:"currentColor",fillRule:"evenodd"});function r(e){return i.createElement("svg",o({width:16,height:16,viewBox:"0 0 16 16"},e),a)}e.exports=r,r.default=r},43:function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("path",{d:"M1.2 0h25.6v25.29c-2.317 2.271-4.634 4.439-6.952 6.71H1.2V0zm2.097 1.961v27.974H17.2v-7.019h7.503V1.961H3.296zm16 23.02v4.645c1.655-1.548 3.2-3.097 4.855-4.645h-4.855z"});function r(e){return i.createElement("svg",o({width:28,height:32,viewBox:"0 0 28 32"},e),a)}e.exports=r,r.default=r},7:function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("path",{d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm0 2C4.477 20 0 15.523 0 10S4.477 0 10 0s10 4.477 10 10-4.477 10-10 10zm8.282-1.718a.961.961 0 0 1 1.359 0l4.077 4.077a.961.961 0 0 1-1.359 1.36l-4.077-4.078a.961.961 0 0 1 0-1.36z",fill:"currentColor",fillRule:"nonzero"});function r(e){return i.createElement("svg",o({width:24,height:24,viewBox:"0 0 24 24"},e),a)}e.exports=r,r.default=r},8:function(e,t){e.exports=i},9:function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("path",{d:"M1.521 2.307L4 4.677l2.479-2.37a.517.517 0 0 1 .708 0 .464.464 0 0 1 0 .677l-2.833 2.71a.517.517 0 0 1-.708 0L.813 2.983a.464.464 0 0 1 0-.677.517.517 0 0 1 .708 0z"}),r=i.createElement("path",{d:"M0 0h8v8H0z",fill:"none"});function s(e){return i.createElement("svg",o({width:8,height:8,viewBox:"0 0 8 8"},e),a,r)}e.exports=s,s.default=s}})});
//# sourceMappingURL=widget.js.map