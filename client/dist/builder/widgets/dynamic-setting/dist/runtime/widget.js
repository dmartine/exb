define(["jimu-core","jimu-core/react","jimu-ui","jimu-for-builder","jimu-core/dnd","jimu-layouts/common","jimu-layouts/layout-builder"],function(e,t,n,o,i,a,r){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=110)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=o},,,,function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("path",{d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm0 2C4.477 20 0 15.523 0 10S4.477 0 10 0s10 4.477 10 10-4.477 10-10 10zm8.282-1.718a.961.961 0 0 1 1.359 0l4.077 4.077a.961.961 0 0 1-1.359 1.36l-4.077-4.078a.961.961 0 0 1 0-1.36z",fill:"currentColor",fillRule:"nonzero"});function r(e){return i.createElement("svg",o({width:24,height:24,viewBox:"0 0 24 24"},e),a)}e.exports=r,r.default=r},function(e,t){e.exports=i},,,,function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("path",{d:"M2.212 9.936L2 12.27l2.333-.212L13.27 3.12 11.149 1 2.212 9.936zm-.707-.707L10.441.293a1 1 0 0 1 1.415 0l2.12 2.121a1 1 0 0 1 0 1.414l-8.935 8.937a1 1 0 0 1-.617.289l-2.333.212a1 1 0 0 1-1.087-1.087l.212-2.333a1 1 0 0 1 .289-.617zm7.434-6.497l2.829 2.829-.707.707-2.829-2.829.707-.707zM.5 15h15a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1z",fill:"currentColor",fillRule:"nonzero"});function r(e){return i.createElement("svg",o({width:16,height:16,viewBox:"0 0 16 16"},e),a)}e.exports=r,r.default=r},function(e,t){e.exports=a},,function(e,t){e.exports=r},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),s=n(2),c=n(1),p=function(e){function t(t){var n=e.call(this,t)||this;return n.onDropDownToggle=function(e){e.stopPropagation(),n.state.isOpen?document.onclick=void 0:(document.onclick&&document.onclick(e),document.onclick=function(e){return n.setState({isOpen:!1}),document.onclick=void 0,!1}),n.setState({isOpen:!n.state.isOpen})},n.getStyle=function(){var e=n.props.theme;return r.css(a||(a=i(["\n      .popover-body{\n        box-shadow: 0 2px 6px ",";\n        padding: 0;\n        .item-text{\n          width: 100%;\n          color:",";\n          padding: 10px 10px;\n          user-select:none;\n          font-size: ",";\n        }\n\n        .item-text:hover{\n          cursor:pointer;\n          background-color: ",";\n        }\n\n        .item-line{\n          width: 100%;\n          height: 1px;\n          background-color: ",";\n        }\n      }\n    "],["\n      .popover-body{\n        box-shadow: 0 2px 6px ",";\n        padding: 0;\n        .item-text{\n          width: 100%;\n          color:",";\n          padding: 10px 10px;\n          user-select:none;\n          font-size: ",";\n        }\n\n        .item-text:hover{\n          cursor:pointer;\n          background-color: ",";\n        }\n\n        .item-line{\n          width: 100%;\n          height: 1px;\n          background-color: ",";\n        }\n      }\n    "])),r.polished.rgba(e.colors.white,.2),e.colors.black,e.typography.fontSizeBase,n.props.theme.colors.primary,n.props.theme.colors.grays.gray300)},n.onItemClick=function(e,t){document.onclick=void 0,n.setState({isOpen:!1}),t.event(e),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},n.state={isOpen:!1},n}return o(t,e),t.prototype.render=function(){var e=this,t=this.props,o=t.items,i=t.icon,a=t.direction,p=t.disabled;return r.jsx("div",{className:"my-dropdown",id:"toc-item-my-dropdown-"+this.props.uId,css:this.getStyle()},r.jsx(s.Button,{disabled:p,size:"sm",color:"link",icon:!0,className:" my-dropdown-btn h-100",onClick:this.onDropDownToggle},i||r.jsx(s.Icon,{size:12,icon:n(22)})),r.jsx(s.Popover,{css:this.getStyle(),placement:a||"right-start",isOpen:this.state.isOpen,target:"toc-item-my-dropdown-"+this.props.uId,hideArrow:!0,modifiers:{preventOverflow:{escapeWithReference:!0},offset:{offset:"0, 0"}}},r.jsx(s.PopoverBody,{className:"justify-content-between"},o.map(function(t,n){return t.visible&&r.jsx(c.Fragment,{key:n},r.jsx("div",{className:"item-text text-left",onClick:function(n){return e.onItemClick(n,t)}},t.label))}))))},t}(r.React.PureComponent);t.MyDropDown=p},,,,,function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("path",{d:"M19.637 15.866L30.951 27.18a2.667 2.667 0 0 1-3.771 3.771L15.866 19.637 4.552 30.951A2.667 2.667 0 0 1 .781 27.18l11.314-11.314L.781 4.552A2.667 2.667 0 0 1 4.552.781l11.314 11.314L27.18.781a2.667 2.667 0 0 1 3.771 3.771L19.637 15.866z"});function r(e){return i.createElement("svg",o({width:32,height:32,viewBox:"0 0 32 32"},e),a)}e.exports=r,r.default=r},function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("path",{d:"M0 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0zm0 5a1 1 0 1 1 2 0 1 1 0 0 1-2 0zm0 5a1 1 0 1 1 2 0 1 1 0 0 1-2 0z"});function r(e){return i.createElement("svg",o({width:2,height:12,viewBox:"0 0 2 12"},e),a)}e.exports=r,r.default=r},function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("g",{fillRule:"nonzero",fill:"none"},i.createElement("path",{d:"M7.745 7l4.1 4.1a.527.527 0 0 1-.745.746L7 7.746l-4.1 4.1a.527.527 0 0 1-.746-.746l4.1-4.1-4.1-4.1a.527.527 0 0 1 .746-.746l4.1 4.1 4.1-4.1a.527.527 0 0 1 .746.746L7.746 7z",fill:"currentColor"}),i.createElement("path",{d:"M1 1h12v12H1z"}));function r(e){return i.createElement("svg",o({width:14,height:14,viewBox:"0 0 14 14"},e),a)}e.exports=r,r.default=r},,,,,,,,,,,function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("g",{fillRule:"nonzero",fill:"none"},i.createElement("path",{d:"M4.586 8.657l6.01-6.01a.5.5 0 0 1 .707.707l-6.01 6.01a1 1 0 0 1-1.414 0L.697 6.182a.5.5 0 0 1 .707-.707l3.182 3.182z",fill:"currentColor"}),i.createElement("path",{d:"M0 0h12v12H0z"}));function r(e){return i.createElement("svg",o({width:12,height:12,viewBox:"0 0 12 12"},e),a)}e.exports=r,r.default=r},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(3),s=n(2),c=n(124),p=n(125),l=n(126),g=n(127),u=n(131),d=n(132);function h(e){var t=null;t=e.widgetId?a.getAppStore().getState().appStateInBuilder.appConfig.widgets[e.widgetId]:{label:"Framework"};var n=e.actionName;if(t.manifest)if(t.manifest.i18nMessages["_action_"+e.actionName+"_label"])n=t.manifest.i18nMessages["_action_"+e.actionName+"_label"];else{var o=t.manifest.messageActions;if(o)for(var i=0;i<o.length;i++)if(o[i].name===e.actionName){n=o[i].label;break}}else if("Framework"===t.label){var s=r.AppMessageManager.getInstance().getAllActions();for(i=0;i<s.length;i++)if(e.actionId.indexOf(s[i].id)>-1){n=s[i].label;break}}return n}t.getActionLabel=h;var f,m=function(e){function t(t){var n=e.call(this,t)||this;return n.modalStyle={position:"absolute",top:"0",bottom:"0",right:"260px",left:"auto",width:"259px",height:"auto",zIndex:"3",borderRight:"",borderBottom:"",paddingBottom:"1px"},n.updateLocalState=function(e){var t=r.getAppConfigAction().appConfig;if(e.messages&&e.messages!==n.props.messages){var o=null,i=null,a=null;if(n.state.currentTriggeredMessage&&n.state.currentTriggeredMessage.messageType){for(var s=0;s<e.messages.length;s++)if(e.messages[s].messageType===n.state.currentTriggeredMessage.messageType&&e.messages[s].widgetId===n.state.currentTriggeredMessage.widgetId){o=e.messages[s];break}if(o&&n.state.currentTriggeredTarget)if(n.state.currentTriggeredTarget.id){var c=n.state.currentTriggeredTarget;if(n.state.panelRoutes&&n.state.panelRoutes.length>0&&n.state.panelRoutes[n.state.panelRoutes.length-1].pathType===d.PathType.ActionChoose)i=t.widgets[c.id];else for(s=0;s<o.actions.length;s++)if(o.actions[s].widgetId===c.id){i=t.widgets[c.id];break}}else{c=n.state.currentTriggeredTarget;if(n.state.panelRoutes&&n.state.panelRoutes.length>0&&n.state.panelRoutes[n.state.panelRoutes.length-1].pathType===d.PathType.ActionChoose)i=c;else for(s=0;s<o.actions.length;s++)if(!o.actions[s].widgetId){i=c;break}}if(o&&n.state.currentTriggeredAction&&n.state.currentTriggeredAction.actionName)for(s=0;s<o.actions.length;s++)if(o.actions[s].actionId===n.state.currentTriggeredAction.actionId&&o.actions[s].widgetId===n.state.currentTriggeredAction.widgetId&&o.actions[s].actionName===n.state.currentTriggeredAction.actionName){a=o.actions[s];break}}n.setState({currentTriggeredMessage:o,currentTriggeredTarget:i,currentTriggeredAction:a})}},n.resetState=function(){n.setState({currentTriggeredMessage:null,currentTriggeredTarget:null,currentTriggeredAction:null,panelRoutes:[]})},n.onMessageRemoved=function(e){r.getAppConfigAction().removeMessage(e).exec()},n.onMessageChanged=function(e){n.setState({currentTriggeredMessage:e},function(){r.getAppConfigAction().editMessage(e).exec()})},n.onUpdateAction=function(e,t,o){o?n.setState({currentTriggeredMessage:e,currentTriggeredAction:t,panelRoutes:[]},function(){r.getAppConfigAction().editMessage(e).exec()}):n.setState({currentTriggeredMessage:e,currentTriggeredAction:t},function(){r.getAppConfigAction().editMessage(e).exec()})},n.getMessages=function(){var e=n.props.messages,t=[];if(e)for(var o=0;o<e.length;o++)e[o]&&e[o].widgetId===n.props.widgetId&&t.push(e[o]);return t},n.onShowMessageChooseList=function(){var e=[{pathType:d.PathType.MessageChoose,message:null}];n.setState({panelRoutes:e})},n.onShowTargetChooseList=function(e){var t=[{pathType:d.PathType.TargetChoose,message:e}];n.setState({currentTriggeredMessage:e,currentTriggeredAction:null,panelRoutes:t})},n.onShowActionSettingPage=function(e,t){var o=[{pathType:d.PathType.ActionSetting,message:e}];n.setState({currentTriggeredMessage:e,currentTriggeredAction:t,panelRoutes:o})},n.onMessageChooseListSelected=function(e){var t=Object.assign([],n.state.panelRoutes);t.push({pathType:d.PathType.TargetChoose,message:e}),n.setState({currentTriggeredMessage:e,panelRoutes:t},function(){r.getAppConfigAction().addMessage(e).exec()})},n.onTargetChooseListSelected=function(e){var t=Object.assign([],n.state.panelRoutes);t.push({pathType:d.PathType.ActionChoose,message:n.state.currentTriggeredMessage}),n.setState({currentTriggeredTarget:e,panelRoutes:t})},n.onActionChooseListSelected=function(e,t){if(null===t.config){var o=Object.assign([],n.state.panelRoutes);o.push({pathType:d.PathType.ActionSetting,message:e}),n.setState({currentTriggeredMessage:e,currentTriggeredAction:a.Immutable(t),panelRoutes:o},function(){r.getAppConfigAction().editMessage(e).exec()})}else n.setState({currentTriggeredMessage:e,currentTriggeredAction:null,panelRoutes:[]},function(){r.getAppConfigAction().editMessage(e).exec()})},n.backForwardPanel=function(){var e=Object.assign([],n.state.panelRoutes);if(e.splice(e.length-1,1),e[e.length-1].message){var t=e[e.length-1].message;n.setState({panelRoutes:e,currentTriggeredMessage:e[e.length-1].message},function(){r.getAppConfigAction().editMessage(t).exec()})}else{var o=n.state.panelRoutes[n.state.panelRoutes.length-1].message;n.setState({panelRoutes:e,currentTriggeredMessage:null},function(){r.getAppConfigAction().removeMessage(o).exec()})}},n.formatMessage=function(e){return n.props.formatMessage(e)},n.closePanel=function(){n.setState({panelRoutes:[]})},n.modalStyle.borderRight="1px solid "+n.props.theme.colors.white,n.modalStyle.borderBottom="1px solid "+n.props.theme.colors.white,n.state={currentTriggeredMessage:null,currentTriggeredTarget:null,currentTriggeredAction:null,panelRoutes:[]},n}return o(t,e),t.prototype.getStyle=function(e){return a.css(f||(f=i(["\n      .message-setting {\n\n        .searchIcon {\n          cursor: pointer;\n          position: absolute;\n          right: 1.2rem;\n          margin-top: 0.3rem;\n        }\n\n        .listItem {\n          cursor: pointer;\n          padding: 5px 0px;\n        }\n\n        .listItem.active {\n          background-color: ",";\n          border: 0;\n        }\n\n        .listItem:hover {\n          background-color: ",";\n        }\n\n        .active-border {\n          border: 1px solid "," !important;\n        }\n\n        .message-item {\n\n          .widget-name {\n            font-size: ",";\n            font-weight: 400;\n          }\n\n          .action-name {\n            font-size: ",";\n            height: ",";\n          }\n\n          padding: 5px 12px 6px 12px;\n\n          .action-item {\n            padding: 5px 10px 10px 10px;\n          }\n\n          .drag-item {\n            &:hover {\n              background-color: rgba(255,255,255,.3);\n            }\n          }\n\n          .message-item-title {\n            font-size: ",";\n            width: 190px;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n          }\n\n          .deleteIcon-disable {\n            opacity: .3;\n          }\n\n          .deleteIcon {\n            cursor: pointer;\n            opacity: .8;\n          }\n\n          .deleteIcon:hover {\n            opacity: 1;\n          }\n\n          .item-add-action {\n            opacity: .8;\n            cursor: pointer;\n            width: 90px;\n\n            &:hover {\n              opacity: 1;\n            }\n          }\n        }\n      }\n    "],["\n      .message-setting {\n\n        .searchIcon {\n          cursor: pointer;\n          position: absolute;\n          right: 1.2rem;\n          margin-top: 0.3rem;\n        }\n\n        .listItem {\n          cursor: pointer;\n          padding: 5px 0px;\n        }\n\n        .listItem.active {\n          background-color: ",";\n          border: 0;\n        }\n\n        .listItem:hover {\n          background-color: ",";\n        }\n\n        .active-border {\n          border: 1px solid "," !important;\n        }\n\n        .message-item {\n\n          .widget-name {\n            font-size: ",";\n            font-weight: 400;\n          }\n\n          .action-name {\n            font-size: ",";\n            height: ",";\n          }\n\n          padding: 5px 12px 6px 12px;\n\n          .action-item {\n            padding: 5px 10px 10px 10px;\n          }\n\n          .drag-item {\n            &:hover {\n              background-color: rgba(255,255,255,.3);\n            }\n          }\n\n          .message-item-title {\n            font-size: ",";\n            width: 190px;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n          }\n\n          .deleteIcon-disable {\n            opacity: .3;\n          }\n\n          .deleteIcon {\n            cursor: pointer;\n            opacity: .8;\n          }\n\n          .deleteIcon:hover {\n            opacity: 1;\n          }\n\n          .item-add-action {\n            opacity: .8;\n            cursor: pointer;\n            width: 90px;\n\n            &:hover {\n              opacity: 1;\n            }\n          }\n        }\n      }\n    "])),e.colors.cyans.cyan100,a.polished.rgba(e.colors.cyans.cyan100,.4),e.colors.cyans.cyan500,a.polished.rem(14),a.polished.rem(13),a.polished.rem(25),a.polished.rem(14))},t.prototype.componentWillReceiveProps=function(e){e.widgetId!==this.props.widgetId?this.resetState():this.updateLocalState(e)},t.prototype.render=function(){var e=this,t=this.getMessages(),n=r.getAppConfigAction().appConfig,o=this.props.widgets[this.props.widgetId]&&this.props.widgets[this.props.widgetId].manifest&&this.props.widgets[this.props.widgetId].manifest.publishMessages;return a.jsx("div",{className:"w-100 h-100",css:this.getStyle(this.props.theme)},a.jsx("div",{className:"jimu-widget message-setting"},(!o||0===o.length)&&a.jsx(r.SettingSection,null,a.jsx("div",{className:"w-100 justify-content-center d-flex"},this.formatMessage("noTrigger"))),o&&o.length>0&&a.jsx(r.SettingSection,null,a.jsx(r.SettingRow,null,a.jsx("div",{className:"w-100 justify-content-center d-flex"},a.jsx(s.Button,{className:"w-100",color:"primary",onClick:this.onShowMessageChooseList},this.formatMessage("addTrigger")))),a.jsx(r.SettingRow,null,t.map(function(t,o){return a.jsx(g.MessageItem,{key:o,message:t,appConfig:n,onMessageRemoved:e.onMessageRemoved,isActive:t===e.state.currentTriggeredMessage&&e.state.panelRoutes.length>0,onMessageChanged:e.onMessageChanged,onClickAddAction:e.onShowTargetChooseList,onClickEditAction:e.onShowActionSettingPage,formatMessage:e.props.formatMessage})})),this.state.panelRoutes.length>0&&!this.props.pageId?a.jsx("div",null,this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===d.PathType.MessageChoose&&document&&document.getElementById("default")&&a.ReactDOM.createPortal(a.jsx("div",{className:"bg-gray-100 border-color-gray-400",style:this.modalStyle},a.jsx(d.RouterShell,{formatMessage:this.props.formatMessage,Routes:this.state.panelRoutes,title:this.formatMessage("selectTrigger"),onBack:this.backForwardPanel,onClose:this.closePanel},a.jsx(c.MessageChooseList,{widgetId:this.props.widgetId,appConfig:n,onSelected:this.onMessageChooseListSelected,messages:t,formatMessage:this.props.formatMessage}))),document.getElementById("default")),this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===d.PathType.TargetChoose&&this.state.currentTriggeredMessage&&document&&document.getElementById("default")&&a.ReactDOM.createPortal(a.jsx("div",{className:"bg-gray-100 border-color-gray-400",style:this.modalStyle},a.jsx(d.RouterShell,{formatMessage:this.props.formatMessage,Routes:this.state.panelRoutes,title:this.formatMessage("selectTarget"),onBack:this.backForwardPanel,onClose:this.closePanel},a.jsx(l.TargetChooseList,{appConfig:n,onSelected:this.onTargetChooseListSelected,message:this.state.currentTriggeredMessage,formatMessage:this.props.formatMessage}))),document.getElementById("default")),this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===d.PathType.ActionChoose&&this.state.currentTriggeredMessage&&this.state.currentTriggeredTarget&&document&&document.getElementById("default")&&a.ReactDOM.createPortal(a.jsx("div",{className:"bg-gray-100 border-color-gray-400",style:this.modalStyle},a.jsx(d.RouterShell,{formatMessage:this.props.formatMessage,Routes:this.state.panelRoutes,title:this.formatMessage("selectAction"),onBack:this.backForwardPanel,onClose:this.closePanel},a.jsx(p.ActionChooseList,{widgetId:this.props.widgetId,onSelected:this.onActionChooseListSelected,message:this.state.currentTriggeredMessage,target:this.state.currentTriggeredTarget,formatMessage:this.props.formatMessage}))),document.getElementById("default")),this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===d.PathType.ActionSetting&&this.state.currentTriggeredMessage&&this.state.currentTriggeredAction&&document&&document.getElementById("default")&&a.ReactDOM.createPortal(a.jsx("div",{className:"bg-gray-100 border-color-gray-400",style:this.modalStyle},a.jsx(d.RouterShell,{formatMessage:this.props.formatMessage,Routes:this.state.panelRoutes,title:this.formatMessage("actionSet")+" "+h(this.state.currentTriggeredAction),onBack:this.backForwardPanel,onClose:this.closePanel},a.jsx(u.default,{widgetId:this.props.widgetId,appConfig:n,message:this.state.currentTriggeredMessage,action:this.state.currentTriggeredAction,onUpdateAction:this.onUpdateAction,formatMessage:this.props.formatMessage}))),document.getElementById("default"))):null)))},t}(a.React.PureComponent);t.MessageSetting=a.ReactRedux.connect(function(e){return{messages:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.messages,widgets:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.widgets}})(a.themeUtils.withTheme(m))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),s=n(111),c=n(112),p=n(116),l=n(118),g=n(119),u=n(123),d=n(35),h=n(2),f=n(3),m=n(13),v=n(134),I=n(1),y=function(e){function t(t){var n=e.call(this,t)||this;n.titleTextInput=I.createRef(),n.spanTextInput=I.createRef(),n.onLayoutSettingChanged=function(e,t){f.getAppConfigAction().editLayoutItemSetting(e,t).exec()},n.onLayoutPosChanged=function(e,t){f.getAppConfigAction().editLayoutItemBBox(e,t).exec()},n.getPageType=function(e,t){for(var n in t){var o=t[n];if(o.id===e)return o}return{}},n.formatMessage=function(e){return n.props.intl.formatMessage({id:e,defaultMessage:v.default[e]})},n.handleTitleInputBlur=function(e,t,o){n.editTitle(t,e.target.value,o)},n.editTitle=function(e,t,n){"widget"===n?f.getAppConfigAction().editWidgetProperty(e,"label",t).exec():"section"===n?f.getAppConfigAction().editSectionProperty(e,"label",t).exec():"page"===n&&f.getAppConfigAction().editPageProperty(e,"label",t).exec()},n.handleKeydown=function(e){13===e.keyCode&&n.titleTextInput.current.blur()},n.focusEditTitle=function(e){n.titleTextInput.current&&(n.titleTextInput.current.select(),n.titleTextInput.current.focus())},n.onToggleMe=function(){var e=document.getElementsByClassName("sidebar_handler_right");e&&e[0].click()},n.titleTextInput=I.createRef(),n.spanTextInput=I.createRef();var o={titleLength:0,titleText:void 0},i=t.selection,a=t.appConfig,s=t.editingSectionId,c=t.currentPageId;if(i){var p=m.layoutUtils.findLayoutItem(a,i);p&&(p.type===r.LayoutItemType.Widget?p.widgetId&&(o.titleText=a.widgets[p.widgetId].label):p.type===r.LayoutItemType.Section&&(o.titleText=a.sections[p.sectionId].label))}else!s&&c&&(o.titleText=a.pages[c].label);return n.state=o,n}return o(t,e),t.prototype.componentDidUpdate=function(){this.spanTextInput.current&&this.state.titleLength!==this.spanTextInput.current.offsetWidth&&this.setState({titleLength:this.spanTextInput.current.offsetWidth+2})},t.prototype.componentWillReceiveProps=function(e){var t=e.selection,n=e.editingSectionId,o=e.currentPageId,i=this.getAppConfig();if(t){var a=m.layoutUtils.findLayoutItem(i,t);a&&(a.type===r.LayoutItemType.Widget?a.widgetId&&this.setState({titleText:i.widgets[a.widgetId].label}):a.type===r.LayoutItemType.Section&&this.setState({titleText:i.sections[a.sectionId].label}))}else!n&&o&&i&&this.setState({titleText:i.pages[o].label})},t.prototype.getCss=function(){var e=this.props.theme;return r.css(a||(a=i(["\n      height: 100%;\n      overflow: hidden;\n      overflow-x: hidden;\n      .jimu-widget-setting--row {\n        label {\n          user-select: none;\n        }\n      }\n      .jimu-widget-setting--section-header {\n        user-select: none;\n      }\n      .tab-content {\n        height: calc(100% - ",");\n        overflow: auto;\n        overflow-x: hidden;\n      }\n      .tab-pane{\n        width: 100%;\n      }\n\n      .tab-title-item{\n        width: 30%;\n      }\n\n      .header-title-input {\n        border: none;\n        min-width: ",";\n        width: ","px;\n        overflow: hidden;\n        white-space: nowrap;\n        margin-bottom: 0;\n        text-overflow: ellipsis;\n        cursor: pointer;\n        color: ",";\n        background-color: transparent;\n        max-width: ",";\n        &:focus {\n          background-color: ",";\n        }\n\n        &:hover {\n          border: 1px solid ",";\n        }\n      }\n\n      .setting-container {\n        overflow: auto;\n      }\n    "],["\n      height: 100%;\n      overflow: hidden;\n      overflow-x: hidden;\n      .jimu-widget-setting--row {\n        label {\n          user-select: none;\n        }\n      }\n      .jimu-widget-setting--section-header {\n        user-select: none;\n      }\n      .tab-content {\n        height: calc(100% - ",");\n        overflow: auto;\n        overflow-x: hidden;\n      }\n      .tab-pane{\n        width: 100%;\n      }\n\n      .tab-title-item{\n        width: 30%;\n      }\n\n      .header-title-input {\n        border: none;\n        min-width: ",";\n        width: ","px;\n        overflow: hidden;\n        white-space: nowrap;\n        margin-bottom: 0;\n        text-overflow: ellipsis;\n        cursor: pointer;\n        color: ",";\n        background-color: transparent;\n        max-width: ",";\n        &:focus {\n          background-color: ",";\n        }\n\n        &:hover {\n          border: 1px solid ",";\n        }\n      }\n\n      .setting-container {\n        overflow: auto;\n      }\n    "])),r.polished.rem(40),r.polished.rem(20),this.state.titleLength,e.colors.black,r.polished.rem(200),e.colors.white,e.colors.grays.gray300)},t.prototype.getAppConfig=function(){return r.getAppStore().getState().appStateInBuilder&&r.getAppStore().getState().appStateInBuilder.appConfig},t.prototype.render=function(){var e=this,t=this.getAppConfig(),o=this.props.selection;if(!t)return r.jsx("div",{css:this.getCss(),className:"builder-dynamic-setting bg-gray-100"},r.jsx(c.default,{dispatch:this.props.dispatch,formatMessage:this.formatMessage,theme:this.props.theme,pageId:"empty",browserSizeMode:this.props.browserSizeMode}));var i,a={widget:!1,section:!1,layoutItem:!1,page:!1,link:!1,folder:!1,dialog:!1,noSelection:!1};o&&((y=m.layoutUtils.findLayoutItem(t,o))?y.type===r.LayoutItemType.Widget?y.widgetId?a.widget=!0:a.layoutItem=!0:y.type===r.LayoutItemType.Section?a.section=!0:a.layoutItem=!0:a.noSelection=!0);if(o||(this.props.currentPageId?(a.page=!0,a.link=this.getPageType(this.props.currentPageId,t.pages).type===r.PageType.Link,a.folder=this.getPageType(this.props.currentPageId,t.pages).type===r.PageType.Folder):this.props.currentDialogId?a.dialog=!0:a.noSelection=!0),a.widget){var f=m.layoutUtils.findLayoutItem(t,o);if(t.widgets[f.widgetId]){var v=t.widgets[f.widgetId].manifest;i=v.properties.hasConfig&&v.properties.hasConfigInSettingPage?r.jsx(h.Tabs,{key:"widget-setting",className:"flex-grow-1 w-100 h-100",fill:!0},r.jsx(h.Tab,{title:this.formatMessage("content"),active:!0,className:"tab-title-item"},r.jsx(s.default,{formatMessage:this.formatMessage,dispatch:this.props.dispatch,widgetId:f.widgetId,widgetsSettingRuntimeInfo:this.props.widgetsSettingRuntimeInfo})),r.jsx(h.Tab,{title:this.formatMessage("style"),className:"tab-title-item"},r.jsx("div",{style:{overflow:"auto",overflowX:"hidden"}},r.jsx(u.default,{layoutId:o.layoutId,layoutItemId:o.layoutItemId,formatMessage:this.formatMessage,onSettingChanged:this.onLayoutSettingChanged,onPosChanged:this.onLayoutPosChanged}))),r.jsx(h.Tab,{title:this.formatMessage("action"),className:"tab-title-item"},r.jsx("div",{style:{overflow:"auto",overflowX:"hidden"}},r.jsx(d.MessageSetting,{widgetId:f.widgetId,formatMessage:this.formatMessage,pageId:r.urlUtils.getAppIdPageIdFromUrl().pageId})))):r.jsx("div",{className:"h-100"},r.jsx(u.default,{layoutId:o.layoutId,layoutItemId:o.layoutItemId,formatMessage:this.formatMessage,onSettingChanged:this.onLayoutSettingChanged,onPosChanged:this.onLayoutPosChanged})),i=r.jsx("div",{className:"w-100 h-100 d-flex flex-column"},r.jsx("div",{className:"jimu-widget-setting--header d-flex align-items-center"},r.jsx("input",{className:"header-title-input h4",ref:this.titleTextInput,value:this.state.titleText,onChange:function(t){return e.setState({titleText:t.target.value})},onBlur:function(t){return e.handleTitleInputBlur(t,f.widgetId,"widget")},onKeyDown:function(t){return e.handleKeydown(t)}}),r.jsx(h.Button,{size:"sm",color:"dark",text:!0,icon:!0,className:"ml-2",onClick:this.focusEditTitle},r.jsx(h.Icon,{icon:n(12),className:"header-title-icon"})),r.jsx("span",{className:"px-1 border font-weight-normal h4",style:{position:"absolute",opacity:0,whiteSpace:"nowrap",zIndex:-1},ref:this.spanTextInput},this.state.titleText)),r.jsx("div",{className:"bg-gray-100",style:{height:"calc(100% - 51px)"}},i))}else i=r.jsx("div",null,this.formatMessage("noSelection"))}if(a.layoutItem){var I=this.formatMessage("layout");i=r.jsx("div",{className:"w-100 h-100 d-flex flex-column"},r.jsx("h4",{className:"jimu-widget-setting--header"},I),r.jsx("div",{className:"h-100",style:{overflow:"auto",overflowX:"hidden"}},r.jsx(u.default,{layoutId:o.layoutId,layoutItemId:o.layoutItemId,formatMessage:this.formatMessage,onSettingChanged:this.onLayoutSettingChanged,onPosChanged:this.onLayoutPosChanged})))}if(a.section){var y=m.layoutUtils.findLayoutItem(t,o),w=t.sections[y.sectionId];i=r.jsx(h.Tabs,{className:"flex-grow-1 h-100",fill:!0},r.jsx(h.Tab,{key:"section-setting",title:this.formatMessage("content"),active:!0},r.jsx(g.default,{formatMessage:this.formatMessage,theme:this.props.theme,dispatch:this.props.dispatch,sectionId:w.id})),r.jsx(h.Tab,{title:this.formatMessage("general")},r.jsx("div",{className:"h-100",style:{overflow:"auto",overflowX:"hidden"}},r.jsx(u.default,{layoutId:o.layoutId,layoutItemId:o.layoutItemId,formatMessage:this.formatMessage,onSettingChanged:this.onLayoutSettingChanged,onPosChanged:this.onLayoutPosChanged})))),i=r.jsx("div",{className:"w-100 h-100 d-flex flex-column"},r.jsx("div",{className:"jimu-widget-setting--header d-flex align-items-center"},r.jsx("input",{className:"header-title-input h4",ref:this.titleTextInput,value:this.state.titleText,onChange:function(t){return e.setState({titleText:t.target.value})},onBlur:function(t){return e.handleTitleInputBlur(t,w.id,"section")},onKeyDown:function(t){return e.handleKeydown(t)}}),r.jsx(h.Button,{size:"sm",color:"dark",text:!0,icon:!0,className:"ml-2",onClick:this.focusEditTitle},r.jsx(h.Icon,{icon:n(12),className:"header-title-icon"})),r.jsx("span",{className:"px-1 border font-weight-normal h4",style:{position:"absolute",opacity:0,whiteSpace:"nowrap",zIndex:-1},ref:this.spanTextInput},this.state.titleText)),r.jsx("div",{style:{overflow:"auto",overflowX:"hidden"}},i))}if(a.page){i=r.jsx(c.default,{dispatch:this.props.dispatch,formatMessage:this.formatMessage,pageId:this.props.currentPageId,pageMode:this.props.pageMode,maxWidth:this.props.maxPageWidth,browserSizeMode:this.props.browserSizeMode,theme:this.props.theme}),a.link?i=r.jsx(p.default,{dispatch:this.props.dispatch,appConfig:t,formatMessage:this.formatMessage,pageId:this.props.currentPageId}):a.folder&&(i=r.jsx(l.default,{dispatch:this.props.dispatch,appConfig:t,formatMessage:this.formatMessage,pageId:this.props.currentPageId}));var x=this.props.currentPageId;i=r.jsx("div",{className:"w-100 h-100 d-flex flex-column"},r.jsx("div",{className:"jimu-widget-setting--header d-flex align-items-center"},r.jsx("input",{className:"header-title-input h4",ref:this.titleTextInput,value:this.state.titleText,onChange:function(t){return e.setState({titleText:t.target.value})},onBlur:function(t){return e.handleTitleInputBlur(t,x,"page")},onKeyDown:function(t){return e.handleKeydown(t)}}),r.jsx(h.Button,{size:"sm",color:"dark",text:!0,icon:!0,className:"ml-2",onClick:this.focusEditTitle},r.jsx(h.Icon,{icon:n(12),className:"header-title-icon"})),r.jsx("span",{className:"px-1 border font-weight-normal h4",style:{position:"absolute",opacity:0,whiteSpace:"nowrap",zIndex:-1},ref:this.spanTextInput},this.state.titleText)),r.jsx("div",{className:"h-100",style:{overflow:"auto",overflowX:"hidden"}},i))}return a.dialog&&(i=r.jsx("div",{className:"h-100"},"dialog")),a.noSelection&&(i=r.jsx("div",{className:"h-100"},this.formatMessage("noSelection"))),r.jsx("div",{css:this.getCss(),className:"builder-dynamic-setting bg-gray-100"},i)},t.mapExtraStateProps=function(e){var t,n,o=e.appStateInBuilder&&e.appStateInBuilder.appRuntimeInfo.currentPageId;return o&&(t=r.lodash.getValue(e,"appStateInBuilder.appConfig.pages."+o+".mode"),n=r.lodash.getValue(e,"appStateInBuilder.appConfig.pages."+o+".maxWidth")),{currentPageId:o,pageMode:t,maxPageWidth:n,widgetsSettingRuntimeInfo:e.builder.widgetsSettingRuntimeInfo,currentDialogId:e.appStateInBuilder&&e.appStateInBuilder.appRuntimeInfo.currentDialogId,selection:e.appStateInBuilder&&e.appStateInBuilder.appRuntimeInfo.selection,currentViewId:e.appStateInBuilder&&e.appStateInBuilder.appRuntimeInfo.currentViewId,browserSizeMode:e.appStateInBuilder&&e.appStateInBuilder.browserSizeMode}},t}(r.BaseWidget);t.default=y},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(3),r=function(e){function t(t){var n=e.call(this,t)||this;return n.formatMessage=function(e){return n.props.formatMessage(e)},n.onSettingChange=function(e){var t,o=n.props.widgetJson,i=a.getAppConfigAction();Object.keys(e).forEach(function(t){null===e[t]&&("outputDataSourcesJson"===t?(o.outputDataSources&&o.outputDataSources.forEach(function(e){return i.removeDataSource(e)}),o=o.without("outputDataSources")):o=o.without(t),delete e[t])}),e.outputDataSourcesJson&&(e.outputDataSourcesJson.forEach(function(e){e=e.set("isOutputFromWidget",!0),i.addDataSource(e)}),t=e.outputDataSourcesJson.map(function(e){return e.id})),delete e.outputDataSourcesJson,delete e.widgetId,o=o.merge(e),t&&(o=o.merge({outputDataSources:t})),i.editWidget(o).exec()},n.renderWidgetSetting=function(e){var t=n.props.widgetsSettingRuntimeInfo[e]&&n.props.widgetsSettingRuntimeInfo[e].isClassLoaded?a.WidgetSettingManager.getInstance().getWidgetSettingClass(e):null;return t?i.React.createElement(i.ErrorBoundary,null,i.React.createElement(t,{onSettingChange:n.onSettingChange})):i.React.createElement("div",null,n.formatMessage("dynamicLoading"),"...")},n.onToggleMe=function(){var e=document.getElementsByClassName("sidebar_handler_right");e&&e[0].click()},n}return o(t,e),t.prototype.componentDidUpdate=function(){this.loadWidgetSettingClass()},t.prototype.componentDidMount=function(){this.loadWidgetSettingClass()},t.prototype.loadWidgetSettingClass=function(){var e=this.props.widgetId;e&&!a.WidgetSettingManager.getInstance().getWidgetSettingClass(e)&&a.WidgetSettingManager.getInstance().loadWidgetSettingClass(e)},t.prototype.render=function(){if(!this.props.widgetJson)return i.React.createElement("div",null,this.formatMessage("dynamicLoading"),"...");var e=this.props.widgetId;return i.React.createElement("div",{className:"setting-container h-100"},e?this.renderWidgetSetting(e):i.React.createElement("div",null,"  ",this.formatMessage("noWidget")))},t}(i.React.PureComponent);t._WidgetSetting=r,t.default=i.ReactRedux.connect(function(e,t){return{widgetJson:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.widgets[t.widgetId]}})(r)},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(2),s=n(3),c=n(113),p=n(15),l={},g=function(e){function t(t){var n=e.call(this,t)||this;n.onMaxWidthChange=function(e){var t=n.props.pageJson;t=t.set("maxWidth",+e.currentTarget.value),s.getAppConfigAction().editPage(t).exec()},n.formatMessage=function(e){return n.props.formatMessage(e)},n.setPageWidthModeAuto=function(){var e=n.props.pageJson;e=e.without("maxWidth"),s.getAppConfigAction().editPage(e).exec(),n.setState({pageWidthMode:1})},n.setPageWidthModeFixed=function(){var e=n.props.pageJson;e=e.set("maxWidth",1024),s.getAppConfigAction().editPage(e).exec(),n.setState({pageWidthMode:0})},n.onToggleMe=function(){var e=document.getElementsByClassName("sidebar_handler_right");e&&e[0].click()};var o=t.pageJson;return n.state={isSetImageUrl:!1,currentImgUrlInput:"",pageWidthMode:o.maxWidth>0?0:1},n.fileInput=a.React.createRef(),n}return o(t,e),t.prototype.getAppConfig=function(){return a.getAppStore().getState().appStateInBuilder&&a.getAppStore().getState().appStateInBuilder.appConfig||{pages:{empty:{}}}},t.prototype.layoutSetting=function(){var e=this.props.pageId,t=this.getAppConfig(),n=t.pages[e];if(n&&n.layout){var o=a.utils.findLayoutId(n.layout,a.getAppStore().getState().browserSizeMode,t.mainSizeMode),i=t.layouts[o];if(i&&i.type===a.LayoutType.FlowLayout)return a.jsx(p.FlowLayoutSetting,{layoutId:o,formatMessage:this.props.formatMessage})}},t.prototype.getStyle=function(){var e=this.props.theme;return a.css(u||(u=i(["\n    .image-setting-input {\n      opacity: 0;\n      position: absolute;\n      left: 88px;\n      width: 70px !important;\n      height: 30px !important;\n    }\n    input, select {\n      width: 130px;\n      max-width: 130px;\n    }\n    .img-container {\n      width: 109px;\n      height: 70px;\n      cursor: pointer;\n      outline: 1px solid ",";\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      margin-bottom: 5px;\n      &.active {\n        outline: 2px solid ",";\n      }\n      .thumbnail {\n        width: 107px;\n      }\n    }\n    "],["\n    .image-setting-input {\n      opacity: 0;\n      position: absolute;\n      left: 88px;\n      width: 70px !important;\n      height: 30px !important;\n    }\n    input, select {\n      width: 130px;\n      max-width: 130px;\n    }\n    .img-container {\n      width: 109px;\n      height: 70px;\n      cursor: pointer;\n      outline: 1px solid ",";\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      margin-bottom: 5px;\n      &.active {\n        outline: 2px solid ",";\n      }\n      .thumbnail {\n        width: 107px;\n      }\n    }\n    "])),e.colors.grays.gray400,e.colors.cyans.cyan500)},t.prototype.render=function(){var e=this.props,t=e.pageMode,o=e.maxWidth;return a.jsx("div",{className:"setting-pane widget-builder-page-setting",css:this.getStyle()},t===a.PageMode.AutoScroll&&a.jsx(s.SettingSection,{title:this.formatMessage("contentWidth")},a.jsx(s.SettingRow,null,a.jsx("div",{className:"d-flex w-100 justify-content-between"},a.jsx("div",{className:"d-flex flex-column align-items-center"},a.jsx("div",{className:"img-container "+(0===this.state.pageWidthMode?"active":""),onClick:this.setPageWidthModeFixed},a.jsx("img",{className:"thumbnail",src:n(114)})),a.jsx("span",null,this.formatMessage("custom"))),a.jsx("div",{className:"d-flex flex-column align-items-center"},a.jsx("div",{className:"img-container "+(1===this.state.pageWidthMode?"active":""),onClick:this.setPageWidthModeAuto},a.jsx("img",{className:"thumbnail",src:n(115)})),a.jsx("span",null,this.formatMessage("auto"))))),0===this.state.pageWidthMode&&a.jsx(s.SettingRow,{label:this.formatMessage("maxWidth")},a.jsx(r.Input,{type:"number",className:"setting-input-select",min:300,onChange:this.onMaxWidthChange,value:isNaN(o)?"":o}))),a.jsx(c.default,{formatMessage:this.formatMessage,emptyLayout:l,dispatch:this.props.dispatch,pageId:this.props.pageId,pagePart:"body",pageJson:this.props.pageJson,browserSizeMode:this.props.browserSizeMode}),a.jsx(c.default,{formatMessage:this.formatMessage,emptyLayout:l,dispatch:this.props.dispatch,pageId:this.props.pageId,pagePart:"header",pageJson:this.props.pageJson,header:this.props.header,browserSizeMode:this.props.browserSizeMode}),a.jsx(c.default,{formatMessage:this.formatMessage,emptyLayout:l,dispatch:this.props.dispatch,pageJson:this.props.pageJson,pageId:this.props.pageId,pagePart:"footer",footer:this.props.footer,browserSizeMode:this.props.browserSizeMode}),this.layoutSetting())},t}(a.React.PureComponent);t._PageSetting=g;var u,d=a.ReactRedux.connect(function(e,t){return{pageJson:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.pages[t.pageId]||{},header:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.header,footer:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.footer}})(g);t.default=d},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(2),s=n(3),c=75,p=function(e){function t(t){var n=e.call(this,t)||this;return n.isOpen=function(){var e=n.props,t=e.pagePart,o=e.pageId,i=n.getAppConfig();return"body"===t||!!(i&&i.pages[o]&&i[t]&&i.pages[o][t])},n.formatMessage=function(e){return n.props.formatMessage(e)},n.onSwitchChange=function(){var e=n.props,t=e.pageId,o=e.pagePart,r=e.emptyLayout,p=e.browserSizeMode,l=n.getAppConfig(),g=l.pages[t],u=l[o],d=s.getAppConfigAction();if(!u){var h=a.appConfigUtils.getUniqueId(l,"layout"),f=a.Immutable(i({},r,{id:h,type:a.LayoutType.FlowLayout}));u=a.Immutable({}).setIn(["layout",p],h).setIn(["height",p],c),"header"===o?d.editHeader(u,[f]):d.editFooter(u,[f])}var m=g.set(o,!g[o]);d.editPage(m).exec(),n.setState({isOpen:m[o]})},n.onHeightChange=function(e){var t=e,o=n.props,i=o.pagePart,a=o.browserSizeMode,r=n.getAppConfig();"header"===i?s.getAppConfigAction().editHeader(r.header.setIn(["height",a],t)).exec():s.getAppConfigAction().editFooter(r.footer.setIn(["height",a],t)).exec()},n.onBackgroundColorChange=function(e){var t=n.props,o=t.pageId,i=t.pagePart,a=n.getAppConfig(),r=a.pages[o];"body"===i?s.getAppConfigAction().editPage(r.set("bodyBackgroundColor",e)).exec():"header"===i?s.getAppConfigAction().editHeader(a.header.set("backgroundColor",e)).exec():s.getAppConfigAction().editFooter(a.footer.set("backgroundColor",e)).exec()},n.state={isOpen:n.isOpen()},n}return o(t,e),t.prototype.getAppConfig=function(){return a.getAppStore().getState().appStateInBuilder&&a.getAppStore().getState().appStateInBuilder.appConfig||{pages:{empty:{}}}},t.prototype.componentWillReceiveProps=function(e){if(e.pageId!==this.props.pageId){var t=e.pageJson,n=e.pagePart;this.setState({isOpen:"body"===n||t&&t[n]})}},t.prototype.render=function(){var e,t={body:this.formatMessage("body"),header:this.formatMessage("header"),footer:this.formatMessage("footer")},n=this.props,o=n.pageId,i=n.pagePart,p=n.browserSizeMode,l=this.getAppConfig(),g=l.pages[o];e="body"===i?g.bodyBackgroundColor||"#eee":l[i]&&l[i].backgroundColor||"#eee";var u=a.React.createElement("div",{className:"setting-title d-flex justify-content-between"},a.React.createElement("div",null,a.React.createElement("span",null,t[this.props.pagePart])),a.React.createElement("div",{className:"d-flex align-items-center"},"body"===i?null:a.React.createElement(r.Switch,{checked:this.isOpen(),onChange:this.onSwitchChange}))),d=a.lodash.getValue(l,i+".height."+p,c);return a.React.createElement(s.SettingSection,{title:u},a.React.createElement(r.Collapse,{isOpen:this.state.isOpen},"body"===i?null:a.React.createElement(s.SettingRow,{label:this.formatMessage("height")+"(px)"},a.React.createElement(r.Input,{className:"setting-input-select",type:"text",value:d,onAcceptValue:this.onHeightChange})),a.React.createElement(s.SettingRow,{label:this.formatMessage("fill")},a.React.createElement("div",{style:{width:"50px",height:"20px"}},a.React.createElement(s.ColorChooser,{color:e,onChange:this.onBackgroundColorChange})))))},t}(a.React.PureComponent);t.default=p},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjEwOHB4IiBoZWlnaHQ9IjY4cHgiIHZpZXdCb3g9IjAgMCAxMDggNjgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA1NS4yICg3ODE4MSkgLSBodHRwczovL3NrZXRjaGFwcC5jb20gLS0+DQogICAgPHRpdGxlPkN1c3RvbTwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGcgaWQ9IkJ1aWxkZXIiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyBpZD0iQjE0LVBhZ2Utc2V0dGluZyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg4MS4wMDAwMDAsIC0xOTMuMDAwMDAwKSI+DQogICAgICAgICAgICA8ZyBpZD0iQ3VzdG9tIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4ODEuMDAwMDAwLCAxOTMuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IkxheW91dCIgZmlsbD0iIzAwNDI0RiIgeD0iMjkiIHk9IjE0IiB3aWR0aD0iNTAiIGhlaWdodD0iNDAiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlIiBmaWxsPSIjMzUzQjQwIiBvcGFjaXR5PSIwLjQiIHg9Ijg4IiB5PSIwIiB3aWR0aD0iMjAiIGhlaWdodD0iNjgiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODgsMCBMODgsNjgiIGlkPSJEYXNoLWxpbmUiIHN0cm9rZT0iIzRENTQ1QiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgc3Ryb2tlLWRhc2hhcnJheT0iMywzIj48L3BhdGg+DQogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgZmlsbD0iIzM1M0I0MCIgb3BhY2l0eT0iMC40IiB4PSIwIiB5PSIwIiB3aWR0aD0iMjAiIGhlaWdodD0iNjgiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMjAsMCBMMjAsNjgiIGlkPSJEYXNoLWxpbmUiIHN0cm9rZT0iIzRENTQ1QiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgc3Ryb2tlLWRhc2hhcnJheT0iMywzIj48L3BhdGg+DQogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlNjcm9sbC1iYXIiIGZpbGw9IiM0RDU0NUIiIHg9IjEwMiIgeT0iMyIgd2lkdGg9IjMiIGhlaWdodD0iNDAiIHJ4PSIxLjUiPjwvcmVjdD4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg=="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjEwN3B4IiBoZWlnaHQ9IjY4cHgiIHZpZXdCb3g9IjAgMCAxMDcgNjgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA1NS4yICg3ODE4MSkgLSBodHRwczovL3NrZXRjaGFwcC5jb20gLS0+DQogICAgPHRpdGxlPkF1dG88L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxnIGlkPSJCdWlsZGVyIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkIxNC1QYWdlLXNldHRpbmciIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDEwLjAwMDAwMCwgLTE5NC4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIGlkPSJBdXRvIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDEwLjAwMDAwMCwgMTk0LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUiIHg9IjAiIHk9IjAiIHdpZHRoPSIxMDciIGhlaWdodD0iNjgiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iTGF5b3V0IiBmaWxsPSIjMDA0MjRGIiB4PSI2IiB5PSIxNCIgd2lkdGg9IjkwIiBoZWlnaHQ9IjQwIj48L3JlY3Q+DQogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlNjcm9sbC1iYXIiIGZpbGw9IiM0RDU0NUIiIHg9IjEwMSIgeT0iMyIgd2lkdGg9IjMiIGhlaWdodD0iNDAiIHJ4PSIxLjUiPjwvcmVjdD4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg=="},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),s=n(2),c=n(3),p=n(21),l=n(34),g=n(117),u={value:"",openType:void 0,linkType:r.LinkType.WebAddress},d=function(e){function t(t){var n=e.call(this,t)||this;return n.getCurrentPageName=function(e){var t=e.appConfig,n=e.pageId;return t.pages[n].label||""},n.onNameChange=function(e){if(e&&""!==e.trim()){var t=n.props.appConfig.pages[n.props.pageId],o=r.Immutable(t).merge({label:e});c.getAppConfigAction().editPage(o).exec()}else n.setState({currentLinkName:n.getCurrentPageName(n.props)})},n.openBrowseImage=function(){var e=n.fileInput.current.files;if(e&&e[0]){var t=new FileReader;t.readAsDataURL(e[0]),t.onload=function(e){var t=e.target;n.changeIcon(t.result)}}},n.setImageUrl=function(){var e=n.state.currentImgUrlInput;""!=e&&(n.setState({isSetImageUrl:!1}),n.changeIcon(e))},n.getPageType=function(e){var t=n.props.appConfig.pages;for(var o in t){var i=t[o];if(i.id===e)return i}return{}},n.settingLinkConfirm=function(e){n.setState({isShowLinkSetting:!1}),(e.value||""===e.value)&&n.setState({currentUrl:e.value}),n.changeUrl(e.value,e.openType)},n.changeUrl=function(e,t){var o=n.props.appConfig.pages[n.props.pageId],i=r.Immutable(o).merge({linkUrl:e||"#",openTarget:t});c.getAppConfigAction().editPage(i).exec(),u.value=e,u.openType=t},n.changeIcon=function(e){var t=n.props.appConfig.pages[n.props.pageId],o=r.Immutable(t).merge({icon:e});c.getAppConfigAction().editPage(o).exec()},n.formatMessage=function(e){return n.props.formatMessage(e)},n.state={isSetImageUrl:!1,currentImgUrlInput:"",isShowLinkSetting:!1,currentUrl:n.props.currentUrl||"",currentLinkName:n.getCurrentPageName(t)},n.fileInput=r.React.createRef(),n}return o(t,e),t.prototype.componentWillReceiveProps=function(e){var t=e.appConfig;e.pageId===this.props.pageId&&t===this.props.appConfig||this.setState({currentLinkName:this.getCurrentPageName(e)})},t.prototype.resetLinkParam=function(){u.value="",u.openType=void 0;var e=this.props.appConfig.pages[this.props.pageId];e&&e.linkUrl&&"#"!=e.linkUrl&&(u.value=e.linkUrl),e&&e.openTarget&&(u.openType=e.openTarget)},t.prototype.getStyle=function(e){return r.css(a||(a=i(["\n    .image-setting-input {\n      opacity: 0;\n      position: absolute;\n      left: 88px;\n      width: 70px !important;\n      height: 30px !important;\n    }\n    "],["\n    .image-setting-input {\n      opacity: 0;\n      position: absolute;\n      left: 88px;\n      width: 70px !important;\n      height: 30px !important;\n    }\n    "])))},t.prototype.render=function(){var e=this,t=this.state,n=t.isSetImageUrl,o=t.currentImgUrlInput,i=t.isShowLinkSetting;return this.resetLinkParam(),r.jsx("div",{className:"setting-pane widget-builder-page-setting widget-setting-image"},r.jsx(c.SettingSection,null,n&&r.jsx(c.SettingRow,null,r.jsx("div",{className:"d-flex flex-row justify-content-around border w-100 align-items-center"},r.jsx(s.Input,{className:"border-0 w-100",value:o,placeholder:this.formatMessage("urlIsHere")+"...",onChange:function(t){e.setState({currentImgUrlInput:t.target.value})},onKeyUp:this.setImageUrl}),r.jsx("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:this.setImageUrl},r.jsx(s.Icon,{icon:l,className:"float-right"})),r.jsx("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:function(){e.setState({isSetImageUrl:!1})}},r.jsx(s.Icon,{icon:p,className:"float-right"})))),r.jsx(c.SettingRow,null,r.jsx(s.Button,{className:"w-100 text-dark set-link-btn",color:"secondary",onClick:function(){e.setState({isShowLinkSetting:!i})}},r.jsx(s.Icon,{icon:g,className:"mr-3"}),"Set link"))),i&&r.jsx(c.LinkSettingPopup,{showDialog:i,isLinkPageSetting:!0,linkParam:u,onSettingCancel:function(){e.setState({isShowLinkSetting:!1})},onSettingConfirm:this.settingLinkConfirm}))},t.mapExtraStateProps=function(e){return{pageId:e.appRuntimeInfo.currentPageId}},t}(r.React.PureComponent),h=r.themeUtils.withTheme(d);t.default=h},function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("path",{d:"M7.42 8.84a.502.502 0 0 1 0 .71L6 10.97A3.515 3.515 0 1 1 1.03 6l1.42-1.42a.502.502 0 1 1 .71.71L1.74 6.71a2.51 2.51 0 1 0 3.55 3.55l1.42-1.42a.502.502 0 0 1 .71 0zm1.42-2.13l1.42-1.42a2.51 2.51 0 1 0-3.55-3.55L5.29 3.16a.502.502 0 1 1-.71-.71L6 1.03A3.515 3.515 0 1 1 10.97 6L9.55 7.42a.502.502 0 1 1-.71-.71zm-4.97.71l3.55-3.55a.502.502 0 0 1 .71.71L4.58 8.13a.502.502 0 0 1-.71-.71z",fill:"currentColor",fillRule:"nonzero"});function r(e){return i.createElement("svg",o({width:12,height:12,viewBox:"0 0 12 12"},e),a)}e.exports=r,r.default=r},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),s=n(2),c=n(3),p=n(21),l=n(34),g=function(e){function t(t){var n=e.call(this,t)||this;return n.getCurrentPageName=function(e){var t=e.appConfig,n=e.pageId;return t.pages[n].label||""},n.onNameChange=function(e){if(e&&""!==e.trim()){var t=n.props.appConfig.pages[n.props.pageId],o=r.Immutable(t).merge({label:e});c.getAppConfigAction().editPage(o).exec()}else n.setState({currentPageName:n.getCurrentPageName(n.props)})},n.openBrowseImage=function(){var e=n.fileInput.current.files;if(e&&e[0]){var t=new FileReader;t.readAsDataURL(e[0]),t.onload=function(e){var t=e.target;n.changeIcon(t.result)}}},n.setImageUrl=function(){var e=n.state.currentImgUrlInput;""!=e&&(n.setState({isSetImageUrl:!1}),n.changeIcon(e))},n.formatMessage=function(e){return n.props.formatMessage(e)},n.getPageType=function(e){var t=n.props.appConfig.pages;for(var o in t){var i=t[o];if(i.id===e)return i}return{}},n.changeIcon=function(e){var t=n.props.appConfig.pages[n.props.pageId],o=r.Immutable(t).merge({icon:e});c.getAppConfigAction().editPage(o).exec()},n.state={isSetImageUrl:!1,currentImgUrlInput:"",currentPageName:n.getCurrentPageName(t)},n.fileInput=r.React.createRef(),n}return o(t,e),t.prototype.componentWillReceiveProps=function(e){var t=e.appConfig;e.pageId===this.props.pageId&&t===this.props.appConfig||this.setState({currentPageName:this.getCurrentPageName(e)})},t.prototype.getStyle=function(){return r.css(a||(a=i(["\n    .image-setting-input {\n      opacity: 0;\n      position: absolute;\n      left: 88px;\n      width: 70px !important;\n      height: 30px !important;\n    }\n    "],["\n    .image-setting-input {\n      opacity: 0;\n      position: absolute;\n      left: 88px;\n      width: 70px !important;\n      height: 30px !important;\n    }\n    "])))},t.prototype.render=function(){var e=this,t=this.state,n=t.isSetImageUrl,o=t.currentImgUrlInput;return r.jsx("div",{className:"setting-pane widget-builder-page-setting widget-setting-image"},r.jsx(c.SettingSection,null,r.jsx(s.Input,{placeholder:this.formatMessage("noSettingOptions"),disabled:!0,style:{border:0,background:"transparent",userSelect:"none"}}),n&&r.jsx(c.SettingRow,null,r.jsx("div",{className:"d-flex flex-row justify-content-around border w-100 align-items-center"},r.jsx(s.Input,{className:"border-0 w-100",value:o,placeholder:this.formatMessage("urlIsHere")+"...",onChange:function(t){e.setState({currentImgUrlInput:t.target.value})},onKeyUp:this.setImageUrl}),r.jsx("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:this.setImageUrl},r.jsx(s.Icon,{icon:l,className:"float-right"})),r.jsx("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:function(){e.setState({isSetImageUrl:!1})}},r.jsx(s.Icon,{icon:p,className:"float-right"}))))))},t.mapExtraStateProps=function(e){return{pageId:e.appRuntimeInfo.currentPageId}},t}(r.React.PureComponent);t.default=g},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),s=n(3),c=n(2),p=n(120),l=function(e){function t(t){var n=e.call(this,t)||this;n._updateSectionName=function(e){var t=n.props.section;if(e&&""!==e.trim()){var o=r.Immutable(t).set("label",e);s.getAppConfigAction().editSection(o).exec()}else n.setState({currentSectionName:t&&t.label||""})},n.formatMessage=function(e){return n.props.formatMessage(e)},n._addView=function(){var e,t=n.props,o=t.section,i=t.browserSizeMode,a=s.getAppConfigAction().appConfig,c=r.appConfigUtils.getUniqueId(a,"layout"),p=r.Immutable({}).merge({id:c}),l=r.Immutable({}).merge({id:r.appConfigUtils.getUniqueId(a,"view"),label:r.appConfigUtils.getUniqueLabel(a,"view","view"),layout:(e={},e[i]=c,e)});s.getAppConfigAction().addView(l,o.id,[p]).exec(),r.lodash.defer(function(){n._selectView(l.id)})},n._duplicateView=function(){var e=n.props,t=e.activeViewId,o=e.sectionId,i=s.getAppConfigAction().appConfig,a=r.appConfigUtils.getUniqueId(i,"view");s.getAppConfigAction().duplicateView(t,o).exec(),r.lodash.defer(function(){n._selectView(a)})},n._selectView=function(e){var t=n.props.section;s.builderAppSync.publishViewChangeToApp(t.id,e)},n._sortView=function(e,t){var o=n.props.section,i=o.views.asMutable(),a=i[e],c=i[t],p=(i=i.splice(e,1)).indexOf(c);i=i.splice(p,0,a);var l=r.Immutable(o).set("views",i);s.getAppConfigAction().editSection(l).exec()};var o=t.section;return n.state={currentSectionName:o&&o.label||""},n}return o(t,e),t.prototype.componentWillReceiveProps=function(e){var t=e.section;if(!t)return null;t.id===this.props.section.id&&t.label===this.props.section.label||this.setState({currentSectionName:t&&t.label||""})},t.prototype.render=function(){var e=this,t=this.props,o=t.section,l=t.views,g=t.theme,u=t.dispatch,d=t.activeViewId;if(!o)return null;var h=r.css(a||(a=i(["\n      cursor:pointer;\n    "],["\n      cursor:pointer;\n    "])));return r.jsx("div",{className:"flexbox-layout-setting"},r.jsx(s.SettingSection,null,r.jsx(s.SettingRow,{label:this.formatMessage("views")},r.jsx(c.Button,{css:h,color:"link",onClick:this._addView,title:this.formatMessage("addView")},r.jsx(c.Icon,{icon:n(121),className:"mr-0"})),r.jsx(c.Button,{css:h,color:"link",onClick:this._duplicateView,title:this.formatMessage("duplicateView")},r.jsx(c.Icon,{icon:n(122),className:"mr-0"}))),l.map(function(t,n){return r.jsx(s.SettingRow,{key:t.id},r.jsx(p.default,{index:n,canRemove:l.length>1,formatMessage:e.formatMessage,dispatch:u,sectionId:o.id,theme:g,view:t,onSelect:e._selectView,selected:d===t.id,moveItem:e._sortView}))})))},t}(r.React.PureComponent);t.default=r.ReactRedux.connect(function(e,t){var n=t.sectionId,o=e.appStateInBuilder.appConfig,i=o.sections[n];if(!i)return null;var a,r=i.views.map(function(e){return o.views[e]});return e.appStateInBuilder.appRuntimeInfo.currentViewId?(a=e.appStateInBuilder.appRuntimeInfo.currentViewId,r.find(function(e){return e.id===a})||(a=i.views[0])):a=i.views[0],{section:i,views:r,activeViewId:a,browserSizeMode:e.appStateInBuilder&&e.appStateInBuilder.browserSizeMode}})(l)},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),s=n(3),c=n(2),p=n(16),l=function(e){function t(t){var n=e.call(this,t)||this;return n.formatMessage=function(e){return n.props.formatMessage(e)},n._select=function(e){e.stopPropagation(),n.props.onSelect(n.props.view.id)},n._enableEditing=function(e){e.stopPropagation(),n.setState({editingLabel:!0})},n._disableEditing=function(){n._onLabelUpdate(n.inputRef.value),n.setState({editingLabel:!1})},n._onLabelUpdate=function(e){var t=n.props.view,o=r.Immutable(t).set("label",e);s.getAppConfigAction().editView(o).exec()},n.state={editingLabel:!1},n}return o(t,e),t.prototype._removeView=function(){var e=this.props,t=e.view,n=e.sectionId,o=e.dispatch;s.getAppConfigAction().removeView(t.id,n,!1).exec(),o(r.appActions.selectionChanged(null))},t.prototype._duplicateView=function(){var e=this;if(this.props.view){var t=s.getAppConfigAction().appConfig,n=r.appConfigUtils.getUniqueId(t,"view");s.getAppConfigAction().duplicateView(this.props.view.id,this.props.sectionId).exec(),r.lodash.defer(function(){e.props.onSelect(n)})}},t.prototype._focusInput=function(){this.inputRef&&(this.inputRef.select(),this.inputRef.focus())},t.prototype.componentDidMount=function(){this.inputRef&&(this.inputRef.select(),this.inputRef.focus())},t.prototype.componentDidUpdate=function(){this.inputRef&&(this.inputRef.select(),this.inputRef.focus())},t.prototype._getStyle=function(){var e=this.props.theme;return r.css(a||(a=i(["\n    padding: 5px 10px;\n    cursor: pointer;\n\n    .drop-down {\n      visibility: hidden;\n      .popover{\n        .popover-inner {\n          box-shadow: 0 0 0;\n        }\n      }\n    }\n\n    &.selected {\n      background-color: ",";\n    }\n\n    &:hover {\n      .drop-down {\n        visibility: visible;\n      }\n    }\n\n    &:not(.selected):hover {\n      background-color: ",";\n    }\n    "],["\n    padding: 5px 10px;\n    cursor: pointer;\n\n    .drop-down {\n      visibility: hidden;\n      .popover{\n        .popover-inner {\n          box-shadow: 0 0 0;\n        }\n      }\n    }\n\n    &.selected {\n      background-color: ",";\n    }\n\n    &:hover {\n      .drop-down {\n        visibility: visible;\n      }\n    }\n\n    &:not(.selected):hover {\n      background-color: ",";\n    }\n    "])),e.colors.cyans.cyan100,r.polished.rgba(e.colors.cyans.cyan100,.4))},t.prototype.render=function(){var e=this,t=this.props,n=t.theme,o=t.canRemove,i=t.selected,a=this.props.view,s=a.label,l=a.id,g=this.state.editingLabel;g&&this._focusInput();var u=[r.Immutable({label:this.formatMessage("remove"),event:this._removeView.bind(this),visible:!0===o}),r.Immutable({label:this.formatMessage("duplicate"),event:this._duplicateView.bind(this),visible:!0}),r.Immutable({label:this.formatMessage("rename"),event:this._enableEditing.bind(this),visible:!0})],d=r.classNames("d-flex justify-content-between w-100",{selected:i});return r.jsx("div",{css:this._getStyle(),className:d,onClick:this._select},r.jsx("div",{className:"d-flex"},!g&&r.jsx("div",{onDoubleClick:this._enableEditing},s),g&&r.jsx("div",null,r.jsx(c.Input,{type:"text",value:s,innerRef:function(t){e.inputRef=t},onBlur:this._disableEditing}))),r.jsx("div",{className:"drop-down toc-item-icon"},r.jsx(p.MyDropDown,{uId:l,theme:n,items:u})))},t}(r.React.PureComponent);t.default=l},function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("path",{d:"M18 14h10.667a2 2 0 1 1 0 4H18v10.667a2 2 0 1 1-4 0V18H3.333a2 2 0 1 1 0-4H14V3.333a2 2 0 1 1 4 0V14z"});function r(e){return i.createElement("svg",o({width:32,height:32,viewBox:"0 0 32 32"},e),a)}e.exports=r,r.default=r},function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("path",{d:"M4 3h11a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm0 1v11h11V4H4zm-4 7.5V1a1 1 0 0 1 1-1h9.5a.5.5 0 0 1 0 1H1v10.5a.5.5 0 0 1-1 0z",fillRule:"nonzero"});function r(e){return i.createElement("svg",o({width:16,height:16,viewBox:"0 0 16 16"},e),a)}e.exports=r,r.default=r},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(13),r=n(15),s=n(3),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderItemSetting=function(){var e=null;if(t.props.layoutType===i.LayoutType.FixedLayout)e=r.FixedLayoutItemSetting;else if(t.props.layoutType===i.LayoutType.FlowLayout)e=r.FlowLayoutItemSetting;else{var n=t.props,o=n.containerWidgetId;n.hasLayoutSetting&&(e=t.props.runtimeInfo&&t.props.runtimeInfo.isItemClassLoaded?s.WidgetSettingManager.getInstance().getItemSettingClass(o):null)}return e?e?i.React.createElement(i.ErrorBoundary,null,i.React.createElement(e,{layoutId:t.props.layoutId,layoutItem:t.props.layoutItem,onSettingChange:t.props.onSettingChanged,onPosChange:t.props.onPosChanged,formatMessage:t.props.formatMessage})):i.React.createElement("div",null,"Loading..."):null},t}return o(t,e),t.prototype.componentDidUpdate=function(){this.loadItemSettingClass()},t.prototype.componentDidMount=function(){this.loadItemSettingClass()},t.prototype.loadItemSettingClass=function(){var e=this.props,t=e.containerWidgetId,n=e.hasLayoutSetting;t&&n&&!s.WidgetSettingManager.getInstance().getItemSettingClass(t)&&s.WidgetSettingManager.getInstance().loadItemSettingClass(t)},t.prototype.render=function(){return i.React.createElement("div",{className:"setting-container h-100"},this.renderItemSetting())},t}(i.React.PureComponent);t.default=i.ReactRedux.connect(function(e,t){var n=t.layoutId,o=t.layoutItemId,i=e.appStateInBuilder.appConfig.layouts[n];if(!i)return null;var r=a.layoutUtils.findLayoutItem(e.appStateInBuilder.appConfig,{layoutId:n,layoutItemId:o}),s=a.findContainerWidgetId(e.appStateInBuilder.appConfig,n),c=!1;if(s){var p=e.appStateInBuilder.appConfig.widgets[s];c=p.manifest&&p.manifest.properties&&p.manifest.properties.hasLayoutItemSettingPage}return{layoutType:i.type,layoutItem:r,containerWidgetId:s,hasLayoutSetting:c,runtimeInfo:e.builder.widgetsSettingRuntimeInfo[s]}})(c)},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),s=n(2),c=n(3),p=n(7),l=function(e){function t(t){var n=e.call(this,t)||this;return n.searchItems=function(e){},n.onSelectMessageType=function(e){var t={widgetId:n.props.widgetId,messageType:e,actions:r.Immutable([])};n.props.onSelected(r.Immutable(t))},n.getPublishMessages=function(){var e=n.props.appConfig.widgets[n.props.widgetId].manifest.publishMessages,t=[];if(e)for(var o=0;o<e.length;o++){var i=!1;if(n.props.messages)for(var a=0;a<n.props.messages.length;a++)if(n.props.messages[a].messageType===e[o]){i=!0;break}i||t.push({messageType:e[o],messageLabel:r.getMessageTypeLabel(e[o],n.props.intl)})}return t},n}return o(t,e),t.prototype.getStyle=function(e){return r.css(a||(a=i(["\n      .choose-message-list {\n\n        .searchIcon {\n          cursor: pointer;\n          position: absolute;\n          right: 1.2rem;\n          margin-top: 0.3rem;\n          background-color: ",";\n          color: "," !important;\n        }\n\n        .list{\n          .list-item{\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            border: 1px solid transparent;\n            cursor: pointer;\n            background-color: ",";\n            user-select: none;\n            font-size: ",";\n          }\n          .list-item:hover{\n            background-color: ",";\n          }\n          .list-item:active.list-item:hover{\n            background-color: ",";\n          }\n        }\n      }\n    "],["\n      .choose-message-list {\n\n        .searchIcon {\n          cursor: pointer;\n          position: absolute;\n          right: 1.2rem;\n          margin-top: 0.3rem;\n          background-color: ",";\n          color: "," !important;\n        }\n\n        .list{\n          .list-item{\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            border: 1px solid transparent;\n            cursor: pointer;\n            background-color: ",";\n            user-select: none;\n            font-size: ",";\n          }\n          .list-item:hover{\n            background-color: ",";\n          }\n          .list-item:active.list-item:hover{\n            background-color: ",";\n          }\n        }\n      }\n    "])),r.polished.rgba(e.colors.white,1),e.colors.grays.gray500,e.colors.grays.gray200,r.polished.rem(13),e.colors.grays.gray300,e.colors.white)},t.prototype.render=function(){var e=this,t=this.getPublishMessages();return r.jsx("div",{className:"w-100",css:this.getStyle(this.props.theme)},r.jsx("div",{className:"w-100 choose-message-list"},r.jsx(c.SettingSection,null,r.jsx(c.SettingRow,null,r.jsx("div",{className:"w-100",style:{display:"none"}},r.jsx(s.Input,{className:"w-100",placeholder:this.props.formatMessage("chooseSearchTrigger"),onChange:this.searchItems,value:""}),r.jsx(s.Icon,{className:"p-0 searchIcon",width:16,height:16,icon:p})),r.jsx("div",{className:"w-100 list"},0===t.length&&r.jsx("div",{className:"d-flex mb-2 p-1"},this.props.formatMessage("noMessage")),t.length>0&&t.map(function(t,n){return r.jsx("div",{className:"list-item mb-2 p-1",key:n,onClick:function(){return e.onSelectMessageType(t.messageType)},title:t.messageLabel},t.messageLabel)}))))))},t}(r.React.PureComponent);t.MessageChooseList=r.themeUtils.withTheme(r.injectIntl(l))},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),s=n(3),c=n(2),p=n(7),l=function(e){function t(t){var n=e.call(this,t)||this;return n.searchItems=function(e){},n.getActions=function(){var e=[],t=[],o=null;o=(n.props.target.id,n.props.target);for(var i=s.AppMessageManager.getInstance().getFilteredActions(n.props.message.messageType),a=0;a<i.length;a++)-1===t.indexOf(i[a].name)&&i[a].widgetId===o.id&&(t.push(i[a].name),e.push(i[a]));return e},n.onSelectAction=function(e){var t=n.props.message,o=null;o=(n.props.target.id,n.props.target);var i={actionId:e.id+"-"+(new Date).getTime().toString(),widgetId:o.id,messageWidgetId:n.props.widgetId,actionName:e.name,description:null,config:n.checkIsSupportActionSetting(e)?null:void 0};t=t.set("actions",t.actions.concat(i)),n.props.onSelected(t,i)},n.checkIsSupportActionSetting=function(e){var t=!1,o=null;if(n.props.target.id){var i=(o=n.props.target).manifest;if(i&&i.messageActions)for(var a=0;a<i.messageActions.length;a++)if(e.name===i.messageActions[a].name&&i.messageActions[a].settingUri){t=!0;break}}else(o=n.props.target).uri&&s.AppMessageManager.getInstance().getActionRawSettingClassInfo(o.uri)&&(t=!0);return t},n}return o(t,e),t.prototype.getStyle=function(e){return r.css(a||(a=i(["\n      .action-choose-list {\n\n        .searchIcon {\n          cursor: pointer;\n          position: absolute;\n          right: 1.2rem;\n          margin-top: 0.3rem;\n          background-color: ",";\n        }\n\n        .list{\n          .list-item{\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            border: 1px solid transparent;\n            cursor: pointer;\n            background-color: ",";\n            user-select: none;\n            font-size: ",";\n          }\n          .list-item:hover{\n            background-color: ",";\n          }\n          .list-item:active.list-item:hover{\n            background-color: ",";\n          }\n        }\n      }\n    "],["\n      .action-choose-list {\n\n        .searchIcon {\n          cursor: pointer;\n          position: absolute;\n          right: 1.2rem;\n          margin-top: 0.3rem;\n          background-color: ",";\n        }\n\n        .list{\n          .list-item{\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            border: 1px solid transparent;\n            cursor: pointer;\n            background-color: ",";\n            user-select: none;\n            font-size: ",";\n          }\n          .list-item:hover{\n            background-color: ",";\n          }\n          .list-item:active.list-item:hover{\n            background-color: ",";\n          }\n        }\n      }\n    "])),r.polished.rgba(e.colors.white,1),e.colors.grays.gray200,r.polished.rem(13),e.colors.grays.gray300,e.colors.white)},t.prototype.render=function(){var e=this,t=this.getActions();return r.jsx("div",{className:"w-100",css:this.getStyle(this.props.theme)},r.jsx("div",{className:"w-100 action-choose-list"},r.jsx(s.SettingSection,null,r.jsx(s.SettingRow,null,r.jsx("div",{className:"w-100",style:{display:"none"}},r.jsx(c.Input,{className:"w-100",placeholder:this.props.formatMessage("chooseSearchAction"),onChange:this.searchItems,value:""}),r.jsx(c.Icon,{className:"p-0 searchIcon",width:16,height:16,icon:p})),r.jsx("div",{className:"w-100 list"},0===t.length&&r.jsx("div",{className:"d-flex mb-2 p-1"},this.props.formatMessage("noAction")),t.length>0&&t.map(function(t,n){return r.jsx("div",{className:"d-flex list-item mb-2 p-1",key:n,onClick:function(){return e.onSelectAction(t)}},t.label)}))))))},t}(r.React.PureComponent);t.ActionChooseList=r.themeUtils.withTheme(l)},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(0),s=n(2),c=n(3),p=n(7),l=function(e){function t(t){var n=e.call(this,t)||this;return n.searchItems=function(e){},n.getTargets=function(){for(var e=[],t=[],o=[],i=c.AppMessageManager.getInstance().getFilteredActions(n.props.message.messageType),a=0;a<i.length;a++)if(-1===o.indexOf(i[a].widgetId))if(o.push(i[a].widgetId),i[a].widgetId){var r=n.props.appConfig.widgets[i[a].widgetId];if(r){if(r.id===n.props.message.widgetId)continue;e.push(r)}}else t.push({uri:i[a].id,label:"Framework"});return{widgetTargets:e,frameWorkTargets:t}},n.onSelectTarget=function(e){n.props.onSelected(e)},n}return o(t,e),t.prototype.getStyle=function(e){return r.css(a||(a=i(["\n      .target-choose-list {\n\n        .searchIcon {\n          cursor: pointer;\n          position: absolute;\n          right: 1.2rem;\n          margin-top: 0.3rem;\n          background-color: ",";\n        }\n\n        .seperateline-mt {\n          margin-top: ",";\n        }\n\n        .seperateline-mb {\n          margin-bottom: ",";\n        }\n\n        .seperateline {\n          border-top: 1px solid ",";\n        }\n\n        .widgets-title {\n          font-weight: 600;\n          font-size: ",";\n          color: ",";\n        }\n\n        .nodata {\n          font-size: ",";\n        }\n\n        .list{\n          .list-item{\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            border: 1px solid transparent;\n            cursor: pointer;\n            background-color: ",";\n            user-select: none;\n            font-size: ",";\n          }\n          .list-item:hover{\n            background-color: ",";\n          }\n          .list-item:active.list-item:hover{\n            background-color: ",";\n          }\n        }\n      }\n    "],["\n      .target-choose-list {\n\n        .searchIcon {\n          cursor: pointer;\n          position: absolute;\n          right: 1.2rem;\n          margin-top: 0.3rem;\n          background-color: ",";\n        }\n\n        .seperateline-mt {\n          margin-top: ",";\n        }\n\n        .seperateline-mb {\n          margin-bottom: ",";\n        }\n\n        .seperateline {\n          border-top: 1px solid ",";\n        }\n\n        .widgets-title {\n          font-weight: 600;\n          font-size: ",";\n          color: ",";\n        }\n\n        .nodata {\n          font-size: ",";\n        }\n\n        .list{\n          .list-item{\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            border: 1px solid transparent;\n            cursor: pointer;\n            background-color: ",";\n            user-select: none;\n            font-size: ",";\n          }\n          .list-item:hover{\n            background-color: ",";\n          }\n          .list-item:active.list-item:hover{\n            background-color: ",";\n          }\n        }\n      }\n    "])),r.polished.rgba(e.colors.white,1),r.polished.rem(5),r.polished.rem(1),e.colors.grays.gray300,r.polished.rem(14),e.colors.grays.gray600,r.polished.rem(13),e.colors.grays.gray200,r.polished.rem(13),e.colors.grays.gray300,e.colors.white)},t.prototype.render=function(){var e=this,t=this.getTargets(),n=t.frameWorkTargets,o=t.widgetTargets;return r.jsx("div",{className:"w-100",css:this.getStyle(this.props.theme)},r.jsx("div",{className:"w-100 target-choose-list"},r.jsx(c.SettingSection,null,r.jsx(c.SettingRow,null,r.jsx("div",{className:"w-100",style:{display:"none"}},r.jsx(s.Input,{className:"w-100",placeholder:this.props.formatMessage("chooseSearchTarget"),onChange:this.searchItems,value:""}),r.jsx(s.Icon,{className:"p-0 searchIcon",width:16,height:16,icon:p})),r.jsx("div",{className:"w-100 list"},0===n.length&&0===o.length&&r.jsx("div",{className:"d-flex justify-content-center nodata"},this.props.formatMessage("noTargetWidgets")),n.map(function(t,n){return r.jsx("div",{className:"d-flex list-item p-1",key:n,onClick:function(){return e.onSelectTarget(t)}},e.props.formatMessage("action"+t.label))}),n.length>0&&0===o.length&&r.jsx("div",{className:"w-100"},r.jsx("div",{className:"w-100 seperateline-mt seperateline-mb",style:{position:"relative",height:"20px"}},r.jsx("div",{className:"seperateline w-100",style:{top:"10px",position:"absolute"}})),r.jsx("div",{className:"w-100 widgets-title"},this.props.formatMessage("targetWidgets")),r.jsx("div",{className:"d-flex mt-2 nodata"},this.props.formatMessage("noTargetWidgets"))),o.length>0&&r.jsx("div",{className:"w-100"},r.jsx("div",{className:"w-100 seperateline-mb",style:{position:"relative",height:"20px"}},r.jsx("div",{className:"seperateline w-100",style:{top:"10px",position:"absolute"}})),r.jsx("div",{className:"w-100 widgets-title"},this.props.formatMessage("targetWidgets")),o.map(function(t,n){return r.jsx("div",{className:"d-flex list-item mt-2 p-1",key:n,onClick:function(){return e.onSelectTarget(t)}},t.label)})))))))},t}(r.React.PureComponent);t.TargetChooseList=r.themeUtils.withTheme(l)},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(2),r=n(128),s=n(35),c=n(129),p=n(23),l=n(130),g=function(e){function t(t){var n=e.call(this,t)||this;return n.searchItems=function(e){},n.onEditAction=function(e){e.config&&n.props.onClickEditAction(n.props.message,e)},n.onRemoveAction=function(e){for(var t=n.props.message,o=Object.assign([],t.actions),i=[],a=0;a<o.length;a++)o[a].actionName==e.actionName&&i.push(o[a]);for(a=0;a<o.length;a++)if(o[a].actionName===e.actionName&&o[a].widgetId===e.widgetId){var r=Object.assign([],o);r.splice(a,1),t=t.set("actions",r);break}n.props.onMessageChanged(t)},n.onActionOrderChanged=function(e,t){if(e!==t){var o=n.props.message,i=[];if(e<t){for(var a=0;a<e;a++)i.push(o.actions[a]);for(a=e+1;a<t+1;a++)i.push(o.actions[a]);i.push(o.actions[e]);for(a=t+1;a<o.actions.length;a++)i.push(o.actions[a])}else{for(a=0;a<t+1;a++)i.push(o.actions[a]);i.push(o.actions[e]);for(a=t+1;a<e;a++)i.push(o.actions[a]);for(a=e+1;a<o.actions.length;a++)i.push(o.actions[a])}o=o.set("actions",i),n.props.onMessageChanged(o)}},n.getActionList=function(){return i.React.createElement("div",{style:{position:"relative"}},n.props.message.actions.map(function(e,t){var o=null;return o=e.widgetId?n.props.appConfig.widgets[e.widgetId]:{label:"Framework"},i.React.createElement(r.default,{dragItemIndex:t,dragItemName:n.props.message.messageType,style:{touchAction:"none",userSelect:"none"},key:t,onDragChanged:n.onActionOrderChanged,onMouseEnter:function(e){n.setState({itemSelected:!0,itemSelectedIndex:e})},onMouseLeave:function(e){n.setState({itemSelected:!1,itemSelectedIndex:void 0})}},i.React.createElement("div",{className:"border mb-2 mt-2 action-item"},i.React.createElement("div",{className:"d-flex w-100 justify-content-between align-items-center"},"Framework"===o.label&&i.React.createElement("div",{className:"widget-name"},n.props.formatMessage("action"+o.label)),"Framework"!==o.label&&i.React.createElement("div",{className:"widget-name"},o.label),n.state.itemSelected&&n.state.itemSelectedIndex===t&&i.React.createElement("div",{className:"d-flex"},i.React.createElement("div",{className:"mr-2",onClick:function(){return n.onEditAction(e)}},(e.config||null===e.config)&&i.React.createElement(a.Icon,{className:"p-0 deleteIcon",width:12,height:12,icon:l}),void 0===e.config&&i.React.createElement(a.Icon,{className:"p-0 deleteIcon-disable",width:12,height:12,icon:l})),i.React.createElement("div",{onClick:function(){return n.onRemoveAction(e)}},i.React.createElement(a.Icon,{className:"p-0 deleteIcon",width:11,height:11,icon:c})))),i.React.createElement("div",{className:"bg-gray-200 text-gray-700 pl-2 mt-2 d-flex align-items-center action-name"},s.getActionLabel(e))))}))},n.state={itemSelected:!1,itemSelectedIndex:void 0},n}return o(t,e),t.prototype.render=function(){var e=this,t=i.getMessageTypeLabel(this.props.message.messageType,this.props.intl);return i.React.createElement("div",{className:"w-100"},i.React.createElement("div",{className:i.classNames("w-100 message-item border mt-2",this.props.isActive?"active-border":"")},i.React.createElement("div",{className:"w-100 d-flex justify-content-between align-items-center"},i.React.createElement("div",{className:"message-item-title",title:t},t),i.React.createElement("div",{onClick:function(){return e.props.onMessageRemoved(e.props.message)}},i.React.createElement(a.Icon,{className:"p-0 deleteIcon",width:14,height:14,icon:p}))),this.props.message.actions&&this.props.message.actions.length>0&&this.getActionList(),i.React.createElement("div",{className:"mt-2 item-add-action",onClick:function(){return e.props.onClickAddAction(e.props.message)}},"+ "+this.props.formatMessage("addAction"))))},t}(i.React.PureComponent);t.MessageItem=i.injectIntl(g)},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(8),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.componentDidMount=function(){this._initInteractive()},t.prototype._initInteractive=function(){var e=this;if(this.ref){var t=this.ref,n=null,o=null,i=null;this.dropZoneInteractable=a.interact(t).dropzone({accept:"."+this.props.dragItemName,overlap:"center",ondropmove:function(t){e.dragElement=t.relatedTarget,e.dropzoneElement=t.target;var n=e.dropzoneElement.getAttribute("data-item-index"),a=e.dragElement.getAttribute("data-item-index"),r=e.dropzoneElement.offsetTop+e.dropzoneElement.clientHeight/2;parseFloat(e.dragElement.getAttribute("move-relative-top"))+e.dragElement.clientHeight/2>r?(o=parseInt(a),i=parseInt(n)):(o=parseInt(a),i=parseInt(n)-1)},ondrop:function(t){e.props.onDragChanged&&e.props.onDragChanged(o,i)}}),this.interactable=a.interact(t).draggable({startAxis:"y",lockAxis:"y",inertia:!1,modifiers:[],autoScroll:!0,onstart:function(e){var t=e.clientY0,n=e.target,o=n.getBoundingClientRect(),i=n.clientHeight,a=t-o.top-i/2;n.style.webkitTransform="translate(0px, "+a+"px)",n.style.transform="translate(0px, "+a+"px)",n.setAttribute("start-y",a),n.setAttribute("start-relative-top",n.offsetTop)},onmove:function(e){var t=e.clientY,o=e.clientY0,i=e.target,a=t-o+(parseFloat(i.getAttribute("start-y"))||0);n&&cancelAnimationFrame(n),a<0?-1*a>parseFloat(i.getAttribute("start-relative-top"))+.8*i.clientHeight&&(a=-1*(parseFloat(i.getAttribute("start-relative-top"))+.8*i.clientHeight)):a>i.parentElement.clientHeight-parseFloat(i.getAttribute("start-relative-top"))-.2*i.clientHeight&&(a=i.parentElement.clientHeight-parseFloat(i.getAttribute("start-relative-top"))-.2*i.clientHeight),i.setAttribute("move-relative-top",a+parseFloat(i.getAttribute("start-relative-top"))),n=requestAnimationFrame(function(){i.style.webkitTransform="translate(0px, "+a+"px)",i.style.transform="translate(0px, "+a+"px)",n=null})},onend:function(e){var t=e.target;n&&cancelAnimationFrame(n),t.style.webkitTransform="translate(0px, 0px)",t.style.transform="translate(0px, 0px)"}})}},t.prototype.render=function(){var e=this,t=this.props,n=t.className,o=t.style,a=i.classNames(this.props.dragItemName,"drag-item",n);return i.React.createElement("div",{className:a,style:o,ref:function(t){return e.ref=t},"data-item-index":this.props.dragItemIndex,onMouseEnter:function(){e.props.onMouseEnter(e.props.dragItemIndex)},onMouseLeave:function(){e.props.onMouseLeave(e.props.dragItemIndex)}},this.props.children)},t}(i.React.PureComponent);t.default=r},function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("path",{d:"M2.561 7.876l1.138 20.023C3.699 30.164 5.83 32 8.459 32h15.724c2.629 0 4.76-1.836 4.76-4.101l1.095-20.023H2.562zm28.806-1.42c.005-.844.008-.901.008-.957 0-2.202-1.483-3.411-3.472-3.411l-5.537.005C22.366.937 21.082 0 19.768 0h-6.893c-1.314 0-2.64.937-2.64 2.093l-5.543-.005c-2.197 0-3.472 1.473-3.472 3.411 0 .057.003.113.008.957h30.139zm-10.306 6.682c0-.638.588-1.156 1.314-1.156s1.314.517 1.314 1.156v13.24c0 .638-.588 1.156-1.314 1.156s-1.314-.517-1.314-1.156v-13.24zm-6.077 0c0-.638.589-1.156 1.315-1.156s1.314.517 1.314 1.156v13.24c0 .638-.588 1.156-1.314 1.156s-1.315-.517-1.315-1.156v-13.24zm-6.074 0c0-.638.588-1.156 1.315-1.156s1.314.517 1.314 1.156v13.24c0 .638-.589 1.156-1.314 1.156s-1.315-.517-1.315-1.156v-13.24z"});function r(e){return i.createElement("svg",o({width:32,height:32,viewBox:"0 0 32 32"},e),a)}e.exports=r,r.default=r},function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("path",{d:"M2 28h28a2 2 0 1 1 0 4H2a2 2 0 1 1 0-4zm8.025-3.239l-2.278.253a3.2 3.2 0 0 1-3.534-3.534l.253-2.278a6.403 6.403 0 0 1 1.835-3.819L17.913 3.771a5.332 5.332 0 1 1 7.542 7.542L13.843 22.925a6.395 6.395 0 0 1-3.819 1.835z"});function r(e){return i.createElement("svg",o({width:32,height:32,viewBox:"0 0 32 32"},e),a)}e.exports=r,r.default=r},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(3),r=n(2),s=function(e){function t(t){var n=e.call(this,t)||this;return n.getActionSettingClass=function(){a.AppMessageManager.getInstance().loadActionSettingClass(n.props.action).then(function(e){n.setState({settingClass:e})})},n.onSettingChange=function(e){var t=e.actionId,o=e.config;n.state.cacheActionJson.config!==o&&t===n.state.cacheActionJson.actionId&&n.setState({cacheActionJson:n.state.cacheActionJson.set("config",o)},function(){n.updateAction(!1)})},n.updateAction=function(e){for(var t=n.props.message,o=Object.assign([],t.actions),i=null,a=0;a<o.length;a++)if(o[a].actionId===n.state.cacheActionJson.actionId&&o[a].widgetId===n.state.cacheActionJson.widgetId){o[a]=o[a].set("config",n.state.cacheActionJson.config),i=o[a];break}t=t.set("actions",o),n.props.onUpdateAction(t,i,e)},n.onDisableDoneBtn=function(e){n.setState({isDisableDoneBtn:e})},n.renderActionSetting=function(){var e=n.state.settingClass;return e?i.React.createElement(i.ErrorBoundary,null,i.React.createElement(e,{actionId:n.state.cacheActionJson.actionId,widgetId:n.props.action.widgetId,messageWidgetId:n.props.widgetId,config:n.state.cacheActionJson.config?n.state.cacheActionJson.config:void 0,messageType:n.props.message.messageType,onSettingChange:n.onSettingChange,onDisableDoneBtn:n.onDisableDoneBtn})):i.React.createElement("div",null,n.props.formatMessage("actionSettingLoading"))},n.getActionSettingClassUri=function(){if(n.props.action.widgetId){var e=n.props.action.widgetId,t=n.props.appConfig.widgets[e],o=t.manifest.messageActions,i=null;if(o)for(var r=0;r<o.length;r++)o[r].name===n.props.action.actionName&&(i=o[r]);if(i&&i.settingUri){var s=null;return s=t.context.isRemote?t.context.folderUrl+"dist/"+i.settingUri+".js":t.uri+"dist/"+i.settingUri}return null}s=null;var c=a.AppMessageManager.getInstance().getFilteredActions(n.props.message.messageType);for(r=0;r<c.length;r++)if(!c[r].widgetId&&c[r].name===n.props.action.actionName){s=c[r].id;break}return s},n.state={settingClass:null,cacheActionJson:n.props.action,isDisableDoneBtn:!1},n}return o(t,e),t.prototype.componentWillReceiveProps=function(e){e.action!==this.props.action&&this.setState({cacheActionJson:e.action})},t.prototype.componentDidMount=function(){this.getActionSettingClass()},t.prototype.componentDidUpdate=function(){this.getActionSettingClass()},t.prototype.render=function(){var e=this,t=this.getActionSettingClassUri();return i.React.createElement("div",{className:"setting-container h-100 pl-3 pr-3"},t?this.renderActionSetting():i.React.createElement("div",null,"  No widget"),i.React.createElement("div",{style:{position:"absolute",bottom:"0.35rem",left:"0"},className:"d-flex justify-content-center pl-3 pr-3 w-100"},i.React.createElement(r.Button,{disabled:this.state.isDisableDoneBtn,className:"btn btn-primary text-center w-100",onClick:function(){return e.updateAction(!0)}},this.props.formatMessage("actionDone"))))},t}(i.React.PureComponent);t.default=s},function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(2);!function(e){e.MessageChoose="MESSAGECHOOSE",e.TargetChoose="TARGETCHOOSE",e.ActionChoose="ACTIONCHOOSE",e.ActionSetting="ACTIONSETTING"}(t.PathType||(t.PathType={}));var s,c=n(133),p=n(21),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getStyle=function(e){return a.css(s||(s=i(["\n      .setting-header {\n        padding: "," "," "," ","\n      }\n\n      .setting-title {\n        font-size: ",";\n      }\n    "],["\n      .setting-header {\n        padding: "," "," "," ","\n      }\n\n      .setting-title {\n        font-size: ",";\n      }\n    "])),a.polished.rem(10),a.polished.rem(16),a.polished.rem(0),a.polished.rem(16),a.polished.rem(16))},t.prototype.render=function(){return a.jsx("div",{className:"w-100",css:this.getStyle(this.props.theme)},a.jsx("div",{className:"w-100 d-flex align-items-center justify-content-between setting-header border-0"},this.props.Routes.length>1?a.jsx("div",null,a.jsx("div",{className:"d-flex align-items-center"},a.jsx("div",{className:"d-flex align-items-center",style:{cursor:"pointer"},onClick:this.props.onBack},a.jsx(r.Icon,{icon:c,size:"14",className:"text-dark"})),a.jsx("div",{className:"pl-2 setting-title mt-1",style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:this.props.title},this.props.formatMessage("actionBack")+"/"+this.props.title))):a.jsx("div",{className:"setting-title mt-1",style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:this.props.title},this.props.title),a.jsx("div",{style:{cursor:"pointer"},onClick:this.props.onClose},a.jsx(r.Icon,{icon:p,size:"12",className:"text-dark"}))),this.props.children)},t}(a.React.PureComponent);t.default=l,t.RouterShell=a.themeUtils.withTheme(l)},function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(1),a=i.createElement("path",{d:"M8 3.5H1.9L4.7.7 4 0 0 4l4 4 .7-.7-2.8-2.8H8z",fillRule:"evenodd"});function r(e){return i.createElement("svg",o({width:8,height:8,viewBox:"0 0 8 8"},e),a)}e.exports=r,r.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={pageSetting:"Page Setting",folderSetting:"Folder Setting",linkSetting:"Link Setting",noSelection:"No selection",customWidth:"Fixed width",fitToWindow:"Fit to window",fitToWidthOnly:"Full width",content:"Content",style:"Style",action:"Action",layout:"Layout",general:"General",dynamicLoading:"Loading",displayMode:"Display mode",width:"Width",height:"Height",body:"Body",header:"Header",footer:"Footer",urlIsHere:"Type URL here.",views:"Views",remove:"Remove",duplicate:"Duplicate",rename:"Rename",noWidget:"No Widget",maxWidth:"Max width",duplicateView:"Duplicate view",addView:"New view",noSettingOptions:"No setting options.",contentWidth:"Content width",custom:"Custom",auto:"Auto",gap:"Gap",padding:"Padding",border:"Border",borderRadius:"Border Radius",boxShadow:"Box Shadow",size:"Size",lockParent:"Lock parent",margin:"Margin",addTrigger:"Add a trigger",noTrigger:"The widget does not generate any triggers.",selectTrigger:"Select a trigger",selectTarget:"Select a target",selectAction:"Select an action",actionBack:"Back",actionSet:"Set",addAction:"Add action",targetWidgets:"Widgets",noMessage:"No message",noTargetWidgets:"No widget",noAction:"No action",chooseSearchTrigger:"Choose or search for an trigger",chooseSearchTarget:"Choose or search for an target",chooseSearchAction:"Choose or search for an action",actionDone:"Done",actionFramework:"Framework",actionSettingLoading:"Loading..."}}])});
//# sourceMappingURL=widget.js.map