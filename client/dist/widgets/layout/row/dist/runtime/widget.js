define(["jimu-core/react","jimu-core","jimu-ui","jimu-layouts/common","jimu-layouts/layout-runtime"],function(t,e,n,o,r){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=681)}({0:function(e,n){e.exports=t},2:function(t,n){t.exports=e},21:function(t,e){t.exports=r},309:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MIN_SPAN=2,e.TOTAL_COLS=12},4:function(t,e){t.exports=n},681:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},s=this&&this.__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&(n[o[r]]=t[o[r]])}return n};Object.defineProperty(e,"__esModule",{value:!0});var a,u=n(2),c=n(682),l=n(4),f=n(683),p=n(686),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){var t=this.props,e=t.layouts,n=t.id,o=t.intl,d=t.builderSupportModules,y=s(t,["layouts","id","intl","builderSupportModules"]),h=window.jimuConfig.isInBuilder?d.widgetModules.RowLayoutBuilder:f.default;return h?u.jsx("div",{className:"widget-row-layout d-flex justify-content-center d-flex w-100",css:u.css(a||(a=r(["overflow: hidden;"],["overflow: hidden;"])))},u.jsx(h,i({layouts:e[u.DEFAULT_EMBED_LAYOUT_NAME],config:this.props.config},y),u.jsx(l.WidgetPlaceholder,{icon:p,widgetId:n,style:{border:"none",pointerEvents:"none"},message:o.formatMessage({id:"tips",defaultMessage:c.default.tips})}))):u.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},"No layout component!")},e}(u.BaseWidget);e.default=d},682:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={_widgetLabel:"Row",widgetProperties:"Widget Properties",widgetFunctions:"Widget Functions",widgetName:"widget name:",widgetProps:"widget props:",tips:"Row"}},683:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var s,a=n(2),u=n(4),c=n(684),l=n(7),f=n(309),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.findExtension=function(){var t=a.ExtensionManager.getInstance().getExtensions(""+a.extensionSpec.ExtensionPoints.LayoutTransformer);if(t&&t.length>0){var e=t.find(function(t){return"ROW"===t.layoutType});this.layoutTransform=a.lodash.getValue(e,"transformLayout")}},e.prototype.collectRowItems=function(){var t=this.props,e=t.layout,n=t.browserSizeMode,o=t.layouts,r=t.mainSizeMode;this.layoutTransform||this.findExtension();var i=e;o[n]!==e.id&&this.layoutTransform&&(i=this.layoutTransform(e,r,n)),this.finalLayout=i;var s=i.order||[],a=[],u=[],c=0;return a.push(u),s.forEach(function(t){var e=i.content[t].bbox,n=parseInt(e.left,10),o=Math.floor(n/f.TOTAL_COLS);o>c&&(u=[],c=o,a.push(u)),u.push(t)}),a},e.prototype.createRow=function(t,e){if(0===t.length&&(this.props.layout.order||[]).length>0)return null;var n=this.props,o=n.layout,r=n.config,i=n.layouts,s=n.theme;return a.jsx(c.Row,{key:e,rowIndex:e,itemIds:t.join(","),layouts:i,layout:o,transformedLayout:this.finalLayout,config:r,theme:s})},e.prototype.render=function(){var t=this,e=this.props,n=e.layout,o=e.className,c=e.config;this.rows=this.collectRowItems();var l=c.style||{},f=i({},u.styleUtils.toCSSStyle(l));return a.jsx("div",{className:a.classNames("layout d-flex flex-column align-items-stretch",o),css:a.css(s||(s=r(["\n      width: 100%;\n      overflow: hidden;\n    "],["\n      width: 100%;\n      overflow: hidden;\n    "]))),style:f,"data-layoutid":n.id},this.rows.map(function(e,n){return t.createRow(e,n)}))},e}(a.React.PureComponent);e.default=a.ReactRedux.connect(l.mapStateToLayoutProps)(p)},684:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};Object.defineProperty(e,"__esModule",{value:!0});var i,s,a,u=n(2),c=n(685),l=n(7),f=n(309),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.collectBounds=function(){var t=this,e=this.props,n=e.itemIds,o=e.transformedLayout,r=e.rowIndex,i=n.split(",");return this.childRects=[],i.forEach(function(e){var n=u.lodash.getValue(o,"content."+e+".bbox");n&&t.childRects.push({layoutId:o.id,id:e,left:parseInt(n.left,10)-r*f.TOTAL_COLS,width:parseInt(n.width,10),height:parseInt(n.height,10)})}),this.childRects.sort(function(t,e){return t.left-e.left})},e.prototype.createItem=function(t,e,n){var o,r=this.props,i=r.layout,s=r.config,a=t[e],l=s.space||0;if(0===e)o=a.left;else{var f=t[e-1];o=a.left-f.left-f.width}return u.jsx(c.default,{key:a.id,offset:o,span:a.width,layoutId:i.id,layoutItemId:a.id,alignItems:n.alignItems,style:{paddingLeft:l/2,paddingRight:l/2}})},e.prototype.render=function(){var t=this,e=this.props,n=e.layout,o=e.className,c=e.config;this.collectBounds();var f=this.childRects,p=c.style||{},d=c.space||0;return u.jsx(l.PageContext.Consumer,null,function(e){return u.jsx("div",{className:u.classNames("layout",o),css:u.css(i||(i=r(["\n          width: 100%;\n          overflow: hidden;\n          height: ",";\n          display: flex;\n          justify-content: center;\n        "],["\n          width: 100%;\n          overflow: hidden;\n          height: ",";\n          display: flex;\n          justify-content: center;\n        "])),0===f.length?"300px":"auto"),"data-layoutid":n.id},u.jsx("div",{css:u.css(s||(s=r(["\n            width: 100%;\n            max-width: ",";\n          "],["\n            width: 100%;\n            max-width: ",";\n          "])),e.maxWidth>0?e.maxWidth+"px":"none")},u.jsx("div",{className:"row",css:u.css(a||(a=r(["\n                position: relative;\n                margin-left: ","px;\n                margin-right: ","px;\n                height: ",";\n              "],["\n                position: relative;\n                margin-left: ","px;\n                margin-right: ","px;\n                height: ",";\n              "])),-d/2,-d/2,0===f.length?"100%":"auto")},f.length>0&&f.map(function(e,n){return t.createItem(f,n,p)}))))})},e}(u.React.PureComponent);e.Row=p},685:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),s=n(4),a=n(7),u=n(21),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){var t=this.props,e=t.span,n=t.offset,o=t.layoutId,a=t.layoutItem,c=t.itemDisplaySetting,l=t.style,f=t.widgetName;if(!a)return null;var p,d=a.bbox,y=a.setting||{},h="row"===f,m=i.classNames("row-layout-item","col-"+e,"offset-"+n,{"d-flex":!h}),g=r({},l,s.styleUtils.toCSSStyle(y.style),{height:h?"auto":d.height});if((y.offsetX||y.offsetY)&&(g.transform="translate("+(y.offsetX||0)+"px, "+(y.offsetY||0)+"px)"),a.type===i.LayoutItemType.Widget)p=u.WidgetRenderer;else{if(a.type!==i.LayoutItemType.Section)return null;p=u.SectionRenderer}return i.React.createElement(p,{style:g,layoutId:o,layoutItemId:a.id,itemDisplaySetting:c,isInSection:a.type===i.LayoutItemType.Section,onClick:this.props.onClick,className:m})},e}(i.React.PureComponent);e.default=i.ReactRedux.connect(a.mapStateToLayoutItemProps)(c)},686:function(t,e,n){function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}var r=n(0),i=r.createElement("path",{d:"M11 2v13h-1V2H6v13H5V2H1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2h-4zM2 0h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2z"});function s(t){return r.createElement("svg",o({width:16,height:16,viewBox:"0 0 16 16"},t),i)}t.exports=s,s.default=s},7:function(t,e){t.exports=o}})});
//# sourceMappingURL=widget.js.map