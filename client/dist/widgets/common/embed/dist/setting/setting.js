define(["jimu-core/react","jimu-core","jimu-ui","jimu-for-builder"],function(e,t,n,r){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=511)}({0:function(t,n){t.exports=e},2:function(e,n){e.exports=t},368:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Url="url",e.Code="code"}(t.EmbedType||(t.EmbedType={}))},4:function(e,t){e.exports=n},51:function(e,t,n){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=n(0),i=o.createElement("path",{d:"M16.492 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zm0 21.333a2 2 0 1 1 .001 3.999 2 2 0 0 1-.001-3.999zm0-2.666a2 2 0 0 1-2-2v-8a2 2 0 1 1 4 0v8a2 2 0 0 1-2 2z"});function a(e){return o.createElement("svg",r({width:35,height:32,viewBox:"0 0 35 32"},e),i)}e.exports=a,a.default=a},511:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(6),a=n(4),s=n(512),c=n(368),u=n(513),l=function(e){function t(t){var n=e.call(this,t)||this;return n.embedTypeChange=function(e){if(n.props.config.functionConfig.embedType!==e){var t={embedType:e,content:""};n.props.onSettingChange({widgetId:n.props.id,config:n.props.config.set("functionConfig",t)}),n.setState({content:""})}},n.contentChange=function(e){if(e&&e.target&&e.target.value){var t=e.target.value.trim();if(""===t)return;var r=n.props.config;if(n.setState({content:t}),r.functionConfig.embedType===c.EmbedType.Url){var o=n.checkURL(t);n.setState({showUrlError:!o})}}},n.checkURL=function(e){if(!e||""===e)return!1;if(!new RegExp("^(([h][t]{2}[p][s])?://)").test(e))return n.setState({urlError:n.formatMessage("httpsUrlMessage")}),!1;var t=e.indexOf(".");return!(t<0||t===e.length-1)||(n.setState({urlError:n.formatMessage("invalidUrlMessage")}),!1)},n.contentChangeAfter=function(e,t){if(e&&e.target&&e.target.value){var r=n.props.config,o=e.target.value.trim();if(""!==o&&o!==n.props.config.functionConfig.content){if(r.functionConfig.embedType===c.EmbedType.Url){var i=n.checkURL(o);if(n.setState({showUrlError:!i}),!i)return}n.contentChangeTimeout&&(clearTimeout(n.contentChangeTimeout),n.contentChangeTimeout=void 0),n.contentChangeTimeout=setTimeout(function(){n.contentChangeTimeout=void 0,n.props.onSettingChange({config:n.props.config.setIn(["functionConfig","content"],o),widgetId:n.props.id})},t)}}},n.contentChangeRightAway=function(e){n.contentChangeAfter(e,1e3)},n.onKeyUp=function(e){13===e.keyCode&&n.contentChangeRightAway(e)},n.formatMessage=function(e){return n.props.intl.formatMessage({id:e,defaultMessage:s.default[e]})},n.state={showUrlError:!1,urlError:"",content:t.config.content||""},n}return r(t,e),t.prototype.render=function(){var e=this,t=this.props,r=t.theme,s=t.config,l=this.props.config.functionConfig.embedType;return o.jsx("div",{css:u.getStyle(this.props.theme)},o.jsx("div",{className:"widget-iframe jimu-widget"},o.jsx("div",null,o.jsx(i.SettingSection,null,o.jsx(i.SettingRow,{label:this.formatMessage("embedBy")}),o.jsx(i.SettingRow,null,o.jsx(a.Input,{onChange:function(){return e.embedTypeChange(c.EmbedType.Url)},type:"radio",checked:l===c.EmbedType.Url}),o.jsx(a.Label,{className:"ml-2 ",onClick:function(t){return e.embedTypeChange(c.EmbedType.Url)}},this.formatMessage("websiteAddress"))),o.jsx(i.SettingRow,null,o.jsx(a.Input,{onChange:function(){return e.embedTypeChange(c.EmbedType.Code)},type:"radio",checked:l===c.EmbedType.Code}),o.jsx(a.Label,{className:"ml-2 ",onClick:function(t){return e.embedTypeChange(c.EmbedType.Code)}},this.formatMessage("code"))),o.jsx(i.SettingRow,null,l===c.EmbedType.Url?o.jsx("div",{className:"d-flex flex-column w-100"},o.jsx(a.Input,{type:"text",className:"w-100",placeholder:this.formatMessage("websitePlaceholder"),value:s.functionConfig.content||"",onChange:this.contentChange,onBlur:this.contentChangeRightAway,spellCheck:!1,onKeyUp:this.contentChangeRightAway}),this.state.showUrlError&&o.jsx("div",{className:"d-flex w-100 align-items-center justify-content-between",style:{marginTop:"5px"}},o.jsx(a.Icon,{size:16,icon:n(51),color:r.colors.danger}),o.jsx("div",{style:{width:"calc(100% - 20px)",marginLeft:"4px",overflow:"hidden",textOverflow:"ellipsis",color:r.colors.danger}},this.state.urlError))):o.jsx(a.Input,{type:"textarea",style:{height:"300px"},className:"w-100",spellCheck:!1,placeholder:this.formatMessage("codePlaceholder"),value:s.functionConfig.content||"",onChange:this.contentChange,onBlur:this.contentChangeRightAway,onKeyUp:this.onKeyUp}))))))},t.mapExtraStateProps=function(e,t){return{appConfig:e&&e.appStateInBuilder&&e.appStateInBuilder.appConfig,appTheme:e&&e.appStateInBuilder&&e.appStateInBuilder.theme}},t}(i.BaseWidgetSetting);t.default=l},512:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={_widgetLabel:"Embed",default:"default",websiteAddress:"Website address",code:"Code",invalidUrlMessage:"Invalid URL. Please check and try again.",httpsUrlMessage:"Only HTTPS:// is supported.",codePlaceholder:"Paste the HTML code from the site you want to embed.",websitePlaceholder:"Enter URL (https only)",embedBy:"Embed by"}},513:function(e,t,n){"use strict";var r=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(2);t.getStyle=function(e){return i.css(o||(o=r(["\n    label {\n      cursor: pointer;\n    }\n  "],["\n    label {\n      cursor: pointer;\n    }\n  "])))}},6:function(e,t){e.exports=r}})});
//# sourceMappingURL=setting.js.map