define(["jimu-core/react","jimu-core","jimu-ui","jimu-for-builder"],function(e,t,n,o){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=644)}({0:function(t,n){t.exports=e},19:function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(0),r=i.createElement("path",{d:"M2 8c0-.291.231-.527.516-.527h9.508L8.527 3.9a.535.535 0 0 1 0-.746.508.508 0 0 1 .73 0L14 8l-4.743 4.846a.508.508 0 0 1-.73 0 .535.535 0 0 1 0-.746l3.497-3.573H2.516A.522.522 0 0 1 2 8z",fill:"currentColor",fillRule:"nonzero"});function a(e){return i.createElement("svg",o({width:16,height:16,viewBox:"0 0 16 16"},e),r)}e.exports=a,a.default=a},2:function(e,n){e.exports=t},20:function(e,t,n){function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var i=n(0),r=i.createElement("path",{d:"M8 2c.291 0 .527.231.527.516v9.508L12.1 8.527a.535.535 0 0 1 .746 0 .508.508 0 0 1 0 .73L8 14 3.154 9.257a.508.508 0 0 1 0-.73.535.535 0 0 1 .746 0l3.573 3.497V2.516C7.473 2.231 7.709 2 8 2z",fill:"currentColor",fillRule:"nonzero"});function a(e){return i.createElement("svg",o({width:16,height:16,viewBox:"0 0 16 16"},e),r)}e.exports=a,a.default=a},391:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Transparent="transparent"}(t.TransparentColor||(t.TransparentColor={})),function(e){e.Left="left",e.Center="center",e.Right="right"}(t.TextAlign||(t.TextAlign={})),function(e){e.Auto="AUTO",e.Custom="CUSTOM"}(t.ViewType||(t.ViewType={})),function(e){e.Default="DEFAULT",e.Tabs="TABS",e.Pills="PILLS"}(t.NavStyle||(t.NavStyle={}))},392:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=function(){var e=o.urlUtils.getAppIdPageIdFromUrl();return e&&e.pageId},r=function(e){if(e&&e.pages)return Object.keys(e.pages).find(function(t){return e.pages[t].isDefault})};t.updateViewsBySection=function(e,t,n){var i=n.sections[t];if(!i)return[];var r=i.views||o.Immutable([]);return e=(e=e.filter(function(e){return r.indexOf(e)>-1})).sort(function(e,t){return r.indexOf(e)-r.indexOf(t)})},t.toMultiSelectItem=function(e,n){return{label:t.getViewLabel(e,n),value:e}},t.toMultiSelectItems=function(e,n){return e.map(function(e){return t.toMultiSelectItem(e,n)})},t.toNavViewLinks=function(e,n){return function(e,t){return e.filter(function(e){return!(!t.views||!t.views[e])})}(e,n).map(function(e){return t.toNavViewLink(e,n)})},t.toNavViewLink=function(e,n){var o=t.toViewLink(e,n);return{name:t.getViewLabel(e,n),value:o}},t.toViewLink=function(e,t){var n=function(e){return i()||r(e)}(t);return{linkType:o.LinkType.View,value:n+","+e}},t.getViewLabel=function(e,t){if(void 0!==e&&t.views)return t.views[e].label},t.isNavItemActive=function(e,t,n){if(!e||!e.length)return 0===n||void 0;var o=t.value&&t.value.value||"";return e.some(function(e){return o.indexOf(e)>-1})},t.getSectionLabel=function(e,t){var n=t.sections[e];return n?n.label:""},t.getSectionViews=function(e,t){var n=t.sections[e];if(!n)return[];var o=n.views;return o?o.asMutable():[]}},4:function(e,t){e.exports=n},6:function(e,t){e.exports=o},644:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(2),s=n(6),l=n(391),u=n(4),c=n(392),p=n(19),f=n(20),g=[u.ThemeColors.PRIMARY,u.ThemeColors.SECONDARY,u.ThemeColors.SUCCESS,u.ThemeColors.INFO,u.ThemeColors.WARNING,u.ThemeColors.LIGHT,u.ThemeColors.DANGER,u.ThemeColors.DARK],h=function(e){function t(t){var n=e.call(this,t)||this;return n.onSectionChange=function(e){e&&n.onDataSectionChange(e)},n.onViewsChange=function(e,t,o){n.onDataInChange("views",o)},n.getSections=function(e,t,n){return s.appConfigUtils.getWidgetsOrSectionsInTheSameContainer(e,t,a.LayoutItemType.Widget,a.LayoutItemType.Section,n)||[]},n.onRadioChange=function(e,t,o){e.currentTarget.checked&&n.onDisplayChange(t,o)},n.getViews=function(e){if(!e)return[];var t=n.props.appConfig;return t.sections[e]&&t.sections[e].views||[]},n.getViewSelectItems=function(){var e=n.props.appConfig,t=n.state.views,o=c.toMultiSelectItems(t,e);return a.Immutable(o)},n.getStyle=function(){return a.css(r||(r=i(["\n      .jimu-multi-select {\n        width: 100%;\n      }\n    "],["\n      .jimu-multi-select {\n        width: 100%;\n      }\n    "])))},n.nls=function(e,t){return n.props.intl.formatMessage({id:e,defaultMessage:s.defaultMessages[e]},t)},n.onDataSectionChange=function(e){var t=n.props.config.data;t=t.set("section",e).set("views",a.Immutable([])),n.onDataChange(t)},n.onViewTypeChange=function(e){if(e===l.ViewType.Auto)n.onDataInChange("type",e);else{var t=n.props.config.data;t=t.set("type",e).set("views",a.Immutable([])),n.onDataChange(t)}},n.onBackgroundChange=function(e){var t=void 0===e||e===l.TransparentColor.Transparent||["","warning","light","white"].indexOf(e)>-1?"dark":"light",o=n.props,i=o.config,r=o.config.display;r=r.set("color",e).set("textColor",t),i=i.set("display",r),n.props.onSettingChange({widgetId:n.props.id,config:i})},n.onDisplayChange=function(e,t){var o=n.props,i=o.config,r=o.config.display;r=r.set(e,t),i=i.set("display",r),n.props.onSettingChange({widgetId:n.props.id,config:i})},n.onDataChange=function(e){var t=n.props.config;t=t.set("data",e),n.props.onSettingChange({widgetId:n.props.id,config:t})},n.onDataInChange=function(e,t){var o=n.props,i=o.config,r=o.config.data;r=r.set(e,t),i=i.set("data",r),n.props.onSettingChange({widgetId:n.props.id,config:i})},n.getTransparentColor=function(){var e=n.props.theme,t=e?e.colors.white:"",o=e?e.colors.grays.gray300:"";return{name:l.TransparentColor.Transparent,value:l.TransparentColor.Transparent,background:"linear-gradient(to bottom right, "+t+" calc(50% - 1px), "+o+", "+t+" calc(50% + 1px))"}},n.generateColors=function(e){var t=[],o=n.props.appTheme&&n.props.appTheme.colors||{};return t=g.map(function(e){return{name:e,value:o[e],background:o[e]}}),e&&t.push(n.getTransparentColor()),t},n.generateRegularColor=function(){var e=n.props.appTheme&&n.props.appTheme.colors||{};return[{name:"dark",value:e.dark,background:e.dark},{name:"light",value:e.light,background:e.light}]},n.getNavStyle=function(){return[{label:n.nls("default"),value:l.NavStyle.Default},{label:n.nls("tabs"),value:l.NavStyle.Tabs},{label:n.nls("pills"),value:l.NavStyle.Pills}]},n.getSelectedViews=function(){var e=n.props,t=e.config.data,o=t.section,i=t.views,r=void 0===i?a.Immutable([]):i,s=t.type,u=e.appConfig;if(s!==l.ViewType.Auto&&r){var p=c.getSectionViews(o,u),f=r.filter(function(e){return!!(p.indexOf(e)>-1)});return a.Immutable(f)}return a.Immutable([])},n.renderSelectText=function(e){var t=e?e.length:0;return n.nls("viewsSelected",{viewNumber:t})},n.state={sections:[],views:[]},n}return o(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.appConfig,n=e.id,o=e.sizeMode,i=this.getSections(t,n,o);this.setState({sections:i});var r=this.props.config.data.section;if(i.indexOf(r)<0)r=i[0],this.onDataSectionChange(r),this.setState({views:[]});else{var a=this.getViews(r);this.setState({views:a})}},t.prototype.componentDidUpdate=function(e,t){var n=this.props,o=n.appConfig,i=n.id,r=n.sizeMode,s=this.getSections(o,i,r),l=t.sections,u=this.props.config.data.section;if(a.lodash.isDeepEqual(s,l)){if(u!==e.config.data.section){c=this.getViews(u);this.setState({views:c}),this.onDataInChange("views",[])}}else if(this.setState({sections:s}),s.indexOf(u)<0)u=s[0],this.onDataSectionChange(u),this.setState({views:[]});else if(u!==e.config.data.section){var c=this.getViews(u);this.setState({views:c}),this.onDataInChange("views",[])}},t.prototype.render=function(){var e=this,t=this.props,n=t.config,o=n.data,i=o.section,r=o.type,g=n.display,h=g.vertical,d=g.style,v=g.color,w=g.activeColor,y=g.textColor,m=t.appConfig,C=this.state.sections;return a.jsx("div",{className:"widget-setting-navigator jimu-widget-setting",css:this.getStyle()},a.jsx(s.SettingSection,null,a.jsx(s.SettingRow,{flow:"wrap",label:this.nls("linkTo")},a.jsx(u.Input,{type:"select",value:i,onChange:function(t){return e.onSectionChange(t.target.value)}},C.map(function(e,t){return a.jsx("option",{key:t,value:e},c.getSectionLabel(e,m))})))),a.jsx(s.SettingSection,null,a.jsx(s.SettingRow,{label:this.nls("views")}),a.jsx(s.SettingRow,null,a.jsx(u.Input,{id:"view-type-auto",style:{cursor:"pointer"},name:"view-type",onChange:function(t){return e.onViewTypeChange(l.ViewType.Auto)},type:"radio",checked:r===l.ViewType.Auto}),a.jsx(u.Label,{style:{cursor:"pointer"},for:"view-type-auto",className:"ml-1"},this.nls("auto"))),a.jsx(s.SettingRow,null,a.jsx(u.Input,{id:"view-type-custom",style:{cursor:"pointer"},name:"view-type",onChange:function(t){return e.onViewTypeChange(l.ViewType.Custom)},type:"radio",checked:r===l.ViewType.Custom}),a.jsx(u.Label,{style:{cursor:"pointer"},for:"view-type-custom",className:"ml-1"},this.nls("custom"))),r===l.ViewType.Custom&&a.jsx(s.SettingRow,{flow:"wrap"},a.jsx(u.MultiSelect,{values:this.getSelectedViews(),items:this.getViewSelectItems(),onClickItem:this.onViewsChange,showValues:this.renderSelectText}))),a.jsx(s.SettingSection,null,a.jsx(s.SettingRow,{flow:"no-wrap",label:this.nls("direction")},a.jsx(u.ButtonGroup,null,a.jsx(u.Button,{outline:!0,title:this.nls("right"),color:"secondary",icon:!0,size:"sm",active:!h,onClick:function(){return e.onDisplayChange("vertical",!1)}},a.jsx(u.Icon,{icon:p})),a.jsx(u.Button,{outline:!0,title:this.nls("down"),color:"secondary",icon:!0,size:"sm",active:h,onClick:function(){return e.onDisplayChange("vertical",!0)}},a.jsx(u.Icon,{icon:f}))))),a.jsx(s.SettingSection,{title:this.nls("style")},this.getNavStyle().map(function(t,n){return a.jsx(s.SettingRow,{key:n},a.jsx(u.Input,{id:"nav-style-type"+n,style:{cursor:"pointer"},name:"style-type",onChange:function(n){return e.onRadioChange(n,"style",t.value)},type:"radio",checked:d===t.value}),a.jsx(u.Label,{style:{cursor:"pointer"},for:"nav-style-type"+n,className:"ml-1"},t.label))}),a.jsx(s.SettingRow,{label:this.nls("background"),flow:"wrap"},a.jsx(s.SingleColorChooser,{color:v,colors:this.generateColors(!0),onChange:this.onBackgroundChange})),a.jsx(s.SettingRow,{label:this.nls("select"),flow:"wrap"},a.jsx(s.SingleColorChooser,{color:w,colors:this.generateColors(),onChange:function(t){return e.onDisplayChange("activeColor",t)}})),v===l.TransparentColor.Transparent&&a.jsx(s.SettingRow,{label:this.nls("regular"),flow:"wrap"},a.jsx(s.SingleColorChooser,{color:y,colors:this.generateRegularColor(),onChange:function(t){return e.onDisplayChange("textColor",t)}}))))},t.mapExtraStateProps=function(e){return{appConfig:e&&e.appStateInBuilder&&e.appStateInBuilder.appConfig,appTheme:e&&e.appStateInBuilder&&e.appStateInBuilder.theme,sizeMode:e&&e.appStateInBuilder&&e.appStateInBuilder.browserSizeMode}},t}(s.BaseWidgetSetting);t.default=h}})});
//# sourceMappingURL=setting.js.map