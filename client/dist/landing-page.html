<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
		<title>ArcGIS Experience Builder Beta</title>
		<link rel="shortcut icon" href="site/assets/exb.ico">
		<script src="./jimu-core/request.umd.min.js"></script>
		<script src="./jimu-core/auth.umd.min.js"></script>
	</head>
	<style>
		html {
			font-family: sans-serif;
			line-height: 1.15;
			-webkit-text-size-adjust: 100%;
			-webkit-tap-highlight-color: rgba(0, 0, 0, 0);
		}

		body {
			padding: 0;
			margin: 0;
			position: absolute;
			width: 100%;
			height: 100%;
			font-weight: 400;
			font-style: normal;
		}

		hr {
			box-sizing: content-box;
			height: 0;
			overflow: visible;
		}

		h1, h2, h3, h4, h5, h6 {
			font-weight: 400;
			-webkit-font-smoothing: antialiased;
		}

		#landing-page{
			width: 100%;
			height: 100%;
			position: relative;

			display: flex;
			align-items: center;
		}
		#create-app{
			position: absolute;
			display: block;
			width: 235px;
			height: 55px;
			left: calc(50% - 117px);
    	top: 438px;
			cursor: pointer;
		}

		.exb-main-bg {
			background-image: url(./site/assets/landing-page.jpg);
			background-position: center;
			background-repeat: no-repeat;
			background-size: cover;
		}

		.exb-main-content {
			margin-top: 14vh;
			width: 100%;
		}

		.text-center {
			text-align: center;
		}

		.intro-transition {
			animation: fadeinAndUp .8s ease;
		}

		.intro-transition2 {
			animation: fadeinAndUp 1s ease;
		}

		@keyframes fadeinAndUp {
			0% {
				transform: translate(0, 40px);
				opacity: 0;
			}
			100% {
				transform: translate(0, 0);
				opacity: 1;
			}
		}

		.exb-logo {
			height: 90px;
			width: 90px;
		}

		.banner-title {
			color: #F4F7FF;
			font-size: 65px;
			font-family: "Avenir LT W05_35 Light",Arial,Helvetica,sans-serif;
			letter-spacing: 1.35px;
			text-align: center;
			margin-top: 16px;
			margin-bottom: 10px;
			display: flex;
			flex-wrap: wrap;
			justify-content: center;
		}

		.banner-title h1 {
			margin: 8px;
			font-size: 65px;
		}

		.exb-line-break {
			margin: 0 auto;
			margin-bottom: 28px;
			margin-top: 15px;
			width: 60px;
			border-top: 3px solid rgba(255, 255, 255, .7);
		}

		.exb-heading-description {
			color: #F4F7FF;
			font-size: 18px;
			line-height: 1.5rem;
			padding: 0 28%;
			font-family: "Avenir LT W05_35 Light", Arial,Helvetica,sans-serif;
			margin-bottom: 35px;
		}

		.exb-learn-more-link {
			color: #F4F7FF;
			font-family: "Avenir LT W05_35 Light", Arial,Helvetica,sans-serif;
			text-align: center;
			cursor: pointer;
			text-decoration: none;
		}

    .exb-learn-more-link:hover {
			text-decoration: underline
		}

		.exb-sign-btn {
			padding: 20px 72px;
			font-size: 17px;
			font-family: "Avenir LT W05_35 Light", Arial,Helvetica,sans-serif;
			border-radius: 0;
			background: #007F94;
			color: #F4F7FF;
			transition: all .3s linear;
			text-decoration: none;
		}

		.exb-sign-btn:hover {
			background: #00AABB;
		}

		.exb-header-barrier {
			height: 56px;
			animation: fadein 1s ease;
		}

		.exb-header-wrap {
			height: 100%;
			background: #fff;
			box-shadow: 0 1px 0 0 #e0e0e0;
			position: relative;
			z-index: 101;
		}

		.exb-header {
			width: 1440px;
			max-width: 96vw;
			margin: 0 auto;
			height: 100%;
		}

		.exb-header * {
			box-sizing: border-box;
		}

		.exb-header-menus-list {
			list-style-type: none;
			margin-top: 0;
			margin-bottom: 0;
			padding-right: 0;
			padding-left: 0;
			display: flex;
			width: 390px;
		}

		.exb-header-menus-item {
			margin: 0;
			flex-grow: 1;
			position: relative;
		}

		.exb-header-menus-link {
			text-align: left;
			padding: 18px 24px;
			width: 100%;
			display: flex;
			cursor: pointer;
			white-space: nowrap;
			color: #595959;
			font-size: 16px;
			line-height: 20px;
			text-decoration: none;
		}

		.exb-header-menus-link:hover {
			box-shadow: inset 0 -3px 0 0 rgba(0,121,193,.5);
			color: #000;
			fill: currentColor
		}

		.exb-footer {
			position: absolute;
			width: 100%;
			height: 56px;
			background: #ffffff;
			text-align: center;
			color: #045E6C;
			bottom: 0;
			animation: fadein 1s ease;
			line-height: 1.5;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.exb-footer-span {
			color: #045E6C;
			font-size: 13px;
		}

		.exb-footer-text {
			color: #045E6C;
			font-size: 13px;
			text-decoration: none;
		}

		.exb-footer-text:hover {
			text-decoration: underline;
		}

		@keyframes fadein {
			0% {
				opacity: 0;
			}
			20% {
				opacity: .30;
			}
			100% {
				opacity: 1;
			}
		}

		.exb-header-menus-submenu {
			width: 420px;
			left: 0;
			padding: 15px 35px 35px;
			box-shadow: inset 0 0 0 1px #e0e0e0;
			top: 100%;
			position: absolute;
			transition: opacity .25s ease-in-out;
			background-color: #f8f8f8;
			display: none;
		}

		.exb-header-menus-sublist {
			list-style-type: none;
			margin-top: 0;
			margin-bottom: 0;
			padding-right: 0;
			padding-left: 0;
			font-size: 0.9375rem;
			line-height: 1.5;
		}

		.exb-header-menus-subitem {
			margin: 0;
		}

		.exb-header-menus-sublink{
			padding-right: 30px;
			background-image: linear-gradient(90deg,#0079c1 50%,#e0e0e0 0);
			background-position: 100% 100%;
			background-repeat: no-repeat;
			background-size: 200% 1px;
			color: #595959;
			cursor: pointer;
			display: block;
			font-size: 15px;
			line-height: 20px;
			position: relative;
			transition: background-position .25s;
			padding-top: 15px;
			padding-bottom: 15px;
			text-decoration: none;
		}

		.exb-header-menus-sublink:hover{
			background-position-x: 0;
			color: #000;
			text-decoration: none;
		}

		.exb-header-menus-sublink:after{
			right: 20px;
			opacity: 0;
			position: absolute;
			width: 16px;
			height: 16px;
			transition: opacity .25s,transform .25s;
			content: url("data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg' fill='%230079c1'%3E%3Cpath d='M3 6.982h9.452L9.948 4.48l.707-.707L14.384 7.5l-3.729 3.729-.707-.707 2.54-2.54H3z'/%3E%3C/svg%3E");
			top: calc(50% - 16px / 2)
		}

		.exb-header-menus-sublink:hover:after{
			opacity: 1;
			transform: translateX(10px);
		}

		.exb-header-canvas {
			background-color: rgba(0,0,0,.5);
			opacity: 0;
			transition: opacity .25s ease-in-out;
			border-style: none;
			content: "";
			bottom: 0;
			left: 0;
			right: 0;
			padding: 0;
			position: fixed;
			width: 100%;
			height: 100%;
			-webkit-tap-highlight-color: transparent;
			transition: opacity .25s ease-in-out,visibility 0ms .25s;
			z-index: -1;
			top: 56px;
		}

	</style>
	<body>
		<div id="landing-page">
			<!-- <a id="create-app" href="./builder/page/template/"></a> -->
			<div style="overflow: auto;position: relative;width: 100%;height: 100%;">
				<div class="exb-header-barrier">
					<div class="exb-header-wrap">
					  <div class="exb-header">
							<div class="exb-header-menus-menu">
								<ul class="exb-header-menus-list">
									<li class="exb-header-menus-item">
										<a class="exb-header-menus-link" id="exb-header-menus-link-desktop" href="javascript:;" style="display: flex">
											<span>ArcGIS Experience Builder</span>
											<span style="font-size: 14px;color: #999;margin-left: 9px;margin-top: 1px;">BETA</span>
											<img style="display: block;margin-left: 5px;margin-top: -2px;width: 20px;height: 20px;" src='./site/assets/down.png'>
										</a>
										<div class="exb-header-menus-submenu" id='exb-submenu'>
											<ul class="exb-header-menus-sublist">
												<li class="exb-header-menus-subitem">
													<a class="exb-header-menus-sublink" href="https://www.esri.com/software/arcgis/arcgisonline">ArcGIS Online</a>
												</li>
												<li class="exb-header-menus-subitem">
													<a class="exb-header-menus-sublink" href="https://www.esri.com/arcgis/products/arcgis-pro/Overview">ArcGIS Pro</a>
												</li>
												<li class="exb-header-menus-subitem">
													<a class="exb-header-menus-sublink" href="https://www.esri.com/arcgis/products/arcgis-enterprise/Overview">ArcGIS Enterprise</a>
												</li>
												<li class="exb-header-menus-subitem">
													<a class="exb-header-menus-sublink" href="https://developers.arcgis.com/en/">ArcGIS for Developers</a>
												</li>
												<li class="exb-header-menus-subitem">
													<a class="exb-header-menus-sublink" href="http://links.esri.com/arcgis-solutions/">ArcGIS Solutions</a>
												</li>
												<li class="exb-header-menus-subitem">
													<a class="exb-header-menus-sublink" href="http://marketplace.arcgis.com/">ArcGIS Marketplace</a>
												</li>
											</ul>
										</div>
									</li>
									<li class="exb-header-menus-item">
										<a class="exb-header-menus-link" href="https://www.esri.com/en-us/arcgis/products/arcgis-experience-builder/overview">
											<span>Overview</span>
										</a>
									</li>
									<li class="exb-header-menus-item">
										<a class="exb-header-menus-link" href="https://community.esri.com/community/arcgis-experience-builder">
											<span>Help</span>
										</a>
									</li>
								</ul>
							</div>
						</div>
				  </div>
			  </div>
				<div class="exb-main-bg" style="position: absolute;width: 100%;height: calc(100% - 56px);min-height: 800px;">
					<button class="exb-header-canvas" id="exb-header-canvas"></button>
					<div class="exb-main-content text-center">
						<div class="intro-transition" style="display: none" id="exb-logo">
							<img class="exb-logo" src="./site/assets/exb-logo.png">
						</div>
						<div class="intro-transition2" style="display: none" id="exb-describe">
							<div class="banner-title"><h1>ArcGIS</h1><h1>Experience</h1><h1 style="display: block;position: relative;">Builder<span style="width: 60px;
							  position: absolute;top: 0;right: -62px;display: block;font-size: 20px;font-weight: 900;">BETA</span></h1></div>
							<hr class="exb-line-break">
							<p class="exb-heading-description">Create web apps and pages visually with drag-and-drop. Choose the tools you need to interact with your 2D and 3D data. Build interactive, mobile first experiences for your audiences.</p>
							<a class="exb-learn-more-link" href="https://www.esri.com/en-us/arcgis/products/arcgis-experience-builder/overview">Learn more about ArcGIS Experience Builder Beta</a>
							<img src="./site/assets/arrow.svg">
							<div style="margin-top: 68px;">
								<a href="javascript:void(0)" class="exb-sign-btn" id="to-signin">Sign In</a>
							</div>
						</div>
					</div>
					<div style="position: absolute;width: 100%;height: 56px;background: #ffffff;bottom: 0;"><div class='exb-footer'>
							<span>
								<a href="https://trust.arcgis.com" class="exb-footer-text" target="_blank">Trust Center</a>
								<span class="exb-footer-span">&nbsp;&nbsp;|&nbsp;&nbsp;</span>
								<a href="https://www.esri.com/en-us/legal/overview" class="exb-footer-text" target="_blank">Legal</a>
								<span class="exb-footer-text">&nbsp;&nbsp;|&nbsp;&nbsp;</span>
								<a href="http://www.esri.com/about-esri/contact" class="exb-footer-text" target="_blank">Contact Esri</a>
							</span>
					</div></div>
				</div>
		  </div>
		</div>
	</body>

	<script>
		var MOUNT_PATH = '/';
		var hostEnv = 'prod';

		// for load AvenirNext-Regular font-style
		if (typeof FontFace !== 'undefined') {
			var fontFace = new FontFace("Avenir LT W05_35 Light", "url(./site/assets/new-font.woff2) format('woff2')", {}); 
		  fontFace.load().then(function (loadedFace) {
				document.fonts.add(loadedFace);
				document.body.style.fontFamily = "Avenir LT W05_35 Light"; 
		  });
		}

		function showExbContent() {
			document.getElementById("exb-logo").style.display="block";
			document.getElementById("exb-describe").style.display="block";
		}

		var imageObject = new Image();
		imageObject.src="./site/assets/landing-page.jpg";  
		
		imageObject.onload = function() {  
			showExbContent();
		}

		imageObject.onerror = function() {
			showExbContent();
		}

		var oauth2Info = {};
		document.getElementById('to-signin').addEventListener('click', function (event) {
			event.preventDefault();
			if(!oauth2Info.portal){
				console.error('no oauth info.');
				return;
			}
			arcgisRest.UserSession.beginOAuth2(oauth2Info);
		});

		function getClientId(){
			let url = `${window.location.protocol}//${window.location.host}${MOUNT_PATH}builder/setting.json`;
			return window.fetch(url).then(res => res.json()).then(setting => {
				let info = setting.env[hostEnv];
				oauth2Info.portal = info.portalUrl + '/sharing/rest/';
				oauth2Info.clientId = info.clientId;
				oauth2Info.redirectUri = `${window.location.origin}/jimu-core/oauth-callback.html?clientID=${info.clientId}&portal=${oauth2Info.portal}&fromUrl=${encodeURIComponent('/')}`;
				oauth2Info.popup = false;

				oauth2Info.params = {
					showSignupOption: true,
					// optionally specify type, defaults to ‘publicaccount’ (see below from Mehul)
					signupType: 'esri'
					// any other params will be passed to the authorize endpoint, but will be ignored if not supported
				};

			});
		}

		function controlSubMenuList(isShowList) {
			if (isShowList) {
				document.getElementById('exb-submenu').style.display = 'block';
				document.getElementById('exb-header-canvas').style.opacity = 1;
				document.getElementById('exb-header-canvas').style.zIndex = 1;
			} else {
				document.getElementById('exb-submenu').style.display = 'none';
				document.getElementById('exb-header-canvas').style.opacity = 0;
				setTimeout(() => {
					document.getElementById('exb-header-canvas').style.zIndex = -1;
				}, 200);
			}
		}

		document.getElementById('exb-header-menus-link-desktop').addEventListener('click', function (event) {
			event.preventDefault();
			event.stopPropagation();
			if (document.getElementById('exb-submenu').style.display==='none' || document.getElementById('exb-submenu').style.display==='') {
				controlSubMenuList(true);
			} else {
				controlSubMenuList(false);
			}
		});

		document.getElementById('exb-submenu').addEventListener('click', function (event) {
			event.stopPropagation();
		});

		document.onclick = function() {
			controlSubMenuList(false);
		}

		getClientId();
	</script>
</html>